"use strict";
var plane_ts;
(function (plane_ts) {
    //
    function modePointRadius(mode) {
        return (mode == plane_ts.Mode.none ? 1 : 2) * plane_ts.Point.radius;
    }
    plane_ts.modePointRadius = modePointRadius;
    function modeLineWidth(mode) {
        return (mode == plane_ts.Mode.none ? plane_ts.defaultLineWidth : plane_ts.OverLineWidth);
    }
    class Canvas {
        view;
        canvas;
        ctx;
        constructor(view, canvas) {
            this.view = view;
            this.canvas = canvas;
            this.ctx = canvas.getContext("2d");
            plane_ts.assert(this.ctx != null);
        }
        getAttributes(shape) {
            let color;
            let line_width;
            if (shape != undefined) {
                color = shape.modeColor();
                line_width = shape.modeLineWidth();
            }
            else {
                color = plane_ts.fgColor;
                line_width = plane_ts.defaultLineWidth;
            }
            return [color, line_width];
        }
        clear() {
            const rc = this.canvas.getBoundingClientRect();
            this.ctx.fillStyle = plane_ts.bgColor;
            this.ctx.fillRect(0, 0, rc.width, rc.height);
        }
        drawLineRaw(p1, p2, color, line_width) {
            const pix1 = this.view.toPixPosition(p1);
            const pix2 = this.view.toPixPosition(p2);
            const ctx = this.ctx;
            ctx.beginPath();
            ctx.moveTo(pix1.x, pix1.y);
            ctx.lineTo(pix2.x, pix2.y);
            ctx.strokeStyle = color;
            ctx.lineWidth = line_width;
            ctx.stroke();
        }
        drawLine(shape, p1, p2) {
            const [color, line_width] = this.getAttributes(shape);
            this.drawLineRaw(p1, p2, color, line_width);
        }
        drawLineWith2Points(line, pointB) {
            const l = plane_ts.View.current.max.distance(plane_ts.View.current.min);
            const p_plus = line.pointA.position.add(line.e.mul(l));
            const p_minus = line.pointA.position.add(line.e.mul(-l));
            switch (line.lineKind) {
                case plane_ts.LineKind.line_segment:
                    this.drawLine(line, line.pointA.position, pointB.position);
                    break;
                case plane_ts.LineKind.ray:
                    this.drawLine(line, line.pointA.position, p_plus);
                    break;
                case plane_ts.LineKind.ray_reverse:
                    this.drawLine(line, line.pointA.position, p_minus);
                    break;
                case plane_ts.LineKind.line:
                    this.drawLine(line, p_minus, p_plus);
                    break;
            }
        }
        drawPolygonRaw(positions, color, line_width, fill = false) {
            const ctx = this.ctx;
            ctx.beginPath();
            if (fill) {
                ctx.globalAlpha = 0.5;
                ctx.fillStyle = color;
            }
            else {
                ctx.strokeStyle = color;
                ctx.lineWidth = line_width;
            }
            for (const [idx, position] of positions.entries()) {
                const pix = this.view.toPixPosition(position);
                if (idx == 0) {
                    ctx.moveTo(pix.x, pix.y);
                }
                else {
                    ctx.lineTo(pix.x, pix.y);
                }
            }
            ctx.closePath();
            if (fill) {
                ctx.fill();
                ctx.globalAlpha = 1;
            }
            else {
                ctx.stroke();
            }
        }
        drawPolygon(shape, positions) {
            const [color, line_width] = this.getAttributes(shape);
            this.drawPolygonRaw(positions, color, line_width);
        }
        drawPartialPolygon(points, mode) {
            const color = plane_ts.getModeColor(mode);
            const radius = modePointRadius(mode);
            const positions = points.map(x => x.position);
            positions.forEach(x => plane_ts.View.current.canvas.drawCircleRaw(x, radius, color));
            const line_width = modeLineWidth(mode);
            plane_ts.View.current.canvas.drawPolygonRaw(positions, color, line_width);
        }
        drawLinesRaw(lines, color, line_width) {
            const ctx = this.ctx;
            for (const [p1, p2] of lines) {
                const pix1 = this.view.toPixPosition(p1);
                const pix2 = this.view.toPixPosition(p2);
                ctx.beginPath();
                ctx.moveTo(pix1.x, pix1.y);
                ctx.lineTo(pix2.x, pix2.y);
                ctx.strokeStyle = color;
                ctx.lineWidth = line_width;
                ctx.stroke();
            }
        }
        drawLines(shape, lines) {
            const [color, line_width] = this.getAttributes(shape);
            this.drawLinesRaw(lines, color, line_width);
        }
        drawArcRaw(center, radius, start_angle, end_angle, color, line_width) {
            const ctx = this.ctx;
            const pix = this.view.toPixPosition(center);
            // flip Y
            start_angle = 2 * Math.PI - start_angle;
            end_angle = 2 * Math.PI - end_angle;
            const radius_pix = this.view.toXPixScale(radius);
            ctx.beginPath();
            ctx.arc(pix.x, pix.y, radius_pix, start_angle, end_angle, true);
            if (line_width == undefined) {
                ctx.fillStyle = color;
                ctx.fill();
            }
            else {
                ctx.lineWidth = line_width;
                ctx.strokeStyle = color;
                ctx.stroke();
            }
        }
        drawCircleRaw(center, radius, color, line_width) {
            this.drawArcRaw(center, radius, 0, 2 * Math.PI, color, line_width);
        }
        drawArc(shape, center, radius, start_angle, end_angle) {
            const [color, line_width] = this.getAttributes(shape);
            this.drawArcRaw(center, radius, start_angle, end_angle, color, line_width);
        }
        drawCircle(shape, center, radius) {
            this.drawArc(shape, center, radius, 0, 2 * Math.PI);
        }
        drawEllipse(center, radius_x, radius_y, rotation, color, line_width) {
            const center_pix = this.view.toPixPosition(center);
            const radius_x_pix = this.view.toXPixScale(radius_x);
            const radius_y_pix = this.view.toXPixScale(radius_y);
            const ctx = this.ctx;
            ctx.beginPath();
            ctx.ellipse(center_pix.x, center_pix.y, radius_x_pix, radius_y_pix, rotation, 0, 2 * Math.PI);
            ctx.lineWidth = line_width;
            ctx.strokeStyle = color;
            ctx.stroke();
        }
        drawText(position, text, color) {
            const pos_pix = this.view.toPixPosition(position);
            const ctx = this.ctx;
            ctx.font = "16px serif";
            ctx.lineWidth = 1;
            ctx.strokeStyle = color;
            ctx.strokeText(text, pos_pix.x, pos_pix.y);
        }
        drawRect(shape, p1, p2) {
            const [color, line_width] = this.getAttributes(shape);
            const pix1 = this.view.toPixPosition(p1);
            const pix2 = this.view.toPixPosition(p2);
            const x = Math.min(pix1.x, pix2.x);
            const y = Math.min(pix1.y, pix2.y);
            const w = Math.abs(pix1.x - pix2.x);
            const h = Math.abs(pix1.y - pix2.y);
            const ctx = this.ctx;
            ctx.beginPath();
            ctx.strokeStyle = color;
            ctx.lineWidth = line_width;
            ctx.rect(x, y, w, h);
            ctx.stroke();
        }
    }
    plane_ts.Canvas = Canvas;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    plane_ts.idMap = new Map();
    class Widget {
        static refMap = new Map();
        static isLoading = false;
        // static 
        static maxId = 0;
        static processed;
        id;
        order = NaN;
        constructor(obj) {
            if (obj.id != undefined) {
                this.id = obj.id;
                Widget.maxId = Math.max(Widget.maxId, this.id);
                Widget.refMap.set(obj.id, this);
            }
            else {
                this.id = ++Widget.maxId;
            }
            plane_ts.assert(this.id <= Widget.maxId && !plane_ts.idMap.has(this.id));
            plane_ts.idMap.set(this.id, this);
        }
        getProperties() {
            return ["id", "order"];
        }
        makeObj() {
            return {
                id: this.id,
                typeName: this.constructor.name
            };
        }
        toObj() {
            if (Widget.processed.has(this.id)) {
                return { ref: this.id };
            }
            Widget.processed.add(this.id);
            return this.makeObj();
        }
    }
    plane_ts.Widget = Widget;
    function parseObject(obj, parse_other_object) {
        if (obj == undefined || obj == null || typeof obj != "object") {
            return obj;
        }
        // if(obj instanceof Widget || obj instanceof Vec2){
        //     return obj;
        // }
        if (Array.isArray(obj)) {
            let v = obj.map(x => parseObject(x, parse_other_object));
            return v;
        }
        if (obj.ref != undefined) {
            let o = Widget.refMap.get(obj.ref);
            if (o == undefined) {
                throw new plane_ts.MyError("no-ref");
            }
            return o;
        }
        if (obj.typeName == plane_ts.Vec2.name) {
            return new plane_ts.Vec2(obj.x, obj.y);
        }
        for (let [name, val] of Object.entries(obj)) {
            if (name == "bound" && val.ref != undefined && Widget.refMap.get(val.ref) == undefined) {
                plane_ts.msg(`no bound:${obj.id}`);
                obj.bound = undefined;
                continue;
            }
            obj[name] = parseObject(val, parse_other_object);
        }
        switch (obj.typeName) {
            case plane_ts.TextBlock.name:
                return new plane_ts.TextBlock(obj);
            // case Speech.name:
            //     return new Speech(obj);
            // case Simulation.name:
            //     return new Simulation(obj);
            // case ViewPoint.name:
            //     return new ViewPoint(obj);
            // case PackageInfo.name:
            //     return obj;
            // case Variable.name:
            //     return new Variable(obj);
            case plane_ts.Point.name:
                return new plane_ts.Point(obj);
            case plane_ts.LineByPoints.name:
                return new plane_ts.LineByPoints(obj);
            case plane_ts.Polygon.name:
                return new plane_ts.Polygon(obj);
            // case Rect.name:
            //     return new Rect(obj);
            case plane_ts.CircleByPoint.name:
                return new plane_ts.CircleByPoint(obj);
            case plane_ts.CircleByRadius.name:
                return new plane_ts.CircleByRadius(obj);
            case plane_ts.Ellipse.name:
                return new plane_ts.Ellipse(obj);
            case plane_ts.DimensionLine.name:
                return new plane_ts.DimensionLine(obj);
            case plane_ts.LengthSymbol.name:
                return new plane_ts.LengthSymbol(obj);
            // case Triangle.name:
            //     return new Triangle(obj);
            case plane_ts.Midpoint.name:
                return new plane_ts.Midpoint(obj);
            case plane_ts.FootOfPerpendicular.name:
                return new plane_ts.FootOfPerpendicular(obj);
            case plane_ts.PerpendicularLine.name:
                return new plane_ts.PerpendicularLine(obj);
            case plane_ts.ParallelLine.name:
                return new plane_ts.ParallelLine(obj);
            case plane_ts.LineLineIntersection.name:
                return new plane_ts.LineLineIntersection(obj);
            case plane_ts.ArcArcIntersection.name:
                return new plane_ts.ArcArcIntersection(obj);
            case plane_ts.LineArcIntersection.name:
                return new plane_ts.LineArcIntersection(obj);
            case plane_ts.CirclePointTangent.name:
                return new plane_ts.CirclePointTangent(obj);
            case plane_ts.CircleCircleTangent.name:
                return new plane_ts.CircleCircleTangent(obj);
            case plane_ts.ArcByPoint.name:
                return new plane_ts.ArcByPoint(obj);
            case plane_ts.ArcByRadius.name:
            case plane_ts.ArcByLengthSymbol.name:
                return new plane_ts.ArcByLengthSymbol(obj);
            case plane_ts.ArcByCircle.name:
                return new plane_ts.ArcByCircle(obj);
            case plane_ts.Triangle.name:
                return new plane_ts.Triangle(obj);
            case plane_ts.Angle.name:
                return new plane_ts.Angle(obj);
            case plane_ts.AngleBisector.name:
                return new plane_ts.AngleBisector(obj);
            // case Image.name:
            //     return new Image(obj);
            // case WidgetSelection.name:
            // case "ShapeSelection":
            //         return new WidgetSelection(obj);
            // case TextSelection.name:
            //     return new TextSelection(obj);
            // case FuncLine.name:
            //     return new FuncLine(obj);
            //     case Surface.name:
            //         return new Surface(obj);
            case plane_ts.Statement.name:
                return new plane_ts.Statement(obj);
            case plane_ts.TriangleCongruence.name:
                return new plane_ts.TriangleCongruence(obj);
            case plane_ts.TriangleSimilarity.name:
                return new plane_ts.TriangleSimilarity(obj);
            case "EqualLength":
            case plane_ts.LengthEquality.name:
                return new plane_ts.LengthEquality(obj);
            case plane_ts.AngleEquality.name:
                return new plane_ts.AngleEquality(obj);
            case plane_ts.ParallelDetector.name:
                return new plane_ts.ParallelDetector(obj);
            case plane_ts.PropertyChange.name:
                return new plane_ts.PropertyChange(obj);
            case plane_ts.LengthEqualityConstraint.name:
                return new plane_ts.LengthEqualityConstraint(obj);
            case plane_ts.AngleEqualityConstraint.name:
                return new plane_ts.AngleEqualityConstraint(obj);
            case plane_ts.ParallelConstraint.name:
                return new plane_ts.ParallelConstraint(obj);
            case plane_ts.PerpendicularConstraint.name:
                return new plane_ts.PerpendicularConstraint(obj);
            case plane_ts.Motion.name:
                return new plane_ts.Motion(obj);
            case plane_ts.Quadrilateral.name:
                return new plane_ts.Quadrilateral(obj);
            case plane_ts.ParallelogramClassifier.name:
                return new plane_ts.ParallelogramClassifier(obj);
            case plane_ts.RhombusClassifier.name:
                return new plane_ts.RhombusClassifier(obj);
            default:
                if (parse_other_object != undefined) {
                    return parse_other_object(obj);
                }
                throw new plane_ts.MyError(`parse Object: unknown type:[${obj.typeName}]`);
        }
    }
    plane_ts.parseObject = parseObject;
    function saveJson(anchor) {
        const text = plane_ts.getOperationsText();
        const blob = new Blob([text], { type: 'application/json' });
        layout_ts.saveBlob(anchor, "movie", blob);
    }
    plane_ts.saveJson = saveJson;
    function handleFileSelect(ev) {
        ev.stopPropagation();
        ev.preventDefault();
        const files = ev.dataTransfer.files; // FileList object.
        for (let file of files) {
            plane_ts.msg(`drop name:${escape(file.name)} type:${file.type} size:${file.size} mtime:${file.lastModified.toLocaleString()} `);
            const reader = new FileReader();
            reader.onload = () => {
                const json = reader.result;
                const obj = JSON.parse(json);
                plane_ts.assert(false);
                loadData(obj);
                // viewEvent(obj);
            };
            reader.readAsText(file);
            // uploadFile(f);
        }
    }
    plane_ts.handleFileSelect = handleFileSelect;
    function loadData(obj) {
        plane_ts.Plane.one.clearPlane();
        Widget.maxId = -1;
        plane_ts.idMap = new Map();
        Widget.refMap = new Map();
        plane_ts.MathEntity.orderSet.clear();
        const view = plane_ts.View.current;
        for (let [name, val] of Object.entries(obj)) {
            if (name != "shapes") {
                view[name] = parseObject(val);
            }
        }
        view.shapes = [];
        const all_shapes = [];
        plane_ts.initRelations();
        for (const shape_obj of obj.shapes) {
            Widget.isLoading = true;
            const shape = parseObject(shape_obj);
            Widget.isLoading = false;
            view.shapes.push(shape);
            shape.setOrder();
            shape.setRelations();
            shape.getAllShapes(all_shapes);
        }
        const all_real_shapes = view.allRealShapes();
        all_real_shapes.filter(x => x.caption != undefined).forEach(x => x.caption.parent = x);
        all_real_shapes.forEach(x => x.updateCaption());
        view.shapes.filter(x => x instanceof plane_ts.TextBlock).forEach(x => x.updateTextPosition());
        plane_ts.Plane.one.shapes_block.clear();
        view.shapes.forEach(x => plane_ts.addToShapeHistory(x));
    }
    plane_ts.loadData = loadData;
    function handleDragOver(evt) {
        evt.stopPropagation();
        evt.preventDefault();
        evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
    }
    plane_ts.handleDragOver = handleDragOver;
})(plane_ts || (plane_ts = {}));
///<reference path="json.ts" />
const Reading = i18n_ts.Reading;
var plane_ts;
(function (plane_ts) {
    //
    plane_ts.fgColor = layout_ts.fgColor;
    plane_ts.bgColor = layout_ts.bgColor;
    plane_ts.dependColor = "blue";
    plane_ts.targetColor = "red";
    plane_ts.defaultLineWidth = 3;
    plane_ts.OverLineWidth = 5;
    let capturedShape;
    let Mode;
    (function (Mode) {
        Mode[Mode["none"] = 0] = "none";
        Mode[Mode["depend"] = 1] = "depend";
        Mode[Mode["depend1"] = 2] = "depend1";
        Mode[Mode["depend2"] = 3] = "depend2";
        Mode[Mode["target"] = 4] = "target";
        Mode[Mode["target1"] = 5] = "target1";
        Mode[Mode["target2"] = 6] = "target2";
    })(Mode = plane_ts.Mode || (plane_ts.Mode = {}));
    const modeColorMap = new Map([
        [Mode.none, plane_ts.fgColor],
        [Mode.depend, plane_ts.dependColor],
        [Mode.depend1, "Aqua"],
        [Mode.depend2, "lime"],
        [Mode.target, plane_ts.targetColor],
        [Mode.target1, "orange"],
        [Mode.target2, "magenta"],
    ]);
    function getModeColor(mode) {
        return modeColorMap.get(mode);
    }
    plane_ts.getModeColor = getModeColor;
    class MathEntity extends plane_ts.Widget {
        static orderSet = new Set();
        setRelationsCount = 0;
        visible = true;
        mode = Mode.none;
        isOver = false;
        mute = false;
        interval = 1;
        constructor(obj) {
            super(obj);
            if (obj.visible != undefined && !obj.visible) {
                this.visible = false;
            }
            if (obj.mute != undefined) {
                this.mute = obj.mute;
            }
            if (obj.interval != undefined) {
                this.interval = obj.interval;
            }
            if (plane_ts.View.current != undefined) {
                plane_ts.View.current.dirty = true;
            }
        }
        makeObj() {
            let obj = super.makeObj();
            if (this.mute) {
                obj.mute = true;
            }
            if (this.interval != 1) {
                obj.interval = this.interval;
            }
            if (!this.visible) {
                obj.visible = false;
            }
            return obj;
        }
        getProperties() {
            return super.getProperties().concat([
                "mute", "visible", "interval"
            ]);
        }
        textReading(text) {
            return new Reading(this, text, []);
        }
        highlight(on) {
            if (on) {
                this.setMode(Mode.target);
            }
            else {
                this.setMode(Mode.none);
            }
        }
        getAllShapes(shapes) {
            shapes.push(this);
        }
        allShapes() {
            const shapes = [];
            this.getAllShapes(shapes);
            return plane_ts.unique(shapes);
        }
        dependencies() {
            return [];
        }
        setOrder() {
            if (MathEntity.orderSet.has(this)) {
                plane_ts.assert(!isNaN(this.order));
                return;
            }
            for (const dep of this.dependencies()) {
                dep.setOrder();
            }
            plane_ts.assert(!MathEntity.orderSet.has(this));
            this.order = MathEntity.orderSet.size;
            MathEntity.orderSet.add(this);
        }
        setMode(mode) {
            this.mode = mode;
            plane_ts.View.current.dirty = true;
        }
        delete(deleted) {
            if (deleted.has(this.id)) {
                return;
            }
            deleted.add(this.id);
            for (let [name, val] of Object.entries(this)) {
                if (val instanceof MathEntity) {
                    val.delete(deleted);
                }
            }
        }
        async play(speech) {
        }
        getTextBlock() {
            if (this instanceof TextBlock) {
                return this;
            }
            else if (this instanceof Shape && this.caption != undefined) {
                return this.caption;
            }
            else {
                return undefined;
            }
        }
        hideTextBlock() {
            const text_block = this.getTextBlock();
            if (text_block != undefined) {
                text_block.div.dataset.display_backup = text_block.div.style.display;
                text_block.div.style.display = "none";
            }
        }
        restoreTextBlock() {
            const text_block = this.getTextBlock();
            if (text_block != undefined && text_block.div.dataset.display_backup != undefined) {
                text_block.div.style.display = text_block.div.dataset.display_backup;
            }
        }
        show() {
        }
        hide() {
        }
        setRelations() {
            this.setRelationsCount++;
        }
    }
    plane_ts.MathEntity = MathEntity;
    class TermRect {
        term;
        span;
        rect;
        constructor(term, span) {
            this.term = term;
            this.span = span;
            this.rect = span.getBoundingClientRect();
        }
    }
    plane_ts.TermRect = TermRect;
    class TextBlock extends MathEntity {
        parent;
        text;
        isTex;
        div;
        offset = new plane_ts.Vec2(0, 0);
        termRects = [];
        constructor(obj) {
            super(obj);
            this.parent = obj.parent;
            this.text = obj.text;
            this.isTex = obj.isTex;
            this.offset = obj.offset;
            this.div = document.createElement("div");
            if (this.getEquation() != undefined) {
                this.div.className = "selectable_tex";
                this.div.addEventListener("click", this.texClick.bind(this));
            }
            else {
                this.div.className = "tex_div";
            }
            this.div.style.fontSize = "x-large";
            this.setVisible(this.visible);
            plane_ts.View.current.board.parentElement.append(this.div);
            if (this.getEquation() == undefined) {
                plane_ts.setCaptionEvent(this);
            }
            this.updateTextPosition();
            plane_ts.textBlockEvent.setTextBlockEvent(this);
        }
        getEquation() {
            if (plane_ts.isEquationTextBlock(this.parent)) {
                return this.parent.equation;
            }
            return undefined;
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                text: this.text,
                isTex: this.isTex,
                offset: this.offset
            });
            return obj;
        }
        getProperties() {
            return super.getProperties().concat([
                "text", "isTex", "offset"
            ]);
        }
        getClickedTermRect(x, y) {
            this.termRects.forEach(x => x.span.style.backgroundColor = "transparent");
            const refvar_rects = this.termRects.filter(x => x.term instanceof plane_ts.RefVar);
            for (const term_rect of refvar_rects) {
                const rect = term_rect.rect;
                const span = term_rect.span;
                if (rect.left <= x && x < rect.right && rect.top <= y && y < rect.bottom) {
                    return term_rect;
                }
            }
            throw new plane_ts.MyError();
        }
        async texClick(ev) {
            ev.stopPropagation();
            if (plane_ts.Builder.tool instanceof plane_ts.ExprTransformBuilder) {
                const srcTermRect = this.getClickedTermRect(ev.clientX, ev.clientY);
                const dstTermRect = plane_ts.Builder.tool.getDstTermRect(this.termRects, srcTermRect);
                const dstTerm = dstTermRect.term;
                if (!plane_ts.View.isPlayBack) {
                    const path = dstTerm.getPath();
                    const operation = new plane_ts.ClickTerm(this.id, path.indexes);
                    plane_ts.View.current.addOperation(operation);
                }
                await plane_ts.Builder.tool.termClick(dstTerm, this);
            }
        }
        updateTextDiv() {
            let text = this.text;
            if (text == "" && this.parent instanceof Shape) {
                text = this.parent.name;
            }
            if (this.isTex) {
                if (parser_ts.isGreek(text)) {
                    text = `\\${text}`;
                }
                plane_ts.renderKatexSub(this.div, text);
                if (this.getEquation() != undefined) {
                    const terms = this.getEquation().allTerms();
                    const tex_spans = Array.from(this.div.getElementsByClassName("enclosing"));
                    this.termRects = [];
                    const id_offset = "tex-term-".length;
                    for (const span of tex_spans) {
                        const id = parseInt(span.id.substring(id_offset));
                        const term = terms.find(x => x.id == id);
                        plane_ts.assert(term != undefined);
                        this.termRects.push(new TermRect(term, span));
                    }
                }
            }
            else {
                this.div.innerText = text;
            }
        }
        setVisible(visible) {
            this.visible = visible;
            if (this.visible) {
                this.div.style.color = "";
                this.div.style.display = "";
            }
            else {
                if (plane_ts.Plane.one.editMode) {
                    this.div.style.color = "gray";
                }
                else {
                    this.div.style.display = "none";
                }
            }
        }
        show() {
            this.div.style.display = "";
        }
        hide() {
            this.div.style.display = "none";
        }
        setIsTex(is_tex) {
            this.isTex = is_tex;
            this.updateTextDiv();
        }
        setTextPosition(x, y) {
            this.div.style.left = `${plane_ts.View.current.board.offsetLeft + plane_ts.toXPix(x + this.offset.x)}px`;
            this.div.style.top = `${plane_ts.View.current.board.offsetTop + plane_ts.toYPix(y + this.offset.y)}px`;
        }
        updateTextPosition() {
            this.div.style.left = `${plane_ts.View.current.board.offsetLeft + plane_ts.toXPix(this.offset.x)}px`;
            this.div.style.top = `${plane_ts.View.current.board.offsetTop + plane_ts.toYPix(this.offset.y)}px`;
        }
        setRotation(degree) {
            this.div.style.transform = `rotate(${degree}deg)`;
        }
        getSize() {
            return [this.div.offsetWidth, this.div.offsetHeight];
        }
        captionPointerdown(event) {
            this.div.setPointerCapture(event.pointerId);
            capturedShape = this;
        }
        captionPointermove(event) {
            if (capturedShape != this) {
                return;
            }
            this.offset.x += plane_ts.fromXPixScale(event.movementX);
            this.offset.y -= plane_ts.fromYPixScale(event.movementY);
            this.div.style.left = `${this.div.offsetLeft + event.movementX}px`;
            this.div.style.top = `${this.div.offsetTop + event.movementY}px`;
        }
        captionPointerup(event) {
            this.div.releasePointerCapture(event.pointerId);
            capturedShape = undefined;
        }
        reading() {
            // msg(`empty reading:${this.constructor.name}`);
            return new Reading(this, "", []);
        }
        delete(deleted) {
            if (deleted.has(this.id)) {
                return;
            }
            super.delete(deleted);
            this.div.remove();
        }
    }
    plane_ts.TextBlock = TextBlock;
    class Shape extends MathEntity {
        name = "";
        color = plane_ts.fgColor;
        lineWidth = plane_ts.defaultLineWidth;
        caption;
        depends = [];
        constraints = [];
        constructor(obj) {
            super(obj);
            if (obj.name != undefined) {
                this.name = obj.name;
            }
            if (obj.color != undefined) {
                this.color = obj.color;
            }
            if (obj.lineWidth != undefined) {
                this.lineWidth = obj.lineWidth;
            }
            this.caption = obj.caption;
            if (this.caption == undefined && this.name != "") {
                this.caption = this.makeCaption(this);
            }
            if (this.caption != undefined) {
                this.caption.parent = this;
                this.caption.updateTextDiv();
            }
        }
        copy() {
            throw new plane_ts.MyError();
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                name: this.name
            });
            if (this.color != plane_ts.fgColor) {
                obj.color = this.color;
            }
            if (this.lineWidth != plane_ts.defaultLineWidth) {
                obj.lineWidth = this.lineWidth;
            }
            if (this.caption != undefined) {
                obj.caption = this.caption.makeObj();
            }
            if (this.depends.length != 0) {
                obj.depends = this.depends.map(x => x.id);
            }
            return obj;
        }
        makeCaption(parent) {
            const x = plane_ts.fromXPixScale(10);
            const y = plane_ts.fromYPixScale(20);
            return new TextBlock({ parent, text: "", isTex: false, offset: new plane_ts.Vec2(x, y) });
        }
        setName(name) {
            this.name = name;
            if (this.name == "") {
                if (this.caption != undefined) {
                    this.caption.delete(new Set());
                    this.caption = undefined;
                }
            }
            else {
                if (this.name != "" && this.caption == undefined) {
                    this.caption = this.makeCaption(this);
                }
                this.caption.updateTextDiv();
            }
            plane_ts.View.current.dirty = true;
        }
        getProperties() {
            return super.getProperties().concat([
                "name", "color", "lineWidth", "caption"
            ]);
        }
        isNear(position) {
            return false;
        }
        modeColor() {
            if (this.mode == Mode.none) {
                return this.color;
            }
            else {
                return getModeColor(this.mode);
            }
        }
        modeLineWidth() {
            return (this.isOver ? plane_ts.OverLineWidth : this.lineWidth);
        }
        calc() {
            this.constraints.forEach(x => x.applyConstraint(this));
        }
        updateCaption() {
        }
        shapePointerdown(position) {
        }
        shapePointermove(position, diff) {
        }
        shapePointerup(position) {
        }
        reading() {
            const name = (this.name != "" ? this.name : this.constructor.name);
            return new Reading(this, i18n_ts.token(name), []);
        }
        show() {
            if (this.caption != undefined) {
                this.caption.show();
            }
        }
        hide() {
            if (this.caption != undefined) {
                this.caption.hide();
            }
        }
        delete(deleted) {
            if (deleted.has(this.id)) {
                return;
            }
            super.delete(deleted);
            if (this.caption != undefined) {
                this.caption.delete(deleted);
            }
        }
        addConstraint(constraint) {
            if (!this.constraints.includes(constraint)) {
                this.constraints.push(constraint);
            }
        }
    }
    plane_ts.Shape = Shape;
    class Point extends Shape {
        static tempPoints = [];
        static radiusPix = 4;
        static radius;
        position;
        positionSave;
        bound;
        origin;
        static zero() {
            return Point.fromArgs(plane_ts.Vec2.zero());
        }
        static fromArgs(position) {
            return new Point({ position });
        }
        constructor(obj) {
            super(obj);
            this.position = obj.position;
            if (this.name != "" && this.caption == undefined) {
                this.caption = this.makeCaption(this);
            }
            if (obj.bound != undefined) {
                this.setBound(obj.bound);
            }
            else {
                this.setPosition(obj.position);
            }
            Point.tempPoints.push(this);
        }
        copy() {
            return Point.fromArgs(this.position.copy());
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                position: this.position
            });
            if (this.bound != undefined) {
                obj.bound = this.bound.toObj();
            }
            return obj;
        }
        setPosition(position) {
            this.position = position;
            this.updateCaption();
            plane_ts.View.current.changed.add(this);
            plane_ts.View.current.dirty = true;
        }
        getBounds() {
            const lines = plane_ts.getLinesByPoint(this);
            const circles = plane_ts.getCircleArcsByPoint(this);
            return lines.concat(circles).filter(x => x.order < this.order);
        }
        setBound(bound) {
            this.bound = bound;
            this.bound.adjustPosition(this, this.position);
            this.setRelations();
        }
        updateCaption() {
            if (this.caption != undefined) {
                this.caption.updateTextDiv();
                this.caption.setTextPosition(this.position.x, this.position.y);
            }
        }
        getProperties() {
            return super.getProperties().concat([
                "position"
            ]);
        }
        isNear(position) {
            return plane_ts.View.current.isNear(position.distance(this.position));
        }
        draw() {
            const color = this.modeColor();
            const radius = plane_ts.modePointRadius(this.mode);
            if (this.visible) {
                plane_ts.View.current.canvas.drawCircleRaw(this.position, radius, color);
            }
            else {
                plane_ts.View.current.canvas.drawCircleRaw(this.position, radius, color, plane_ts.defaultLineWidth);
            }
            if (this.isOver) {
                plane_ts.View.current.canvas.drawCircleRaw(this.position, 3 * Point.radius, "gray", plane_ts.defaultLineWidth);
            }
        }
        add(point) {
            return this.position.add(point.position);
        }
        sub(point) {
            return this.position.sub(point.position);
        }
        dot(point) {
            return this.position.dot(point.position);
        }
        distance(p) {
            if (p instanceof Point) {
                return this.position.distance(p.position);
            }
            else {
                return this.position.distance(p);
            }
        }
        shapePointerdown(position) {
            this.positionSave = this.position.copy();
        }
        shapePointermove(position, diff) {
            const bounds = this.getBounds();
            if (2 <= bounds.length) {
                return;
            }
            else if (bounds.length == 1) {
                const bound = bounds[0];
                if (bound instanceof AbstractLine) {
                    this.setPosition(plane_ts.calcFootOfPerpendicular(position, bound));
                }
                else if (bound instanceof CircleArc) {
                    bound.adjustPosition(this, position);
                }
                else {
                    throw new plane_ts.MyError();
                }
            }
            else {
                if (this.positionSave != undefined) {
                    this.setPosition(this.positionSave.add(diff));
                }
                else {
                    this.setPosition(position);
                }
            }
            this.calc();
        }
        shapePointerup(position) {
            this.positionSave = undefined;
        }
        reading() {
            if (this.bound instanceof AbstractLine) {
                return this.textReading(plane_ts.TT("Draw a point on the line."));
            }
            else if (this.bound instanceof Circle) {
                return this.textReading(plane_ts.TT("Draw a point on the circle."));
            }
            else if (this.bound instanceof Arc) {
                return this.textReading(plane_ts.TT("Draw a point on the arc."));
            }
            else {
                return this.textReading(plane_ts.TT("Draw a point."));
            }
        }
        setRelations() {
            super.setRelations();
            if (this.bound instanceof AbstractLine) {
                plane_ts.addPointOnLines(this, this.bound);
            }
            else if (this.bound instanceof CircleArc) {
                plane_ts.addPointOnCircleArcs(this, this.bound);
            }
            else if (this.bound != undefined) {
                throw new plane_ts.MyError();
            }
        }
    }
    plane_ts.Point = Point;
    let LineKind;
    (function (LineKind) {
        LineKind[LineKind["line"] = 0] = "line";
        LineKind[LineKind["ray"] = 1] = "ray";
        LineKind[LineKind["ray_reverse"] = 2] = "ray_reverse";
        LineKind[LineKind["line_segment"] = 3] = "line_segment";
    })(LineKind = plane_ts.LineKind || (plane_ts.LineKind = {}));
    class AbstractLine extends Shape {
        lineKind;
        pointA;
        e;
        constructor(obj) {
            super(obj);
            if (obj.lineKind == undefined) {
                throw new plane_ts.MyError("line kind is undefined.");
            }
            this.lineKind = obj.lineKind;
            this.pointA = obj.pointA;
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                lineKind: this.lineKind,
                pointA: this.pointA.toObj()
            });
            return obj;
        }
        dependencies() {
            return super.dependencies().concat([this.pointA]);
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.pointA);
        }
        getProperties() {
            return super.getProperties().concat([
                "lineKind"
            ]);
        }
        normal() {
            return this.e.rot90();
        }
        isNear(position) {
            const distance = plane_ts.distanceFromLine(this.normal(), this.pointA.position, position);
            return plane_ts.View.current.isNear(distance);
        }
        draw() {
            const l = plane_ts.View.current.max.distance(plane_ts.View.current.min);
            const p_minus = this.pointA.position.add(this.e.mul(-l));
            const p_plus = this.pointA.position.add(this.e.mul(l));
            switch (this.lineKind) {
                case LineKind.line_segment:
                case LineKind.line:
                    plane_ts.View.current.canvas.drawLine(this, p_minus, p_plus);
                    break;
                case LineKind.ray:
                    plane_ts.View.current.canvas.drawLine(this, this.pointA.position, p_plus);
                    break;
                case LineKind.ray_reverse:
                    plane_ts.View.current.canvas.drawLine(this, this.pointA.position, p_minus);
                    break;
            }
        }
        adjustPosition(point, position) {
            const foot = plane_ts.calcFootOfPerpendicular(point.position, this);
            point.setPosition(foot);
        }
        setRelations() {
            super.setRelations();
            this.pointA.setRelations();
            plane_ts.addPointOnLines(this.pointA, this);
        }
        includesPoint(point) {
            let line_set = plane_ts.pointOnLines.get(point);
            if (line_set != undefined) {
                return line_set.has(this);
            }
            else {
                return false;
            }
        }
    }
    plane_ts.AbstractLine = AbstractLine;
    class LineByPoints extends AbstractLine {
        pointB;
        constructor(obj) {
            super(obj);
            this.pointB = obj.pointB;
            this.calc();
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                pointB: this.pointB.toObj()
            });
            return obj;
        }
        dependencies() {
            return super.dependencies().concat([this.pointB]);
        }
        calc() {
            this.e = this.pointB.sub(this.pointA).unit();
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.pointB);
        }
        length() {
            return this.pointA.distance(this.pointB);
        }
        isNear(position) {
            if (!super.isNear(position)) {
                return false;
            }
            if (this.lineKind == LineKind.line) {
                return true;
            }
            let n;
            if (this.lineKind == LineKind.ray || this.lineKind == LineKind.line_segment) {
                n = this.e.dot(position.sub(this.pointA.position));
            }
            else if (this.lineKind == LineKind.ray_reverse) {
                n = -this.e.dot(position.sub(this.pointB.position));
            }
            else {
                throw new plane_ts.MyError();
            }
            switch (this.lineKind) {
                case LineKind.ray:
                case LineKind.ray_reverse:
                    return 0 <= n;
                case LineKind.line_segment: {
                    const AB = this.pointA.distance(this.pointB);
                    return 0 <= n && n <= AB;
                }
            }
        }
        draw() {
            plane_ts.View.current.canvas.drawLineWith2Points(this, this.pointB);
        }
        reading() {
            return this.textReading(plane_ts.TT('Draw a line.'));
            /*
                    switch(this.lineKind){
                    case LineKind.line:
                        return new Reading(this, TT('Draw a line through two points.'), []);
                    case LineKind.ray:
                    case LineKind.ray_reverse:
                        return new Reading(this, TT('Draw a half-line through two points.'), []);
                    case LineKind.line_segment:
                        return new Reading(this, TT('Draw a line segment through two points.'), []);
                    default:
                        throw new MyError();
                    }
            */
        }
        setRelations() {
            super.setRelations();
            this.pointB.setRelations();
            plane_ts.addPointOnLines(this.pointB, this);
        }
    }
    plane_ts.LineByPoints = LineByPoints;
    function makeLineSegment(pointA, pointB) {
        return new LineByPoints({ lineKind: LineKind.line_segment, pointA, pointB });
    }
    plane_ts.makeLineSegment = makeLineSegment;
    function makeRay(pointA, pointB) {
        return new LineByPoints({ lineKind: LineKind.ray, pointA, pointB });
    }
    plane_ts.makeRay = makeRay;
    class ParallelLine extends AbstractLine {
        line;
        constructor(obj) {
            super(obj);
            this.line = obj.line;
            this.calc();
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                line: this.line.toObj()
            });
            return obj;
        }
        dependencies() {
            return super.dependencies().concat([this.line]);
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.line);
        }
        calc() {
            this.e = this.line.e.copy();
        }
        reading() {
            return new Reading(this, plane_ts.TT('Draw a line through a point that is parallel to another line.'), []);
        }
        setRelations() {
            super.setRelations();
            plane_ts.addParallelLines(this, this.line);
        }
    }
    plane_ts.ParallelLine = ParallelLine;
    class CircleArcEllipse extends Shape {
        center;
        constructor(obj) {
            super(obj);
            this.center = obj.center;
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                center: this.center.toObj(),
            });
            return obj;
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.center);
        }
        dependencies() {
            return [this.center];
        }
    }
    plane_ts.CircleArcEllipse = CircleArcEllipse;
    class CircleArc extends CircleArcEllipse {
        adjustPosition(point, position) {
            const v = position.sub(this.center.position);
            const theta = Math.atan2(v.y, v.x);
            const x = this.radius() * Math.cos(theta);
            const y = this.radius() * Math.sin(theta);
            const new_pos = this.center.position.add(new plane_ts.Vec2(x, y));
            point.setPosition(new_pos);
        }
        includesPoint(point) {
            let circle_arc_set = plane_ts.pointOnCircleArcs.get(point);
            if (circle_arc_set != undefined) {
                return circle_arc_set.has(this);
            }
            else {
                return false;
            }
        }
        setRelations() {
            super.setRelations();
            plane_ts.addCenterOfCircleArcs(this.center, this);
        }
    }
    plane_ts.CircleArc = CircleArc;
    class Circle extends CircleArc {
        constructor(obj) {
            super(obj);
        }
        isNear(position) {
            const r = position.distance(this.center.position);
            return plane_ts.View.current.isNear(Math.abs(r - this.radius()));
        }
        draw() {
            const stroke_color = this.modeColor();
            const line_width = this.modeLineWidth();
            plane_ts.View.current.canvas.drawCircle(this, this.center.position, this.radius());
        }
    }
    plane_ts.Circle = Circle;
    class CircleByPoint extends Circle {
        point;
        constructor(obj) {
            super(obj);
            this.point = obj.point;
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                point: this.point.toObj(),
            });
            return obj;
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.point);
        }
        dependencies() {
            return super.dependencies().concat([this.point]);
        }
        calc() {
        }
        radius() {
            return this.center.position.distance(this.point.position);
        }
        reading() {
            return new Reading(this, plane_ts.TT('Draw a circle.'), []);
        }
        setRelations() {
            super.setRelations();
            plane_ts.addPointOnCircleArcs(this.point, this);
        }
    }
    plane_ts.CircleByPoint = CircleByPoint;
    class CircleByRadius extends Circle {
        lengthSymbol;
        constructor(obj) {
            super(obj);
            this.lengthSymbol = obj.lengthSymbol;
        }
        makeObj() {
            return Object.assign(super.makeObj(), {
                lengthSymbol: this.lengthSymbol.toObj(),
            });
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            this.lengthSymbol.getAllShapes(shapes);
        }
        dependencies() {
            return super.dependencies().concat([this.lengthSymbol]);
        }
        radius() {
            return this.lengthSymbol.length();
        }
        setRelations() {
            super.setRelations();
            if (this.lengthSymbol.circle != undefined) {
                plane_ts.addEqualCircleArcs(this, this.lengthSymbol.circle);
            }
        }
    }
    plane_ts.CircleByRadius = CircleByRadius;
    class Ellipse extends CircleArcEllipse {
        xPoint;
        radiusY;
        constructor(obj) {
            super(obj);
            this.xPoint = obj.xPoint;
            this.radiusY = obj.radiusY;
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                xPoint: this.xPoint.toObj(),
                radiusY: this.radiusY
            });
            return obj;
        }
        setRadiusY(radiusY) {
            this.radiusY = radiusY;
            plane_ts.View.current.dirty = true;
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.xPoint);
        }
        dependencies() {
            return super.dependencies().concat([this.center, this.xPoint]);
        }
        draw() {
            const radius_x = this.xPoint.position.distance(this.center.position);
            const center_to_x = this.xPoint.sub(this.center);
            const rotation = Math.atan2(-center_to_x.y, center_to_x.x);
            const color = this.modeColor();
            const line_width = (this.isOver || this.mode != Mode.none ? 3 : 1);
            plane_ts.View.current.canvas.drawEllipse(this.center.position, radius_x, this.radiusY, rotation, color, line_width);
        }
    }
    plane_ts.Ellipse = Ellipse;
    class Arc extends CircleArc {
        static getAngles(center, pointA, pointB) {
            const center_pos = (center instanceof Point ? center.position : center);
            const pointA_pos = (pointA instanceof Point ? pointA.position : pointA);
            const pointB_pos = (pointB instanceof Point ? pointB.position : pointB);
            return [pointA_pos, pointB_pos].map(p => p.sub(center_pos)).map(v => Math.atan2(v.y, v.x));
        }
    }
    plane_ts.Arc = Arc;
    class ArcByPoint extends Arc {
        pointA;
        pointB;
        constructor(obj) {
            super(obj);
            this.pointA = obj.pointA;
            this.pointB = obj.pointB;
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                pointA: this.pointA.toObj(),
                pointB: this.pointB.toObj()
            });
            return obj;
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.pointA, this.pointB);
        }
        dependencies() {
            return super.dependencies().concat([this.pointA, this.pointB]);
        }
        calc() {
            this.adjustPosition(this.pointB, this.pointB.position);
        }
        isNear(position) {
            const r = position.distance(this.center.position);
            if (plane_ts.View.current.isNear(Math.abs(r - this.radius()))) {
                const v = position.sub(this.center.position);
                let theta = Math.atan2(v.y, v.x);
                const [startAngle, endAngle] = Arc.getAngles(this.center, this.pointA, this.pointB);
                return plane_ts.isBetweenAngles(startAngle, theta, endAngle);
            }
            return false;
        }
        draw() {
            const [startAngle, endAngle] = Arc.getAngles(this.center, this.pointA, this.pointB);
            plane_ts.View.current.canvas.drawArc(this, this.center.position, this.radius(), startAngle, endAngle);
        }
        radius() {
            return this.center.position.distance(this.pointA.position);
        }
        reading() {
            return new Reading(this, plane_ts.TT('Draw an arc.'), []);
        }
        setRelations() {
            super.setRelations();
            plane_ts.addPointOnCircleArcs(this.pointA, this);
            plane_ts.addPointOnCircleArcs(this.pointB, this);
        }
    }
    plane_ts.ArcByPoint = ArcByPoint;
    class ArcByRadius extends Arc {
        startAngle;
        endAngle;
        pointA;
        pointB;
        constructor(obj) {
            super(obj);
            this.startAngle = obj.startAngle;
            this.endAngle = obj.endAngle;
            this.pointA = Point.zero();
            this.pointB = Point.zero();
            this.pointA.visible = false;
            this.pointB.visible = false;
        }
        makeObj() {
            return Object.assign(super.makeObj(), {
                startAngle: this.startAngle,
                endAngle: this.endAngle
            });
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.pointA, this.pointB);
        }
        setOrder() {
            if (MathEntity.orderSet.has(this)) {
                return;
            }
            this.order = MathEntity.orderSet.size;
            MathEntity.orderSet.add(this);
            this.pointA.setOrder();
            this.pointB.setOrder();
        }
        positionFromAngle(theta) {
            const length = this.radius();
            const x = this.center.position.x + length * Math.cos(theta);
            const y = this.center.position.y + length * Math.sin(theta);
            return new plane_ts.Vec2(x, y);
        }
        adjustPosition(point, position) {
            const v = position.sub(this.center.position);
            const theta = Math.atan2(v.y, v.x);
            if (point == this.pointA) {
                this.startAngle = theta;
            }
            else {
                this.endAngle = theta;
            }
            const new_pos = this.positionFromAngle(theta);
            point.setPosition(new_pos);
        }
        calc() {
            this.pointA.setPosition(this.positionFromAngle(this.startAngle));
            this.pointB.setPosition(this.positionFromAngle(this.endAngle));
        }
        isNear(position) {
            const r = position.distance(this.center.position);
            if (plane_ts.View.current.isNear(Math.abs(r - this.radius()))) {
                const v = position.sub(this.center.position);
                const th = Math.atan2(v.y, v.x);
                return this.startAngle <= th && th <= this.endAngle;
            }
            return false;
        }
        angles() {
            const v1 = this.pointA.sub(this.center);
            const th1 = Math.atan2(v1.y, v1.x);
            const v2 = this.pointB.sub(this.center);
            const th2 = Math.atan2(v2.y, v2.x);
            return [th1, th2];
        }
        draw() {
            plane_ts.View.current.canvas.drawArc(this, this.center.position, this.radius(), this.startAngle, this.endAngle);
        }
        reading() {
            return new Reading(this, plane_ts.TT("Draw an arc with the same radius."), []);
        }
        setRelations() {
            super.setRelations();
            plane_ts.addPointOnCircleArcs(this.pointA, this);
            plane_ts.addPointOnCircleArcs(this.pointB, this);
        }
    }
    plane_ts.ArcByRadius = ArcByRadius;
    class ArcByLengthSymbol extends ArcByRadius {
        lengthSymbol;
        constructor(obj) {
            super(obj);
            this.lengthSymbol = obj.lengthSymbol;
            this.calc();
        }
        makeObj() {
            return Object.assign(super.makeObj(), {
                lengthSymbol: this.lengthSymbol.toObj(),
            });
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            this.lengthSymbol.getAllShapes(shapes);
        }
        dependencies() {
            return super.dependencies().concat([this.lengthSymbol]);
        }
        radius() {
            return this.lengthSymbol.length();
        }
        setRelations() {
            super.setRelations();
            if (this.lengthSymbol.circle != undefined) {
                plane_ts.addEqualCircleArcs(this, this.lengthSymbol.circle);
            }
        }
    }
    plane_ts.ArcByLengthSymbol = ArcByLengthSymbol;
    class ArcByCircle extends ArcByRadius {
        circle;
        constructor(obj) {
            super(obj);
            this.circle = obj.circle;
            this.calc();
        }
        makeObj() {
            return Object.assign(super.makeObj(), {
                circle: this.circle.toObj(),
            });
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            this.circle.getAllShapes(shapes);
        }
        dependencies() {
            return super.dependencies().concat([this.circle]);
        }
        radius() {
            return this.circle.radius();
        }
        setRelations() {
            super.setRelations();
            plane_ts.addEqualCircleArcs(this, this.circle);
        }
    }
    plane_ts.ArcByCircle = ArcByCircle;
    class Polygon extends Shape {
        static colorIndex = 0;
        points;
        lines;
        constructor(obj) {
            super(obj);
            this.points = obj.points;
            this.lines = obj.lines;
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                points: this.points.map(x => x.toObj()),
                lines: this.lines.map(x => x.toObj())
            });
            return obj;
        }
        dependencies() {
            return super.dependencies().concat(this.lines).concat(this.points);
        }
        shrinkPoints() {
            const positions = this.points.map(x => x.position);
            let center = positions[0];
            positions.slice(1).forEach(x => center = center.add(x));
            center = center.mul(1 / positions.length);
            const shrinked_positions = [];
            for (const position of positions) {
                const v = position.sub(center);
                const len = v.len();
                const diff = plane_ts.View.current.fromXPixScale(1 * plane_ts.OverLineWidth);
                const shrinked_v = v.unit().mul(len - diff);
                const new_position = center.add(shrinked_v);
                shrinked_positions.push(new_position);
            }
            return shrinked_positions;
        }
        draw() {
            const color = this.modeColor();
            if ([Mode.target1, Mode.target2].includes(this.mode)) {
                const positions = this.points.map(x => x.position);
                plane_ts.View.current.canvas.drawPolygonRaw(positions, color, NaN, true);
                return;
            }
            const radius = (this.mode == Mode.none ? 1 : 2) * Point.radius;
            let positions;
            if (this.mode == Mode.none) {
                positions = this.points.map(x => x.position);
            }
            else {
                positions = this.shrinkPoints();
            }
            for (const position of positions) {
                plane_ts.View.current.canvas.drawCircleRaw(position, radius, color);
            }
            const line_width = (this.mode == Mode.none ? plane_ts.defaultLineWidth : plane_ts.OverLineWidth);
            plane_ts.View.current.canvas.drawPolygonRaw(positions, color, line_width, false);
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(...this.points, ...this.lines);
        }
        reading() {
            switch (this.points.length) {
                case 3:
                    return new Reading(this, plane_ts.TT('Draw a triangle.'), []);
                case 4:
                    return new Reading(this, plane_ts.TT('Draw a quadrilateral.'), []);
            }
            throw new plane_ts.MyError();
        }
        setRelations() {
            super.setRelations();
            this.points.forEach(x => x.setRelations());
            this.lines.forEach(x => x.setRelations());
            const num_points = this.points.length;
            const lines = plane_ts.range(num_points).map(i => plane_ts.getCommonLineOfPoints(this.points[i], this.points[(i + 1) % num_points]));
            if (lines.some(x => x == undefined)) {
                this.lines.forEach(x => x.setRelations());
                throw new plane_ts.MyError();
            }
            if (plane_ts.range(this.points.length).some(i => lines[i] != this.lines[i])) {
                // msg(`modify lines of ${this.id}:${this.constructor.name}`);
                this.lines = lines;
            }
        }
        isEqual(polygon) {
            return plane_ts.areSetsEqual(this.points, polygon.points);
        }
    }
    plane_ts.Polygon = Polygon;
    class Triangle extends Polygon {
        static fromPoints(points) {
            const lines = plane_ts.range(3).map(i => plane_ts.getCommonLineOfPoints(points[i], points[(i + 1) % 3]));
            if (lines.some(x => x == undefined)) {
                throw new plane_ts.MyError();
            }
            const triangle = new Triangle({ points, lines });
            return triangle;
        }
        angleIndex(angle) {
            const idx = this.points.indexOf(angle.intersection);
            if (idx != -1) {
                const other_points = [0, 1, 2].filter(i => i != idx).map(i => this.points[i]);
                plane_ts.assert(other_points.length == 2);
                for (const [p1, p2] of plane_ts.permutation(other_points)) {
                    if (angle.lineA.includesPoint(p1) && angle.lineB.includesPoint(p2)) {
                        return idx;
                    }
                }
            }
            return -1;
        }
        lengthSymbolIndex(lengthSymbol) {
            for (const [i1, i2] of [[0, 1], [1, 2], [2, 0]]) {
                for (const [p1, p2] of plane_ts.permutation([this.points[i1], this.points[i2]])) {
                    if (lengthSymbol.pointA == p1 && lengthSymbol.pointB == p2) {
                        return i1;
                    }
                }
            }
            return -1;
        }
        key() {
            return this.points.map(x => `${x.id}`).join(":");
        }
        isCongruent(triangle) {
            for (const triangles of plane_ts.congruentTriangles) {
                if (triangles.some(x => x.isEqual(this))) {
                    return triangles.some(x => x.isEqual(triangle));
                }
            }
            return false;
        }
        isSimilar(triangle) {
            if (this.isCongruent(triangle)) {
                return true;
            }
            for (const triangles of plane_ts.similarTriangles) {
                if (triangles.some(x => x.isEqual(this))) {
                    return triangles.some(x => x.isEqual(triangle));
                }
            }
            return false;
        }
    }
    plane_ts.Triangle = Triangle;
    class Quadrilateral extends Polygon {
        isParallelogram() {
            return plane_ts.isParallelogramPoints(this.points);
        }
        diagonalIntersection() {
            const point_pairs = [[this.points[0], this.points[2]], [this.points[1], this.points[3]]];
            const diagonals = point_pairs.map(x => plane_ts.getCommonLineOfPoints(x[0], x[1]));
            if (diagonals.every(x => x != undefined)) {
                return plane_ts.getCommonPointOfLines(diagonals[0], diagonals[1]);
            }
            return undefined;
        }
    }
    plane_ts.Quadrilateral = Quadrilateral;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    //
    const parseMath = parser_ts.parseMath;
    plane_ts.enumSelectionClassName = "enum_selection_item";
    plane_ts.menuDialogs = new Map();
    let TriangleCongruenceReason;
    (function (TriangleCongruenceReason) {
        TriangleCongruenceReason[TriangleCongruenceReason["none"] = 0] = "none";
        TriangleCongruenceReason[TriangleCongruenceReason["side_side_side"] = 1] = "side_side_side";
        TriangleCongruenceReason[TriangleCongruenceReason["side_angle_side"] = 2] = "side_angle_side";
        TriangleCongruenceReason[TriangleCongruenceReason["angle_side_angle"] = 3] = "angle_side_angle";
    })(TriangleCongruenceReason = plane_ts.TriangleCongruenceReason || (plane_ts.TriangleCongruenceReason = {}));
    ;
    let ShapeEquationReason;
    (function (ShapeEquationReason) {
        ShapeEquationReason[ShapeEquationReason["none"] = 50] = "none";
        ShapeEquationReason[ShapeEquationReason["sum_of_angles_is_pi"] = 51] = "sum_of_angles_is_pi";
        ShapeEquationReason[ShapeEquationReason["sum_of_angles_is_equal"] = 52] = "sum_of_angles_is_equal";
        ShapeEquationReason[ShapeEquationReason["sum_of_lengths_is_equal"] = 53] = "sum_of_lengths_is_equal";
        ShapeEquationReason[ShapeEquationReason["sum_of_interior_angles_of_triangle_is_pi"] = 54] = "sum_of_interior_angles_of_triangle_is_pi";
        ShapeEquationReason[ShapeEquationReason["sum_of_interior_angles_of_quadrilateral_is_2pi"] = 55] = "sum_of_interior_angles_of_quadrilateral_is_2pi";
        ShapeEquationReason[ShapeEquationReason["exterior_angle_theorem"] = 56] = "exterior_angle_theorem";
    })(ShapeEquationReason = plane_ts.ShapeEquationReason || (plane_ts.ShapeEquationReason = {}));
    let LengthEqualityReason;
    (function (LengthEqualityReason) {
        LengthEqualityReason[LengthEqualityReason["none"] = 100] = "none";
        LengthEqualityReason[LengthEqualityReason["radii_equal"] = 101] = "radii_equal";
        LengthEqualityReason[LengthEqualityReason["common_circle"] = 102] = "common_circle";
        LengthEqualityReason[LengthEqualityReason["parallel_lines_distance"] = 103] = "parallel_lines_distance";
        LengthEqualityReason[LengthEqualityReason["not_used"] = 104] = "not_used";
        LengthEqualityReason[LengthEqualityReason["congruent_triangles"] = 105] = "congruent_triangles";
        LengthEqualityReason[LengthEqualityReason["parallelogram_opposite_sides"] = 106] = "parallelogram_opposite_sides";
        LengthEqualityReason[LengthEqualityReason["parallelogram_diagonal_bisection"] = 107] = "parallelogram_diagonal_bisection";
        LengthEqualityReason[LengthEqualityReason["equivalence_class"] = 108] = "equivalence_class";
        LengthEqualityReason[LengthEqualityReason["midpoint"] = 109] = "midpoint";
    })(LengthEqualityReason = plane_ts.LengthEqualityReason || (plane_ts.LengthEqualityReason = {}));
    ;
    let ExprTransformReason;
    (function (ExprTransformReason) {
        ExprTransformReason[ExprTransformReason["none"] = 150] = "none";
        ExprTransformReason[ExprTransformReason["transposition"] = 151] = "transposition";
        ExprTransformReason[ExprTransformReason["equality"] = 152] = "equality";
        ExprTransformReason[ExprTransformReason["add_equation"] = 153] = "add_equation";
        ExprTransformReason[ExprTransformReason["substitution"] = 154] = "substitution";
        ExprTransformReason[ExprTransformReason["dividing_equation"] = 155] = "dividing_equation";
        ExprTransformReason[ExprTransformReason["arg_shift"] = 156] = "arg_shift";
    })(ExprTransformReason = plane_ts.ExprTransformReason || (plane_ts.ExprTransformReason = {}));
    let AngleEqualityReason;
    (function (AngleEqualityReason) {
        AngleEqualityReason[AngleEqualityReason["none"] = 200] = "none";
        AngleEqualityReason[AngleEqualityReason["vertical_angles"] = 201] = "vertical_angles";
        AngleEqualityReason[AngleEqualityReason["parallel_line_angles"] = 202] = "parallel_line_angles";
        AngleEqualityReason[AngleEqualityReason["angle_bisector"] = 203] = "angle_bisector";
        AngleEqualityReason[AngleEqualityReason["congruent_triangles"] = 204] = "congruent_triangles";
        AngleEqualityReason[AngleEqualityReason["parallelogram_opposite_angles"] = 205] = "parallelogram_opposite_angles";
        AngleEqualityReason[AngleEqualityReason["similar_triangles"] = 206] = "similar_triangles";
        AngleEqualityReason[AngleEqualityReason["isosceles_triangle_base_angles"] = 207] = "isosceles_triangle_base_angles";
    })(AngleEqualityReason = plane_ts.AngleEqualityReason || (plane_ts.AngleEqualityReason = {}));
    let PropositionReason;
    (function (PropositionReason) {
        PropositionReason[PropositionReason["none"] = 250] = "none";
        PropositionReason[PropositionReason["angle_equality"] = 251] = "angle_equality";
        PropositionReason[PropositionReason["length_equality"] = 252] = "length_equality";
        PropositionReason[PropositionReason["equation"] = 253] = "equation";
    })(PropositionReason = plane_ts.PropositionReason || (plane_ts.PropositionReason = {}));
    let TriangleQuadrilateralClass;
    (function (TriangleQuadrilateralClass) {
        TriangleQuadrilateralClass[TriangleQuadrilateralClass["none"] = 300] = "none";
        TriangleQuadrilateralClass[TriangleQuadrilateralClass["trapezoid"] = 301] = "trapezoid";
        TriangleQuadrilateralClass[TriangleQuadrilateralClass["parallelogram"] = 302] = "parallelogram";
        TriangleQuadrilateralClass[TriangleQuadrilateralClass["rhombus"] = 303] = "rhombus";
        TriangleQuadrilateralClass[TriangleQuadrilateralClass["isoscelesTriangle"] = 304] = "isoscelesTriangle";
    })(TriangleQuadrilateralClass = plane_ts.TriangleQuadrilateralClass || (plane_ts.TriangleQuadrilateralClass = {}));
    let ParallelogramReason;
    (function (ParallelogramReason) {
        ParallelogramReason[ParallelogramReason["none"] = 400] = "none";
        ParallelogramReason[ParallelogramReason["each_opposite_sides_are_equal"] = 401] = "each_opposite_sides_are_equal";
        ParallelogramReason[ParallelogramReason["each_opposite_sides_are_parallel"] = 402] = "each_opposite_sides_are_parallel";
        ParallelogramReason[ParallelogramReason["each_opposite_angles_are_equal"] = 403] = "each_opposite_angles_are_equal";
        ParallelogramReason[ParallelogramReason["one_opposite_sides_are_parallel_and_equal"] = 404] = "one_opposite_sides_are_parallel_and_equal";
        ParallelogramReason[ParallelogramReason["each_diagonal_bisections"] = 405] = "each_diagonal_bisections";
    })(ParallelogramReason = plane_ts.ParallelogramReason || (plane_ts.ParallelogramReason = {}));
    let RhombusReason;
    (function (RhombusReason) {
        RhombusReason[RhombusReason["none"] = 500] = "none";
        RhombusReason[RhombusReason["all_sides_are_equal"] = 501] = "all_sides_are_equal";
    })(RhombusReason = plane_ts.RhombusReason || (plane_ts.RhombusReason = {}));
    let IsoscelesTriangleReason;
    (function (IsoscelesTriangleReason) {
        IsoscelesTriangleReason[IsoscelesTriangleReason["none"] = 520] = "none";
        IsoscelesTriangleReason[IsoscelesTriangleReason["two_sides_are_equal"] = 521] = "two_sides_are_equal";
    })(IsoscelesTriangleReason = plane_ts.IsoscelesTriangleReason || (plane_ts.IsoscelesTriangleReason = {}));
    let ParallelReason;
    (function (ParallelReason) {
        ParallelReason[ParallelReason["none"] = 600] = "none";
        ParallelReason[ParallelReason["parallelogram"] = 601] = "parallelogram";
        ParallelReason[ParallelReason["corresponding_angles_or_alternate_angles_are_equal"] = 602] = "corresponding_angles_or_alternate_angles_are_equal";
        ParallelReason[ParallelReason["supplementary_angles"] = 603] = "supplementary_angles";
    })(ParallelReason = plane_ts.ParallelReason || (plane_ts.ParallelReason = {}));
    let TriangleSimilarityReason;
    (function (TriangleSimilarityReason) {
        TriangleSimilarityReason[TriangleSimilarityReason["none"] = 700] = "none";
        TriangleSimilarityReason[TriangleSimilarityReason["two_equal_angle_pairs"] = 701] = "two_equal_angle_pairs";
    })(TriangleSimilarityReason = plane_ts.TriangleSimilarityReason || (plane_ts.TriangleSimilarityReason = {}));
    ;
    let ShapeType;
    (function (ShapeType) {
        ShapeType[ShapeType["parallelogram"] = 800] = "parallelogram";
        ShapeType[ShapeType["rhombus"] = 801] = "rhombus";
        ShapeType[ShapeType["isosceles_triangle"] = 802] = "isosceles_triangle";
    })(ShapeType = plane_ts.ShapeType || (plane_ts.ShapeType = {}));
    plane_ts.enumToImgName = new Map([
        [TriangleCongruenceReason.side_side_side, "side_side_side"],
        [TriangleCongruenceReason.side_angle_side, "side_angle_side"],
        [TriangleCongruenceReason.angle_side_angle, "angle_side_angle"],
        [ShapeEquationReason.sum_of_angles_is_pi, "sum_of_angles_is_pi"],
        [ShapeEquationReason.sum_of_angles_is_equal, "sum_of_angles_is_equal"],
        [ShapeEquationReason.sum_of_lengths_is_equal, "sum_of_lengths_is_equal"],
        [ShapeEquationReason.sum_of_interior_angles_of_triangle_is_pi, "sum_of_interior_angles_of_triangle_is_pi"],
        [ShapeEquationReason.sum_of_interior_angles_of_quadrilateral_is_2pi, "sum_of_interior_angles_of_quadrilateral_is_2pi"],
        [ShapeEquationReason.exterior_angle_theorem, "exterior_angle_theorem"],
        [LengthEqualityReason.radii_equal, "radii_equal"],
        [LengthEqualityReason.common_circle, "common_circle"],
        [LengthEqualityReason.parallel_lines_distance, "parallel_lines_distance"],
        [LengthEqualityReason.congruent_triangles, "triangle_congruence"],
        [LengthEqualityReason.parallelogram_opposite_sides, "each_opposite_sides_are_equal"],
        [LengthEqualityReason.parallelogram_diagonal_bisection, "each_diagonal_bisections"],
        [LengthEqualityReason.equivalence_class, "equivalence_class"],
        [LengthEqualityReason.midpoint, "midpoint"],
        [ExprTransformReason.transposition, "transposition"],
        [ExprTransformReason.equality, "equality"],
        [ExprTransformReason.add_equation, "add_equation"],
        [ExprTransformReason.substitution, "substitution"],
        [ExprTransformReason.dividing_equation, "dividing_equation"],
        [ExprTransformReason.arg_shift, "arg_shift"],
        [AngleEqualityReason.vertical_angles, "vertical_angles"],
        [AngleEqualityReason.parallel_line_angles, "parallel_line_angles"],
        [AngleEqualityReason.angle_bisector, "angle_bisector"],
        [AngleEqualityReason.congruent_triangles, "triangle_congruence"],
        [AngleEqualityReason.parallelogram_opposite_angles, "each_opposite_angles_are_equal"],
        [AngleEqualityReason.similar_triangles, "triangle_similarity"],
        [AngleEqualityReason.isosceles_triangle_base_angles, "isosceles_triangle_base_angles"],
        [TriangleQuadrilateralClass.trapezoid, ""],
        [TriangleQuadrilateralClass.parallelogram, "quadrilateral_classifier"],
        [TriangleQuadrilateralClass.rhombus, "all_sides_are_equal"],
        [ParallelogramReason.each_opposite_sides_are_equal, "each_opposite_sides_are_equal"],
        [ParallelogramReason.each_opposite_sides_are_parallel, "each_opposite_sides_are_parallel"],
        [ParallelogramReason.each_opposite_angles_are_equal, "each_opposite_angles_are_equal"],
        [ParallelogramReason.one_opposite_sides_are_parallel_and_equal, "one_opposite_sides_are_parallel_and_equal"],
        [ParallelogramReason.each_diagonal_bisections, "each_diagonal_bisections"],
        [RhombusReason.all_sides_are_equal, "all_sides_are_equal"],
        [IsoscelesTriangleReason.two_sides_are_equal, "isosceles_triangle"],
        [ParallelReason.parallelogram, "quadrilateral_classifier"],
        [ParallelReason.corresponding_angles_or_alternate_angles_are_equal, "parallel_line_angles"],
        [ParallelReason.supplementary_angles, "parallel_by_supplementary_angles"],
        [TriangleSimilarityReason.two_equal_angle_pairs, "two_equal_angle_pairs"],
        [ShapeType.parallelogram, "quadrilateral_classifier"],
        [ShapeType.rhombus, "all_sides_are_equal"],
        [ShapeType.isosceles_triangle, "isosceles_triangle"],
        [PropositionReason.angle_equality, "equal_angle"],
        [PropositionReason.length_equality, "equal_length"],
        [PropositionReason.equation, "expr_transform"],
    ]);
    async function makeSelectionDlg() {
        const data = [
            [plane_ts.TT("Reason for length equality"), "length-equality-reason", LengthEqualityReason],
            [plane_ts.TT("Reason for angle equality"), "angle-equality-reason", AngleEqualityReason],
            [plane_ts.TT("Shape type"), "shape-type", ShapeType],
            [plane_ts.TT("Reason for parallelogram"), "parallelogram-reason", ParallelogramReason],
            [plane_ts.TT("Reason for rhombus"), "rhombus-reason", RhombusReason],
            [plane_ts.TT("Reason for isosceles triangle"), "isosceles-triangle-reason", IsoscelesTriangleReason],
            [plane_ts.TT("Reason for parallel"), "parallel-reason", ParallelReason],
            [plane_ts.TT("Equation derived from shapes"), "shape-equation-reason", ShapeEquationReason],
            [plane_ts.TT("Types of formula transformation"), "expr-transform-reason", ExprTransformReason],
            [plane_ts.TT("Types of proposition"), "proposition-reason", PropositionReason],
        ];
        const titles = data.map(x => x[0]);
        const span_id_prefixes = data.map(x => x[1]);
        const dics = data.map(x => x[2]);
        plane_ts.menuDialogs.clear();
        for (const [idx, dic] of dics.entries()) {
            const children = [];
            const title = layout_ts.$label({
                text: titles[idx],
                borderWidth: 5,
                borderStyle: "ridge",
                padding: 5,
            });
            children.push(title);
            for (const [key, value] of Object.entries(dic)) {
                if (isNaN(Number(key))) {
                    if (["none", "not_used"].includes(key)) {
                        continue;
                    }
                    let img_name = plane_ts.enumToImgName.get(value);
                    plane_ts.assert(img_name != undefined && img_name != "");
                    // console.log(`of key:[${key}]${typeof key} value:[${value}]${typeof value} dic[value]:[${dic[value]}]`); 
                    const img = layout_ts.$img({
                        id: `${span_id_prefixes[idx]}-${key}`,
                        className: plane_ts.enumSelectionClassName,
                        imgUrl: `./lib/plane/img/${img_name}.png`,
                        width: "64px",
                        height: "64px",
                        borderWidth: 5,
                        borderStyle: "ridge",
                        horizontalAlign: "center",
                    });
                    img.html().dataset.operation_value = `${value}`;
                    // img.html().style.position = "";
                    children.push(img);
                }
            }
            const grid = layout_ts.$grid({
                children: children
            });
            const dlg = layout_ts.$dialog({
                content: grid
            });
            plane_ts.menuDialogs.set(dic, dlg);
        }
    }
    plane_ts.makeSelectionDlg = makeSelectionDlg;
    class Assumption extends plane_ts.MathEntity {
        equation;
        textBlock;
        constructor(obj) {
            super(obj);
            this.equation = obj.equation;
            this.textBlock = plane_ts.makeEquationTextBlock(this, this.equation);
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            if (this.textBlock != undefined) {
                shapes.push(this.textBlock);
            }
        }
        reading() {
            // msg(`empty reading:${this.constructor.name}`);
            return new Reading(this, "", []);
        }
    }
    plane_ts.Assumption = Assumption;
    class Statement extends plane_ts.Shape {
        static idTimeout;
        reason = 0;
        mathText = "";
        latexBox;
        auxiliaryShapes = [];
        selectedShapes;
        constructor(obj) {
            super(obj);
            this.selectedShapes = obj.shapes;
            if (obj.reason != undefined) {
                this.reason = obj.reason;
            }
            if (obj.auxiliaryShapes != undefined) {
                this.auxiliaryShapes = obj.auxiliaryShapes;
            }
            if (obj.mathText != undefined) {
                this.mathText = obj.mathText;
            }
        }
        dependencies() {
            return this.selectedShapes;
        }
        getProperties() {
            return super.getProperties().concat([
                "reason", "selectedShapes", "auxiliaryShapes", "mathText"
            ]);
        }
        reading() {
            // msg(`empty reading:${this.constructor.name}`);
            return new Reading(this, "", []);
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                shapes: this.selectedShapes.map(x => x.toObj())
            });
            if (this.reason != 0) {
                obj.reason = this.reason;
            }
            if (this.auxiliaryShapes.length != 0) {
                obj.auxiliaryShapes = this.auxiliaryShapes.map(x => x.toObj());
            }
            if (this.mathText != "") {
                obj.mathText = this.mathText;
            }
            return obj;
        }
        makeTexUI() {
            return new layout_ts.LaTeXBox({
                parent: plane_ts.Plane.one.text_block,
                text: "",
                click: async (ev) => {
                    const position = plane_ts.View.current.eventPosition(ev);
                    await plane_ts.Builder.tool.clickWithMouseEvent(ev, plane_ts.View.current, position, this);
                }
            });
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(...this.selectedShapes);
            shapes.push(...this.auxiliaryShapes);
        }
        showMathText() {
            Statement.idTimeout = undefined;
            let term;
            try {
                term = parseMath(this.mathText);
            }
            catch (e) {
                if (e instanceof parser_ts.SyntaxError) {
                    return;
                }
                throw e;
            }
            const tex_text = term.tex();
            if (this.latexBox == undefined) {
                this.latexBox = this.makeTexUI();
            }
            this.latexBox.setText(tex_text);
        }
        setMode(mode) {
            super.setMode(mode);
            if (this.latexBox != undefined) {
                const color = (mode == plane_ts.Mode.none ? "transparent" : plane_ts.getModeColor(mode));
                this.latexBox.setBorderColor(color);
            }
        }
        draw() {
            const shapes = this.auxiliaryShapes.concat(this.selectedShapes).filter(x => x instanceof plane_ts.Shape);
            shapes.filter(x => x.mode != plane_ts.Mode.none).forEach(x => x.draw());
        }
        show() {
            if (this.latexBox != undefined) {
                this.latexBox.show();
            }
        }
        hide() {
            if (this.latexBox != undefined) {
                this.latexBox.hide();
            }
        }
        async showReasonAndStatement(speech) {
            if (this.reason != 0) {
                await speakReason(speech, this.reason);
                if ([LengthEqualityReason.congruent_triangles, AngleEqualityReason.congruent_triangles].includes(this.reason)) {
                    plane_ts.assert(this.auxiliaryShapes.every(x => x instanceof plane_ts.Triangle));
                    for (const [i, shape] of this.auxiliaryShapes.entries()) {
                        shape.setMode(i == 0 ? plane_ts.Mode.target1 : plane_ts.Mode.target2);
                        await plane_ts.sleep(500);
                    }
                }
                else {
                    await showAuxiliaryShapes(this.reason, this.auxiliaryShapes);
                }
                await speech.waitEnd();
            }
            const reading = this.reading();
            await speech.speak(reading.text);
            if (this instanceof plane_ts.TriangleCongruence) {
                plane_ts.assert(this.selectedShapes.every(x => x instanceof plane_ts.Triangle));
                for (const [i, shape] of this.selectedShapes.entries()) {
                    shape.setMode(i == 0 ? plane_ts.Mode.target1 : plane_ts.Mode.target2);
                    await plane_ts.sleep(500);
                }
            }
            else {
                for (const shape of this.selectedShapes) {
                    shape.setMode(plane_ts.Mode.target);
                    await plane_ts.sleep(500);
                }
            }
            await speech.waitEnd();
        }
        setRelations() {
            super.setRelations();
            this.auxiliaryShapes.forEach(x => x.setRelations());
            this.selectedShapes.forEach(x => x.setRelations());
            plane_ts.usedReasons.add(this.reason);
            // if(this.reason == 0){
            //     msg(`used 0 [${this.constructor.name}]`);
            // }
            // else{
            //     msg(`used [${reasonMsg(this.reason)}]`);
            // }
        }
    }
    plane_ts.Statement = Statement;
    async function speakReason(speech, reason) {
        const reason_msg = plane_ts.reasonMsg(reason);
        await speech.speak(reason_msg);
    }
    plane_ts.speakReason = speakReason;
    async function showAuxiliaryShapes(reason, auxiliaryShapes) {
        switch (reason) {
            case ParallelogramReason.each_opposite_sides_are_equal:
            case ParallelogramReason.each_opposite_sides_are_parallel:
            case ParallelogramReason.each_opposite_angles_are_equal:
            case ParallelogramReason.each_diagonal_bisections:
                plane_ts.assert(auxiliaryShapes.length == 4);
                for (const shape of auxiliaryShapes.slice(0, 2)) {
                    shape.setMode(plane_ts.Mode.depend1);
                }
                await plane_ts.sleep(500);
                for (const shape of auxiliaryShapes.slice(2)) {
                    shape.setMode(plane_ts.Mode.depend2);
                }
                break;
            case ParallelogramReason.one_opposite_sides_are_parallel_and_equal:
            case RhombusReason.all_sides_are_equal:
                auxiliaryShapes.forEach(x => x.setMode(plane_ts.Mode.depend));
                break;
            default:
                for (const shape of auxiliaryShapes) {
                    shape.setMode(plane_ts.Mode.depend);
                    await plane_ts.sleep(500);
                }
                break;
        }
        await plane_ts.sleep(500);
    }
    plane_ts.showAuxiliaryShapes = showAuxiliaryShapes;
})(plane_ts || (plane_ts = {}));
///<reference path="shape.ts" />
///<reference path="statement.ts" />
var plane_ts;
(function (plane_ts) {
    //
    function sortShape(shapes) {
        return shapes.slice().sort((a, b) => a.order - b.order);
    }
    plane_ts.sortShape = sortShape;
    function lastShape(shapes) {
        const sorted_shapes = sortShape(shapes);
        return plane_ts.last(sorted_shapes);
    }
    class Constraint extends plane_ts.Statement {
        textBlock;
        constructor(obj) {
            super(obj);
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            if (this.textBlock != undefined) {
                shapes.push(this.textBlock);
            }
        }
        applyConstraint(shape) {
        }
        draw() {
        }
    }
    plane_ts.Constraint = Constraint;
    class LengthEqualityConstraint extends Constraint {
        point;
        lengthSymbolA;
        lengthSymbolB;
        constructor(obj) {
            const data = obj;
            data.shapes = [obj.lengthSymbolA, obj.lengthSymbolB];
            super(data);
            const [lengthSymbolA, lengthSymbolB] = sortShape([obj.lengthSymbolA, obj.lengthSymbolB]);
            let points = [obj.lengthSymbolA, obj.lengthSymbolB].map(x => [x.pointA, x.pointB]).flat();
            this.point = lastShape(points);
            this.point.addConstraint(this);
            this.lengthSymbolA = obj.lengthSymbolA;
            this.lengthSymbolB = obj.lengthSymbolB;
            this.calc();
            plane_ts.LengthSymbol.setEqualLengthKinds(this.selectedShapes);
        }
        makeObj() {
            return Object.assign(super.makeObj(), {
                lengthSymbolA: this.lengthSymbolA.toObj(),
                lengthSymbolB: this.lengthSymbolB.toObj(),
            });
        }
        dependencies() {
            return super.dependencies().concat([this.lengthSymbolA]);
        }
        calc() {
            this.point.calc();
        }
        applyConstraint(shape) {
            if (shape != this.point) {
                throw new plane_ts.MyError();
            }
            const length = this.lengthSymbolA.length();
            const anchor = this.getAnchor();
            if (anchor == undefined) {
                // msg(`no anchor for length-Symbol-B:${this.lengthSymbolB.id}`)
                return;
            }
            const dir = this.point.position.sub(anchor.position).unit();
            const theta = Math.atan2(dir.y, dir.x);
            const adjusted_position = anchor.position.add(dir.mul(length));
            this.point.setPosition(adjusted_position);
        }
        getAnchor() {
            if (this.lengthSymbolB.pointA == this.point) {
                return this.lengthSymbolB.pointB;
            }
            else if (this.lengthSymbolB.pointB == this.point) {
                return this.lengthSymbolB.pointA;
            }
            else {
                return undefined;
            }
        }
        reading() {
            return this.textReading(plane_ts.TT("Make the two line segments equal in length."));
        }
        setRelations() {
            super.setRelations();
            plane_ts.addEqualLengths(this.lengthSymbolA, this.lengthSymbolB);
        }
    }
    plane_ts.LengthEqualityConstraint = LengthEqualityConstraint;
    class AngleEqualityConstraint extends Constraint {
        equation;
        constructor(obj) {
            super(obj);
            const angles = this.selectedShapes;
            if (angles.every(x => x.name != "")) {
                plane_ts.assert(angles.length == 2);
                const text = `${angles[0].name} == ${angles[1].name}`;
                this.equation = parser_ts.parseMath(text);
                this.textBlock = plane_ts.makeEquationTextBlock(this, this.equation);
            }
            else {
                plane_ts.Angle.setEqualAngleMarks(angles);
            }
        }
        setRelations() {
            super.setRelations();
            plane_ts.assert(this.selectedShapes.length == 2 && this.selectedShapes.every(x => x instanceof plane_ts.Angle));
            const [angleA, angleB] = this.selectedShapes;
            plane_ts.addEqualAngles(angleA, angleB);
        }
        reading() {
            // msg(`empty reading:${this.constructor.name}`);
            return new Reading(this, "", []);
        }
    }
    plane_ts.AngleEqualityConstraint = AngleEqualityConstraint;
    class LineConstraint extends Constraint {
        lineA;
        lineB;
        constructor(obj) {
            const data = obj;
            data.shapes = [obj.lineA, obj.lineB];
            super(data);
            plane_ts.assert(obj.lineA.order < obj.lineB.order);
            this.lineA = obj.lineA;
            this.lineB = obj.lineB;
        }
    }
    class ParallelPerpendicularConstraint extends LineConstraint {
        constructor(obj) {
            super(obj);
            this.lineB.pointB.addConstraint(this);
            this.calc();
        }
        makeObj() {
            return Object.assign(super.makeObj(), {
                lineA: this.lineA.toObj(),
                lineB: this.lineB.toObj(),
            });
        }
        dependencies() {
            return super.dependencies().concat([this.lineA, this.lineB.pointA]);
        }
        calc() {
            this.lineB.pointB.calc();
        }
        applyConstraint(shape) {
            plane_ts.assert(shape == this.lineB.pointB);
            const AB = this.lineB.pointB.sub(this.lineB.pointA);
            let newAB;
            if (this instanceof ParallelConstraint) {
                newAB = this.lineA.e.project(AB);
            }
            else {
                newAB = this.lineA.e.rot90().project(AB);
            }
            const positionB = this.lineB.pointA.position.add(newAB);
            this.lineB.pointB.setPosition(positionB);
        }
    }
    plane_ts.ParallelPerpendicularConstraint = ParallelPerpendicularConstraint;
    class ParallelConstraint extends ParallelPerpendicularConstraint {
        setRelations() {
            super.setRelations();
            plane_ts.addParallelLines(this.lineA, this.lineB);
        }
    }
    plane_ts.ParallelConstraint = ParallelConstraint;
    class PerpendicularConstraint extends ParallelPerpendicularConstraint {
        setRelations() {
            super.setRelations();
            plane_ts.addPerpendicularPairs(this.lineA, this.lineB);
        }
    }
    plane_ts.PerpendicularConstraint = PerpendicularConstraint;
})(plane_ts || (plane_ts = {}));
///<reference path="shape.ts" />
var plane_ts;
(function (plane_ts) {
    //
    plane_ts.TT = i18n_ts.TT;
    plane_ts.TTs = i18n_ts.TTs;
    class Angle extends plane_ts.Shape {
        static radius1Pix = 20;
        static radius1;
        static numMarks = 5;
        static RightAngleMark = 0;
        static DefaultAngleMark = 1;
        static outerAngleScale = 2;
        angleMark;
        lineA;
        directionA;
        eA;
        lineB;
        directionB;
        eB;
        intersection;
        outerAngle = false;
        constructor(obj) {
            super(obj);
            plane_ts.assert(obj.angleMark != undefined);
            this.setAngleMark(obj.angleMark);
            this.lineA = obj.lineA;
            this.directionA = obj.directionA;
            this.lineB = obj.lineB;
            this.directionB = obj.directionB;
            this.eA = this.lineA.e.mul(this.directionA);
            this.eB = this.lineB.e.mul(this.directionB);
            this.intersection = plane_ts.getCommonPointOfLines(this.lineA, this.lineB);
            if (this.intersection == undefined) {
                throw new plane_ts.MyError();
            }
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                angleMark: this.angleMark,
                lineA: this.lineA.toObj(),
                directionA: this.directionA,
                lineB: this.lineB.toObj(),
                directionB: this.directionB
            });
            return obj;
        }
        getProperties() {
            return super.getProperties().concat([
                "angleMark"
            ]);
        }
        setName(name) {
            super.setName(name);
            this.setCaptionPosition();
        }
        setAngleMark(angle_mark) {
            this.angleMark = angle_mark;
            if (angle_mark == Angle.RightAngleMark) {
                plane_ts.rightAngles.add(this);
            }
        }
        isRightAngle() {
            return this.angleMark == Angle.RightAngleMark;
        }
        dependencies() {
            return [this.lineA, this.lineB];
        }
        startEndAngle() {
            const e1 = this.lineA.e.mul(this.directionA);
            const e2 = this.lineB.e.mul(this.directionB);
            const start = Math.atan2(e1.y, e1.x);
            const end = Math.atan2(e2.y, e2.x);
            return [start, end];
        }
        radiusPlus() {
            return this.outerAngle ? Angle.outerAngleScale * Angle.radius1 : 0;
        }
        isNear(position) {
            const distance = this.intersection.position.distance(position);
            let radius = Angle.radius1 * 1.2;
            let near_radius;
            if (this.outerAngle) {
                const outer_radius = radius + this.radiusPlus();
                near_radius = (radius <= distance && distance < outer_radius);
            }
            else {
                near_radius = distance <= radius;
            }
            if (near_radius) {
                const [start, end] = this.startEndAngle();
                // the vector from the intersection to position.
                const v = position.sub(this.intersection.position);
                const theta = Math.atan2(v.y, v.x);
                const result = plane_ts.inRange(start, theta, end);
                return plane_ts.inRange(start, theta, end);
            }
            return false;
        }
        calc() {
            const idx = plane_ts.View.current.shapes.indexOf(this);
            let shapes = (idx == -1 ? plane_ts.View.current.shapes : plane_ts.View.current.shapes.slice(0, idx));
            this.outerAngle = shapes.some(x => x instanceof Angle && this.intersection == x.intersection && (this.commonLineAA(x) || this.commonLineBB(x)));
            this.setCaptionPosition();
        }
        draw() {
            plane_ts.assert(this.angleMark < Angle.numMarks);
            const [start, end] = this.startEndAngle();
            const center = this.intersection.position;
            if (this.isRightAngle()) {
                const vx = (new plane_ts.Vec2(Angle.radius1, 0)).rot(start);
                const vy = (new plane_ts.Vec2(Angle.radius1, 0)).rot(end);
                const positions = [
                    center, center.add(vx), center.add(vx).add(vy), center.add(vy)
                ];
                plane_ts.View.current.canvas.drawPolygon(this, positions);
            }
            else {
                const scales = [1, 0.6, 1.4, 2.0, 2.5, 3.0];
                for (const i of plane_ts.range(this.angleMark)) {
                    plane_ts.assert(i < scales.length);
                    const radius = Angle.radius1 * scales[i] + this.radiusPlus();
                    plane_ts.View.current.canvas.drawArc(this, center, radius, start, end);
                }
            }
        }
        setCaptionPosition() {
            if (this.caption == undefined) {
                return;
            }
            let [start, end] = this.startEndAngle();
            if (start > end) {
                end += 2 * Math.PI;
            }
            const mid_angle = (start + end) / 2;
            const center = this.intersection.position;
            const radius = Angle.radius1 * 2 + this.radiusPlus();
            const dx = radius * Math.cos(mid_angle);
            const dy = radius * Math.sin(mid_angle);
            const caption_center = center.add(new plane_ts.Vec2(dx, dy));
            const caption_center_pix = plane_ts.View.current.toPixPosition(caption_center);
            const rect = this.caption.div.getBoundingClientRect();
            const x = caption_center_pix.x - 0.5 * rect.width;
            const y = caption_center_pix.y - 0.5 * rect.height;
            this.caption.div.style.left = `${x}px`;
            this.caption.div.style.top = `${y}px`;
        }
        reading() {
            return new Reading(this, plane_ts.TT('Draw an angle.'), []);
        }
        setRelations() {
            super.setRelations();
            const key = plane_ts.angleKey(this.lineA, this.directionA, this.lineB, this.directionB, this.intersection);
            plane_ts.angleMap.set(key, this);
        }
        lines() {
            return [this.lineA, this.lineB];
        }
        static setEqualAngleMarks(angles) {
            plane_ts.assert(angles.length == 2 && angles.every(x => x instanceof Angle));
            const named_angle = angles.find(x => x.name != "");
            if (named_angle != undefined) {
                for (const angle of angles) {
                    if (angle != named_angle) {
                        angle.setAngleMark(Angle.DefaultAngleMark);
                        angle.setName(named_angle.name);
                    }
                }
                return;
            }
            for (const [angle1, angle2] of plane_ts.permutation([angles[0], angles[1]])) {
                if (angle1.intersection == angle2.intersection) {
                    if (angle1.lineA == angle2.lineB && angle1.lineB == angle2.lineA) {
                        // msg("Angle Equality:Since the two angles bisect the line, they are right angles.");
                        angles.forEach(x => x.setAngleMark(Angle.RightAngleMark));
                        return;
                    }
                }
            }
            if (angles.some(x => x.isRightAngle())) {
                // msg("Angle Equality:Since one angle is a right angle, the other angle is also a right angle.");
                angles.forEach(x => x.setAngleMark(Angle.RightAngleMark));
            }
            else {
                const max_angleMark = Math.max(...angles.map(x => x.angleMark));
                if (max_angleMark != Angle.DefaultAngleMark) {
                    angles.forEach(x => x.angleMark = max_angleMark);
                }
                else {
                    const all_angles = plane_ts.View.current.allShapes().filter(x => x instanceof Angle);
                    if (all_angles.length == 0) {
                        angles.forEach(x => x.angleMark = Angle.DefaultAngleMark + 1);
                    }
                    else {
                        const max_all_angleMark = Math.max(...all_angles.map(x => x.angleMark));
                        angles.forEach(x => x.angleMark = max_all_angleMark + 1);
                    }
                }
            }
        }
        commonLineAA(angle) {
            return this.lineA == angle.lineA && this.directionA == angle.directionA;
        }
        commonLineConnect(angle) {
            return this.lineA == angle.lineB && this.directionA == -angle.directionB;
        }
        commonLineBA(angle) {
            return this.lineB == angle.lineA && this.directionB == angle.directionA;
        }
        commonLineBB(angle) {
            return this.lineB == angle.lineB && this.directionB == angle.directionB;
        }
    }
    plane_ts.Angle = Angle;
    class DimensionLine extends plane_ts.Shape {
        pointA;
        pointB;
        shift;
        normal;
        shiftVec;
        center;
        text = "";
        constructor(obj) {
            super(obj);
            this.pointA = obj.pointA;
            this.pointB = obj.pointB;
            this.shift = obj.shift;
            this.calc();
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                pointA: this.pointA.toObj(),
                pointB: this.pointB.toObj(),
                shift: this.shift
            });
            return obj;
        }
        setShift(shift) {
            this.shift = shift;
            this.calc();
            plane_ts.View.current.dirty = true;
        }
        getProperties() {
            return super.getProperties().concat([
                "text"
            ]);
        }
        dependencies() {
            return [this.pointA, this.pointB];
        }
        calc() {
            const A = this.pointA.position;
            const B = this.pointB.position;
            const AB = B.sub(A);
            this.normal = AB.rot90().unit();
            this.shiftVec = this.normal.mul(this.shift);
            this.center = A.add(B).mul(0.5).add(this.shiftVec);
            this.updateCaption();
        }
        updateCaption() {
            const [text_width, text_height] = this.caption.getSize();
            const x = this.center.x - plane_ts.fromXPixScale(0.5 * text_width);
            const y = this.center.y + plane_ts.fromYPixScale(0.5 * text_height);
            this.caption.setTextPosition(x, y);
        }
        draw() {
            if (this.caption == undefined) {
                throw new plane_ts.MyError();
            }
            const A = this.pointA.position;
            const B = this.pointB.position;
            const AB = B.sub(A);
            const A_shift = A.add(this.shiftVec);
            const B_shift = B.add(this.shiftVec);
            const shift_pix_len = plane_ts.View.current.toXPixScale(Math.abs(this.shift));
            const ratio = (shift_pix_len + 5) / shift_pix_len;
            const shift_plus = this.shiftVec.mul(ratio);
            const A_shift_plus = A.add(shift_plus);
            const B_shift_plus = B.add(shift_plus);
            const A_shift_inside = A_shift.add(AB.mul(1 / 3));
            const B_shift_inside = B_shift.add(AB.mul(-1 / 3));
            const degree = plane_ts.toDegree(Math.atan2(-AB.y, AB.x));
            this.caption.setRotation(degree);
            plane_ts.View.current.canvas.drawLine(this, A, A_shift_plus);
            plane_ts.View.current.canvas.drawLine(this, B, B_shift_plus);
            plane_ts.View.current.canvas.drawLine(this, A_shift, A_shift_inside);
            plane_ts.View.current.canvas.drawLine(this, B_shift, B_shift_inside);
        }
    }
    plane_ts.DimensionLine = DimensionLine;
    class LengthSymbol extends plane_ts.Shape {
        static DefaultLengthKind = 0;
        pointA;
        pointB;
        lengthKind;
        line;
        circle;
        constructor(obj) {
            super(obj);
            if (obj.lengthKind == undefined) {
                throw new plane_ts.MyError("length kind is undefined.");
            }
            this.pointA = obj.pointA;
            this.pointB = obj.pointB;
            this.lengthKind = obj.lengthKind;
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                pointA: this.pointA.toObj(),
                pointB: this.pointB.toObj(),
                lengthKind: this.lengthKind
            });
            return obj;
        }
        getProperties() {
            return super.getProperties().concat([
                "lengthKind",
                "line"
            ]);
        }
        dependencies() {
            return [this.pointA, this.pointB];
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.pointA, this.pointB);
        }
        center() {
            const A = this.pointA.position;
            const B = this.pointB.position;
            return A.add(B).mul(0.5);
        }
        isNear(position) {
            const center = this.center();
            const real_distance = center.distance(position);
            return plane_ts.View.current.isNear(real_distance);
        }
        length() {
            const A = this.pointA.position;
            const B = this.pointB.position;
            return A.distance(B);
        }
        isEqual(lengthSymbol) {
            const equal_length_set = plane_ts.equalLengths.find(x => x.has(this));
            if (equal_length_set != undefined) {
                return equal_length_set.has(lengthSymbol);
            }
            return false;
        }
        draw() {
            plane_ts.View.current.canvas.drawLine(this, this.pointA.position, this.pointB.position);
            const tick_half_length = plane_ts.fromXPixScale(10);
            const A = this.pointA.position;
            const B = this.pointB.position;
            const AB = B.sub(A);
            const e = AB.unit();
            const center = this.center();
            if (this.lengthKind == 0) {
                const e45 = e.rot45();
                const tick_1 = center.add(e45.mul(-tick_half_length));
                const tick_2 = center.add(e45.mul(tick_half_length));
                plane_ts.drawLine(this, tick_1, tick_2);
                return;
            }
            const normal = e.rot90();
            const normal_minus = normal.mul(-tick_half_length);
            const normal_plus = normal.mul(tick_half_length);
            let shifts;
            if (this.lengthKind % 2 == 1) {
                shifts = [0, 1, -1, 2, -2];
            }
            else {
                shifts = [0.5, -0.5, 1.5, -1.5, 2.5, -2.5];
            }
            plane_ts.assert(this.lengthKind < shifts.length);
            for (const idx of plane_ts.range(this.lengthKind)) {
                const shift = shifts[idx];
                const pos = center.add(e.mul(shift * tick_half_length));
                const tick_1 = pos.add(normal_minus);
                const tick_2 = pos.add(normal_plus);
                plane_ts.drawLine(this, tick_1, tick_2);
            }
        }
        findEqualLengthByMidPoint() {
            const all_shapes = plane_ts.View.current.allShapes();
            const length_symbols = all_shapes.filter(x => x instanceof LengthSymbol && x != this && x.line == this.line);
            if (length_symbols.length == 0) {
                // msg(`no length-symbol:${this.id}`);
                // (all_shapes.filter(x => x instanceof LengthSymbol) as LengthSymbol[]).forEach(x => msg(`${x.id} line:${x.line!.id}`))
                return;
            }
            for (const length_symbol of length_symbols) {
                // msg(`length-symbol on line: ${this.id} ${length_symbol.id}`);
                const points = this.points().concat(length_symbol.points());
                const mid_points = all_shapes.filter(x => x instanceof plane_ts.Midpoint && plane_ts.areSetsEqual([x, x.pointA, x.pointB], points));
                for (const mid_point of mid_points) {
                    if (this.points().includes(mid_point) && length_symbol.points().includes(mid_point)) {
                        plane_ts.addEqualLengths(this, length_symbol);
                        // msg(`equal-length-by-midpoint:${this.id} mid:${mid_point.id} ${length_symbol.id}`);
                        return;
                    }
                }
            }
        }
        reading() {
            return this.textReading(plane_ts.TT("Draw a length symbol."));
        }
        setRelations() {
            super.setRelations();
            this.pointA.setRelations();
            this.pointB.setRelations();
            const key = plane_ts.pairKey(this.pointA, this.pointB);
            plane_ts.pointsToLengthSymbol.set(key, this);
            this.line = plane_ts.getCommonLineOfPoints(this.pointA, this.pointB);
            this.circle = undefined;
            for (const [center, point] of [[this.pointA, this.pointB], [this.pointB, this.pointA]]) {
                const circles = plane_ts.Mylist(plane_ts.centerOfCircleArcs.get(center));
                if (circles.length != 0) {
                    this.circle = circles.find(x => x.includesPoint(point));
                    if (this.circle != undefined) {
                        break;
                    }
                }
            }
            this.findEqualLengthByMidPoint();
        }
        points() {
            return [this.pointA, this.pointB];
        }
        static setEqualLengthKinds(lengthSymbols) {
            plane_ts.assert(lengthSymbols.every(x => x instanceof LengthSymbol));
            const max_lengthKind = Math.max(...lengthSymbols.map(x => x.lengthKind));
            if (max_lengthKind != LengthSymbol.DefaultLengthKind) {
                lengthSymbols.forEach(x => x.lengthKind = max_lengthKind);
            }
            else {
                const all_lengthSymbols = plane_ts.View.current.allShapes().filter(x => x instanceof LengthSymbol);
                if (all_lengthSymbols.length == 0) {
                    lengthSymbols.forEach(x => x.lengthKind = LengthSymbol.DefaultLengthKind + 1);
                }
                else {
                    const max_all_lengthKind = Math.max(...all_lengthSymbols.map(x => x.lengthKind));
                    lengthSymbols.forEach(x => x.lengthKind = max_all_lengthKind + 1);
                }
            }
        }
    }
    plane_ts.LengthSymbol = LengthSymbol;
})(plane_ts || (plane_ts = {}));
///<reference path="shape.ts" />
var plane_ts;
(function (plane_ts) {
    function calcFootFrom2Pos(position, pos1, e) {
        const v = position.sub(pos1);
        const h = e.dot(v);
        const foot = pos1.add(e.mul(h));
        return foot;
    }
    plane_ts.calcFootFrom2Pos = calcFootFrom2Pos;
    function calcFootOfPerpendicular(position, line) {
        return calcFootFrom2Pos(position, line.pointA.position, line.e);
    }
    plane_ts.calcFootOfPerpendicular = calcFootOfPerpendicular;
    function distanceFromLine(normal, pointA, position) {
        return Math.abs(normal.dot(position.sub(pointA)));
    }
    plane_ts.distanceFromLine = distanceFromLine;
    class Midpoint extends plane_ts.Point {
        pointA;
        pointB;
        constructor(obj) {
            super(obj);
            this.pointA = obj.pointA;
            this.pointB = obj.pointB;
            this.calc();
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                pointA: this.pointA.toObj(),
                pointB: this.pointB.toObj()
            });
            return obj;
        }
        dependencies() {
            return super.dependencies().concat([this.pointA, this.pointB]);
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.pointA, this.pointB);
        }
        calc() {
            const position = this.pointA.add(this.pointB).mul(0.5);
            this.setPosition(position);
        }
        reading() {
            return new Reading(this, plane_ts.TT('Find the midpoint of two points.'), []);
        }
        setRelations() {
            super.setRelations();
            const line = plane_ts.getCommonLineOfPoints(this.pointA, this.pointB);
            if (line != undefined) {
                // msg(`add mid point On Lines point:${this.id} line:${line.id}`);
                plane_ts.addPointOnLines(this, line);
            }
        }
    }
    plane_ts.Midpoint = Midpoint;
    class AbstractPerpendicularLine extends plane_ts.AbstractLine {
        line;
        constructor(obj) {
            super(obj);
            this.line = obj.line;
        }
        makeObj() {
            return Object.assign(super.makeObj(), {
                line: this.line.toObj(),
            });
        }
        setRelations() {
            super.setRelations();
            plane_ts.addPerpendicularPairs(this, this.line);
        }
    }
    class FootOfPerpendicular extends AbstractPerpendicularLine {
        foot;
        constructor(obj) {
            super(obj);
            this.foot = obj.foot;
            this.calc();
        }
        makeObj() {
            return Object.assign(super.makeObj(), {
                foot: this.foot.toObj(),
            });
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.line, this.foot);
        }
        dependencies() {
            return super.dependencies().concat([this.line]);
        }
        setMode(mode) {
            super.setMode(mode);
            this.foot.setMode(mode);
        }
        calc() {
            const foot_pos = calcFootOfPerpendicular(this.pointA.position, this.line);
            this.foot.setPosition(foot_pos);
            this.e = this.line.e.rot90().unit();
        }
        draw() {
            plane_ts.View.current.canvas.drawLineWith2Points(this, this.foot);
        }
        reading() {
            return new Reading(this, plane_ts.TT('Draw a perpendicular line from the point to the line.'), []);
        }
        setRelations() {
            super.setRelations();
            plane_ts.addPointOnLines(this.foot, this);
            plane_ts.addPointOnLines(this.foot, this.line);
        }
    }
    plane_ts.FootOfPerpendicular = FootOfPerpendicular;
    class PerpendicularLine extends AbstractPerpendicularLine {
        constructor(obj) {
            super(obj);
            this.calc();
        }
        calc() {
            this.e = this.line.e.rot90().unit();
        }
        reading() {
            return new Reading(this, plane_ts.TT('Draw a perpendicular line.'), []);
        }
    }
    plane_ts.PerpendicularLine = PerpendicularLine;
    function calcLineLineIntersection(l1, l2) {
        l1.calc();
        l2.calc();
        if (l1.e == undefined || l2.e == undefined) {
            throw new plane_ts.MyError();
        }
        /*
        l1.p1 + u l1.e = l2.p1 + v l2.e
    
        l1.p1.x + u l1.e.x = l2.p1.x + v l2.e.x
        l1.p1.y + u l1.e.y = l2.p1.y + v l2.e.y
    
        l1.e.x, - l2.e.x   u = l2.p1.x - l1.p1.x
        l1.e.y, - l2.e.y   v = l2.p1.y - l1.p1.y
        
        */
        const m = new plane_ts.Mat2([[l1.e.x, -l2.e.x], [l1.e.y, -l2.e.y]]);
        const v = new plane_ts.Vec2(l2.pointA.position.x - l1.pointA.position.x, l2.pointA.position.y - l1.pointA.position.y);
        const mi = m.inv();
        const uv = mi.dot(v);
        const u = uv.x;
        const position = l1.pointA.position.add(l1.e.mul(u));
        return position;
    }
    plane_ts.calcLineLineIntersection = calcLineLineIntersection;
    class LineLineIntersection extends plane_ts.Point {
        lineA;
        lineB;
        constructor(obj) {
            super(obj);
            this.lineA = obj.lineA;
            this.lineB = obj.lineB;
            this.calc();
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                lineA: this.lineA.toObj(),
                lineB: this.lineB.toObj(),
            });
            return obj;
        }
        dependencies() {
            return [this.lineA, this.lineB];
        }
        calc() {
            const position = calcLineLineIntersection(this.lineA, this.lineB);
            this.setPosition(position);
        }
        reading() {
            return new Reading(this, plane_ts.TT('There is one intersection between the two lines.'), []);
        }
        setRelations() {
            super.setRelations();
            plane_ts.addPointOnLines(this, this.lineA);
            plane_ts.addPointOnLines(this, this.lineB);
        }
    }
    plane_ts.LineLineIntersection = LineLineIntersection;
    class LineArcIntersection extends plane_ts.Shape {
        line;
        arc;
        pointA;
        pointB;
        constructor(obj) {
            super(obj);
            this.line = obj.line;
            this.arc = obj.arc;
            this.pointA = obj.pointA;
            this.pointB = obj.pointB;
            this.calc();
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                line: this.line.toObj(),
                arc: this.arc.toObj(),
                pointA: this.pointA.toObj(),
                pointB: this.pointB.toObj()
            });
            return obj;
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.pointA, this.pointB);
        }
        dependencies() {
            return [this.line, this.arc];
        }
        setMode(mode) {
            this.pointA.setMode(mode);
            this.pointB.setMode(mode);
        }
        calc() {
            // /
            const center = this.arc.center;
            // /foot
            const foot = calcFootOfPerpendicular(center.position, this.line);
            // /
            const h = foot.sub(center.position).len();
            // /
            let r = this.arc.radius();
            if (r < h) {
                // 
                throw new plane_ts.MyError();
            }
            // 
            let t = Math.sqrt(r * r - h * h);
            // 
            this.line.calc();
            let e = this.line.e;
            // 
            let positionA = foot.add(e.mul(t));
            let positionB = foot.add(e.mul(-t));
            this.pointA.setPosition(positionA);
            this.pointB.setPosition(positionB);
        }
        draw() {
        }
        reading() {
            if (this.arc instanceof plane_ts.Circle) {
                return new Reading(this, plane_ts.TT('Find the intersection of the circle and the line.'), []);
            }
            else if (this.arc instanceof plane_ts.Arc) {
                return new Reading(this, plane_ts.TT('Find the intersection of the arc and the line.'), []);
            }
            else {
                throw new plane_ts.MyError();
            }
        }
        setRelations() {
            super.setRelations();
            plane_ts.addPointOnLines(this.pointA, this.line);
            plane_ts.addPointOnLines(this.pointB, this.line);
            plane_ts.addPointOnCircleArcs(this.pointA, this.arc);
            plane_ts.addPointOnCircleArcs(this.pointB, this.arc);
        }
    }
    plane_ts.LineArcIntersection = LineArcIntersection;
    class ArcArcIntersection extends plane_ts.Shape {
        arc1;
        arc2;
        pointA;
        pointB;
        constructor(obj) {
            super(obj);
            this.arc1 = obj.arc1;
            this.arc2 = obj.arc2;
            this.pointA = obj.pointA;
            this.pointB = obj.pointB;
            this.calc();
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                arc1: this.arc1.toObj(),
                arc2: this.arc2.toObj(),
                pointA: this.pointA.toObj(),
                pointB: this.pointB.toObj()
            });
            return obj;
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.pointA, this.pointB);
        }
        dependencies() {
            return [this.arc1, this.arc2];
        }
        setMode(mode) {
            this.pointA.setMode(mode);
            this.pointB.setMode(mode);
        }
        calc() {
            // /
            const c1 = this.arc1.center;
            const c2 = this.arc2.center;
            // /
            const r1 = this.arc1.radius();
            const r2 = this.arc2.radius();
            // /
            const L = c1.position.distance(c2.position);
            // r1*r1 - t*t = r2*r2 - (L - t)*(L - t)
            //             = r2*r2 - L*L + 2Lt - t*t
            // r1*r1 = r2*r2 - L*L + 2Lt
            const t = (r1 * r1 - r2 * r2 + L * L) / (2 * L);
            // //
            const h2 = r1 * r1 - t * t;
            if (h2 < 0) {
                throw new plane_ts.MyError();
            }
            const h = Math.sqrt(h2);
            // c1c2
            const e1 = c2.sub(c1).unit();
            // e1
            const e2 = new plane_ts.Vec2(-e1.y, e1.x);
            // //
            const foot = c1.position.add(e1.mul(t));
            // 
            let positionA = foot.add(e2.mul(h));
            let positionB = foot.add(e2.mul(-h));
            this.pointA.setPosition(positionA);
            this.pointB.setPosition(positionB);
        }
        draw() {
        }
        reading() {
            if (this.arc1 instanceof plane_ts.Circle && this.arc2 instanceof plane_ts.Circle) {
                return new Reading(this, plane_ts.TT('Find the intersection of two circles.'), []);
            }
            else if (this.arc1 instanceof plane_ts.Arc && this.arc2 instanceof plane_ts.Arc) {
                return new Reading(this, plane_ts.TT('Find the intersection of two arcs.'), []);
            }
            else {
                return new Reading(this, plane_ts.TT('Find the intersection of the circle and the arc.'), []);
            }
        }
        setRelations() {
            super.setRelations();
            plane_ts.addPointOnCircleArcs(this.pointA, this.arc1);
            plane_ts.addPointOnCircleArcs(this.pointB, this.arc1);
            plane_ts.addPointOnCircleArcs(this.pointA, this.arc2);
            plane_ts.addPointOnCircleArcs(this.pointB, this.arc2);
        }
    }
    plane_ts.ArcArcIntersection = ArcArcIntersection;
    class Tangent extends plane_ts.Shape {
    }
    plane_ts.Tangent = Tangent;
    class CircleCircleTangent extends Tangent {
        circle1;
        circle2;
        point;
        lines = [];
        constructor(obj) {
            super(obj);
            if (obj.circle1.radius() <= obj.circle2.radius()) {
                this.circle1 = obj.circle1;
                this.circle2 = obj.circle2;
            }
            else {
                this.circle1 = obj.circle2;
                this.circle2 = obj.circle1;
            }
            const data = obj;
            if (data.point != undefined) {
                this.point = data.point;
            }
            else {
                this.point = plane_ts.Point.zero();
            }
            if (data.lines != undefined) {
                this.lines = data.lines;
            }
            else {
                const line_a = plane_ts.makeLineSegment(plane_ts.Point.zero(), plane_ts.Point.zero());
                const line_b = plane_ts.makeLineSegment(plane_ts.Point.zero(), plane_ts.Point.zero());
                this.lines = [line_a, line_b];
            }
            this.calc();
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                circle1: this.circle1.toObj(),
                circle2: this.circle2.toObj(),
                point: this.point.toObj(),
                lines: this.lines.map(x => x.toObj())
            });
            return obj;
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.point);
            this.lines.forEach(line => line.getAllShapes(shapes));
        }
        dependencies() {
            return super.dependencies().concat([this.circle1, this.circle2]);
        }
        setMode(mode) {
            this.lines.forEach(x => x.setMode(mode));
        }
        draw() {
            this.point.draw();
            this.lines.forEach(x => x.draw());
        }
        calc() {
            const c1to2 = this.circle1.center.sub(this.circle2.center);
            const dist = c1to2.len();
            const radius1 = this.circle1.radius();
            const radius2 = this.circle2.radius();
            if (radius2 < dist + radius1) {
                const d = (radius1 / (radius2 - radius1)) * dist;
                const position = this.circle1.center.position.add(c1to2.unit().mul(d));
                this.point.setPosition(position);
                this.point.setName("");
                const tangent_positions_list = [];
                for (const circle of [this.circle1, this.circle2]) {
                    const tangent_positions = calcCirclePointTangent(circle.center.position, circle.radius(), position);
                    tangent_positions_list.push(...tangent_positions);
                }
                this.lines[0].pointA.setPosition(tangent_positions_list[0]);
                this.lines[0].pointB.setPosition(tangent_positions_list[2]);
                this.lines[1].pointA.setPosition(tangent_positions_list[1]);
                this.lines[1].pointB.setPosition(tangent_positions_list[3]);
            }
        }
        reading() {
            return new Reading(this, plane_ts.TT('Draw tangents to the two circles.'), []);
        }
    }
    plane_ts.CircleCircleTangent = CircleCircleTangent;
    function calcCirclePointTangent(center, radius, position) {
        const center_point_distance = center.distance(position);
        const tangent_point_distance = Math.sqrt(center_point_distance * center_point_distance - radius * radius);
        const [a, b, c] = [radius, tangent_point_distance, center_point_distance];
        const cos_theta = (b * b + c * c - a * a) / (2 * b * c);
        const theta = Math.acos(cos_theta);
        const pc = center.sub(position);
        const tangent_positions = [];
        for (const th of [theta, -theta]) {
            const v = pc.rot(th).unit().mul(tangent_point_distance);
            const tangent_position = position.add(v);
            tangent_positions.push(tangent_position);
        }
        return tangent_positions;
    }
    class CirclePointTangent extends Tangent {
        circle;
        point;
        tangentPoints = [];
        lines = [];
        constructor(obj) {
            super(obj);
            this.circle = obj.circle;
            this.point = obj.point;
            const data = obj;
            if (data.tangentPoints != undefined) {
                this.tangentPoints = data.tangentPoints;
            }
            else {
                this.tangentPoints = [plane_ts.Point.zero(), plane_ts.Point.zero()];
            }
            if (data.lines != undefined) {
                this.lines = data.lines;
            }
            else {
                const line_a = plane_ts.makeLineSegment(this.point, plane_ts.Point.zero());
                const line_b = plane_ts.makeLineSegment(this.point, plane_ts.Point.zero());
                this.lines = [line_a, line_b];
            }
            this.calc();
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                circle: this.circle.toObj(),
                point: this.point.toObj(),
                tangentPoints: this.tangentPoints.map(x => x.toObj()),
                lines: this.lines.map(x => x.toObj())
            });
            return obj;
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.circle, this.point, ...this.tangentPoints, ...this.lines);
        }
        dependencies() {
            return super.dependencies().concat([this.circle, this.point]);
        }
        setMode(mode) {
            this.tangentPoints.forEach(x => x.setMode(mode));
            this.lines.forEach(x => x.setMode(mode));
        }
        draw() {
            this.tangentPoints.forEach(x => x.draw());
            this.lines.forEach(x => x.draw());
        }
        calc() {
            const tangent_positions = calcCirclePointTangent(this.circle.center.position, this.circle.radius(), this.point.position);
            for (const [i, position] of tangent_positions.entries()) {
                this.tangentPoints[i].setPosition(position);
                this.lines[i].pointB.setPosition(position);
            }
        }
        reading() {
            return new Reading(this, plane_ts.TT('Draw a tangent line from the point to the circle.'), [this.point].concat(this.tangentPoints));
        }
    }
    plane_ts.CirclePointTangent = CirclePointTangent;
    class AngleBisector extends plane_ts.AbstractLine {
        lineA;
        directionA;
        lineB;
        directionB;
        constructor(obj) {
            obj.pointA = plane_ts.getCommonPointOfLines(obj.lineA, obj.lineB);
            super(obj);
            this.lineA = obj.lineA;
            this.directionA = obj.directionA;
            this.lineB = obj.lineB;
            this.directionB = obj.directionB;
            this.calc();
        }
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                lineA: this.lineA.toObj(),
                directionA: this.directionA,
                lineB: this.lineB.toObj(),
                directionB: this.directionB
            });
            return obj;
        }
        dependencies() {
            return [this.lineA, this.lineB];
        }
        calc() {
            this.e = this.lineA.e.mul(this.directionA).add(this.lineB.e.mul(this.directionB)).mul(0.5);
        }
        reading() {
            return this.textReading(plane_ts.TT("Draw the angle bisector."));
        }
    }
    plane_ts.AngleBisector = AngleBisector;
    class PropertyChange {
        widget;
        propertyName;
        oldValue;
        newValue;
        constructor(obj) {
            this.widget = obj.widget;
            this.propertyName = obj.propertyName;
            this.oldValue = obj.oldValue;
            this.newValue = obj.newValue;
        }
        makeObj() {
            return {
                typeName: this.constructor.name,
                widget: this.widget.toObj(),
                propertyName: this.propertyName,
                oldValue: plane_ts.anyToObj(this.oldValue),
                newValue: plane_ts.anyToObj(this.newValue)
            };
        }
        restore() {
            plane_ts.setProperty(this.widget, this.propertyName, this.oldValue);
        }
    }
    plane_ts.PropertyChange = PropertyChange;
    class Motion extends plane_ts.MathEntity {
        propertyChanges = [];
        constructor(obj) {
            super(obj);
            this.propertyChanges = obj.propertyChanges;
        }
        makeObj() {
            return Object.assign(super.makeObj(), {
                propertyChanges: this.propertyChanges.map(x => x.makeObj()),
            });
        }
        addPropertyChange(widget, propertyName, oldValue, newValue) {
            plane_ts.msg(`add Property Change ${propertyName} ${oldValue}=>${newValue}`);
            this.propertyChanges.push(new PropertyChange({ widget, propertyName, oldValue, newValue }));
        }
        reading() {
            throw new plane_ts.MyError();
        }
        async animate(speech) {
            const startTime = Date.now();
            while (true) {
                const endTime = Date.now();
                let rate = (endTime - startTime) / 3000;
                if (plane_ts.getPlayMode() == plane_ts.PlayMode.fastForward) {
                    rate *= 3;
                }
                if (1 < rate) {
                    break;
                }
                for (const property_change of this.propertyChanges) {
                    if (property_change.widget instanceof plane_ts.Point && property_change.propertyName == "position") {
                        const point = property_change.widget;
                        const midway_position = plane_ts.Vec2.interpolate(property_change.oldValue, property_change.newValue, rate);
                        point.setPosition(midway_position);
                    }
                }
                plane_ts.View.current.dirty = true;
                plane_ts.View.current.updateShapes();
                await plane_ts.sleep(10);
            }
        }
        restorePropertyChanges() {
            this.propertyChanges.reverse().forEach(x => x.restore());
        }
    }
    plane_ts.Motion = Motion;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    plane_ts.PlayMode = i18n_ts.PlayMode;
    plane_ts.setPlayMode = i18n_ts.setPlayMode;
    plane_ts.getPlayMode = i18n_ts.getPlayMode;
    plane_ts.AbstractSpeech = i18n_ts.AbstractSpeech;
    plane_ts.sleep = i18n_ts.sleep;
    plane_ts.sum = i18n_ts.sum;
    plane_ts.list = i18n_ts.list;
    plane_ts.intersection = i18n_ts.intersection;
    plane_ts.permutation = i18n_ts.permutation;
    plane_ts.circularPermutation = i18n_ts.circularPermutation;
    plane_ts.areSetsEqual = i18n_ts.areSetsEqual;
    plane_ts.isSubSet = i18n_ts.isSubSet;
    plane_ts.check = i18n_ts.check;
    plane_ts.remove = i18n_ts.remove;
    plane_ts.Speech = i18n_ts.Speech;
    plane_ts.renderKatexSub = parser_ts.renderKatexSub;
    plane_ts.operator = parser_ts.operator;
    class T1 {
        set;
        value;
        constructor(set, value) {
            this.set = set;
            this.value = value;
        }
    }
    class T2 {
        array;
        value;
        constructor(array, value) {
            this.array = array;
            this.value = value;
        }
    }
    class T3 {
        array;
        value;
        index;
        constructor(array, value, index) {
            this.array = array;
            this.value = value;
            this.index = index;
        }
    }
    class T4 {
        map;
        key;
        value;
        constructor(map, key, value) {
            this.map = map;
            this.key = key;
            this.value = value;
        }
    }
    class UndoData {
        operations = [];
        shapes = [];
        relationLogs = [];
        historyUIs = [];
    }
    plane_ts.UndoData = UndoData;
    function undoRelations(relationLogs) {
        for (const x of relationLogs.slice().reverse()) {
            if (x instanceof T1) {
                assert(x.set.has(x.value));
                x.set.delete(x.value);
            }
            else if (x instanceof T2) {
                assert(x.array.includes(x.value));
                plane_ts.remove(x.array, x.value);
            }
            else if (x instanceof T3) {
                x.array.splice(x.index, 0, x.value);
            }
            else if (x instanceof T4) {
                assert(x.map.get(x.key) == x.value);
                x.map.delete(x.key);
            }
            else {
                throw new MyError();
            }
        }
    }
    plane_ts.undoRelations = undoRelations;
    function redoRelations(relationLogs) {
        for (const x of relationLogs) {
            if (x instanceof T1) {
                assert(!x.set.has(x.value));
                x.set.add(x.value);
            }
            else if (x instanceof T2) {
                assert(!x.array.includes(x.value));
                x.array.push(x.value);
            }
            else if (x instanceof T3) {
                plane_ts.remove(x.array, x.value);
            }
            else if (x instanceof T4) {
                assert(!x.map.has(x.key));
                x.map.set(x.key, x.value);
            }
            else {
                throw new MyError();
            }
            plane_ts.View.current.relationLogs.push(x);
        }
    }
    plane_ts.redoRelations = redoRelations;
    class MySet {
        data = new Set();
        constructor(data = []) {
            this.data = new Set(data);
        }
        clear() {
            this.data.clear();
        }
        add(value) {
            if (!this.data.has(value)) {
                this.data.add(value);
                plane_ts.View.current.relationLogs.push(new T1(this.data, value));
            }
        }
        has(item) {
            return this.data.has(item);
        }
        values() {
            return this.data.values();
        }
        forEach(callback, thisArg) {
            this.data.forEach(callback, thisArg);
        }
        toArray() {
            return Array.from(this.data);
        }
        [Symbol.iterator]() {
            return this.data.values();
        }
    }
    plane_ts.MySet = MySet;
    class MyArray {
        data = [];
        constructor(initialData = []) {
            this.data = initialData;
        }
        clear() {
            this.data = [];
        }
        filter(callback) {
            const filteredArray = this.data.filter(callback);
            return new MyArray(filteredArray);
        }
        toArray() {
            return this.data;
        }
        some(fnc) {
            return this.data.some(fnc);
        }
        find(fnc) {
            return this.data.find(fnc);
        }
        push(value) {
            this.data.push(value);
            plane_ts.View.current.relationLogs.push(new T2(this.data, value));
        }
        flat() {
            return this.data.flat();
        }
        [Symbol.iterator]() {
            let index = 0;
            const array = this.data;
            return {
                next() {
                    if (index < array.length) {
                        return { value: array[index++], done: false };
                    }
                    else {
                        return { value: undefined, done: true };
                    }
                },
            };
        }
        remove(x) {
            const index = this.data.indexOf(x);
            if (index == -1) {
                throw new MyError();
            }
            else {
                this.data.splice(index, 1);
                const value = this.data[index];
                plane_ts.View.current.relationLogs.push(new T3(this.data, value, index));
            }
        }
    }
    plane_ts.MyArray = MyArray;
    class MyMap {
        map = new Map();
        constructor() { }
        set(key, value) {
            if (!this.map.has(key)) {
                this.map.set(key, value);
                plane_ts.View.current.relationLogs.push(new T4(this.map, key, value));
            }
        }
        get(key) {
            return this.map.get(key);
        }
        clear() {
            this.map.clear();
        }
        entries() {
            return this.map.entries();
        }
        keys() {
            return this.map.keys();
        }
        values() {
            return this.map.values();
        }
    }
    plane_ts.MyMap = MyMap;
    function Mylist(set) {
        if (set == undefined) {
            return [];
        }
        else {
            return set.toArray();
        }
    }
    plane_ts.Mylist = Mylist;
    function MyIntersection(set1, set2) {
        if (set1 == undefined || set2 == undefined) {
            return [];
        }
        return Array.from(set1.values()).filter(x => set2.has(x));
    }
    plane_ts.MyIntersection = MyIntersection;
    const $dic = new Map();
    function $(id) {
        let ele = $dic.get(id);
        if (ele == undefined) {
            ele = document.getElementById(id);
            $dic.set(id, ele);
        }
        return ele;
    }
    plane_ts.$ = $;
    function $div(id) {
        return $(id);
    }
    plane_ts.$div = $div;
    function $inp(id) {
        return $(id);
    }
    plane_ts.$inp = $inp;
    function $dlg(id) {
        return $(id);
    }
    plane_ts.$dlg = $dlg;
    function $sel(id) {
        return $(id);
    }
    plane_ts.$sel = $sel;
    // Define a function that returns a Promise
    async function waitForClick(element) {
        return new Promise((resolve) => {
            const clickHandler = (ev) => {
                element.removeEventListener('click', clickHandler);
                const target = ev.target;
                let result_value = NaN;
                if (target.className == plane_ts.enumSelectionClassName) {
                    result_value = parseInt(target.dataset.operation_value);
                }
                resolve(result_value);
            };
            element.addEventListener('click', clickHandler);
        });
    }
    plane_ts.waitForClick = waitForClick;
    async function showMenu(dlgType) {
        const dlg = plane_ts.menuDialogs.get(dlgType);
        assert(dlg != undefined);
        dlg.showModal();
        let value;
        if (plane_ts.View.isPlayBack) {
            const operation = plane_ts.playBackOperations.next();
            // msg(`show Menu:${operation.dump()}`);
            plane_ts.View.current.addOperation(operation);
            if (operation instanceof plane_ts.EnumSelection) {
                const items = Array.from(dlg.html().getElementsByClassName(plane_ts.enumSelectionClassName));
                const enum_value = `${operation.value}`;
                const item = items.find(x => x.dataset.operation_value == enum_value);
                assert(item != undefined);
                await plane_ts.movePointerAndHighlight(item);
                value = operation.value;
            }
            else {
                throw new MyError();
            }
        }
        else {
            value = await waitForClick(dlg.html());
            plane_ts.View.current.addOperation(new plane_ts.EnumSelection(value));
        }
        dlg.close();
        return value;
    }
    plane_ts.showMenu = showMenu;
    class MyError extends Error {
        constructor(text = "") {
            super(text);
        }
    }
    plane_ts.MyError = MyError;
    function assert(b, msg = "") {
        if (!b) {
            throw new MyError(msg);
        }
    }
    plane_ts.assert = assert;
    function msg(txt) {
        layout_ts.Log.log(txt);
    }
    plane_ts.msg = msg;
    function range(n) {
        return [...Array(n).keys()];
    }
    plane_ts.range = range;
    function last(v) {
        return v[v.length - 1];
    }
    plane_ts.last = last;
    function unique(v) {
        let set = new Set();
        const ret = [];
        for (const x of v) {
            if (!set.has(x)) {
                set.add(x);
                ret.push(x);
            }
        }
        return ret;
    }
    plane_ts.unique = unique;
    function average(v) {
        return plane_ts.sum(v) / v.length;
    }
    plane_ts.average = average;
    async function fetchText(fileURL) {
        const response = await fetch(fileURL);
        const text = await response.text();
        return text;
    }
    plane_ts.fetchText = fetchText;
    function pseudoColor(n) {
        n = Math.max(0, Math.min(1, n));
        let r, g, b;
        if (n < 0.25) {
            b = 1;
            g = n * 4;
            r = 0;
        }
        else if (n < 0.5) {
            b = (0.5 - n) * 4;
            g = 1;
            r = 0;
        }
        else if (n < 0.75) {
            b = 0;
            g = 1;
            r = (n - 0.5) * 4;
        }
        else {
            b = 0;
            g = (1 - n) * 4;
            r = 1;
        }
        return [r, g, b];
    }
    plane_ts.pseudoColor = pseudoColor;
    function toRadian(degree) {
        return degree * Math.PI / 180;
    }
    plane_ts.toRadian = toRadian;
    function toDegree(radian) {
        return radian * 180 / Math.PI;
    }
    plane_ts.toDegree = toDegree;
    function inRange(start, theta, end) {
        const f = (x) => { return 0 <= x ? x : 180 + x; };
        [start, theta, end] = [f(start), f(theta), f(end)];
        [theta, end] = [theta - start, end - start];
        const g = (x) => { return 0 <= x ? x : 360 + x; };
        [theta, end] = [g(theta), g(end)];
        assert(0 <= theta && 0 <= end);
        return theta <= end;
    }
    plane_ts.inRange = inRange;
    function linear(src_min, src_val, src_max, dst_min, dst_max) {
        const ratio = (src_val - src_min) / (src_max - src_min);
        const dst_val = dst_min + ratio * (dst_max - dst_min);
        return dst_val;
    }
    plane_ts.linear = linear;
    function MinMaxXY(p1, p2) {
        const min_x = Math.min(p1.x, p2.x);
        const min_y = Math.min(p1.y, p2.y);
        const max_x = Math.max(p1.x, p2.x);
        const max_y = Math.max(p1.y, p2.y);
        return [min_x, min_y, max_x, max_y];
    }
    plane_ts.MinMaxXY = MinMaxXY;
    function pairKey(a, b) {
        return a.id <= b.id ? `${a.id}:${b.id}` : `${b.id}:${a.id}`;
    }
    plane_ts.pairKey = pairKey;
    async function sleepInFastForward(milliseconds) {
        return new Promise((resolve) => {
            setTimeout(() => {
                resolve();
            }, milliseconds);
        });
    }
    plane_ts.sleepInFastForward = sleepInFastForward;
    function normalizeAngle(theta) {
        return 0 <= theta ? theta : theta + 2 * Math.PI;
    }
    function isBetweenAngles(start, theta, end) {
        theta = normalizeAngle(theta - start);
        end = normalizeAngle(end - start);
        assert(0 <= theta && 0 <= end);
        return theta <= end;
    }
    plane_ts.isBetweenAngles = isBetweenAngles;
    function makeName() {
        const points = plane_ts.View.current.allRealShapes().filter(x => x instanceof plane_ts.Point).concat(plane_ts.Point.tempPoints);
        const upper_latin_letters = i18n_ts.upperLatinLetters;
        const idxes = points.map(x => upper_latin_letters.indexOf(x.name));
        let name;
        if (idxes.length == 0) {
            name = upper_latin_letters[0];
        }
        else {
            const max_idx = Math.max(...idxes);
            if (max_idx == -1) {
                name = upper_latin_letters[0];
            }
            else if (max_idx + 1 < upper_latin_letters.length) {
                name = upper_latin_letters[max_idx + 1];
            }
            else {
                throw new MyError();
            }
        }
    }
    function setterName(name) {
        return "set" + name[0].toUpperCase() + name.substring(1);
    }
    function setProperty(obj, property_name, newValue) {
        const setter_name = setterName(property_name);
        if (obj[setter_name] != undefined) {
            obj[setter_name](newValue);
        }
        else {
            obj[property_name] = newValue;
        }
    }
    plane_ts.setProperty = setProperty;
    function anyToObj(obj) {
        if (Array.isArray(obj)) {
            return obj.map(x => anyToObj(x));
        }
        else if (obj instanceof plane_ts.Widget) {
            return obj.toObj();
        }
        else {
            return obj;
        }
    }
    plane_ts.anyToObj = anyToObj;
    function isClockwise(points) {
        assert(points.length == 3);
        const [A, B, C] = points.map(x => x.position);
        const AB = B.sub(A);
        const AC = C.sub(A);
        const cross_product = AB.cross(AC);
        assert(cross_product != 0);
        return 0 < cross_product;
    }
    plane_ts.isClockwise = isClockwise;
    function toClockwisePoints(points) {
        if (points.length == 3) {
            if (isClockwise(points)) {
                return points.slice();
            }
            else {
                return [2, 1, 0].map(i => points[i]);
            }
        }
        if (points.length != 4) {
            throw new MyError();
        }
        const [p1, p2, p3] = toClockwisePoints(points.slice(0, 3));
        const p4 = points[3];
        if (isClockwise([p1, p4, p2])) {
            return [p1, p4, p2, p3];
        }
        else if (isClockwise([p2, p4, p3])) {
            return [p1, p2, p4, p3];
        }
        else if (isClockwise([p3, p4, p1])) {
            return [p3, p4, p1, p2];
        }
        else {
            throw new MyError();
        }
    }
    plane_ts.toClockwisePoints = toClockwisePoints;
    let reasonMsgMap;
    function makeReasonMsgMap() {
        return new Map([
            [plane_ts.TriangleCongruenceReason.side_side_side, plane_ts.TT("Since three pairs of sides of two triangles are equal,")],
            [plane_ts.TriangleCongruenceReason.side_angle_side, plane_ts.TT("Since two pairs of sides of two triangles are equal, and the included angles are equal,")],
            [plane_ts.TriangleCongruenceReason.angle_side_angle, plane_ts.TT("Since two pairs of angles of two triangles are equal, and the included sides are equal,")],
            [plane_ts.ShapeEquationReason.sum_of_angles_is_pi, plane_ts.TT("Since the sum of the angles is ,")],
            [plane_ts.ShapeEquationReason.sum_of_angles_is_equal, plane_ts.TT("Since the sum of the angles is equal,")],
            [plane_ts.ShapeEquationReason.sum_of_lengths_is_equal, plane_ts.TT("Since the sum of the lengths is equal,")],
            [plane_ts.ShapeEquationReason.sum_of_interior_angles_of_triangle_is_pi, plane_ts.TT("Since the sum of the interior angles of a triangle is ,")],
            [plane_ts.ShapeEquationReason.sum_of_interior_angles_of_quadrilateral_is_2pi, plane_ts.TT("Since the sum of the interior angles of a quadrilateral is 2 ,")],
            [plane_ts.ShapeEquationReason.exterior_angle_theorem, plane_ts.TT("Since the exterior angle of a triangle equals the sum of two remote interior angles,")],
            [plane_ts.LengthEqualityReason.radii_equal, plane_ts.TT("Since the two circles have the same radius,")],
            [plane_ts.LengthEqualityReason.common_circle, plane_ts.TT("Since two length symbols are the radii of the same circle,")],
            [plane_ts.LengthEqualityReason.parallel_lines_distance, plane_ts.TT("Since the distance between two parallel lines is constant,")],
            [plane_ts.LengthEqualityReason.not_used, plane_ts.TT("Since the two circles have the same radius,")],
            [plane_ts.LengthEqualityReason.congruent_triangles, plane_ts.TT("Since the two triangles are congruent,")],
            [plane_ts.LengthEqualityReason.parallelogram_opposite_sides, plane_ts.TT("Since the opposite sides of a parallelogram are equal in length,")],
            [plane_ts.LengthEqualityReason.parallelogram_diagonal_bisection, plane_ts.TT("Since the diagonals of a parallelogram intersect at the midpoint,")],
            [plane_ts.LengthEqualityReason.equivalence_class, plane_ts.TT("Since these two length symbols are equal to another length symbol,")],
            [plane_ts.LengthEqualityReason.midpoint, plane_ts.TT("Since the midpoint bisects the line segment,")],
            [plane_ts.AngleEqualityReason.vertical_angles, plane_ts.TT("Since vertical angles are equal,")],
            [plane_ts.AngleEqualityReason.parallel_line_angles, plane_ts.TT("Since the corresponding angles of parallel lines are equal,")],
            [plane_ts.AngleEqualityReason.angle_bisector, plane_ts.TT("Since these angles are formed by the angle bisectors,")],
            [plane_ts.AngleEqualityReason.congruent_triangles, plane_ts.TT("Since the two triangles are congruent,")],
            [plane_ts.AngleEqualityReason.parallelogram_opposite_angles, plane_ts.TT("Since the diagonals of a parallelogram are congruent,")],
            [plane_ts.AngleEqualityReason.similar_triangles, plane_ts.TT("Since the two triangles are similar,")],
            [plane_ts.AngleEqualityReason.isosceles_triangle_base_angles, plane_ts.TT("Since the base angles of an isosceles triangle are equal,")],
            [plane_ts.ParallelogramReason.each_opposite_sides_are_equal, plane_ts.TT("Since each opposite sides are equal,")],
            [plane_ts.ParallelogramReason.each_opposite_sides_are_parallel, plane_ts.TT("Since each opposite sides are parallel,")],
            [plane_ts.ParallelogramReason.each_opposite_angles_are_equal, plane_ts.TT("Since each opposite angles are equal,")],
            [plane_ts.ParallelogramReason.one_opposite_sides_are_parallel_and_equal, plane_ts.TT("Since one opposite sides are parallel and equal,")],
            [plane_ts.ParallelogramReason.each_diagonal_bisections, plane_ts.TT("Since the diagonals intersect at their midpoints,")],
            [plane_ts.RhombusReason.all_sides_are_equal, plane_ts.TT("Since all four sides are equal in length,")],
            [plane_ts.IsoscelesTriangleReason.two_sides_are_equal, plane_ts.TT("Since two sides are equal in length,")],
            [plane_ts.ParallelReason.parallelogram, plane_ts.TT("Since the opposite sides of a parallelogram are parallel,")],
            [plane_ts.ParallelReason.corresponding_angles_or_alternate_angles_are_equal, plane_ts.TT("Since corresponding angles or alternate angles are equal,")],
            [plane_ts.ParallelReason.supplementary_angles, plane_ts.TT("Since the sum of the two interior angles on the same side is ,")],
            [plane_ts.TriangleSimilarityReason.two_equal_angle_pairs, plane_ts.TT("Since both pairs of angles in two triangles are equal,")],
            [plane_ts.ExprTransformReason.transposition, plane_ts.TT("Transpose the term.")],
            [plane_ts.ExprTransformReason.equality, plane_ts.TT("From the above equations,")],
            [plane_ts.ExprTransformReason.add_equation, plane_ts.TT("Add two equations together.")],
            [plane_ts.ExprTransformReason.substitution, plane_ts.TT("Substitute the term.")],
            [plane_ts.ExprTransformReason.dividing_equation, plane_ts.TT("Dividing an equation by the same term.")],
            [plane_ts.ExprTransformReason.arg_shift, plane_ts.TT("Shift the argument.")],
            [0, plane_ts.TT("no reason")],
        ]);
    }
    function reasonMsg(reason) {
        if (reasonMsgMap == undefined) {
            reasonMsgMap = makeReasonMsgMap();
        }
        const text = reasonMsgMap.get(reason);
        if (text != undefined) {
            return text;
        }
        throw new MyError();
    }
    plane_ts.reasonMsg = reasonMsg;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    //
    function makeTriangleCongruence(A, B) {
        const sidesA = plane_ts.range(3).map(i => [A.points[i], A.points[(i + 1) % 3]]);
        const sidesB = plane_ts.range(3).map(i => [B.points[i], B.points[(i + 1) % 3]]);
        const auxiliaryShapes = [];
        const equal_side = [false, false, false];
        for (const idx of plane_ts.range(3)) {
            const sideA = sidesA[idx];
            const sideB = sidesB[idx];
            const keyA = plane_ts.pairKey(sideA[0], sideA[1]);
            const keyB = plane_ts.pairKey(sideB[0], sideB[1]);
            const lengthSymbolA = plane_ts.pointsToLengthSymbol.get(keyA);
            const lengthSymbolB = plane_ts.pointsToLengthSymbol.get(keyB);
            if (lengthSymbolA != undefined && lengthSymbolB != undefined) {
                if (plane_ts.isEqualLength(lengthSymbolA, lengthSymbolB)) {
                    auxiliaryShapes.push(lengthSymbolA, lengthSymbolB);
                    equal_side[idx] = true;
                }
            }
        }
        const equal_side_count = equal_side.filter(x => x).length;
        // msg(`equal side count:${equal_side_count}`);
        if (equal_side_count == 3) {
            return new TriangleCongruence({ shapes: [A, B], reason: plane_ts.TriangleCongruenceReason.side_side_side, auxiliaryShapes: auxiliaryShapes });
        }
        else if (equal_side_count == 2) {
            const idx = equal_side.indexOf(false);
            const angle_pointsA = [A.points[(idx + 1) % 3], A.points[(idx + 2) % 3], A.points[idx]];
            const angle_pointsB = [B.points[(idx + 1) % 3], B.points[(idx + 2) % 3], B.points[idx]];
            const angleA = plane_ts.findAngle(angle_pointsA);
            const angleB = plane_ts.findAngle(angle_pointsB);
            if (angleA != undefined && angleB != undefined && plane_ts.isEqualAngle(angleA, angleB)) {
                auxiliaryShapes.push(angleA, angleB);
                return new TriangleCongruence({ shapes: [A, B], reason: plane_ts.TriangleCongruenceReason.side_angle_side, auxiliaryShapes: auxiliaryShapes });
            }
        }
        else if (equal_side_count == 1) {
            const eq_idx = equal_side.indexOf(true);
            for (const idx of [eq_idx, (eq_idx + 2) % 3]) {
                const angle_pointsA = [A.points[idx], A.points[(idx + 1) % 3], A.points[(idx + 2) % 3]];
                const angle_pointsB = [B.points[idx], B.points[(idx + 1) % 3], B.points[(idx + 2) % 3]];
                const angleA = plane_ts.findAngle(angle_pointsA);
                if (angleA == undefined) {
                    return undefined;
                }
                const angleB = plane_ts.findAngle(angle_pointsB);
                if (angleB == undefined) {
                    return undefined;
                }
                if (plane_ts.isEqualAngle(angleA, angleB)) {
                    auxiliaryShapes.push(angleA, angleB);
                }
                else {
                    return undefined;
                }
            }
            return new TriangleCongruence({ shapes: [A, B], reason: plane_ts.TriangleCongruenceReason.angle_side_angle, auxiliaryShapes: auxiliaryShapes });
        }
        return undefined;
    }
    plane_ts.makeTriangleCongruence = makeTriangleCongruence;
    class TriangleCongruence extends plane_ts.Statement {
        constructor(obj) {
            super(obj);
        }
        reading() {
            return this.textReading(plane_ts.TT("the two triangles are congruent."));
        }
        setRelations() {
            super.setRelations();
            const triangles = this.selectedShapes;
            plane_ts.addCongruentTriangles(triangles[0], triangles[1]);
        }
    }
    plane_ts.TriangleCongruence = TriangleCongruence;
})(plane_ts || (plane_ts = {}));
///<reference path="plane_util.ts" />
///<reference path="statement.ts" />
///<reference path="deduction/triangle_congruence.ts" />
var plane_ts;
(function (plane_ts) {
    //
    let perpendicularPairs = new plane_ts.MyArray();
    plane_ts.supplementaryAngles = new plane_ts.MyArray();
    plane_ts.rightAngles = new plane_ts.MySet();
    plane_ts.pointsToLengthSymbol = new plane_ts.MyMap();
    plane_ts.centerOfCircleArcs = new plane_ts.MyMap();
    plane_ts.pointOnCircleArcs = new plane_ts.MyMap();
    plane_ts.pointOnLines = new plane_ts.MyMap();
    plane_ts.angleMap = new plane_ts.MyMap();
    plane_ts.parallelogramClassifiers = new plane_ts.MySet();
    plane_ts.equalLengths = new plane_ts.MyArray();
    plane_ts.equalCircleArcs = new plane_ts.MyArray();
    plane_ts.congruentTriangles = new plane_ts.MyArray();
    plane_ts.similarTriangles = new plane_ts.MyArray();
    plane_ts.isoscelesTriangle = new plane_ts.MyArray();
    plane_ts.propositions = new plane_ts.MyArray();
    plane_ts.reasonToDoc = new Map([
        [plane_ts.ShapeEquationReason.sum_of_interior_angles_of_triangle_is_pi, 18],
        [plane_ts.ShapeEquationReason.sum_of_interior_angles_of_quadrilateral_is_2pi, 21],
        [plane_ts.ShapeEquationReason.sum_of_interior_angles_of_quadrilateral_is_2pi, 23],
        [plane_ts.AngleEqualityReason.vertical_angles, 17],
        [plane_ts.AngleEqualityReason.parallelogram_opposite_angles, 10],
        [plane_ts.AngleEqualityReason.angle_bisector, 2],
        [plane_ts.AngleEqualityReason.isosceles_triangle_base_angles, 3],
        [plane_ts.LengthEqualityReason.parallel_lines_distance, 16],
        [plane_ts.LengthEqualityReason.parallelogram_opposite_sides, 10],
        [plane_ts.LengthEqualityReason.parallelogram_diagonal_bisection, 11],
        [plane_ts.ParallelogramReason.each_opposite_sides_are_equal, 1],
        [plane_ts.ParallelogramReason.each_opposite_angles_are_equal, 22],
        [plane_ts.ParallelogramReason.one_opposite_sides_are_parallel_and_equal, 12],
        [plane_ts.ParallelogramReason.each_diagonal_bisections, 9],
    ]);
    plane_ts.usedReasons = new Set();
    function addMySetMap(a, b, map) {
        let set = map.get(a);
        if (set == undefined) {
            set = new plane_ts.MySet();
            map.set(a, set);
        }
        set.add(b);
    }
    function addSetMap(a, b, map) {
        let set = map.get(a);
        if (set == undefined) {
            set = new plane_ts.MySet();
            map.set(a, set);
        }
        set.add(b);
    }
    function initRelations() {
        perpendicularPairs.clear();
        plane_ts.supplementaryAngles.clear();
        plane_ts.rightAngles.clear();
        plane_ts.pointsToLengthSymbol.clear();
        plane_ts.centerOfCircleArcs.clear();
        plane_ts.pointOnCircleArcs.clear();
        plane_ts.pointOnLines.clear();
        plane_ts.angleMap.clear();
        plane_ts.parallelogramClassifiers.clear();
        plane_ts.equalLengths.clear();
        plane_ts.equalCircleArcs.clear();
        plane_ts.congruentTriangles.clear();
        plane_ts.similarTriangles.clear();
        plane_ts.isoscelesTriangle.clear();
        plane_ts.propositions.clear();
        plane_ts.View.current.relationLogs = [];
    }
    plane_ts.initRelations = initRelations;
    function recalcRelations(view) {
        initRelations();
        view.shapes.forEach(x => x.setRelations());
    }
    plane_ts.recalcRelations = recalcRelations;
    function addCenterOfCircleArcs(point, circle) {
        addMySetMap(point, circle, plane_ts.centerOfCircleArcs);
        plane_ts.assert(plane_ts.centerOfCircleArcs.get(point) != undefined);
    }
    plane_ts.addCenterOfCircleArcs = addCenterOfCircleArcs;
    function addPointOnCircleArcs(point, circle) {
        addMySetMap(point, circle, plane_ts.pointOnCircleArcs);
        plane_ts.assert(plane_ts.pointOnCircleArcs.get(point) != undefined);
    }
    plane_ts.addPointOnCircleArcs = addPointOnCircleArcs;
    function addPointOnLines(point, line) {
        addMySetMap(point, line, plane_ts.pointOnLines);
        // msg(`add-Point-On-Lines point${point.id} line:${line.id}`);
        plane_ts.assert(plane_ts.pointOnLines.get(point) != undefined);
    }
    plane_ts.addPointOnLines = addPointOnLines;
    function getLinesByPoint(point) {
        const lines = plane_ts.pointOnLines.get(point);
        if (lines == undefined) {
            return [];
        }
        else {
            return lines.toArray();
        }
    }
    plane_ts.getLinesByPoint = getLinesByPoint;
    function getCircleArcsByPoint(point) {
        const circles = plane_ts.pointOnCircleArcs.get(point);
        if (circles == undefined) {
            return [];
        }
        else {
            return circles.toArray();
        }
    }
    plane_ts.getCircleArcsByPoint = getCircleArcsByPoint;
    //------------------------------------------------------------ perpendicular / parallel lines
    function addPerpendicularPairs(line1, line2) {
        if (perpendicularPairs.some(x => x[0].has(line1) && x[1].has(line2) || x[0].has(line2) && x[1].has(line1))) {
            return;
        }
        const pair = perpendicularPairs.find(x => x[0].has(line1) || x[0].has(line2) || x[1].has(line1) || x[1].has(line2));
        if (pair != undefined) {
            const lines = [line1, line2];
            for (const [i, line_set] of pair.entries()) {
                for (const [j, line] of lines.entries()) {
                    if (line_set.has(line)) {
                        pair[1 - i].add(lines[1 - j]);
                        return;
                    }
                }
            }
        }
        perpendicularPairs.push([new plane_ts.MySet([line1]), new plane_ts.MySet([line2])]);
    }
    plane_ts.addPerpendicularPairs = addPerpendicularPairs;
    function addParallelLines(line1, line2) {
        const line_sets = perpendicularPairs.flat().filter(x => x.has(line1) || x.has(line2));
        let line_set;
        switch (line_sets.length) {
            case 0:
                line_set = new plane_ts.MySet();
                perpendicularPairs.push([line_set, new plane_ts.MySet()]);
                break;
            case 1:
                line_set = line_sets[0];
                break;
            default:
                throw new plane_ts.MyError();
        }
        line_set.add(line1);
        line_set.add(line2);
    }
    plane_ts.addParallelLines = addParallelLines;
    function getPerpendicularLines(line) {
        for (const [lines1, lines2] of perpendicularPairs) {
            if (lines1.has(line)) {
                return lines2;
            }
            else if (lines2.has(line)) {
                return lines1;
            }
        }
        return undefined;
    }
    plane_ts.getPerpendicularLines = getPerpendicularLines;
    function getParallelLines(line) {
        return perpendicularPairs.flat().find(x => x.has(line));
    }
    plane_ts.getParallelLines = getParallelLines;
    function isParallel(lineA, lineB) {
        const line_set = getParallelLines(lineA);
        return line_set != undefined && line_set.has(lineB);
    }
    plane_ts.isParallel = isParallel;
    function isPerpendicular(lineA, lineB) {
        const perpendicular_lines = getPerpendicularLines(lineA);
        if (perpendicular_lines == undefined) {
            return false;
        }
        else {
            return perpendicular_lines.has(lineB);
        }
    }
    plane_ts.isPerpendicular = isPerpendicular;
    function areEqualCircleArcs(circle1, circle2) {
        if (circle1 == circle2) {
            return true;
        }
        const circle_set1 = plane_ts.equalCircleArcs.find(x => x.has(circle1));
        const circle_set2 = plane_ts.equalCircleArcs.find(x => x.has(circle2));
        return circle_set1 != undefined && circle_set1 == circle_set2;
    }
    plane_ts.areEqualCircleArcs = areEqualCircleArcs;
    function addEqualCircleArcs(circle1, circle2) {
        const circle_set1 = plane_ts.equalCircleArcs.find(x => x.has(circle1));
        const circle_set2 = plane_ts.equalCircleArcs.find(x => x.has(circle2));
        if (circle_set1 != undefined) {
            if (circle_set2 != undefined) {
                if (circle_set1 != circle_set2) {
                    plane_ts.Mylist(circle_set2).forEach(x => circle_set1.add(x));
                    plane_ts.equalCircleArcs.remove(circle_set2);
                }
            }
            else {
                circle_set1.add(circle2);
            }
        }
        else {
            if (circle_set2 != undefined) {
                circle_set2.add(circle1);
            }
            else {
                const new_set = new plane_ts.MySet([circle1, circle2]);
                plane_ts.equalCircleArcs.push(new_set);
            }
        }
    }
    plane_ts.addEqualCircleArcs = addEqualCircleArcs;
    function getCommonLineOfPoints(pointA, pointB) {
        const linesA = plane_ts.pointOnLines.get(pointA);
        const linesB = plane_ts.pointOnLines.get(pointB);
        if (linesA == undefined || linesB == undefined) {
            return undefined;
        }
        const common_lines = plane_ts.MyIntersection(linesA, linesB);
        switch (common_lines.length) {
            case 0: return undefined;
            case 1: return common_lines[0];
            default: throw new plane_ts.MyError();
        }
    }
    plane_ts.getCommonLineOfPoints = getCommonLineOfPoints;
    function getPointsFromLine(line) {
        const points = Array.from(plane_ts.pointOnLines.entries()).filter(x => x[1].has(line)).map(x => x[0]);
        return new Set(points);
    }
    plane_ts.getPointsFromLine = getPointsFromLine;
    function getCommonPointOfLines(lineA, lineB) {
        const pointsA = getPointsFromLine(lineA);
        const pointsB = getPointsFromLine(lineB);
        const common_points = plane_ts.intersection(pointsA, pointsB);
        if (common_points.length == 1) {
            return common_points[0];
        }
        return undefined;
    }
    plane_ts.getCommonPointOfLines = getCommonPointOfLines;
    function getLineFromPoints(lines, pointA, pointB) {
        return lines.find(x => x.includesPoint(pointA) && x.includesPoint(pointB));
    }
    plane_ts.getLineFromPoints = getLineFromPoints;
    function addCongruentSimilarTriangles(is_congruent, triangle1, triangle2) {
        if (!(triangle1 instanceof plane_ts.Triangle && triangle2 instanceof plane_ts.Triangle)) {
            plane_ts.msg("old Congruent Triangles");
            return;
        }
        const triangles_list = is_congruent ? plane_ts.congruentTriangles : plane_ts.similarTriangles;
        for (const triangles of triangles_list) {
            let equal_triangle1 = triangles.find(x => x.isEqual(triangle1));
            let equal_triangle2 = triangles.find(x => x.isEqual(triangle2));
            let indexes1;
            let indexes2;
            if (equal_triangle1 != undefined) {
                indexes1 = triangle1.points.map(p => equal_triangle1.points.indexOf(p));
            }
            if (equal_triangle2 != undefined) {
                indexes2 = triangle2.points.map(p => equal_triangle2.points.indexOf(p));
            }
            if (indexes1 != undefined) {
                if (indexes2 != undefined) {
                    if (plane_ts.range(3).every(i => indexes1[i] == indexes2[i])) {
                        return;
                    }
                    else {
                        throw new plane_ts.MyError();
                    }
                }
                else {
                    if (plane_ts.range(3).every(i => indexes1[i] == i)) {
                        triangles.push(triangle2);
                        return;
                    }
                    else {
                        throw new plane_ts.MyError();
                    }
                }
            }
            else if (indexes2 != undefined) {
                if (plane_ts.range(3).every(i => indexes2[i] == i)) {
                    triangles.push(triangle1);
                    return;
                }
                else {
                    throw new plane_ts.MyError();
                }
            }
        }
        triangles_list.push(new plane_ts.MyArray([triangle1, triangle2]));
    }
    plane_ts.addCongruentSimilarTriangles = addCongruentSimilarTriangles;
    function addCongruentTriangles(triangle1, triangle2) {
        return addCongruentSimilarTriangles(true, triangle1, triangle2);
    }
    plane_ts.addCongruentTriangles = addCongruentTriangles;
    function addSimilarTriangles(triangle1, triangle2) {
        return addCongruentSimilarTriangles(false, triangle1, triangle2);
    }
    plane_ts.addSimilarTriangles = addSimilarTriangles;
    function findEqualLengthsByPointsPair(As, Bs) {
        for (const length_symbol_set of plane_ts.equalLengths) {
            const length_symbols = Array.from(length_symbol_set);
            const length_symbolA = length_symbols.find(x => plane_ts.areSetsEqual([x.pointA, x.pointB], [As[0], As[1]]));
            if (length_symbolA != undefined) {
                const length_symbolB = length_symbols.find(x => plane_ts.areSetsEqual([x.pointA, x.pointB], [Bs[0], Bs[1]]));
                if (length_symbolB != undefined) {
                    return [length_symbolA, length_symbolB];
                }
                else {
                    return undefined;
                }
            }
        }
        return undefined;
    }
    plane_ts.findEqualLengthsByPointsPair = findEqualLengthsByPointsPair;
    function getParallelogramClassifier(points) {
        return plane_ts.Mylist(plane_ts.parallelogramClassifiers).find(x => plane_ts.areSetsEqual(x.quadrilateral().points, points));
    }
    plane_ts.getParallelogramClassifier = getParallelogramClassifier;
    function getParallelogramsByDiagonalLengthSymbols(lengthSymbolA, lengthSymbolB) {
        if (lengthSymbolA.line == undefined || lengthSymbolA.line != lengthSymbolB.line) {
            plane_ts.msg(plane_ts.TT("length symbols are not on the same line."));
            return [];
        }
        const connection_point = lengthSymbolA.points().find(x => lengthSymbolB.points().includes(x));
        if (connection_point == undefined) {
            plane_ts.msg(plane_ts.TT("no connection point of two length symbols"));
            return [];
        }
        const pointA = lengthSymbolA.points().find(x => x != connection_point);
        const pointB = lengthSymbolB.points().find(x => x != connection_point);
        const parallelograms = [];
        for (const parallelogramClassifier of plane_ts.parallelogramClassifiers) {
            const parallelogram = parallelogramClassifier.quadrilateral();
            const points = parallelogram.points;
            if (plane_ts.areSetsEqual([points[0], points[2]], [pointA, pointB]) || plane_ts.areSetsEqual([points[1], points[3]], [pointA, pointB])) {
                parallelograms.push(parallelogram);
            }
        }
        return parallelograms;
    }
    plane_ts.getParallelogramsByDiagonalLengthSymbols = getParallelogramsByDiagonalLengthSymbols;
    function isParallelogramPoints(points) {
        return getParallelogramClassifier(points) != undefined;
    }
    plane_ts.isParallelogramPoints = isParallelogramPoints;
    function getTrianglesByAngle(angle, triangles) {
        const triangles_with_inner_angle = [];
        LA: for (const triangle of triangles) {
            const angle_points = [angle.intersection];
            for (const line of [angle.lineA, angle.lineB]) {
                const points = triangle.points.filter(point => line.includesPoint(point));
                if (points.length != 2) {
                    continue LA;
                }
                if (points[0] == angle.intersection) {
                    angle_points.push(points[1]);
                }
                else if (points[1] == angle.intersection) {
                    angle_points.push(points[0]);
                }
                else {
                    continue LA;
                }
            }
            plane_ts.assert(angle_points.length == 3);
            if (plane_ts.isClockwise(angle_points)) {
                triangles_with_inner_angle.push(triangle);
            }
        }
        return triangles_with_inner_angle;
    }
    plane_ts.getTrianglesByAngle = getTrianglesByAngle;
    function getTrianglesByLengthSymbol(length_symbol, triangles) {
        const triangles_with_length_symbol = [];
        const Length_symbol_points = [length_symbol.pointA, length_symbol.pointB];
        for (const triangle of triangles) {
            const points = triangle.points.filter(point => Length_symbol_points.includes(point));
            if (points.length == 2) {
                triangles_with_length_symbol.push(triangle);
            }
        }
        return triangles_with_length_symbol;
    }
    plane_ts.getTrianglesByLengthSymbol = getTrianglesByLengthSymbol;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    //
    class Mat {
        dt;
        constructor(dt = undefined) {
            this.dt = this.zeroDt();
            if (dt == undefined) {
                return;
            }
            for (let i = 0; i < dt.length; i++) {
                for (let j = 0; j < dt[0].length; j++) {
                    this.dt[i][j] = dt[i][j];
                }
            }
        }
        dim() {
            return [NaN, NaN];
        }
        zeroDt() {
            let [nrow, ncol] = this.dim();
            return plane_ts.range(nrow).map(x => plane_ts.range(ncol).map(y => 0));
        }
        zeros() {
            return new Mat2(this.zeroDt());
        }
        copy() {
            let [nrow, ncol] = this.dim();
            let m = new Mat2();
            for (let r = 0; r < nrow; r++) {
                for (let c = 0; c < ncol; c++) {
                    m.dt[r][c] = this.dt[r][c];
                }
            }
            return m;
        }
        print(name = "") {
            if (name != "") {
                plane_ts.msg(`${name} = [`);
            }
            else {
                plane_ts.msg("[");
            }
            let [nrow, ncol] = this.dim();
            for (let r = 0; r < nrow; r++) {
                let s = this.dt[r].map(x => x.toFixed(5)).join(", ");
                plane_ts.msg(`\t[ ${s} ]`);
            }
        }
        mul(x) {
            let [nrow, ncol] = this.dim();
            if (typeof (x) == "number") {
                let m = this.copy();
                for (let r = 0; r < nrow; r++) {
                    for (let c = 0; c < ncol; c++) {
                        m.dt[r][c] *= x;
                    }
                }
                return m;
            }
            else {
                let m = this.zeros();
                for (let r = 0; r < nrow; r++) {
                    for (let c = 0; c < ncol; c++) {
                        let sum = 0;
                        for (let k = 0; k < ncol; k++) {
                            sum += this.dt[r][k] * x.dt[k][c];
                        }
                        m.dt[r][c] = sum;
                    }
                }
                return m;
            }
        }
    }
    plane_ts.Mat = Mat;
    class Mat2 extends Mat {
        dim() {
            return [2, 2];
        }
        det() {
            return this.dt[0][0] * this.dt[1][1] - this.dt[0][1] * this.dt[1][0];
        }
        dot(v) {
            return new plane_ts.Vec2(this.dt[0][0] * v.x + this.dt[0][1] * v.y, this.dt[1][0] * v.x + this.dt[1][1] * v.y);
        }
        inv() {
            const det = this.det();
            console.assert(det != 0);
            return new Mat2([[this.dt[1][1] / det, -this.dt[0][1] / det], [-this.dt[1][0] / det, this.dt[0][0] / det]]);
        }
    }
    plane_ts.Mat2 = Mat2;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    class Operation {
        static maxId = 0;
        operationId;
        shapesLength = NaN;
        relationLogsLength = NaN;
        constructor() {
            this.operationId = Operation.maxId++;
        }
        dump() {
            return this.toString();
        }
    }
    plane_ts.Operation = Operation;
    function convertOperations(version, operations) {
        if (version == 2.0) {
            const new_operations = [];
            let idx = 0;
            while (idx < operations.length) {
                const operation = operations[idx];
                new_operations.push(operation);
                if (operation instanceof ToolSelection && ["LengthEqualityBuilder", "AngleEqualityBuilder", "ParallelDetectorBuilder"].includes(operation.toolName)) {
                    plane_ts.assert(operations[idx + 3] instanceof EnumSelection);
                    new_operations.push(operations[idx + 3]);
                    new_operations.push(operations[idx + 1]);
                    new_operations.push(operations[idx + 2]);
                    idx += 4;
                }
                else if (operation instanceof ToolSelection && operation.toolName == "QuadrilateralClassifierBuilder") {
                    plane_ts.assert(operations[idx + 5] instanceof EnumSelection && operations[idx + 6] instanceof EnumSelection);
                    new_operations.push(operations[idx + 5]);
                    new_operations.push(operations[idx + 6]);
                    new_operations.push(operations[idx + 1]);
                    new_operations.push(operations[idx + 2]);
                    new_operations.push(operations[idx + 3]);
                    new_operations.push(operations[idx + 4]);
                    idx += 7;
                }
                else {
                    idx++;
                }
            }
            return new_operations;
        }
        return operations;
    }
    plane_ts.convertOperations = convertOperations;
    async function loadOperationsText(data) {
        let lines;
        if (2 <= data["version"]) {
            lines = data["operations"];
            plane_ts.assert(Array.isArray(lines) && (lines.length == 0 || typeof lines[1] == "string"));
        }
        else {
            plane_ts.msg(`data is empty.`);
            lines = [];
        }
        const view = plane_ts.View.current;
        view.clearView();
        let operations = [];
        let prev_line = "";
        for (let line of lines) {
            line = line.trim().replaceAll(/\s+/g, " ");
            if (line == "") {
                continue;
            }
            if (prev_line == line && line.startsWith("property")) {
                plane_ts.msg(`dup line:[${line}]`);
                continue;
            }
            prev_line = line;
            let operation;
            // msg(`load:${line}`);
            const items = line.split(" ");
            switch (items[0]) {
                case "click":
                    {
                        const x = parseFloat(items[1]);
                        const y = parseFloat(items[2]);
                        let shapeId = NaN;
                        if (4 <= items.length) {
                            shapeId = parseInt(items[3]);
                            plane_ts.assert(!isNaN(shapeId));
                        }
                        operation = new ClickShape(new plane_ts.Vec2(x, y), shapeId);
                    }
                    break;
                case "term":
                    {
                        const textBlock_id = parseInt(items[1]);
                        let indexes;
                        if (items.length == 2) {
                            indexes = [];
                        }
                        else {
                            indexes = items[2].split(":").map(x => parseInt(x));
                        }
                        operation = new ClickTerm(textBlock_id, indexes);
                    }
                    break;
                case "tool":
                    operation = new ToolSelection(items[1]);
                    break;
                case "finish":
                    operation = new ToolFinish(items[1]);
                    break;
                case "enum":
                    {
                        const enum_id = parseInt(items[1]);
                        operation = new EnumSelection(enum_id);
                    }
                    break;
                case "text":
                    {
                        const regex = /text\s+'?([^']+)'?/;
                        const matches = line.match(regex);
                        plane_ts.assert(matches != null);
                        const items2 = Array.from(matches);
                        // msg(`text len:${items2.length} [${items2[1]}]`);
                        const text = items2[1];
                        operation = new TextPrompt(text);
                    }
                    break;
                case "property":
                    {
                        const regex = /property\s+(\d+)\s+([0-9a-zA-Z_]+)\s+'?([^']+)'?/;
                        const matches = line.match(regex);
                        plane_ts.assert(matches != null);
                        const items2 = Array.from(matches);
                        plane_ts.assert(items2.length == 4);
                        const [id, name, value_str] = items2.slice(1);
                        let value;
                        if (line.endsWith("'")) {
                            value = value_str;
                        }
                        else {
                            value = parseFloat(value_str);
                        }
                        operation = new PropertySetting(parseInt(id), name, value);
                    }
                    break;
                default:
                    throw new plane_ts.MyError();
            }
            operations.push(operation);
        }
        operations = plane_ts.convertOperations(data["version"], operations);
        return operations;
    }
    plane_ts.loadOperationsText = loadOperationsText;
    function getOperationsText() {
        const data = {
            version: 2.1,
            operations: plane_ts.View.current.operations.map(x => x.toString())
        };
        const doc_text = JSON.stringify(data, null, 4);
        plane_ts.msg(`operations-text : \n${doc_text}\n`);
        return doc_text;
    }
    plane_ts.getOperationsText = getOperationsText;
    class ClickShape extends Operation {
        position;
        shapeId;
        createdPoint;
        constructor(position, shapeId) {
            super();
            this.position = position;
            this.shapeId = shapeId;
        }
        toString() {
            let shape_str = "";
            if (!isNaN(this.shapeId)) {
                const shape = plane_ts.idMap.get(this.shapeId);
                plane_ts.assert(shape instanceof plane_ts.Shape);
                shape_str = `${this.shapeId} ${shape.constructor.name}`;
            }
            const fnc = (n) => (10 < Math.abs(n) ? n.toFixed(1) : n.toFixed(2));
            const x = fnc(this.position.x);
            const y = fnc(this.position.y);
            return `click ${x} ${y} ${shape_str}`;
        }
        dump() {
            if (this.createdPoint == undefined) {
                return this.toString();
            }
            else {
                return this.toString() + `point:${this.createdPoint.id} ${this.createdPoint.position}`;
            }
        }
    }
    plane_ts.ClickShape = ClickShape;
    class ClickTerm extends Operation {
        textBlock_id;
        indexes;
        constructor(textBlock_id, indexes) {
            super();
            this.textBlock_id = textBlock_id;
            this.indexes = indexes.slice();
        }
        getTextBlockTerm() {
            let textBlock = plane_ts.View.current.allShapes().find(x => x.id == this.textBlock_id);
            if (!(textBlock instanceof plane_ts.TextBlock) || textBlock.getEquation() == undefined) {
                if (textBlock instanceof plane_ts.ShapeEquation) {
                    // !!!!!!!!!!!!!!!!!!!!!!!!  !!!!!!!!!!!!!!!!!!!!!!!!!!!!
                    textBlock = textBlock.textBlock;
                    plane_ts.assert(textBlock.getEquation() != undefined);
                }
                else {
                    throw new plane_ts.MyError();
                }
            }
            const path = new parser_ts.Path(this.indexes);
            const term = path.getTerm(textBlock.getEquation());
            return [textBlock, term];
        }
        toString() {
            if (this.indexes.length == 0) {
                plane_ts.msg(`no indexes:term ${this.textBlock_id}`);
            }
            return `term ${this.textBlock_id}  ${this.indexes.join(":")}`;
        }
    }
    plane_ts.ClickTerm = ClickTerm;
    class ToolSelection extends Operation {
        toolName;
        constructor(tool_name) {
            super();
            this.toolName = tool_name;
        }
        toString() {
            return `tool  ${this.toolName}`;
        }
    }
    plane_ts.ToolSelection = ToolSelection;
    class ToolFinish extends Operation {
        toolName;
        constructor(tool_name) {
            super();
            this.toolName = tool_name;
        }
        toString() {
            return `finish  ${this.toolName}`;
        }
    }
    plane_ts.ToolFinish = ToolFinish;
    class EnumSelection extends Operation {
        value;
        constructor(value) {
            super();
            this.value = value;
        }
        toString() {
            return `enum  ${this.value}`;
        }
    }
    plane_ts.EnumSelection = EnumSelection;
    function inputTextPrompt(message) {
        let text;
        if (plane_ts.View.isPlayBack) {
            const operation = plane_ts.playBackOperations.next();
            plane_ts.View.current.addOperation(operation);
            if (operation instanceof TextPrompt) {
                text = operation.text;
            }
            else {
                throw new plane_ts.MyError();
            }
        }
        else {
            text = prompt(message);
            if (text != null) {
                plane_ts.View.current.addOperation(new TextPrompt(text.trim()));
            }
        }
        return text;
    }
    plane_ts.inputTextPrompt = inputTextPrompt;
    class TextPrompt extends Operation {
        text;
        constructor(text) {
            super();
            this.text = text;
        }
        toString() {
            return `text  '${this.text}'`;
        }
    }
    plane_ts.TextPrompt = TextPrompt;
    class PropertySetting extends Operation {
        id;
        name;
        value;
        constructor(id, name, value) {
            super();
            this.id = id;
            this.name = name;
            this.value = value;
            // msg(`========== Property-Setting:${name} [${value}] ==================================================`)
        }
        toString() {
            if (typeof this.value == "string") {
                return `property ${this.id} ${this.name} '${this.value}'`;
            }
            else {
                return `property ${this.id} ${this.name} ${this.value}`;
            }
        }
    }
    plane_ts.PropertySetting = PropertySetting;
    class PlayBack {
        static startIndex = NaN;
        static setStartIndex(shape) {
            if (plane_ts.playBackOperations != undefined) {
                const index = plane_ts.playBackOperations.shapeToIndex.get(shape);
                if (index != undefined) {
                    PlayBack.startIndex = index;
                    plane_ts.msg(`play start:${PlayBack.startIndex}`);
                }
            }
        }
        view;
        operations;
        index;
        shapeToIndex = new Map();
        viewShapesLength;
        constructor(view, operations) {
            this.view = view;
            this.operations = operations.slice();
            this.index = 0;
            this.viewShapesLength = view.shapes.length;
        }
        done() {
            return this.operations.length == this.index;
        }
        next() {
            if (this.index == PlayBack.startIndex && plane_ts.getPlayMode() == plane_ts.PlayMode.fastForward) {
                PlayBack.startIndex = NaN;
                plane_ts.setPlayMode(plane_ts.PlayMode.normal);
            }
            const shapes = this.view.shapes.slice(this.viewShapesLength);
            for (const shape of shapes) {
                this.shapeToIndex.set(shape, this.index);
            }
            this.viewShapesLength = this.view.shapes.length;
            return this.operations[this.index++];
        }
        peek() {
            return this.operations[this.index];
        }
        async play() {
            plane_ts.View.isPlayBack = true;
            const view = plane_ts.View.current;
            let start_shape_idx = view.shapes.length;
            const speech = new i18n_ts.Speech();
            let new_shapes = view.shapes.slice();
            const named_all_shape_map = new Map();
            while (!this.done()) {
                if (plane_ts.getPlayMode() == plane_ts.PlayMode.stop) {
                    // view.operations = operations_copy;
                    break;
                }
                while (this.peek() instanceof EnumSelection) {
                    plane_ts.msg(`wait for show menu`);
                    await plane_ts.sleep(100);
                }
                const operation = this.next();
                view.addOperation(operation);
                if (operation instanceof ClickShape) {
                    await plane_ts.movePointer(operation.position);
                    let shape;
                    if (!isNaN(operation.shapeId)) {
                        shape = plane_ts.idMap.get(operation.shapeId);
                        if (shape instanceof plane_ts.TextBlock) {
                            shape = undefined;
                        }
                        else if (shape instanceof plane_ts.Shape) {
                        }
                        else {
                            plane_ts.msg(`no shape: ${operation.shapeId}`);
                            const ids = Array.from(plane_ts.idMap.keys()).sort();
                            for (const id of ids) {
                                plane_ts.msg(`  ${id} ${plane_ts.idMap.get(id).constructor.name}`);
                            }
                            throw new plane_ts.MyError();
                        }
                    }
                    await plane_ts.Builder.tool.click(view, operation.position, shape);
                }
                else if (operation instanceof ClickTerm) {
                    if (plane_ts.Builder.tool instanceof plane_ts.ExprTransformBuilder) {
                        const [textBlock, term] = operation.getTextBlockTerm();
                        await plane_ts.Builder.tool.termClick(term, textBlock);
                    }
                    else {
                        throw new plane_ts.MyError();
                    }
                }
                else if (operation instanceof ToolSelection) {
                    await plane_ts.moveToolSelectionPointer(operation);
                    await plane_ts.Builder.setToolByName(operation.toolName, false);
                }
                else if (operation instanceof ToolFinish) {
                    plane_ts.assert(plane_ts.Builder.toolName == operation.toolName);
                    await plane_ts.Builder.tool.finish(view);
                }
                else if (operation instanceof PropertySetting) {
                    const shape = view.allShapes().find(x => x.id == operation.id);
                    plane_ts.assert(shape != undefined);
                    if (["name", "lineKind", "angleMark"].includes(operation.name)) {
                        await plane_ts.showPropertyDlg(shape, operation);
                    }
                    else {
                        plane_ts.setProperty(shape, operation.name, operation.value);
                    }
                }
                else {
                    throw new plane_ts.MyError();
                }
                if (plane_ts.Builder.tool.done) {
                    plane_ts.Builder.tool.done = false;
                    const shapes = view.shapes.slice(start_shape_idx);
                    for (const shape of shapes) {
                        let sub_shapes = [];
                        shape.getAllShapes(sub_shapes);
                        sub_shapes = plane_ts.unique(sub_shapes);
                        sub_shapes.forEach(x => x.show());
                        new_shapes = plane_ts.unique(new_shapes.concat(sub_shapes));
                        const named_sub_shapes = sub_shapes.filter(x => x instanceof plane_ts.Shape && x.name != "");
                        named_sub_shapes.forEach(x => named_all_shape_map.set(x.name, x));
                        // shape.allShapes().forEach(x => x.show());
                        shape.setRelations();
                        if (shape.mute) {
                            continue;
                        }
                        await plane_ts.playShape(speech, new_shapes, named_all_shape_map, shape);
                    }
                    start_shape_idx = view.shapes.length;
                    await speech.waitEnd();
                }
                view.dirty = true;
            }
            new_shapes.forEach(x => { x.show(); x.setMode(plane_ts.Mode.none); });
            plane_ts.View.isPlayBack = false;
            plane_ts.setPlayMode(plane_ts.PlayMode.stop);
            PlayBack.startIndex = NaN;
        }
    }
    plane_ts.PlayBack = PlayBack;
    async function typeIntoInput(element, text, delay = 100) {
        for (let i = 0; i < text.length; i++) {
            element.value += text[i];
            await new Promise(resolve => setTimeout(resolve, delay));
        }
    }
    plane_ts.typeIntoInput = typeIntoInput;
    async function movePointerAndHighlight(item) {
        const borderColor = item.style.borderColor;
        await plane_ts.movePointerToElement(item);
        item.style.borderColor = "DeepSkyBlue";
        await plane_ts.sleepInFastForward(100);
        item.style.borderColor = borderColor;
    }
    plane_ts.movePointerAndHighlight = movePointerAndHighlight;
    async function speakAndHighlight(shape, speech, lines) {
        await speech.speak(lines.shift().trim());
        for (const dep of shape.dependencies()) {
            dep.setMode(plane_ts.Mode.depend);
            await plane_ts.sleep(0.5 * 1000 * shape.interval);
        }
        shape.setMode(plane_ts.Mode.target);
        while (lines.length != 0) {
            const line = lines.shift().trim();
            if (line != "") {
                await speech.waitEnd();
                await speech.speak(line);
            }
        }
        await plane_ts.sleep(1000 * shape.interval);
    }
    plane_ts.speakAndHighlight = speakAndHighlight;
    async function playBack(play_mode) {
        const view = plane_ts.View.current;
        const operations_copy = view.operations.slice();
        view.restoreView();
        view.clearView();
        if (!isNaN(PlayBack.startIndex)) {
            play_mode = plane_ts.PlayMode.fastForward;
        }
        plane_ts.setPlayMode(play_mode);
        plane_ts.playBackOperations = new PlayBack(view, operations_copy);
        plane_ts.assert(view.shapes.length == 0);
        await plane_ts.playBackOperations.play();
        view.restoreView();
        view.dirty = true;
        view.updateShapes();
    }
    plane_ts.playBack = playBack;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    class TextBlockEvent {
        startTerm;
        term;
        textBlock;
        downTime = NaN;
        setTextBlockEvent(textBlock) {
            textBlock.div.addEventListener("pointerdown", (ev) => {
                if (this.textBlock != textBlock) {
                    this.textBlock = textBlock;
                }
                if (textBlock.getEquation() == undefined) {
                    plane_ts.msg(`pointer-down:no app`);
                    return;
                }
                this.term = getTermFromPointerEvent(ev, textBlock.getEquation());
                if (this.term == undefined) {
                    plane_ts.msg(`pointer-down: no term`);
                }
                else {
                    this.downTime = Date.now();
                    plane_ts.msg(`pointer-down:${this.term.str()}`);
                }
            });
            textBlock.div.addEventListener("pointerup", (ev) => {
                if (this.term != undefined && this.textBlock == textBlock) {
                    const elapsed_time = Date.now() - this.downTime;
                    plane_ts.msg(`pointer-up:${elapsed_time} ${this.term.str()}`);
                    if (this.startTerm == this.term) {
                        this.startTerm = undefined;
                    }
                    this.term.colorName = (elapsed_time < 500 ? "blue" : "red");
                    const root = this.term.getRoot();
                    if (elapsed_time < 500) {
                        if (this.startTerm != undefined) {
                            const parent = this.startTerm.parent;
                            if (parent != null && this.term.parent == parent && (parent.isAdd() || parent.isMul())) {
                                let idx1 = this.startTerm.argIdx();
                                let idx2 = this.term.argIdx();
                                if (idx2 < idx1) {
                                    [idx1, idx2] = [idx2, idx1];
                                }
                                const args = parent.args.slice(idx1, idx2 + 1);
                                const app = new plane_ts.App(plane_ts.operator(parent.fncName), args);
                                app.colorName = "red";
                                parent.args.splice(idx1, (idx2 + 1 - idx1));
                                parent.insArg(app, idx1);
                                this.term = app;
                            }
                        }
                    }
                    else {
                        this.startTerm = this.term;
                        this.term = undefined;
                    }
                    plane_ts.renderKatexSub(this.textBlock.div, root.tex());
                }
            });
            textBlock.div.addEventListener("contextmenu", (ev) => {
                plane_ts.msg("text-Block-context-menu");
                ev.stopPropagation();
                ev.preventDefault();
            });
        }
        async keyDown(ev) {
            if (this.term == undefined || this.textBlock == undefined) {
                return;
            }
            const div = this.textBlock.div;
            if (ev.key === "Escape") {
                const root = this.term.getRoot();
                root.allTerms().forEach(x => x.colorName = undefined);
                plane_ts.renderKatexSub(div, root.tex());
                this.startTerm = undefined;
                this.term = undefined;
                this.textBlock = undefined;
                return;
            }
            const parent = this.term.parent;
            if (parent != null && (parent.isAdd() || parent.isMul())) {
                plane_ts.msg(`key-down:${ev.key}`);
                let diff;
                if (ev.key == "ArrowRight") {
                    diff = 1;
                }
                else if (ev.key == "ArrowLeft") {
                    diff = -1;
                }
                else {
                    return;
                }
                const new_idx = this.term.argIdx() + diff;
                const root = this.term.getRoot();
                if (new_idx == -1) {
                    if (parent.isAdd() && parent.parent != null && parent.parent.isEq() && 0 < parent.argIdx()) {
                        await algebra_ts.transpose(root, this.term, div, new plane_ts.Speech(), true, false);
                        plane_ts.renderKatexSub(div, root.tex());
                    }
                }
                else if (new_idx < parent.args.length) {
                    this.term.argShift(diff);
                    plane_ts.renderKatexSub(div, root.tex());
                }
                else if (new_idx == parent.args.length) {
                    if (parent.isAdd() && parent.parent != null && parent.parent.isEq() && parent.argIdx() == 0) {
                        await algebra_ts.transpose(root, this.term, div, new plane_ts.Speech(), false, false);
                        plane_ts.renderKatexSub(div, root.tex());
                    }
                }
                else {
                    plane_ts.msg("can not move.");
                }
            }
        }
    }
    plane_ts.TextBlockEvent = TextBlockEvent;
    plane_ts.textBlockEvent = new TextBlockEvent();
    async function initPlane(plane, root) {
        plane_ts.initPlay();
        plane_ts.makeCssClass();
        plane.tool_block.onChange = async (ui) => {
            const button = ui;
            const tool_name = button.button.value;
            await plane_ts.Builder.setToolByName(tool_name, true);
        };
        const canvas = plane_ts.makeCanvas(plane.canvas_block.div);
        const view = new plane_ts.View(canvas);
        viewEvent(view);
        await plane_ts.Builder.setToolByName(plane_ts.SelectionTool.name, false);
        await plane_ts.makeSelectionDlg();
    }
    plane_ts.initPlane = initPlane;
    function viewEvent(view) {
        view.board.addEventListener("pointerdown", view.pointerdown.bind(view));
        view.board.addEventListener('pointermove', view.pointermove.bind(view));
        view.board.addEventListener("pointerup", view.pointerup.bind(view));
        view.board.addEventListener("click", async (ev) => {
            await view.click(ev);
        });
        view.board.addEventListener("dblclick", async (ev) => {
            await view.dblclick(ev);
        });
        view.board.addEventListener("contextmenu", async (ev) => {
            plane_ts.msg("contextmenu");
            ev.stopPropagation();
            ev.preventDefault();
            const position = view.eventPosition(ev);
            const shape = view.getShape(position);
            if (shape != undefined) {
                await plane_ts.showPropertyDlg(shape, undefined);
            }
        });
        document.addEventListener('keydown', async (ev) => {
            if (plane_ts.View.isPlayBack) {
                return;
            }
            await plane_ts.textBlockEvent.keyDown(ev);
            if (ev.key === "Escape") {
                plane_ts.msg("Escape key pressed!");
                const closed = layout_ts.closeDlg();
                if (closed) {
                    return;
                }
                await plane_ts.Builder.builderResetTool(view);
            }
            else if (ev.key == "Enter") {
                if (plane_ts.Builder.tool instanceof plane_ts.ShapeEquationBuilder || plane_ts.Builder.tool instanceof plane_ts.ExprTransformBuilder) {
                    view.addOperation(new plane_ts.ToolFinish(plane_ts.Builder.toolName));
                    await plane_ts.Builder.tool.finish(view);
                }
            }
        });
        window.addEventListener("resize", view.resizeView.bind(view));
        // Passive event listeners
        // https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md
        view.board.addEventListener("wheel", view.wheel.bind(view), { "passive": false });
        dropEvent(view);
        window.requestAnimationFrame(view.drawShapes.bind(view));
    }
    plane_ts.viewEvent = viewEvent;
    function getTermFromPointerEvent(ev, app) {
        const terms = app.allTerms();
        let ele = ev.target;
        for (; ele != null; ele = ele.parentElement) {
            if (ele.id.startsWith("tex-term-")) {
                const id_offset = "tex-term-".length;
                const id = parseInt(ele.id.substring(id_offset));
                const term = terms.find(x => x.id == id);
                if (term == undefined) {
                    plane_ts.msg(`get-Term-From-Pointer-Event:no term id:[${id}]`);
                    return undefined;
                }
                return term;
            }
        }
        throw new plane_ts.MyError();
    }
    function dropEvent(view) {
        view.board.addEventListener('dragover', plane_ts.handleDragOver, false);
        view.board.addEventListener('drop', plane_ts.handleFileSelect, false);
    }
    function setCaptionEvent(caption) {
        caption.div.addEventListener("pointerdown", caption.captionPointerdown.bind(caption));
        caption.div.addEventListener("pointermove", caption.captionPointermove.bind(caption));
        caption.div.addEventListener("pointerup", caption.captionPointerup.bind(caption));
        caption.div.addEventListener("click", (ev) => {
            plane_ts.showProperty(caption, 0);
        });
        caption.div.addEventListener("dblclick", (ev) => {
            caption.div.contentEditable = "true";
            caption.div.style.cursor = "text";
            caption.div.focus();
        });
        caption.div.addEventListener("blur", (ev) => {
            caption.div.contentEditable = "false";
            caption.div.style.cursor = "move";
            caption.text = caption.div.innerText;
            const text_area = document.getElementById("text-block-text-area");
            if (text_area != null) {
                text_area.value = caption.text;
            }
        });
    }
    plane_ts.setCaptionEvent = setCaptionEvent;
    function deleteShapeEvent(shape, button) {
        button.addEventListener("click", (ev) => {
            const ok = confirm("Are you sure to delete this shape?");
            if (ok) {
                const idx = plane_ts.View.current.shapes.indexOf(shape);
                if (idx == -1) {
                    throw new plane_ts.MyError();
                }
                const button = plane_ts.Plane.one.shapes_block.children[idx];
                plane_ts.Plane.one.shapes_block.removeChild(button);
                plane_ts.remove(plane_ts.View.current.shapes, shape);
                shape.delete(new Set());
                plane_ts.View.current.dirty = true;
            }
        });
    }
    plane_ts.deleteShapeEvent = deleteShapeEvent;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    const $flex = layout_ts.$flex;
    const $grid = layout_ts.$grid;
    const $block = layout_ts.$block;
    const $button = layout_ts.$button;
    const $popup = layout_ts.$popup;
    const $textarea = layout_ts.$textarea;
    const $label = layout_ts.$label;
    const $input_number = layout_ts.$input_number;
    const $checkbox = layout_ts.$checkbox;
    class Plane {
        menu_block;
        tool_block;
        text_block;
        canvas_block;
        property_block;
        shapes_block;
        narration_box;
        editMode;
        show_axis;
        show_grid;
        snap_to_grid;
        static one;
        constructor() {
            Plane.one = this;
            let params;
            [plane_ts.urlOrigin, , params] = i18n_ts.parseURL();
            this.editMode = (params.get("mode") == "edit");
            const tool_buttons = plane_ts.makeToolButtons();
            Plane.one.show_axis = $checkbox({
                text: "Axis",
                change: async (ev) => {
                    plane_ts.View.current.dirty = true;
                }
            });
            Plane.one.show_grid = $checkbox({
                text: "Grid",
                change: async (ev) => {
                    plane_ts.View.current.dirty = true;
                }
            });
            Plane.one.snap_to_grid = $checkbox({
                text: "Snap to Grid",
            });
            const save_anchor = layout_ts.$anchor({});
            this.menu_block = $flex({
                children: [
                    Plane.one.show_axis,
                    Plane.one.show_grid,
                    Plane.one.snap_to_grid,
                    $button({
                        width: "24px",
                        height: "24px",
                        url: `${plane_ts.urlOrigin}/lib/plane/img/undo.png`,
                        click: async (ev) => {
                            await plane_ts.View.current.undo();
                        }
                    }),
                    $button({
                        width: "24px",
                        height: "24px",
                        url: `${plane_ts.urlOrigin}/lib/plane/img/redo.png`,
                        click: async (ev) => {
                            await plane_ts.View.current.redo();
                        }
                    }),
                    $button({
                        text: "Save",
                        click: async (ev) => {
                            plane_ts.saveJson(save_anchor);
                        }
                    }),
                    save_anchor
                ],
            });
            this.tool_block = $grid({
                id: "tool-block",
                columns: "36px 36px",
                children: tool_buttons,
            });
            this.text_block = $flex({
                id: "text-block",
                children: [],
            });
            this.canvas_block = $block({
                children: [],
                color: plane_ts.fgColor,
                // backgroundColor : "cornsilk"
            });
            this.property_block = $grid({
                id: "property-div",
                columns: "50% 50%",
                children: [],
            });
            this.shapes_block = $flex({
                id: "shapes-block",
                direction: "column",
                children: [],
            });
            this.narration_box = layout_ts.$textbox({
                id: "narration-box",
                text: "",
                color: plane_ts.fgColor,
                padding: 20,
                textAlign: "center",
                fontSize: "48px",
            });
            i18n_ts.onSpeak = (text) => {
                this.narration_box.setText(text);
            };
        }
        clearPlane() {
            // for(const class_name of ["tex_div"]){
            //     const tex_divs = Array.from(this.canvas_block.div.getElementsByClassName(class_name)) as HTMLDivElement[];
            //     tex_divs.forEach(x => x.remove());
            // }
            this.text_block.div.innerHTML = "";
            this.narration_box.div.innerHTML = "";
        }
    }
    plane_ts.Plane = Plane;
    function makeCanvas(div) {
        const canvas = document.createElement("canvas");
        canvas.id = "main-canvas";
        canvas.style.width = "100%";
        canvas.style.height = "100%";
        div.append(canvas);
        return canvas;
    }
    plane_ts.makeCanvas = makeCanvas;
    function makeCssClass() {
        const styles = [
            `.tex_div {
    position: absolute;
    display: inline-block;
    background-color: transparent;
    cursor: move;
    user-select: none;
}`,
            `.selectable_tex {
    position: absolute;
    display: inline-block;
    background-color: transparent;
    cursor: pointer;
    user-select: none;
}`
        ];
        for (const style of styles) {
            const tex_style = document.createElement('style');
            tex_style.innerHTML = style;
            document.getElementsByTagName('head')[0].appendChild(tex_style);
        }
    }
    plane_ts.makeCssClass = makeCssClass;
    function fromXPixScale(pix) {
        return plane_ts.View.current.fromXPixScale(pix);
    }
    plane_ts.fromXPixScale = fromXPixScale;
    function fromYPixScale(pix) {
        return plane_ts.View.current.fromYPixScale(pix);
    }
    plane_ts.fromYPixScale = fromYPixScale;
    function toXPix(n) {
        return plane_ts.View.current.toXPix(n);
    }
    plane_ts.toXPix = toXPix;
    function toYPix(n) {
        return plane_ts.View.current.toYPix(n);
    }
    plane_ts.toYPix = toYPix;
    function toXPixScale(n) {
        return plane_ts.View.current.toXPixScale(n);
    }
    plane_ts.toXPixScale = toXPixScale;
    function toYPixScale(n) {
        return plane_ts.View.current.toYPixScale(n);
    }
    plane_ts.toYPixScale = toYPixScale;
    function drawLine(shape, p1, p2) {
        plane_ts.View.current.canvas.drawLine(shape, p1, p2);
    }
    plane_ts.drawLine = drawLine;
    function makeGrid(plane) {
        const root = $grid({
            rows: "25px 100% 25px 80px",
            children: [
                $grid({
                    children: [
                        plane.menu_block
                    ]
                }),
                $grid({
                    columns: "50px 50% 50% 300px",
                    children: [
                        plane.tool_block,
                        plane.text_block,
                        plane.canvas_block,
                        plane.property_block
                    ]
                }),
                plane.shapes_block,
                plane.narration_box
            ]
        });
        return root;
    }
    plane_ts.makeGrid = makeGrid;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    //
    class Vec2 {
        static nan() {
            return new Vec2(NaN, NaN);
        }
        static zero() {
            return new Vec2(0, 0);
        }
        typeName = "Vec2";
        x;
        y;
        constructor(x, y) {
            this.x = x;
            this.y = y;
        }
        getProperties() {
            return ["x", "y"];
        }
        toString() {
            return `(${this.x.toFixed(1)}, ${this.y.toFixed(1)})`;
        }
        /*+++
            app() : App {
                return new App(operator("vec"), [new ConstNum(this.x), new ConstNum(this.y)]);
            }
        */
        copy() {
            return new Vec2(this.x, this.y);
        }
        equals(pt) {
            return this.x == pt.x && this.y == pt.y;
        }
        add(pt) {
            return new Vec2(this.x + pt.x, this.y + pt.y);
        }
        sub(pt) {
            return new Vec2(this.x - pt.x, this.y - pt.y);
        }
        mul(cx, cy = undefined) {
            if (cy == undefined) {
                cy = cx;
            }
            return new Vec2(cx * this.x, cy * this.y);
        }
        len2() {
            return this.x * this.x + this.y * this.y;
        }
        len() {
            return Math.hypot(this.x, this.y);
        }
        distance(pt) {
            return Math.hypot(pt.x - this.x, pt.y - this.y);
        }
        dot(pt) {
            return this.x * pt.x + this.y * pt.y;
        }
        unit() {
            const d = this.len();
            if (d == 0) {
                return new Vec2(0, 0);
            }
            return new Vec2(this.x / d, this.y / d);
        }
        divide(t, pt) {
            const x = (1 - t) * this.x + t * pt.x;
            const y = (1 - t) * this.y + t * pt.y;
            return new Vec2(x, y);
        }
        cross(a) {
            return this.x * a.y - this.y * a.x;
        }
        project(a) {
            return this.mul(this.dot(a));
        }
        rot(th) {
            const cs = Math.cos(th);
            const sn = Math.sin(th);
            return new Vec2(this.x * cs - this.y * sn, this.x * sn + this.y * cs);
        }
        rot90() {
            return new Vec2(-this.y, this.x);
        }
        rot45() {
            const cs = Math.cos(Math.PI / 4);
            return new Vec2(cs * (this.x - this.y), cs * (this.x + this.y));
        }
        static interpolate(p1, p2, rate) {
            plane_ts.assert(0 <= rate && rate <= 1);
            const x = (1 - rate) * p1.x + rate * p2.x;
            const y = (1 - rate) * p1.y + rate * p2.y;
            return new Vec2(x, y);
        }
    }
    plane_ts.Vec2 = Vec2;
})(plane_ts || (plane_ts = {}));
///<reference path="vector.ts" />
var plane_ts;
(function (plane_ts) {
    //
    let pointerMove;
    let pointer;
    let pointerPix = plane_ts.Vec2.zero();
    function initPlay() {
        pointerMove = document.getElementById("pointer_move_img");
        pointer = document.getElementById("pointer_img");
    }
    plane_ts.initPlay = initPlay;
    async function movePointerPix(pix) {
        if (plane_ts.getPlayMode() != plane_ts.PlayMode.fastForward) {
            pointerMove.style.visibility = "visible";
            const step = 20;
            for (const i of plane_ts.range(step)) {
                const x = plane_ts.linear(0, i, step - 1, pointerPix.x, pix.x);
                const y = plane_ts.linear(0, i, step - 1, pointerPix.y, pix.y);
                pointerMove.style.left = `${x}px`;
                pointerMove.style.top = `${y}px`;
                await plane_ts.sleep(10);
            }
            pointerMove.style.visibility = "hidden";
        }
        pointer.style.left = `${pix.x}px`;
        pointer.style.top = `${pix.y}px`;
        pointer.style.visibility = "visible";
        await plane_ts.sleep(500);
        pointer.style.visibility = "hidden";
        pointerPix = pix;
    }
    plane_ts.movePointerPix = movePointerPix;
    async function movePointer(pos) {
        const pix = plane_ts.View.current.toPixPosition(pos);
        const rect = plane_ts.View.current.board.getBoundingClientRect();
        const new_pix = new plane_ts.Vec2(rect.x + pix.x, rect.y + pix.y);
        await movePointerPix(new_pix);
    }
    plane_ts.movePointer = movePointer;
    async function movePointerToElement(ele) {
        const rect = ele.getBoundingClientRect();
        const x = rect.x + 0.5 * rect.width;
        const y = rect.y + 0.5 * rect.height;
        await movePointerPix(new plane_ts.Vec2(x, y));
    }
    plane_ts.movePointerToElement = movePointerToElement;
    async function moveToolSelectionPointer(operation) {
        const id = `${operation.toolName}-radio`;
        const radio = document.getElementById(id);
        plane_ts.assert(radio != null);
        await movePointerToElement(radio);
    }
    plane_ts.moveToolSelectionPointer = moveToolSelectionPointer;
    function removeDiv() {
        for (const class_name of ["tex_div", "selectable_tex"]) {
            const tex_divs = Array.from(document.body.getElementsByClassName(class_name));
            tex_divs.forEach(x => x.remove());
        }
    }
    plane_ts.removeDiv = removeDiv;
    async function playShape(speech, all_shapes, named_all_shape_map, shape) {
        plane_ts.showProperty(shape, 0);
        let highlighted = new Set();
        if (shape instanceof plane_ts.ExprTransform) {
            await shape.speakExprTransform(speech);
        }
        else if (shape instanceof plane_ts.ShapeEquation) {
        }
        else if (shape instanceof plane_ts.Statement) {
            await shape.showReasonAndStatement(speech);
        }
        else if (shape instanceof plane_ts.Motion) {
            await shape.animate(speech);
        }
        else {
            const root_reading = shape.reading();
            if (root_reading.text == "") {
            }
            else if (root_reading.args.length == 0) {
                await plane_ts.speakAndHighlight(shape, speech, [root_reading.text]);
            }
            else {
                const text = root_reading.prepareReading();
                const readings = root_reading.getAllReadings();
                plane_ts.msg(`reading:${shape.constructor.name} ${text}`);
                plane_ts.msg("    " + readings.map(x => `[${x.start}->${x.end}:${x.text}]`).join(" "));
                speech.callback = (idx) => {
                    for (const reading of readings) {
                        if (reading.start <= idx) {
                            if (!highlighted.has(reading)) {
                                plane_ts.msg(`hilight: start:${reading.start} ${reading.text}`);
                                reading.readable.highlight(true);
                                highlighted.add(reading);
                            }
                        }
                    }
                };
                if (text != "") {
                    await speech.speak(plane_ts.TT(text));
                }
            }
        }
        await speech.waitEnd();
        Array.from(highlighted.values()).forEach(x => x.readable.highlight(false));
        speech.callback = undefined;
        if (shape instanceof plane_ts.ShapeEquation || shape instanceof plane_ts.ExprTransform) {
            const [node, text] = parser_ts.makeNodeTextByApp(shape.equation);
            const div_child = shape.textBlock.div.children[0];
            /*
                const id = setInterval(()=>{
                    speech.prevCharIndex++;
                    if(text.length < speech.prevCharIndex){
                        clearInterval(id);
                    }
                }, 100);
            */
            if (i18n_ts.isEdge) {
                await parser_ts.showFlow(speech, shape.equation, shape.textBlock.div, named_all_shape_map);
            }
            else {
                div_child.style.backgroundColor = "blue";
                await speech.speak(text);
            }
            await speech.waitEnd();
            div_child.style.backgroundColor = "";
        }
        else if (shape instanceof plane_ts.TextBlock && shape.isTex) {
            const term = parser_ts.parseMath(shape.text);
            await parser_ts.showFlow(speech, term, shape.div, named_all_shape_map);
        }
        else if (shape instanceof plane_ts.Statement && shape.mathText != "") {
            const term = parser_ts.parseMath(shape.mathText);
            if (shape.latexBox == undefined) {
                shape.latexBox = shape.makeTexUI();
            }
            await parser_ts.showFlow(speech, term, shape.latexBox.div, named_all_shape_map);
        }
        all_shapes.forEach(x => { x.setMode(plane_ts.Mode.none); });
    }
    plane_ts.playShape = playShape;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    const $flex = layout_ts.$flex;
    const $grid = layout_ts.$grid;
    const $block = layout_ts.$block;
    const $button = layout_ts.$button;
    const $popup = layout_ts.$popup;
    const $textarea = layout_ts.$textarea;
    const $label = layout_ts.$label;
    const $input_number = layout_ts.$input_number;
    const $checkbox = layout_ts.$checkbox;
    const $input_text = layout_ts.$input_text;
    const $input_color = layout_ts.$input_color;
    const lineKindImgNames = ["line", "half_line_1", "half_line_2", "line_segment"];
    const propertySettingText = new Map([
        ["angleMark", plane_ts.TT("Set the angle mark.")],
        ["lineKind", plane_ts.TT("Set the line kind.")],
        ["name", plane_ts.TT("Set the name.")],
    ]);
    let used_property_names;
    function appendRow(grid, nest, name, value) {
        const label = $label({
            text: name,
            paddingLeft: `${nest * 10}px`,
        });
        grid.addChild(label);
        grid.addChild(value);
    }
    class Property {
        widgets;
        name;
        constructor(widgets, name) {
            this.widgets = widgets;
            this.name = name;
        }
        setValue(newValue) {
            plane_ts.msg(`set value:${this.name} ${newValue}`);
            for (const widget of this.widgets) {
                const obj = widget;
                const oldValue = obj[this.name];
                plane_ts.setProperty(widget, this.name, newValue);
                if (plane_ts.Builder.tool instanceof plane_ts.MotionBuilder && !(widget instanceof plane_ts.Motion)) {
                    plane_ts.Builder.tool.animation.addPropertyChange(widget, this.name, oldValue, newValue);
                }
            }
            plane_ts.View.current.dirty = true;
        }
    }
    plane_ts.Property = Property;
    class TextAreaProperty extends Property {
        textArea;
        constructor(widgets, name, value) {
            super(widgets, name);
            this.textArea = $textarea({
                id: "text-block-text-area",
                cols: 20,
                rows: name == "mathText" ? 6 : 10,
                value: value,
                change: async (ev) => {
                    this.setValue(this.textArea.getValue());
                    for (const widget of this.widgets) {
                        if (widget instanceof plane_ts.TextBlock && !widget.isTex) {
                            widget.div.innerText = this.textArea.getValue();
                        }
                    }
                }
            });
        }
        ui() {
            return this.textArea;
        }
    }
    plane_ts.TextAreaProperty = TextAreaProperty;
    class InputProperty extends Property {
        constructor(widgets, name, input_type) {
            super(widgets, name);
        }
        valueChanged(widget_id, name, new_value) {
            this.setValue(new_value);
            const operation = plane_ts.View.current.operations.find(x => x instanceof plane_ts.PropertySetting && x.id == widget_id && x.name == name);
            if (operation != undefined) {
                operation.value = new_value;
            }
            else {
                plane_ts.View.current.addOperation(new plane_ts.PropertySetting(widget_id, name, new_value));
            }
        }
    }
    plane_ts.InputProperty = InputProperty;
    class StringProperty extends InputProperty {
        input;
        value = "";
        constructor(widgets, name, value) {
            super(widgets, name, "text");
            this.value = value;
            this.input = $input_text({
                text: value,
                change: async (ev) => {
                    const new_value = this.input.input.value;
                    plane_ts.msg(`change:${this.value}=>${new_value}`);
                    this.valueChanged(widgets[0].id, name, new_value);
                }
            });
        }
        getInput() {
            return this.input.input;
        }
        ui() {
            return this.input;
        }
    }
    class NumberProperty extends InputProperty {
        input;
        constructor(widgets, name, value, step, min, max) {
            super(widgets, name, "number");
            this.input = $input_number({
                step: step,
                value: value,
                min: min,
                max: max,
                change: async (ev) => {
                    const new_value = this.input.getValue();
                    this.valueChanged(widgets[0].id, name, new_value);
                }
            });
        }
        getInput() {
            return this.input.input;
        }
        ui() {
            return this.input;
        }
    }
    class SelectProperty extends Property {
        select;
        constructor(widgets, name, value, option_texts) {
            super(widgets, name);
            this.select = document.createElement("select");
            this.select.style.color = plane_ts.fgColor;
            this.select.style.backgroundColor = plane_ts.bgColor;
            for (const text of option_texts) {
                const option = document.createElement("option");
                option.innerText = text;
                option.style.color = plane_ts.fgColor;
                option.style.backgroundColor = plane_ts.bgColor;
                this.select.append(option);
            }
            plane_ts.assert(0 <= value && value < option_texts.length);
            this.select.selectedIndex = value;
            this.select.addEventListener("change", (ev) => {
                const idx = this.select.selectedIndex;
                this.setValue(idx);
                plane_ts.msg(`select ${idx} ${option_texts[idx]}`);
            });
        }
        ui() {
            throw new plane_ts.MyError();
        }
    }
    class BooleanProperty extends InputProperty {
        input;
        constructor(widgets, name, value) {
            super(widgets, name, "checkbox");
            this.input = $checkbox({
                text: name,
                change: async (ev) => {
                    this.BooleanValueChanged();
                }
            });
            this.input.input.checked = value;
        }
        getInput() {
            return this.input.input;
        }
        BooleanValueChanged() {
            this.setValue(this.input.input.checked);
        }
        ui() {
            return this.input;
        }
    }
    class ColorProperty extends InputProperty {
        input;
        constructor(widgets, name, value) {
            super(widgets, name, "color");
            this.input = $input_color({
                text: value
            });
        }
        getInput() {
            return this.input.input;
        }
        ui() {
            return this.input;
        }
    }
    class ImgSelectionProperty extends Property {
        selectionList;
        constructor(widgets, name, value, img_names) {
            super(widgets, name);
            const img_urls = img_names.map(x => `${plane_ts.urlOrigin}/lib/plane/img/${x}.png`);
            const buttons = [];
            for (const [idx, url] of img_urls.entries()) {
                const radio = layout_ts.$radio({
                    value: `${idx}`,
                    url,
                    width: "36px",
                    height: "36px",
                });
                radio.html().dataset.operation_value = `${idx}`;
                radio.html().dataset.property_name = name;
                buttons.push(radio);
            }
            this.selectionList = layout_ts.$selection({
                children: buttons,
                selectedIndex: value,
                selectionChanged: (index) => {
                    this.setValue(index);
                }
            });
        }
        ui() {
            return this.selectionList;
        }
    }
    plane_ts.ImgSelectionProperty = ImgSelectionProperty;
    class ShapesProperty extends Property {
        static one;
        buttonsUI;
        constructor(widgets, name, value) {
            super(widgets, name);
            if (name == "selectedShapes") {
                ShapesProperty.one = this;
            }
            const buttons = value.map(x => plane_ts.makeShapeButton(x, false));
            for (const button of buttons) {
                button.button.style.position = "";
            }
            if (buttons.length == 0) {
                this.buttonsUI = $label({ text: "" });
            }
            else {
                this.buttonsUI = $grid({
                    columns: buttons.map(x => "auto").join(" "),
                    children: buttons
                });
            }
        }
        ui() {
            return this.buttonsUI;
        }
    }
    plane_ts.ShapesProperty = ShapesProperty;
    function makeConstantProperty(grid, nest, name, text) {
        grid.addChild($label({ text: name }));
        grid.addChild($label({ text: text }));
    }
    function makeTexProperty(grid, nest, name, text) {
        grid.addChild($label({ text: name }));
        grid.addChild(layout_ts.$latex({ text: text }));
    }
    function appendTitle(grid, nest, title) {
        const label = $label({
            text: title,
            paddingLeft: `${nest * 10}px`,
        });
        const filler = $label({
            text: ""
        });
        grid.addChild(label);
        grid.addChild(filler);
    }
    function appendDelete(tbl, shape) {
        const all_dependencies = plane_ts.View.current.allShapes().map(x => x.dependencies()).flat();
        const row = document.createElement("tr");
        const cell = document.createElement("td");
        cell.colSpan = 2;
        const button = document.createElement("button");
        button.innerText = "delete";
        button.style.color = plane_ts.fgColor;
        button.style.backgroundColor = plane_ts.bgColor;
        if (all_dependencies.includes(shape)) {
            button.disabled = true;
        }
        else {
            plane_ts.deleteShapeEvent(shape, button);
        }
        cell.append(button);
        row.append(cell);
        tbl.append(row);
    }
    function showProperty(widget, nest) {
        if (nest == 0) {
            used_property_names = new Set();
        }
        let widgets;
        if (widget instanceof plane_ts.Widget) {
            widgets = [widget];
        }
        else {
            widgets = widget;
        }
        let properties = [];
        for (const [idx, w] of widgets.entries()) {
            const names = w.getProperties();
            if (idx == 0) {
                properties = names;
            }
            else {
                properties = properties.filter(x => names.includes(x));
            }
        }
        const grid = plane_ts.Plane.one.property_block;
        if (nest == 0) {
            grid.clear();
        }
        const constructor_names = plane_ts.unique(widgets.map(x => x.constructor.name));
        for (const constructor_name of constructor_names) {
            appendTitle(grid, nest, constructor_name);
        }
        for (const property_name of properties) {
            plane_ts.assert(typeof property_name == "string");
            if (used_property_names.has(property_name)) {
                continue;
            }
            if (i18n_ts.appMode == i18n_ts.AppMode.play) {
                if (!["name", "reason", "selectedShapes", "auxiliaryShapes"].includes(property_name)) {
                    continue;
                }
            }
            const name = property_name;
            const value = widgets[0][name];
            if (value == undefined) {
                continue;
            }
            let property;
            if (name == "mathText" || name == "text" && widget instanceof plane_ts.TextBlock) {
                property = new TextAreaProperty(widgets, name, value);
            }
            else if (name == "angleMark") {
                const angles = widgets.filter(x => x instanceof plane_ts.Angle);
                const img_names = plane_ts.range(plane_ts.Angle.numMarks).map(i => `angle_${i}`);
                property = new ImgSelectionProperty(angles, name, value, img_names);
            }
            else if (name == "reason") {
                const text = plane_ts.reasonMsg(value);
                makeConstantProperty(grid, nest + 1, name, text);
                continue;
            }
            else if (name == "equation") {
                plane_ts.assert(value instanceof plane_ts.App);
                makeTexProperty(grid, nest + 1, name, value.tex());
                continue;
            }
            else if (name == "terms") {
                plane_ts.assert(Array.isArray(value));
                const terms = value;
                plane_ts.assert(terms.every(x => x instanceof plane_ts.Term));
                const text = terms.map(x => x.tex()).join("\\quad , \\quad");
                makeTexProperty(grid, nest + 1, name, text);
                continue;
            }
            else if (name == "selectedShapes" || name == "auxiliaryShapes") {
                property = new ShapesProperty(widgets, name, value);
            }
            else if (name == "line") {
                property = new ShapesProperty(widgets, name, [value]);
            }
            else {
                switch (typeof value) {
                    case "string":
                        if (name == "color") {
                            property = new ColorProperty(widgets, name, value);
                        }
                        else {
                            property = new StringProperty(widgets, name, value);
                        }
                        break;
                    case "number":
                        if (name == "interval") {
                            property = new NumberProperty(widgets, name, value, 0.1, 0, 10000);
                        }
                        else if (name == "lineKind") {
                            property = new ImgSelectionProperty(widgets, name, value, lineKindImgNames);
                        }
                        else if (name == "lengthKind") {
                            property = new NumberProperty(widgets, name, value, 1, 0, 3);
                        }
                        else if (name == "id" || name == "order") {
                            makeConstantProperty(grid, nest + 1, name, `${value}`);
                            continue;
                        }
                        else {
                            property = new NumberProperty(widgets, name, value, 0.1, -100, 100);
                        }
                        break;
                    case "boolean":
                        property = new BooleanProperty(widgets, name, value);
                        break;
                    case "object":
                        if (value instanceof plane_ts.Widget) {
                            showProperty(value, nest + 1);
                        }
                        else if (value instanceof plane_ts.Vec2) {
                            const text = `x:${value.x.toFixed(1)} y:${value.y.toFixed(1)}`;
                            makeConstantProperty(grid, nest + 1, name, text);
                        }
                        else {
                            plane_ts.msg(`unknown property:${value.constructor.name}`);
                        }
                        continue;
                    default:
                        throw new plane_ts.MyError();
                }
            }
            try {
                const ui = property.ui();
                appendRow(grid, nest + 1, property.name, ui);
            }
            catch (e) {
                plane_ts.msg(`no property:${property.name}`);
            }
            used_property_names.add(property_name);
        }
        if (i18n_ts.appMode == i18n_ts.AppMode.play) {
            return;
        }
        if (nest == 0 && widget instanceof plane_ts.MathEntity) {
            //++++++++++        appendDelete(tbl, widget);
        }
        layout_ts.Layout.root.updateRootLayout();
    }
    plane_ts.showProperty = showProperty;
    async function showPropertyDlg(widget, operation) {
        const basic_names = ["name", "lineKind", "angleMark"];
        const names = widget.getProperties().filter(x => basic_names.includes(x));
        const grid = $grid({
            columns: "50% 50%",
            children: [],
        });
        const propertyMap = new Map();
        for (const name of names) {
            const value = widget[name];
            if (value == undefined) {
                continue;
            }
            let property;
            switch (name) {
                case "name":
                    property = new StringProperty([widget], name, value);
                    break;
                case "lineKind":
                    property = new ImgSelectionProperty([widget], name, value, lineKindImgNames);
                    break;
                case "angleMark":
                    {
                        const img_names = plane_ts.range(plane_ts.Angle.numMarks).map(i => `angle_${i}`);
                        property = new ImgSelectionProperty([widget], name, value, img_names);
                    }
                    break;
                default:
                    continue;
            }
            propertyMap.set(name, property);
            const ui = property.ui();
            appendRow(grid, 1, property.name, ui);
        }
        const dlg = layout_ts.$dialog({
            content: grid
        });
        dlg.showModal();
        if (plane_ts.View.isPlayBack) {
            if (operation instanceof plane_ts.PropertySetting) {
                // View.current.addOperation(operation);
                const text = propertySettingText.get(operation.name);
                plane_ts.assert(text != undefined);
                const speech = i18n_ts.AbstractSpeech.one;
                await speech.speak(text);
                // msg(`opr ${operation.id} ${operation.toString()}`);
                const property = propertyMap.get(operation.name);
                plane_ts.assert(property != undefined);
                let item;
                switch (operation.name) {
                    case "angleMark":
                    case "lineKind":
                        {
                            const value = operation.value;
                            const all_buttons = Array.from(dlg.html().getElementsByTagName("button"));
                            const buttons = all_buttons.filter(x => x.dataset.property_name == operation.name);
                            item = buttons.find(x => x.dataset.operation_value == `${operation.value}`);
                            plane_ts.assert(item != undefined);
                            await plane_ts.movePointerAndHighlight(item);
                            if (operation.name == "angleMark") {
                                widget.setAngleMark(value);
                            }
                            else {
                                widget.lineKind = value;
                            }
                        }
                        break;
                    case "name":
                        {
                            const input = property.input.html();
                            await plane_ts.movePointerToElement(input);
                            await plane_ts.typeIntoInput(input, operation.value);
                            widget.setName(operation.value);
                        }
                        break;
                    default:
                        throw new plane_ts.MyError();
                }
                await speech.waitEnd();
            }
            else {
                throw new plane_ts.MyError();
            }
        }
        else {
            await plane_ts.waitForClick(dlg.html());
            // View.current.addOperation(new EnumSelection(value));
        }
        dlg.close();
    }
    plane_ts.showPropertyDlg = showPropertyDlg;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    //
    function addEqualLengths(lengthSymbolA, lengthSymbolB) {
        let set = plane_ts.equalLengths.find(x => x.has(lengthSymbolA) || x.has(lengthSymbolB));
        if (set == undefined) {
            set = new plane_ts.MySet([lengthSymbolA, lengthSymbolB]);
            plane_ts.equalLengths.push(set);
        }
        else {
            set.add(lengthSymbolA);
            set.add(lengthSymbolB);
        }
    }
    plane_ts.addEqualLengths = addEqualLengths;
    function getCommonPoint(lengthSymbolA, lengthSymbolB) {
        const [AA, AB] = [lengthSymbolA.pointA, lengthSymbolA.pointB];
        const [BA, BB] = [lengthSymbolB.pointA, lengthSymbolB.pointB];
        if (AA == BA) {
            return [AA, AB, BB];
        }
        else if (AA == BB) {
            return [AA, AB, BA];
        }
        else if (AB == BA) {
            return [AB, AA, BB];
        }
        else if (AB == BB) {
            return [AB, AA, BA];
        }
        else {
            return undefined;
        }
    }
    function getParallelLinesByPointsPair(As, Bs) {
        const lineA = plane_ts.getCommonLineOfPoints(As[0], As[1]);
        const lineB = plane_ts.getCommonLineOfPoints(Bs[0], Bs[1]);
        if (lineA == undefined || lineB == undefined) {
            return undefined;
        }
        if (plane_ts.isParallel(lineA, lineB)) {
            return [lineA, lineB];
        }
        else {
            return undefined;
        }
    }
    plane_ts.getParallelLinesByPointsPair = getParallelLinesByPointsPair;
    function findParallelLinesOfLengthSymbols(lengthSymbolA, lengthSymbolB) {
        const As = [lengthSymbolA.pointA, lengthSymbolA.pointB];
        const Bs = [lengthSymbolB.pointA, lengthSymbolB.pointB];
        const line_pair1 = getParallelLinesByPointsPair(As, Bs);
        if (line_pair1 == undefined) {
            return undefined;
        }
        for (const idx of [0, 1]) {
            let Cs;
            let Ds;
            if (idx == 0) {
                Cs = [As[0], Bs[0]];
                Ds = [As[1], Bs[1]];
            }
            else {
                Cs = [As[0], Bs[1]];
                Ds = [As[1], Bs[0]];
            }
            const line_pair2 = getParallelLinesByPointsPair(Cs, Ds);
            if (line_pair2 != undefined) {
                return line_pair2;
            }
        }
        return undefined;
    }
    function findTrianglePairByLengthSymbols(lengthSymbolA, lengthSymbolB, triangles_list) {
        for (const triangles of triangles_list) {
            const trianglesA = plane_ts.getTrianglesByLengthSymbol(lengthSymbolA, triangles);
            if (trianglesA.length == 0) {
                continue;
            }
            const trianglesB = plane_ts.getTrianglesByLengthSymbol(lengthSymbolB, triangles);
            if (trianglesB.length == 0) {
                continue;
            }
            for (const triangleA of trianglesA) {
                const idxA = triangleA.lines.indexOf(lengthSymbolA.line);
                plane_ts.assert(idxA != -1);
                for (const triangleB of trianglesB) {
                    const idxB = triangleB.lines.indexOf(lengthSymbolB.line);
                    plane_ts.assert(idxB != -1);
                    if (idxA == idxB) {
                        return [triangleA, triangleB];
                    }
                    else {
                        plane_ts.msg(`make Angle Equality By Congruent Triangles : idx-A:${idxA} != idx-B:${idxB}`);
                    }
                }
            }
        }
    }
    function makeEqualLengthByCongruentTriangles(lengthSymbolA, lengthSymbolB) {
        const triangleAB = findTrianglePairByLengthSymbols(lengthSymbolA, lengthSymbolB, plane_ts.congruentTriangles);
        if (triangleAB != undefined) {
            const [triangleA, triangleB] = triangleAB;
            // msg(`equal length:congruent triangles`);
            return new LengthEquality({
                reason: plane_ts.LengthEqualityReason.congruent_triangles,
                auxiliaryShapes: [triangleA, triangleB],
                shapes: [lengthSymbolA, lengthSymbolB]
            });
        }
        else {
            plane_ts.msg(`can not find congruent triangles`);
            return undefined;
        }
    }
    plane_ts.makeEqualLengthByCongruentTriangles = makeEqualLengthByCongruentTriangles;
    function makeEqualLengthByRadiiEqual(lengthSymbolA, lengthSymbolB) {
        if (lengthSymbolA.circle != undefined && lengthSymbolB.circle != undefined && plane_ts.areEqualCircleArcs(lengthSymbolA.circle, lengthSymbolB.circle)) {
            // msg(`radii-equal`);
            return new LengthEquality({
                reason: plane_ts.LengthEqualityReason.radii_equal,
                auxiliaryShapes: [lengthSymbolA.circle, lengthSymbolB.circle],
                shapes: [lengthSymbolA, lengthSymbolB]
            });
        }
        return undefined;
    }
    plane_ts.makeEqualLengthByRadiiEqual = makeEqualLengthByRadiiEqual;
    function makeEqualLengthByCommonCircle(lengthSymbolA, lengthSymbolB, circle) {
        const ABC = getCommonPoint(lengthSymbolA, lengthSymbolB);
        if (ABC != undefined) {
            const [A, B, C] = ABC;
            if (circle.center == A && circle.includesPoint(B) && circle.includesPoint(C)) {
                // msg(`common-circle`);
                return new LengthEquality({
                    reason: plane_ts.LengthEqualityReason.common_circle,
                    auxiliaryShapes: [circle],
                    shapes: [lengthSymbolA, lengthSymbolB]
                });
            }
        }
        return undefined;
    }
    plane_ts.makeEqualLengthByCommonCircle = makeEqualLengthByCommonCircle;
    function makeEqualLengthByParallelLines(lengthSymbolA, lengthSymbolB, parallel_lines) {
        if (!plane_ts.isParallel(parallel_lines[0], parallel_lines[1])) {
            return undefined;
        }
        if (lengthSymbolA.line != undefined && lengthSymbolB.line != undefined && plane_ts.isParallel(lengthSymbolA.line, lengthSymbolB.line)) {
        }
        else {
            return undefined;
        }
        const [line1, line2] = parallel_lines;
        for (const lengthSymbol of [lengthSymbolA, lengthSymbolB]) {
            const [A, B] = [lengthSymbol.pointA, lengthSymbol.pointB];
            if (line1.includesPoint(A) && line2.includesPoint(B) || line1.includesPoint(B) && line2.includesPoint(A)) {
                continue;
            }
            return undefined;
        }
        plane_ts.msg(`parallel-lines`);
        return new LengthEquality({
            reason: plane_ts.LengthEqualityReason.parallel_lines_distance,
            auxiliaryShapes: parallel_lines,
            shapes: [lengthSymbolA, lengthSymbolB]
        });
    }
    plane_ts.makeEqualLengthByParallelLines = makeEqualLengthByParallelLines;
    function makeEqualLengthByParallelLinesAuto(lengthSymbolA, lengthSymbolB) {
        const parallel_lines = findParallelLinesOfLengthSymbols(lengthSymbolA, lengthSymbolB);
        if (parallel_lines != undefined) {
            plane_ts.msg(`parallel-lines`);
            return new LengthEquality({
                reason: plane_ts.LengthEqualityReason.parallel_lines_distance,
                auxiliaryShapes: parallel_lines,
                shapes: [lengthSymbolA, lengthSymbolB]
            });
        }
        return undefined;
    }
    plane_ts.makeEqualLengthByParallelLinesAuto = makeEqualLengthByParallelLinesAuto;
    function makeEqualLengthByParallelogramOppositeSides(lengthSymbolA, lengthSymbolB) {
        let points = [lengthSymbolA.pointA, lengthSymbolA.pointB, lengthSymbolB.pointA, lengthSymbolB.pointB];
        points = plane_ts.toClockwisePoints(points);
        const parallelogramClassifier = plane_ts.getParallelogramClassifier(points);
        if (parallelogramClassifier == undefined) {
            plane_ts.msg(`no parallelogram`);
            return undefined;
        }
        const parallelogram = new plane_ts.Quadrilateral({
            points,
            lines: []
        });
        // msg(`parallelogram-sides`);
        return new LengthEquality({
            reason: plane_ts.LengthEqualityReason.parallelogram_opposite_sides,
            auxiliaryShapes: [parallelogram],
            shapes: [lengthSymbolA, lengthSymbolB]
        });
    }
    plane_ts.makeEqualLengthByParallelogramOppositeSides = makeEqualLengthByParallelogramOppositeSides;
    function makeEqualLengthByParallelogramDiagonalBisection(lengthSymbolA, lengthSymbolB) {
        const parallelograms = plane_ts.getParallelogramsByDiagonalLengthSymbols(lengthSymbolA, lengthSymbolB);
        for (const parallelogram of parallelograms) {
            const diagonal_intersection = parallelogram.diagonalIntersection();
            if (diagonal_intersection != undefined) {
                let lengthSymbol_points_pair = [lengthSymbolA.points(), lengthSymbolB.points()];
                if (lengthSymbol_points_pair.every(x => x.includes(diagonal_intersection))) {
                    let lengthSymbol_vertices = lengthSymbol_points_pair.map(x => x[0] == diagonal_intersection ? x[1] : x[0]);
                    if (plane_ts.areSetsEqual(lengthSymbol_vertices, [parallelogram.points[0], parallelogram.points[2]]) ||
                        plane_ts.areSetsEqual(lengthSymbol_vertices, [parallelogram.points[1], parallelogram.points[3]])) {
                        // msg(`parallelogram-diagonal-bisection`);
                        return new LengthEquality({
                            reason: plane_ts.LengthEqualityReason.parallelogram_diagonal_bisection,
                            auxiliaryShapes: [parallelogram],
                            shapes: [lengthSymbolA, lengthSymbolB]
                        });
                    }
                }
            }
        }
        return undefined;
    }
    plane_ts.makeEqualLengthByParallelogramDiagonalBisection = makeEqualLengthByParallelogramDiagonalBisection;
    function makeEqualLengthByEquivalenceClass(lengthSymbolA, lengthSymbolB) {
        if (lengthSymbolA.isEqual(lengthSymbolB)) {
            return new LengthEquality({
                reason: plane_ts.LengthEqualityReason.equivalence_class,
                shapes: [lengthSymbolA, lengthSymbolB]
            });
        }
        return undefined;
    }
    plane_ts.makeEqualLengthByEquivalenceClass = makeEqualLengthByEquivalenceClass;
    function showPrompt(text) {
        const dlg = plane_ts.$dlg("help-dlg");
        plane_ts.$("help-msg").innerText = text;
        // dlg.remove();
        // document.body.append(dlg);
        dlg.show();
        const timeout = (plane_ts.getPlayMode() == plane_ts.PlayMode.fastForward ? 50 : 3000);
        setTimeout(() => {
            dlg.close();
        }, timeout);
    }
    plane_ts.showPrompt = showPrompt;
    class LengthEquality extends plane_ts.Statement {
        constructor(obj) {
            super(obj);
            plane_ts.LengthSymbol.setEqualLengthKinds(this.selectedShapes);
        }
        reading() {
            return this.textReading(plane_ts.TT("the two length symbols are of equal length."));
        }
        setRelations() {
            super.setRelations();
            const [lengthSymbolA, lengthSymbolB] = this.selectedShapes;
            addEqualLengths(lengthSymbolA, lengthSymbolB);
        }
        verify() {
            let lengthEquality;
            switch (this.reason) {
                case plane_ts.LengthEqualityReason.radii_equal:
                    {
                        const [lengthSymbolA, lengthSymbolB] = this.selectedShapes;
                        lengthEquality = makeEqualLengthByRadiiEqual(lengthSymbolA, lengthSymbolB);
                    }
                    break;
                case plane_ts.LengthEqualityReason.common_circle:
                    {
                        const circle = this.auxiliaryShapes[0];
                        const [lengthSymbolA, lengthSymbolB] = this.selectedShapes;
                        lengthEquality = makeEqualLengthByCommonCircle(lengthSymbolA, lengthSymbolB, circle);
                        if (lengthEquality == undefined) {
                            lengthEquality = makeEqualLengthByCommonCircle(lengthSymbolA, lengthSymbolB, circle);
                        }
                    }
                    break;
                case plane_ts.LengthEqualityReason.parallel_lines_distance:
                    {
                        const parallel_lines = this.auxiliaryShapes;
                        const [lengthSymbolA, lengthSymbolB] = this.selectedShapes;
                        lengthEquality = makeEqualLengthByParallelLines(lengthSymbolA, lengthSymbolB, parallel_lines);
                        plane_ts.linesSelector_2.clear();
                    }
                    break;
                case plane_ts.LengthEqualityReason.congruent_triangles:
                    {
                        const [lengthSymbolA, lengthSymbolB] = this.selectedShapes;
                        lengthEquality = makeEqualLengthByCongruentTriangles(lengthSymbolA, lengthSymbolB);
                    }
                    break;
                case plane_ts.LengthEqualityReason.parallelogram_opposite_sides:
                    {
                        const [lengthSymbolA, lengthSymbolB] = this.selectedShapes;
                        lengthEquality = makeEqualLengthByParallelogramOppositeSides(lengthSymbolA, lengthSymbolB);
                    }
                    break;
                case plane_ts.LengthEqualityReason.parallelogram_diagonal_bisection:
                    {
                        const [lengthSymbolA, lengthSymbolB] = this.selectedShapes;
                        lengthEquality = makeEqualLengthByParallelogramDiagonalBisection(lengthSymbolA, lengthSymbolB);
                    }
                    break;
                case plane_ts.LengthEqualityReason.equivalence_class:
                    {
                        const [lengthSymbolA, lengthSymbolB] = this.selectedShapes;
                        lengthEquality = makeEqualLengthByEquivalenceClass(lengthSymbolA, lengthSymbolB);
                    }
                    break;
                case plane_ts.LengthEqualityReason.midpoint:
                case plane_ts.LengthEqualityReason.not_used:
                default:
                    throw new plane_ts.MyError();
            }
            const reason_str = plane_ts.reasonMsg(this.reason);
            if (lengthEquality == undefined) {
                throw new plane_ts.MyError(`can not make Length-Equality: ${reason_str}`);
            }
            else {
                plane_ts.msg(`make Length-Equality OK: ${reason_str}`);
            }
            return lengthEquality;
        }
    }
    plane_ts.LengthEquality = LengthEquality;
    function isEqualLength(lengthSymbolA, lengthSymbolB) {
        if (lengthSymbolA == lengthSymbolB) {
            return true;
        }
        return plane_ts.equalLengths.find(x => x.has(lengthSymbolA) && x.has(lengthSymbolB)) != undefined;
    }
    plane_ts.isEqualLength = isEqualLength;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    //
    function angleKey(lineA, directionA, lineB, directionB, intersection) {
        return `${lineA.id}:${directionA}:${lineB.id}:${directionB}:${intersection.id}`;
    }
    plane_ts.angleKey = angleKey;
    function angleMatches3points(angle, points) {
        if (angle.intersection == points[1] && angle.lineA.includesPoint(points[2]) && angle.lineB.includesPoint(points[0])) {
            const vB = points[0].sub(points[1]); // a vector form point1 to point0
            const vA = points[2].sub(points[1]); // a vector form point1 to point2
            if (0 < vB.dot(angle.eB) && 0 < vA.dot(angle.eA)) {
                return true;
            }
        }
        return false;
    }
    plane_ts.angleMatches3points = angleMatches3points;
    function findAngleBy3points(angles, points) {
        const matched_angles = angles.filter(x => angleMatches3points(x, points));
        if (matched_angles.length == 0) {
            return undefined;
        }
        plane_ts.assert(matched_angles.length == 1);
        return matched_angles[0];
    }
    plane_ts.findAngleBy3points = findAngleBy3points;
    function findEqualAnglesBy3pointsPair(points1, points2) {
        plane_ts.assert(plane_ts.isClockwise(points1));
        plane_ts.assert(plane_ts.isClockwise(points2));
        const angles_list = plane_ts.supplementaryAngles.flat();
        angles_list.push(plane_ts.rightAngles);
        for (const angle_set of angles_list) {
            const angles = angle_set.toArray();
            const angle1 = findAngleBy3points(angles, points1);
            if (angle1 != undefined) {
                const angle2 = findAngleBy3points(angles, points2);
                if (angle2 != undefined) {
                    return [angle1, angle2];
                }
                else {
                    return undefined;
                }
            }
        }
        return undefined;
    }
    plane_ts.findEqualAnglesBy3pointsPair = findEqualAnglesBy3pointsPair;
    function findAnglesInPolygon(points_arg) {
        const all_angles = Array.from(plane_ts.angleMap.values());
        const points = plane_ts.toClockwisePoints(points_arg);
        const angles = [];
        for (const idx of plane_ts.range(points.length)) {
            const pts = [0, 1, 2].map(i => points[(idx + i) % points.length]);
            const angle = findAngleBy3points(all_angles, pts);
            plane_ts.assert(angle != undefined);
            angles.push(angle);
        }
        return angles;
    }
    plane_ts.findAnglesInPolygon = findAnglesInPolygon;
    function findAngle(angle_points_arg) {
        let angle_points = angle_points_arg.slice();
        if (!plane_ts.isClockwise(angle_points)) {
            angle_points = [2, 1, 0].map(i => angle_points_arg[i]);
        }
        const [B, C, A] = angle_points;
        const lineA = plane_ts.getCommonLineOfPoints(C, A);
        const lineB = plane_ts.getCommonLineOfPoints(C, B);
        if (lineA == undefined || lineB == undefined) {
            return undefined;
        }
        const CA = A.sub(C);
        const CB = B.sub(C);
        const directionA = Math.sign(CA.dot(lineA.e));
        const directionB = Math.sign(CB.dot(lineB.e));
        const key = angleKey(lineA, directionA, lineB, directionB, C);
        const angle = plane_ts.angleMap.get(key);
        if (angle == undefined) {
            const point_ids = angle_points.map(x => `${x.id}`).join(", ");
            // msg(`point ids:${point_ids}  key:${key}`);
            for (const map_key of plane_ts.angleMap.keys()) {
                // msg(`map key:${map_key}`);
            }
        }
        return angle;
    }
    plane_ts.findAngle = findAngle;
    function addSupplementaryAngles(angle1, angle2) {
        if (plane_ts.supplementaryAngles.some(x => x[0].has(angle1) && x[1].has(angle2) || x[0].has(angle2) && x[1].has(angle1))) {
            return;
        }
        const pair = plane_ts.supplementaryAngles.find(x => x[0].has(angle1) || x[0].has(angle2) || x[1].has(angle1) || x[1].has(angle2));
        if (pair != undefined) {
            const angles = [angle1, angle2];
            for (const [i, angle_set] of pair.entries()) {
                for (const [j, angle] of angles.entries()) {
                    if (angle_set.has(angle)) {
                        pair[1 - i].add(angles[1 - j]);
                        return;
                    }
                }
            }
        }
        plane_ts.supplementaryAngles.push([new plane_ts.MySet([angle1]), new plane_ts.MySet([angle2])]);
    }
    plane_ts.addSupplementaryAngles = addSupplementaryAngles;
    function checkSupplementaryAngles(root) {
        if (root.isRootEq()) {
            for (const [side1, side2] of plane_ts.permutation(root.args)) {
                if (side1 instanceof plane_ts.RefVar && side1.name == "pi") {
                    if (side2.isAdd()) {
                        const add = side2;
                        if (add.args.length == 2 && add.args.every(x => x instanceof plane_ts.RefVar)) {
                            const all_angles = plane_ts.View.current.allRealShapes().filter(x => x instanceof plane_ts.Angle);
                            const refs = add.args;
                            const angles = refs.map(x => all_angles.find(y => y.name == x.name));
                            if (angles.every(x => x != undefined)) {
                                // msg(`check-Supplementary-Angles ${angles[0].name} ${angles[1].name}`);
                                addSupplementaryAngles(angles[0], angles[1]);
                            }
                        }
                    }
                }
            }
        }
    }
    plane_ts.checkSupplementaryAngles = checkSupplementaryAngles;
    function addEqualAngles(angle1, angle2) {
        const angle_sets = plane_ts.supplementaryAngles.flat().filter(x => x.has(angle1) || x.has(angle2));
        let angle_set;
        switch (angle_sets.length) {
            case 0:
                angle_set = new plane_ts.MySet();
                plane_ts.supplementaryAngles.push([angle_set, new plane_ts.MySet()]);
                break;
            case 1:
                angle_set = angle_sets[0];
                break;
            default:
                throw new plane_ts.MyError();
        }
        angle_set.add(angle1);
        angle_set.add(angle2);
        const angle_equality_propositions = plane_ts.propositions.filter(x => x instanceof plane_ts.ShapeProposition && x.reason == plane_ts.PropositionReason.angle_equality).toArray();
        const proven_proposition = angle_equality_propositions.find(x => plane_ts.areSetsEqual(x.selectedShapes, [angle1, angle2]));
    }
    plane_ts.addEqualAngles = addEqualAngles;
    function isEqualAngle(angleA, angleB) {
        if (angleA.isRightAngle() && angleB.isRightAngle()) {
            return true;
        }
        for (const angle_set of plane_ts.supplementaryAngles.flat()) {
            if (angle_set.has(angleA)) {
                return angle_set.has(angleB);
            }
        }
        return false;
    }
    plane_ts.isEqualAngle = isEqualAngle;
    function isEqualAnglePoints(angle_pointsA, angle_pointsB) {
        const angleA = findAngle(angle_pointsA);
        const angleB = findAngle(angle_pointsB);
        if (angleA != undefined && angleB != undefined) {
            return isEqualAngle(angleA, angleB);
        }
        return false;
    }
    plane_ts.isEqualAnglePoints = isEqualAnglePoints;
    function findTrianglePairByAngles(angleA, angleB, triangles_list) {
        for (const triangles of triangles_list) {
            const trianglesA = plane_ts.getTrianglesByAngle(angleA, triangles);
            if (trianglesA.length == 0) {
                continue;
            }
            const trianglesB = plane_ts.getTrianglesByAngle(angleB, triangles);
            if (trianglesB.length == 0) {
                continue;
            }
            for (const triangleA of trianglesA) {
                const idxA = triangleA.points.indexOf(angleA.intersection);
                plane_ts.assert(idxA != -1);
                for (const triangleB of trianglesB) {
                    const idxB = triangleB.points.indexOf(angleB.intersection);
                    plane_ts.assert(idxB != -1);
                    if (idxA == idxB) {
                        return [triangleA, triangleB];
                    }
                    else {
                        plane_ts.msg(`make Angle Equality By Congruent Triangles : idx-A:${idxA} != idx-B:${idxB}`);
                    }
                }
            }
        }
    }
    function makeAngleEqualityByCongruentTriangles(angleA, angleB) {
        const triangleAB = findTrianglePairByAngles(angleA, angleB, plane_ts.congruentTriangles);
        if (triangleAB != undefined) {
            const [triangleA, triangleB] = triangleAB;
            // msg(`equal angle:congruent triangles`);
            return new AngleEquality({
                reason: plane_ts.AngleEqualityReason.congruent_triangles,
                auxiliaryShapes: [
                    triangleA, triangleB
                ],
                shapes: [
                    angleA, angleB
                ]
            });
        }
        else {
            plane_ts.msg(`can not find congruent triangles`);
            return undefined;
        }
    }
    plane_ts.makeAngleEqualityByCongruentTriangles = makeAngleEqualityByCongruentTriangles;
    function makeAngleEqualityBySimilarTriangles(angleA, angleB) {
        const triangleAB = findTrianglePairByAngles(angleA, angleB, plane_ts.similarTriangles);
        if (triangleAB != undefined) {
            const [triangleA, triangleB] = triangleAB;
            return new AngleEquality({
                reason: plane_ts.AngleEqualityReason.similar_triangles,
                auxiliaryShapes: [triangleA, triangleB],
                shapes: [angleA, angleB]
            });
        }
        else {
            plane_ts.msg(`can not find similar triangles`);
            return undefined;
        }
    }
    plane_ts.makeAngleEqualityBySimilarTriangles = makeAngleEqualityBySimilarTriangles;
    function makeAngleEqualityByIsoscelesTriangleBaseAngles(angleA, angleB) {
        for (const [angle1, angle2] of plane_ts.permutation([angleA, angleB])) {
            if (angle1.lineA == angle2.lineB && angle1.directionA == -angle2.directionB) {
                const triangle = plane_ts.isoscelesTriangle.find(x => x.points[1] == angle1.intersection && x.points[2] == angle2.intersection);
                if (triangle == undefined) {
                    return undefined;
                }
                const vertex = plane_ts.getCommonPointOfLines(angle1.lineB, angle2.lineA);
                if (vertex != triangle.points[0]) {
                    return undefined;
                }
                return new AngleEquality({
                    reason: plane_ts.AngleEqualityReason.isosceles_triangle_base_angles,
                    auxiliaryShapes: [triangle],
                    shapes: [angleA, angleB]
                });
            }
        }
        return undefined;
    }
    plane_ts.makeAngleEqualityByIsoscelesTriangleBaseAngles = makeAngleEqualityByIsoscelesTriangleBaseAngles;
    function getAngleUnitVectors(angleA, angleB) {
        const e_AA = angleA.lineA.e.mul(angleA.directionA);
        const e_AB = angleA.lineB.e.mul(angleA.directionB);
        const e_BA = angleB.lineA.e.mul(angleB.directionA);
        const e_BB = angleB.lineB.e.mul(angleB.directionB);
        return [e_AA, e_AB, e_BA, e_BB];
    }
    function makeAngleEqualityByVertical_angles(angleA, angleB) {
        if (angleA.intersection == angleB.intersection) {
            // msg("intersectionA == intersectionB");
            if (angleA.lineA == angleB.lineA && angleA.lineB == angleB.lineB) {
                // msg("lineAA == lineBB & lineAB == lineBB");
                const [e_AA, e_AB, e_BA, e_BB] = getAngleUnitVectors(angleA, angleB);
                if (Math.sign(e_AA.dot(e_BA)) == -1 && Math.sign(e_AB.dot(e_BB)) == -1) {
                    // msg(`equal angle:vertical angle`);
                    return new AngleEquality({
                        reason: plane_ts.AngleEqualityReason.vertical_angles,
                        auxiliaryShapes: [
                            angleA.lineA, angleA.lineB
                        ],
                        shapes: [
                            angleA, angleB
                        ]
                    });
                }
                else {
                    plane_ts.msg(`AA.BA = ${(e_AA.dot(e_BA)).toFixed(1)} : AB.BB = ${(e_AB.dot(e_BB)).toFixed(1)}`);
                }
            }
            return undefined;
        }
        return undefined;
    }
    plane_ts.makeAngleEqualityByVertical_angles = makeAngleEqualityByVertical_angles;
    function makeAngleEqualityByParallelLines(angleA, angleB) {
        let angle_lines = plane_ts.unique([angleA.lineA, angleA.lineB, angleB.lineA, angleB.lineB]);
        if (angle_lines.length != 3) {
            plane_ts.msg("no cross line.");
            return undefined;
        }
        const cross_line = angle_lines.find(x => [angleA.lineA, angleA.lineB].includes(x) && [angleB.lineA, angleB.lineB].includes(x));
        plane_ts.assert(cross_line != undefined);
        const parallel_lines = angle_lines.filter(x => x != cross_line);
        plane_ts.assert(parallel_lines.length == 2);
        if (!plane_ts.isParallel(parallel_lines[0], parallel_lines[1])) {
            plane_ts.msg("not parallel");
            return undefined;
        }
        let cross_sign;
        let parallel_sign;
        const [e_AA, e_AB, e_BA, e_BB] = getAngleUnitVectors(angleA, angleB);
        if (angleA.lineA == angleB.lineA && angleA.lineA == cross_line && plane_ts.areSetsEqual(parallel_lines, [angleA.lineB, angleB.lineB])) {
            // msg("lineA == lineA");
            cross_sign = Math.sign(e_AA.dot(e_BA));
            parallel_sign = Math.sign(e_AB.dot(e_BB));
        }
        else if (angleA.lineB == angleB.lineB && angleA.lineB == cross_line && plane_ts.areSetsEqual(parallel_lines, [angleA.lineA, angleB.lineA])) {
            // msg("lineB == lineB");
            cross_sign = Math.sign(e_AB.dot(e_BB));
            parallel_sign = Math.sign(e_AA.dot(e_BA));
        }
        else {
            plane_ts.msg("illegal angle");
            return undefined;
        }
        if (cross_sign * parallel_sign == 1) {
            // msg(`equal angle:parallel lines`);
            return new AngleEquality({
                reason: plane_ts.AngleEqualityReason.parallel_line_angles,
                auxiliaryShapes: parallel_lines.concat(cross_line),
                shapes: [
                    angleA, angleB
                ]
            });
        }
        else {
            plane_ts.msg("make-Equal-Angle:cross_sign * parallel_sign != 1");
            return undefined;
        }
    }
    plane_ts.makeAngleEqualityByParallelLines = makeAngleEqualityByParallelLines;
    function makeAngleEqualityByAngleBisector(angleA, angleB, angle_bisector) {
        const [lineA, lineB] = [angleA.lineA, angleB.lineB];
        return new AngleEquality({
            reason: plane_ts.AngleEqualityReason.angle_bisector,
            auxiliaryShapes: [lineA, lineB, angle_bisector],
            shapes: [angleA, angleB]
        });
    }
    plane_ts.makeAngleEqualityByAngleBisector = makeAngleEqualityByAngleBisector;
    function makeAngleEqualityByParallelogramOppositeAngles(angleA, angleB, parallelogram) {
        if (!parallelogram.isParallelogram()) {
            return undefined;
        }
        const intersections = [angleA.intersection, angleB.intersection];
        const [pt0, pt1, pt2, pt3] = parallelogram.points;
        if (plane_ts.areSetsEqual([pt0, pt2], intersections) || plane_ts.areSetsEqual([pt1, pt3], intersections)) {
            const points = plane_ts.toClockwisePoints(parallelogram.points);
            let triad_pair;
            if (intersections.includes(points[0])) {
                triad_pair = [[points[3], points[0], points[1]], [points[1], points[2], points[3]]];
            }
            else {
                triad_pair = [[points[0], points[1], points[2]], [points[2], points[3], points[0]]];
            }
            const angles = [angleA, angleB];
            if (triad_pair[0][1] == angleB.intersection) {
                triad_pair.reverse();
            }
            for (const [idx, triad] of triad_pair.entries()) {
                const angle = angles[idx];
                plane_ts.assert(triad[1] == angle.intersection);
                if (angle.lineA.includesPoint(triad[2]) && angle.lineB.includesPoint(triad[0])) {
                    // msg(`equal angle:parallelogram`);
                    return new AngleEquality({
                        reason: plane_ts.AngleEqualityReason.parallelogram_opposite_angles,
                        auxiliaryShapes: [parallelogram],
                        shapes: [
                            angleA, angleB
                        ]
                    });
                }
            }
        }
        return undefined;
    }
    plane_ts.makeAngleEqualityByParallelogramOppositeAngles = makeAngleEqualityByParallelogramOppositeAngles;
    class AngleEquality extends plane_ts.Statement {
        constructor(obj) {
            super(obj);
            const angles = this.selectedShapes;
            plane_ts.Angle.setEqualAngleMarks(angles);
        }
        reading() {
            return this.textReading(plane_ts.TT("the two angles are equal."));
        }
        setRelations() {
            super.setRelations();
            const [angleA, angleB] = this.selectedShapes;
            addEqualAngles(angleA, angleB);
        }
        verify() {
            let angleEquality;
            const [angleA, angleB] = this.selectedShapes;
            const reason_str = plane_ts.reasonMsg(this.reason);
            switch (this.reason) {
                case plane_ts.AngleEqualityReason.vertical_angles:
                    angleEquality = makeAngleEqualityByVertical_angles(angleA, angleB);
                    break;
                case plane_ts.AngleEqualityReason.parallel_line_angles:
                    {
                        angleEquality = makeAngleEqualityByParallelLines(angleA, angleB);
                    }
                    break;
                case plane_ts.AngleEqualityReason.angle_bisector:
                    {
                        const angle_bisector = this.auxiliaryShapes[2];
                        angleEquality = makeAngleEqualityByAngleBisector(angleA, angleB, angle_bisector);
                    }
                    break;
                case plane_ts.AngleEqualityReason.congruent_triangles:
                    angleEquality = makeAngleEqualityByCongruentTriangles(angleA, angleB);
                    break;
                case plane_ts.AngleEqualityReason.parallelogram_opposite_angles:
                    {
                        const parallelogram = this.auxiliaryShapes[0];
                        angleEquality = makeAngleEqualityByParallelogramOppositeAngles(angleA, angleB, parallelogram);
                    }
                    break;
                case plane_ts.AngleEqualityReason.similar_triangles:
                    angleEquality = makeAngleEqualityBySimilarTriangles(angleA, angleB);
                    break;
                default:
                    throw new plane_ts.MyError(`unknown Angle-Equality reason: ${this.reason} ${reason_str}`);
            }
            if (angleEquality == undefined) {
                throw new plane_ts.MyError(`can not make Angle-Equality: ${reason_str}`);
            }
            else {
                plane_ts.msg(`make Angle-Equality OK: ${reason_str}`);
            }
            return angleEquality;
        }
    }
    plane_ts.AngleEquality = AngleEquality;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    //
    function makeQuadrilateralClassifier(points, reason) {
        let equalSideLengthSymbolsA;
        let equalSideLengthSymbolsB;
        let parallelLinesA;
        let parallelLinesB;
        let equalAnglesA;
        let equalAnglesB;
        let diagonalBisectionLengthSymbolsA;
        let diagonalBisectionLengthSymbolsB;
        equalSideLengthSymbolsA = plane_ts.findEqualLengthsByPointsPair([points[0], points[1]], [points[2], points[3]]);
        equalSideLengthSymbolsB = plane_ts.findEqualLengthsByPointsPair([points[1], points[2]], [points[3], points[0]]);
        parallelLinesA = plane_ts.getParallelLinesByPointsPair([points[0], points[1]], [points[2], points[3]]);
        parallelLinesB = plane_ts.getParallelLinesByPointsPair([points[1], points[2]], [points[3], points[0]]);
        equalAnglesA = plane_ts.findEqualAnglesBy3pointsPair([points[0], points[1], points[2]], [points[2], points[3], points[0]]);
        equalAnglesB = plane_ts.findEqualAnglesBy3pointsPair([points[1], points[2], points[3]], [points[3], points[0], points[1]]);
        diagonalBisectionLengthSymbolsA = undefined;
        diagonalBisectionLengthSymbolsB = undefined;
        const diagonalA = plane_ts.getCommonLineOfPoints(points[0], points[2]);
        const diagonalB = plane_ts.getCommonLineOfPoints(points[1], points[3]);
        if (diagonalA != undefined && diagonalB != undefined) {
            const intersection = plane_ts.getCommonPointOfLines(diagonalA, diagonalB);
            if (intersection != undefined) {
                diagonalBisectionLengthSymbolsA = plane_ts.findEqualLengthsByPointsPair([points[0], intersection], [points[2], intersection]);
                diagonalBisectionLengthSymbolsB = plane_ts.findEqualLengthsByPointsPair([points[1], intersection], [points[3], intersection]);
            }
        }
        const lines = plane_ts.range(4).map(i => plane_ts.getCommonLineOfPoints(points[i], points[(i + 1) % 4]));
        if (lines.some(x => x == undefined)) {
            throw new plane_ts.MyError();
        }
        const quadrilateral = new plane_ts.Quadrilateral({ points, lines });
        switch (reason) {
            case plane_ts.ParallelogramReason.each_opposite_sides_are_equal:
                if (equalSideLengthSymbolsA != undefined && equalSideLengthSymbolsB != undefined) {
                    return new ParallelogramClassifier({
                        reason: reason,
                        auxiliaryShapes: equalSideLengthSymbolsA.concat(equalSideLengthSymbolsB),
                        shapes: [quadrilateral]
                    });
                }
                break;
            case plane_ts.ParallelogramReason.each_opposite_sides_are_parallel:
                if (parallelLinesA != undefined && parallelLinesB != undefined) {
                    return new ParallelogramClassifier({
                        reason: reason,
                        auxiliaryShapes: parallelLinesA.concat(parallelLinesB),
                        shapes: [quadrilateral]
                    });
                }
                break;
            case plane_ts.ParallelogramReason.each_opposite_angles_are_equal:
                if (equalAnglesA != undefined && equalAnglesB != undefined) {
                    return new ParallelogramClassifier({
                        reason: reason,
                        auxiliaryShapes: equalAnglesA.concat(equalAnglesB),
                        shapes: [quadrilateral]
                    });
                }
            case plane_ts.ParallelogramReason.one_opposite_sides_are_parallel_and_equal: {
                let auxiliaryShapes;
                if (parallelLinesA != undefined && equalSideLengthSymbolsA != undefined) {
                    plane_ts.assert(plane_ts.range(2).every(i => parallelLinesA[i] == equalSideLengthSymbolsA[i].line));
                    auxiliaryShapes = equalSideLengthSymbolsA;
                }
                else if (parallelLinesB != undefined && equalSideLengthSymbolsB != undefined) {
                    plane_ts.assert(plane_ts.range(2).every(i => parallelLinesB[i] == equalSideLengthSymbolsB[i].line));
                    auxiliaryShapes = equalSideLengthSymbolsB;
                }
                else {
                    break;
                }
                return new ParallelogramClassifier({
                    reason,
                    auxiliaryShapes,
                    shapes: [quadrilateral]
                });
            }
            case plane_ts.ParallelogramReason.each_diagonal_bisections:
                if (diagonalBisectionLengthSymbolsA != undefined && diagonalBisectionLengthSymbolsB != undefined) {
                    return new ParallelogramClassifier({
                        reason,
                        auxiliaryShapes: diagonalBisectionLengthSymbolsA.concat(diagonalBisectionLengthSymbolsB),
                        shapes: [quadrilateral]
                    });
                }
                break;
            case plane_ts.RhombusReason.all_sides_are_equal:
                if (equalSideLengthSymbolsA != undefined && equalSideLengthSymbolsB != undefined) {
                    if (plane_ts.isEqualLength(equalSideLengthSymbolsA[0], equalSideLengthSymbolsB[0])) {
                        return new RhombusClassifier({
                            reason: reason,
                            auxiliaryShapes: equalSideLengthSymbolsA.concat(equalSideLengthSymbolsB),
                            shapes: [quadrilateral]
                        });
                    }
                }
                break;
        }
        return undefined;
    }
    plane_ts.makeQuadrilateralClassifier = makeQuadrilateralClassifier;
    class TriangleQuadrilateralDetector extends plane_ts.Statement {
        shapeClass;
    }
    plane_ts.TriangleQuadrilateralDetector = TriangleQuadrilateralDetector;
    class QuadrilateralClassifier extends TriangleQuadrilateralDetector {
        quadrilateral() {
            plane_ts.assert(this.selectedShapes.length == 1 && this.selectedShapes[0] instanceof plane_ts.Quadrilateral);
            return this.selectedShapes[0];
        }
        isParallelogram() {
            return this.shapeClass == plane_ts.TriangleQuadrilateralClass.parallelogram || this.shapeClass == plane_ts.TriangleQuadrilateralClass.rhombus;
        }
        setRelations() {
            super.setRelations();
            plane_ts.parallelogramClassifiers.add(this);
        }
        draw() {
            plane_ts.assert(this.selectedShapes.length == 1 && this.selectedShapes[0] instanceof plane_ts.Quadrilateral);
            const quadrilateral = this.selectedShapes[0];
            const shapes = this.auxiliaryShapes.filter(x => x.mode != plane_ts.Mode.none);
            for (const shape of shapes) {
                let p1;
                let p2;
                if (shape instanceof plane_ts.LengthSymbol) {
                    [p1, p2] = [shape.pointA, shape.pointB];
                }
                else if (shape instanceof plane_ts.AbstractLine) {
                    const line = shape;
                    const idx = quadrilateral.lines.indexOf(line);
                    if (idx == -1) {
                        plane_ts.msg(`Quadrilateral-Classifier error:${this.id} shape:${shape.id}:${shape.constructor.name}`);
                        continue;
                    }
                    plane_ts.assert(idx != -1);
                    [p1, p2] = [quadrilateral.points[idx], quadrilateral.points[(idx + 1) % quadrilateral.points.length]];
                }
                else {
                    shape.draw();
                    continue;
                }
                const color = shape.modeColor();
                const line_width = shape.modeLineWidth();
                plane_ts.View.current.canvas.drawLineRaw(p1.position, p2.position, color, line_width);
            }
        }
    }
    class ParallelogramClassifier extends QuadrilateralClassifier {
        reading() {
            return this.textReading(plane_ts.TT("this is a parallelogram."));
        }
    }
    plane_ts.ParallelogramClassifier = ParallelogramClassifier;
    class RhombusClassifier extends ParallelogramClassifier {
        reading() {
            return this.textReading(plane_ts.TT("this is a rhombus."));
        }
    }
    plane_ts.RhombusClassifier = RhombusClassifier;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    //
    function makeParallelDetectorByParallelogram(lineA, lineB) {
        const lines = [lineA, lineB];
        for (const classifier of plane_ts.parallelogramClassifiers) {
            const parallelogram = classifier.quadrilateral();
            if (plane_ts.isSubSet(lines, parallelogram.lines)) {
                // msg(`Parallel-Detector-By-Parallelogram`);
                return new ParallelDetector({
                    reason: plane_ts.ParallelReason.parallelogram,
                    auxiliaryShapes: [parallelogram],
                    shapes: [lineA, lineB]
                });
            }
        }
        return undefined;
    }
    plane_ts.makeParallelDetectorByParallelogram = makeParallelDetectorByParallelogram;
    function makeParallelDetectorByCorrespondingAlternateAnglesEqual(angleA, angleB) {
        if (angleA.intersection != angleB.intersection && plane_ts.isEqualAngle(angleA, angleB)) {
            let lineA;
            let lineB;
            if (angleA.lineA == angleB.lineA) {
                lineA = angleA.lineB;
                lineB = angleB.lineB;
            }
            else if (angleA.lineB == angleB.lineB) {
                lineA = angleA.lineA;
                lineB = angleB.lineA;
            }
            else {
                return undefined;
            }
            // msg(`Parallel-Detector-By-Corresponding-Alternate-Angles-Equal`);
            return new ParallelDetector({
                reason: plane_ts.ParallelReason.corresponding_angles_or_alternate_angles_are_equal,
                auxiliaryShapes: [angleA, angleB],
                shapes: [lineA, lineB]
            });
        }
        return undefined;
    }
    plane_ts.makeParallelDetectorByCorrespondingAlternateAnglesEqual = makeParallelDetectorByCorrespondingAlternateAnglesEqual;
    function makeParallelDetectorBySupplementaryAngles(angleA, angleB) {
        for (const [angle1, angle2] of plane_ts.permutation([angleA, angleB])) {
            if (angle1.lineB == angle2.lineA && angle1.directionB == -angle2.directionA) {
                const lines = [angle1.lineA, angle2.lineB];
                // msg(`Parallel-Detector-By-Supplementary-Angles`);
                return new ParallelDetector({
                    reason: plane_ts.ParallelReason.supplementary_angles,
                    auxiliaryShapes: [angle1, angle2],
                    shapes: lines
                });
            }
        }
        return undefined;
    }
    plane_ts.makeParallelDetectorBySupplementaryAngles = makeParallelDetectorBySupplementaryAngles;
    class ParallelDetector extends plane_ts.Statement {
        reading() {
            return this.textReading(plane_ts.TT("these two lines are parallel."));
        }
        setRelations() {
            super.setRelations();
            plane_ts.assert(this.selectedShapes.length == 2 && this.selectedShapes.every(x => x instanceof plane_ts.AbstractLine));
            const [lineA, lineB] = this.selectedShapes;
            plane_ts.addParallelLines(lineA, lineB);
        }
    }
    plane_ts.ParallelDetector = ParallelDetector;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    //
    function makeTriangleSimilarity(A, B) {
        const equal_angle_pairs = [];
        for (const idx of plane_ts.range(3)) {
            const angle_pointsA = [A.points[idx], A.points[(idx + 1) % 3], A.points[(idx + 2) % 3]];
            const angle_pointsB = [B.points[idx], B.points[(idx + 1) % 3], B.points[(idx + 2) % 3]];
            const angleA = plane_ts.findAngle(angle_pointsA);
            if (angleA != undefined) {
                const angleB = plane_ts.findAngle(angle_pointsB);
                if (angleB != undefined) {
                    if (plane_ts.isEqualAngle(angleA, angleB)) {
                        equal_angle_pairs.push(angleA, angleB);
                    }
                }
            }
        }
        if (equal_angle_pairs.length == 4) {
            return new TriangleSimilarity({
                reason: plane_ts.TriangleSimilarityReason.two_equal_angle_pairs,
                shapes: [A, B],
                auxiliaryShapes: equal_angle_pairs
            });
        }
        return undefined;
    }
    plane_ts.makeTriangleSimilarity = makeTriangleSimilarity;
    class TriangleSimilarity extends plane_ts.Statement {
        constructor(obj) {
            super(obj);
        }
        reading() {
            return this.textReading(plane_ts.TT("the two triangles are similar."));
        }
        setRelations() {
            super.setRelations();
            const triangles = this.selectedShapes;
            plane_ts.addSimilarTriangles(triangles[0], triangles[1]);
        }
    }
    plane_ts.TriangleSimilarity = TriangleSimilarity;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    //
    class TriangleDetector extends plane_ts.TriangleQuadrilateralDetector {
        constructor(obj) {
            super(obj);
            const triangle = this.selectedShapes[0];
            plane_ts.assert(triangle instanceof plane_ts.Triangle);
            if (this.reason == plane_ts.IsoscelesTriangleReason.two_sides_are_equal) {
                plane_ts.isoscelesTriangle.push(triangle);
            }
        }
        reading() {
            switch (this.reason) {
                case plane_ts.IsoscelesTriangleReason.two_sides_are_equal:
                    return this.textReading(plane_ts.TT("The triangle is an isosceles triangle."));
            }
            throw new plane_ts.MyError();
        }
    }
    plane_ts.TriangleDetector = TriangleDetector;
    function makeIsoscelesTriangleDetector(points, reason) {
        switch (reason) {
            case plane_ts.IsoscelesTriangleReason.two_sides_are_equal:
                for (const length_symbol_set of plane_ts.equalLengths) {
                    const length_symbols = Array.from(length_symbol_set).filter(x => points.includes(x.pointA) && points.includes(x.pointB));
                    if (length_symbols.length == 3) {
                        const triangle = plane_ts.Triangle.fromPoints(points);
                        return new TriangleDetector({
                            reason: reason,
                            auxiliaryShapes: length_symbols,
                            shapes: [triangle]
                        });
                    }
                    else if (length_symbols.length == 2) {
                        const points_list = length_symbols.map(x => [x.pointA, x.pointB]);
                        const vertex_idx = plane_ts.range(3).find(i => points_list.every(pts => pts.includes(points[i])));
                        plane_ts.assert(vertex_idx != undefined);
                        const points2 = [points[vertex_idx], points[(vertex_idx + 1) % 3], points[(vertex_idx + 2) % 3]];
                        const triangle = plane_ts.Triangle.fromPoints(points2);
                        return new TriangleDetector({
                            reason: reason,
                            auxiliaryShapes: length_symbols,
                            shapes: [triangle]
                        });
                    }
                }
                break;
            default:
                throw new plane_ts.MyError();
        }
        return undefined;
    }
    plane_ts.makeIsoscelesTriangleDetector = makeIsoscelesTriangleDetector;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    //
    plane_ts.Term = parser_ts.Term;
    plane_ts.RefVar = parser_ts.RefVar;
    plane_ts.App = parser_ts.App;
    function isEquationTextBlock(x) {
        if (x == undefined) {
            return false;
        }
        const classes = [plane_ts.AngleEqualityConstraint, plane_ts.Assumption, plane_ts.ExprTransform, ShapeEquation];
        return classes.some(c => x instanceof c);
    }
    plane_ts.isEquationTextBlock = isEquationTextBlock;
    function makeEquationTextBlock(parent, equation) {
        const view = plane_ts.View.current;
        const text_block = new plane_ts.TextBlock({
            parent,
            text: equation.tex(),
            isTex: true,
            offset: plane_ts.Vec2.zero(),
        });
        text_block.setTextPosition(view.textBase.x, view.textBase.y);
        text_block.updateTextDiv();
        const rect = text_block.div.children[0].getBoundingClientRect();
        view.textBase.y -= view.fromYPixScale(rect.height + 10);
        return text_block;
    }
    plane_ts.makeEquationTextBlock = makeEquationTextBlock;
    async function makeShapeEquationByEquationText(reason, auxiliaryShapes, text) {
        // msg(`angles eq: ${text}`);
        const equation = parser_ts.parseMath(text);
        if (!equation.isEq()) {
            plane_ts.msg(`can not make an equation: ${text}`);
            return undefined;
        }
        if (plane_ts.View.isPlayBack) {
            const speech = plane_ts.AbstractSpeech.one;
            await plane_ts.speakReason(speech, reason);
            await plane_ts.showAuxiliaryShapes(reason, auxiliaryShapes);
            await speech.waitEnd();
        }
        return new ShapeEquation({
            reason,
            auxiliaryShapes,
            shapes: [],
            equation
        });
    }
    async function makeSumOfAnglesIsPi(angles_arg) {
        const angles_list = plane_ts.permutation(angles_arg);
        for (const angles of angles_list) {
            if (plane_ts.range(angles.length - 1).every(i => angles[i].commonLineBA(angles[i + 1]))) {
                const [first_angle, last_angle] = [angles[0], plane_ts.last(angles)];
                if (first_angle.lineA == last_angle.lineB && first_angle.directionA == -last_angle.directionB) {
                    const text = angles.map(x => x.name).join(" + ") + " = pi";
                    return await makeShapeEquationByEquationText(plane_ts.ShapeEquationReason.sum_of_angles_is_pi, angles, text);
                }
            }
        }
        return undefined;
    }
    plane_ts.makeSumOfAnglesIsPi = makeSumOfAnglesIsPi;
    async function makeSumOfAnglesIsEqual(angles_arg) {
        plane_ts.check(3 <= angles_arg.length);
        const angles_list = plane_ts.permutation(angles_arg);
        for (const angles of angles_list) {
            const outer_angle = angles[0];
            const inner_angles = angles.slice(1);
            if (outer_angle.commonLineAA(inner_angles[0]) && outer_angle.commonLineBB(plane_ts.last(inner_angles))) {
                if (plane_ts.range(inner_angles.length - 1).every(i => inner_angles[i].commonLineBA(inner_angles[i + 1]))) {
                    const text = `${outer_angle.name} = ` + inner_angles.map(x => x.name).join(" + ");
                    return await makeShapeEquationByEquationText(plane_ts.ShapeEquationReason.sum_of_angles_is_equal, angles, text);
                }
            }
        }
        return undefined;
    }
    plane_ts.makeSumOfAnglesIsEqual = makeSumOfAnglesIsEqual;
    async function makeShapeEquationByExteriorAngleTheorem(angles) {
        for (const [angle1, angle2, angle3] of plane_ts.permutation(angles)) {
            if (angle1.lineA == angle2.lineB && angle1.directionA == -angle2.directionB) {
                const intersection = plane_ts.getCommonPointOfLines(angle1.lineB, angle2.lineA);
                if (angle3.intersection == intersection) {
                    if (plane_ts.areSetsEqual([angle1.lineB, angle2.lineA], [angle3.lineA, angle3.lineB])) {
                        const text = `${angle1.name} + ${angle2.name} = ${angle3.name}`;
                        return await makeShapeEquationByEquationText(plane_ts.ShapeEquationReason.exterior_angle_theorem, angles, text);
                    }
                }
            }
        }
        return undefined;
    }
    plane_ts.makeShapeEquationByExteriorAngleTheorem = makeShapeEquationByExteriorAngleTheorem;
    async function makeSumOfTriangleQuadrilateralAngles(angles, reason) {
        let num_vertices;
        let sum_angles;
        if (reason == plane_ts.ShapeEquationReason.sum_of_interior_angles_of_triangle_is_pi) {
            num_vertices = 3;
            sum_angles = "pi";
        }
        else {
            num_vertices = 4;
            sum_angles = "2 * pi";
        }
        plane_ts.check(angles.length == num_vertices);
        plane_ts.check(angles.every(x => x.name != ""));
        const text = angles.map(x => x.name).join(" + ") + " = " + sum_angles;
        return await makeShapeEquationByEquationText(reason, angles, text);
    }
    plane_ts.makeSumOfTriangleQuadrilateralAngles = makeSumOfTriangleQuadrilateralAngles;
    async function makeShapeEquation(reason, shapes) {
        switch (reason) {
            case plane_ts.ShapeEquationReason.sum_of_angles_is_pi:
            case plane_ts.ShapeEquationReason.sum_of_angles_is_equal:
            case plane_ts.ShapeEquationReason.exterior_angle_theorem: {
                plane_ts.check(shapes.every(x => x instanceof plane_ts.Angle && x.name != ""), plane_ts.TT("The selected shapes are not named angles."));
                const angles = shapes;
                if (reason == plane_ts.ShapeEquationReason.exterior_angle_theorem) {
                    return await makeShapeEquationByExteriorAngleTheorem(angles);
                }
                const intersections = plane_ts.unique(angles.map(x => plane_ts.intersection));
                if (intersections.length != 1) {
                    plane_ts.msg(plane_ts.TT("The vertices of the angles do not match."));
                    return undefined;
                }
                if (reason == plane_ts.ShapeEquationReason.sum_of_angles_is_pi) {
                    return await makeSumOfAnglesIsPi(angles);
                }
                else {
                    return await makeSumOfAnglesIsEqual(angles);
                }
            }
            case plane_ts.ShapeEquationReason.sum_of_interior_angles_of_triangle_is_pi:
            case plane_ts.ShapeEquationReason.sum_of_interior_angles_of_quadrilateral_is_2pi: {
                plane_ts.assert(shapes.every(x => x instanceof plane_ts.Point));
                const angles = plane_ts.findAnglesInPolygon(shapes);
                return await makeSumOfTriangleQuadrilateralAngles(angles, reason);
            }
            default:
                throw new plane_ts.MyError();
        }
    }
    plane_ts.makeShapeEquation = makeShapeEquation;
    class ShapeEquation extends plane_ts.Statement {
        equation;
        textBlock;
        constructor(obj) {
            super(obj);
            this.equation = obj.equation;
            this.textBlock = makeEquationTextBlock(this, this.equation);
            if (this.reason == plane_ts.ShapeEquationReason.sum_of_angles_is_pi && this.auxiliaryShapes.length == 2) {
                plane_ts.assert(this.auxiliaryShapes.every(x => x instanceof plane_ts.Angle));
                const [angle1, angle2] = this.auxiliaryShapes;
                plane_ts.addSupplementaryAngles(angle1, angle2);
                // msg(`add-Supplementary-Angles ${angle1.name} ${angle2.name}`);
            }
        }
        reading() {
            // msg(`empty reading:${this.constructor.name}`);
            return this.textReading(plane_ts.TT(""));
        }
        show() {
            this.textBlock.show();
        }
        hide() {
            this.textBlock.hide();
        }
    }
    plane_ts.ShapeEquation = ShapeEquation;
    async function simplifyEquationTextBlock(eqText) {
        const textBlock = eqText.textBlock;
        const speech = new plane_ts.Speech();
        eqText.equation = await algebra_ts.simplify(speech, textBlock.div, eqText.equation);
        textBlock.text = eqText.equation.tex();
        textBlock.updateTextDiv();
        plane_ts.checkSupplementaryAngles(eqText.equation);
    }
    plane_ts.simplifyEquationTextBlock = simplifyEquationTextBlock;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    //
    async function makeExprTransformByTransposition(term, textBlock, speech) {
        const [equation, term_cp] = term.cloneRoot();
        await algebra_ts.transpose(equation, term_cp, textBlock.div, speech);
        const exprTransform = new ExprTransform({
            reason: plane_ts.ExprTransformReason.transposition,
            equation: equation,
            terms: [term_cp]
        });
        return exprTransform;
    }
    plane_ts.makeExprTransformByTransposition = makeExprTransformByTransposition;
    function setEqualShapes(refvars) {
        const map = new Map();
        plane_ts.View.current.allRealShapes().filter(x => x.name != "").forEach(x => map.set(x.name, x));
        const ref_shapes = refvars.map(x => map.get(x.name)).filter(x => x != undefined);
        if (ref_shapes.every(x => x instanceof plane_ts.Angle)) {
            // msg(`eq angles:${ref_shapes.map(x => x.name).join(" = ")}`);
            for (const i of plane_ts.range(ref_shapes.length - 1)) {
                const angleA = ref_shapes[i];
                const angleB = ref_shapes[i + 1];
                plane_ts.addEqualAngles(angleA, angleB);
            }
        }
    }
    /*
        a = e , b = e  a = b
    */
    async function makeExprTransformByEquality(terms, textBlocks, speech) {
        const refvars = [];
        let eq_expr;
        let roots = [];
        for (const term of terms) {
            const [equation, term_cp] = term.cloneRoot();
            if (!(term_cp instanceof plane_ts.RefVar)) {
                return undefined;
            }
            if (!equation.isEq() || equation.args.length != 2) {
                return undefined;
            }
            const term_idx = equation.args.indexOf(term_cp);
            if (term_idx == -1) {
                return undefined;
            }
            const expr = equation.args[1 - term_idx];
            if (eq_expr == undefined) {
                eq_expr = expr;
            }
            else {
                if (!eq_expr.equal(expr)) {
                    return undefined;
                }
            }
            refvars.push(term_cp);
            roots.push(term.getRoot());
        }
        for (const [idx, term] of terms.entries()) {
            term.colorName = "blue";
            plane_ts.renderKatexSub(textBlocks[idx].div, roots[idx].tex());
        }
        await plane_ts.sleep(1000);
        refvars.forEach(x => x.colorName = undefined);
        const text = refvars.map(x => x.name).join(" = ");
        const equation = parser_ts.parseMath(text);
        setEqualShapes(refvars);
        const exprTransform = new ExprTransform({
            reason: plane_ts.ExprTransformReason.equality,
            equation: equation,
            terms: refvars
        });
        return exprTransform;
    }
    plane_ts.makeExprTransformByEquality = makeExprTransformByEquality;
    async function makeExprTransformByAddEquation(terms, textBlocks, speech) {
        const divs = textBlocks.map(x => x.div);
        const equation = await algebra_ts.addEquations(terms, divs, speech);
        const exprTransform = new ExprTransform({
            reason: plane_ts.ExprTransformReason.add_equation,
            equation: equation,
            terms
        });
        return exprTransform;
    }
    plane_ts.makeExprTransformByAddEquation = makeExprTransformByAddEquation;
    async function makeExprTransformBySubstitution(terms, textBlocks, speech) {
        const equation = await algebra_ts.substitute(terms[0], terms[1], textBlocks[0].div, textBlocks[1].div, speech);
        const exprTransform = new ExprTransform({
            reason: plane_ts.ExprTransformReason.substitution,
            equation: equation,
            terms
        });
        return exprTransform;
    }
    plane_ts.makeExprTransformBySubstitution = makeExprTransformBySubstitution;
    async function makeExprTransformByDividingEquation(root, mathText, textBlock, speech) {
        const term = parser_ts.parseMath(mathText);
        const equation = await algebra_ts.divideEquation(root, term, textBlock.div, speech);
        const exprTransform = new ExprTransform({
            reason: plane_ts.ExprTransformReason.dividing_equation,
            equation,
            terms: [root, term]
        });
        return exprTransform;
    }
    plane_ts.makeExprTransformByDividingEquation = makeExprTransformByDividingEquation;
    async function makeExprTransformByArgShift(term, shift, textBlock, speech) {
        const equation = term.getRoot();
        const exprTransform = new ExprTransform({
            reason: plane_ts.ExprTransformReason.arg_shift,
            equation: equation,
            terms: [term]
        });
        return exprTransform;
    }
    plane_ts.makeExprTransformByArgShift = makeExprTransformByArgShift;
    class ExprTransform extends plane_ts.MathEntity {
        reason;
        equation;
        terms;
        textBlock;
        constructor(obj) {
            super(obj);
            this.reason = obj.reason;
            this.equation = obj.equation;
            this.terms = obj.terms;
            this.textBlock = plane_ts.makeEquationTextBlock(this, this.equation);
        }
        getProperties() {
            return super.getProperties().concat([
                "reason", "equation", "terms"
            ]);
        }
        getAllShapes(shapes) {
            super.getAllShapes(shapes);
            shapes.push(this.textBlock);
        }
        reading() {
            // msg(`empty reading:${this.constructor.name}`);
            return new Reading(this, "", []);
        }
        async speakExprTransform(speech) {
            const text = plane_ts.reasonMsg(this.reason);
            await speech.speak(text);
        }
        show() {
            this.textBlock.show();
        }
        hide() {
            this.textBlock.hide();
        }
    }
    plane_ts.ExprTransform = ExprTransform;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    //
    class Proposition extends plane_ts.Statement {
        constructor(obj) {
            super(obj);
            plane_ts.propositions.push(this);
        }
    }
    plane_ts.Proposition = Proposition;
    class ShapeProposition extends plane_ts.Statement {
        constructor(obj) {
            super(obj);
        }
    }
    plane_ts.ShapeProposition = ShapeProposition;
    class EquationProposition extends plane_ts.Statement {
        equation;
        textBlock;
        constructor(obj) {
            super(obj);
            this.equation = obj.equation;
            plane_ts.assert(this.selectedShapes.length == 1 && this.selectedShapes[0] instanceof plane_ts.TextBlock);
            this.textBlock = this.selectedShapes[0];
        }
    }
    plane_ts.EquationProposition = EquationProposition;
    function makeShapeProposition(reason, shapes) {
        return new ShapeProposition({
            reason,
            auxiliaryShapes: [],
            shapes,
        });
    }
    plane_ts.makeShapeProposition = makeShapeProposition;
    function makeEquationProposition(reason, mathText) {
        const equation = parser_ts.parseMath(mathText);
        plane_ts.assert(equation.isRootEq());
        return new EquationProposition({
            reason,
            auxiliaryShapes: [],
            shapes: [],
            equation
        });
    }
    plane_ts.makeEquationProposition = makeEquationProposition;
})(plane_ts || (plane_ts = {}));
///<reference path="inference.ts" />
///<reference path="deduction/length_equality.ts" />
///<reference path="deduction/angle_equality.ts" />
///<reference path="deduction/quadrilateral.ts" />
///<reference path="deduction/parallel_detector.ts" />
///<reference path="deduction/triangle_similarity.ts" />
///<reference path="deduction/triangle_detector.ts" />
///<reference path="deduction/shape_equation.ts" />
///<reference path="deduction/expr_transform.ts" />
///<reference path="deduction/proposition.ts" />
///<reference path="constraint.ts" />
var plane_ts;
(function (plane_ts) {
    //
    function addShapeSetRelations(view, shape) {
        view.addShape(shape);
        shape.setRelations();
    }
    class shapesSelector {
        numShapes;
        shapes = [];
        constructor(numShapes) {
            this.numShapes = numShapes;
        }
        clear() {
            this.shapes = [];
        }
        async click(view, position, shape) {
            if (this.isInstanceof(shape)) {
                this.shapes.push(shape);
            }
        }
        drawTool(view) {
            this.shapes.forEach(x => x.draw());
        }
        done() {
            return this.shapes.length == this.numShapes;
        }
    }
    class LinesSelector extends shapesSelector {
        isInstanceof(shape) {
            return shape instanceof plane_ts.AbstractLine;
        }
    }
    class CircleArcsSelector extends shapesSelector {
        isInstanceof(shape) {
            return shape instanceof plane_ts.CircleArc;
        }
    }
    class PolygonsSelector {
        numVertices;
        points = [];
        polygon;
        constructor(numVertices) {
            this.numVertices = numVertices;
        }
        clear() {
            this.points = [];
            this.polygon = undefined;
        }
        async click(view, position, shape) {
            if (shape instanceof plane_ts.Point) {
                shape.setMode(plane_ts.Mode.depend);
                this.points.push(shape);
                if (this.points.length == this.numVertices) {
                    if (this.numVertices == 3) {
                        this.polygon = new plane_ts.Triangle({
                            points: this.points,
                            lines: []
                        });
                    }
                    else if (this.numVertices == 4) {
                        this.polygon = new plane_ts.Quadrilateral({
                            points: this.points,
                            lines: []
                        });
                    }
                    else {
                        throw new plane_ts.MyError();
                    }
                }
            }
        }
        drawTool(view) {
            plane_ts.View.current.canvas.drawPartialPolygon(this.points, plane_ts.Mode.depend);
        }
        done() {
            return this.polygon != undefined;
        }
    }
    class TrianglePairSelector {
        selector = new PolygonsSelector(3);
        triangleA;
        triangleB;
        constructor() {
            this.selector;
        }
        triangles() {
            return [this.triangleA, this.triangleB];
        }
        clear() {
            this.selector.clear();
            this.triangleA = undefined;
            this.triangleB = undefined;
        }
        async click(view, position, shape) {
            this.selector.click(view, position, shape);
            if (this.selector.done()) {
                this.selector.polygon.setMode(plane_ts.Mode.depend);
                if (this.triangleA == undefined) {
                    this.triangleA = this.selector.polygon;
                }
                else {
                    this.triangleB = this.selector.polygon;
                }
                this.selector.clear();
            }
        }
        done() {
            return this.triangleA != undefined && this.triangleB != undefined;
        }
        drawTool(view) {
            this.selector.drawTool(view);
            [this.triangleA, this.triangleB].filter(x => x != undefined).forEach(x => x.draw());
        }
        areCongruentTriangles() {
            if (this.triangleA != undefined && this.triangleB != undefined) {
                return this.triangleA.isCongruent(this.triangleB);
            }
            throw new plane_ts.MyError();
        }
    }
    class QuadrilateralSelector extends PolygonsSelector {
        constructor() {
            super(4);
        }
    }
    plane_ts.linesSelector_2 = new LinesSelector(2);
    plane_ts.circleArcsSelector = new CircleArcsSelector(2);
    plane_ts.quadrilateralSelector = new QuadrilateralSelector();
    class Builder {
        static toolName;
        static tool;
        done = false;
        static async setToolByName(tool_name, record_operation) {
            Builder.toolName = tool_name;
            Builder.tool = makeToolByType(tool_name);
            if (record_operation) {
                if (tool_name != "SelectionTool" && tool_name != "RangeTool") {
                    plane_ts.View.current.addOperation(new plane_ts.ToolSelection(tool_name));
                }
            }
            await Builder.tool.init();
            if (tool_name == "RangeTool") {
                plane_ts.msg(`dump:\n${plane_ts.View.current.operations.map(x => x.dump()).join("\n")}`);
            }
        }
        static setToolByShape(shape) {
            if (shape instanceof plane_ts.TriangleCongruence) {
                plane_ts.msg("set Triangle Congruence Builder");
                Builder.tool = new TriangleCongruenceBuilder(shape);
            }
            else if (shape instanceof plane_ts.LengthEquality) {
                plane_ts.msg("set Equal Length Builder");
                Builder.tool = new LengthEqualityBuilder(shape);
            }
            else {
                plane_ts.msg("set Statement Builder");
                Builder.tool = new StatementBuilder(shape);
            }
        }
        static async builderResetTool(view) {
            while (view.operations.length != 0) {
                if (plane_ts.last(view.operations) instanceof plane_ts.ToolSelection) {
                    break;
                }
                view.operations.pop();
            }
            view.operations.forEach(x => plane_ts.msg(x.dump()));
            Builder.tool.resetTool(undefined);
            await Builder.setToolByName(Builder.toolName, false);
        }
        static cancelTool() {
            const view = plane_ts.View.current;
            while (view.operations.length != 0) {
                const last_operation = plane_ts.last(view.operations);
                if (last_operation instanceof plane_ts.ToolSelection) {
                    plane_ts.msg(`cancel tool:${last_operation.toolName}`);
                    break;
                }
                view.operations.pop();
            }
        }
        async init() {
        }
        async click(view, position, shape) {
        }
        async finish(view) {
            throw new plane_ts.MyError();
        }
        pointerdown(event, view, position, shape) {
        }
        pointermove(event, view, position, shape) {
        }
        pointerup(event, view, position, shape) {
        }
        getPosition(position, shape) {
            if (shape instanceof plane_ts.Point) {
                return shape.position;
            }
            else {
                return position;
            }
        }
        makePointOnClick(view, position, shape) {
            if (shape instanceof plane_ts.Point) {
                return shape;
            }
            else {
                const point = plane_ts.Point.fromArgs(position);
                if (shape instanceof plane_ts.AbstractLine || shape instanceof plane_ts.CircleArc) {
                    point.setBound(shape);
                }
                if (view.operations.length != 0) {
                    const last_operation = plane_ts.last(view.operations);
                    if (last_operation instanceof plane_ts.ClickShape && last_operation.position === position) {
                        last_operation.createdPoint = point;
                        // msg(`point is created.`);
                    }
                }
                return point;
            }
        }
        drawTool(view) {
        }
        drawPendingShape(shape) {
            const shapes = [];
            shape.getAllShapes(shapes);
            shapes.forEach(x => x.draw());
        }
        resetTool(shape) {
            if (plane_ts.View.current.operations.length != 0) {
                const last_operation = plane_ts.last(plane_ts.View.current.operations);
                last_operation.shapesLength = plane_ts.View.current.shapes.length;
                last_operation.relationLogsLength = plane_ts.View.current.relationLogs.length;
            }
            plane_ts.View.current.resetMode();
            if (shape != undefined) {
                plane_ts.showProperty(shape, 0);
            }
            this.done = true;
        }
        pendingShapes() {
            return [];
        }
    }
    plane_ts.Builder = Builder;
    class SelectionTool extends Builder {
        downOffset;
        selectedShape;
        minSave;
        maxSave;
        oldPosition;
        async click(view, position, shape) {
            plane_ts.msg(`selection click:${position}`);
            this.resetTool(undefined);
            if (shape != undefined) {
                shape.setMode(plane_ts.Mode.target);
                plane_ts.showProperty(shape, 0);
            }
        }
        pointerdown(event, view, position, shape) {
            plane_ts.msg(`selection pointerdown:${position}`);
            this.downOffset = new plane_ts.Vec2(event.offsetX, event.offsetY);
            this.selectedShape = shape;
            this.minSave = view.min.copy();
            this.maxSave = view.max.copy();
            if (shape != undefined) {
                shape.shapePointerdown(position);
                if (shape instanceof plane_ts.Point) {
                    this.oldPosition = shape.position;
                }
            }
        }
        pointermove(event, view, position, shape) {
            if (this.downOffset != undefined) {
                const offset = new plane_ts.Vec2(event.offsetX, event.offsetY);
                const diff = view.fromPixScale(offset.sub(this.downOffset));
                diff.y *= -1;
                if (this.selectedShape == undefined) {
                    view.min = this.minSave.sub(diff);
                    view.max = this.maxSave.sub(diff);
                    view.allRealShapes().forEach(x => x.updateCaption());
                }
                else {
                    view.changed.clear();
                    this.selectedShape.shapePointermove(position, diff);
                    view.updateShapes();
                }
                view.dirty = true;
            }
        }
        pointerup(event, view, position, shape) {
            plane_ts.msg(`selection pointerup:${position}`);
            if (this instanceof MotionBuilder && this.selectedShape instanceof plane_ts.Point && !this.selectedShape.position.equals(this.oldPosition)) {
                plane_ts.msg(`position changed:`);
                this.animation.addPropertyChange(this.selectedShape, "position", this.oldPosition, this.selectedShape.position);
            }
            this.downOffset = undefined;
            this.selectedShape = undefined;
            this.minSave = undefined;
            this.maxSave = undefined;
        }
    }
    plane_ts.SelectionTool = SelectionTool;
    class RangeTool extends Builder {
        selections = [];
        downPosition;
        movePosition;
        async click(view, position, shape) {
            plane_ts.msg("range click");
        }
        pointerdown(event, view, position, shape) {
            plane_ts.msg("range down");
            this.resetTool(undefined);
            this.downPosition = position;
            this.movePosition = undefined;
            this.selections = [];
        }
        pointermove(event, view, position, shape) {
            plane_ts.msg(`move ${event.buttons}`);
            if (this.downPosition == undefined || event.buttons != 1) {
                return;
            }
            this.movePosition = position;
            const [min_x, min_y, max_x, max_y] = plane_ts.MinMaxXY(this.downPosition, this.movePosition);
            this.selections = [];
            for (const shape of plane_ts.View.current.allShapes()) {
                if (shape instanceof plane_ts.Point) {
                    const pos = shape.position;
                    if (min_x <= pos.x && pos.x <= max_x && min_y <= pos.y && pos.y <= max_y) {
                        this.selections.push(shape);
                        shape.setMode(plane_ts.Mode.depend);
                    }
                }
            }
            view.dirty = true;
        }
        pointerup(event, view, position, shape) {
            plane_ts.msg("range up");
            if (this.selections.length != 0) {
                plane_ts.showProperty(this.selections, 0);
            }
        }
        drawTool(view) {
            if (this.downPosition == undefined || this.movePosition == undefined) {
                return;
            }
            plane_ts.View.current.canvas.drawRect(undefined, this.downPosition, this.movePosition);
        }
    }
    plane_ts.RangeTool = RangeTool;
    class PointBuilder extends Builder {
        async click(view, position, shape) {
            if (shape == undefined || shape instanceof plane_ts.AbstractLine || shape instanceof plane_ts.Circle) {
                const new_point = this.makePointOnClick(view, position, shape);
                if (shape != undefined) {
                    new_point.setBound(shape);
                }
                new_point.updateCaption();
                addShapeSetRelations(view, new_point);
                this.resetTool(new_point);
            }
        }
    }
    plane_ts.PointBuilder = PointBuilder;
    class MidpointBuilder extends Builder {
        pointA;
        async click(view, position, shape) {
            if (this.pointA == undefined) {
                if (shape instanceof plane_ts.Point) {
                    this.pointA = shape;
                    this.pointA.setMode(plane_ts.Mode.depend);
                }
            }
            else if (shape instanceof plane_ts.Point) {
                const mid_point = new plane_ts.Midpoint({ position: plane_ts.Vec2.zero(), pointA: this.pointA, pointB: shape });
                const lengthSymbolA = new plane_ts.LengthSymbol({ pointA: this.pointA, pointB: mid_point, lengthKind: 0 });
                const lengthSymbolB = new plane_ts.LengthSymbol({ pointA: mid_point, pointB: shape, lengthKind: 0 });
                const lengthEquality = new plane_ts.LengthEquality({
                    reason: plane_ts.LengthEqualityReason.midpoint,
                    auxiliaryShapes: [mid_point],
                    shapes: [lengthSymbolA, lengthSymbolB]
                });
                addShapeSetRelations(view, mid_point);
                addShapeSetRelations(view, lengthSymbolA);
                addShapeSetRelations(view, lengthSymbolB);
                addShapeSetRelations(view, lengthEquality);
                this.pointA = undefined;
                this.resetTool(mid_point);
            }
        }
    }
    class CircleByPointBuilder extends Builder {
        center;
        position;
        async click(view, position, shape) {
            if (this.center == undefined) {
                this.center = this.makePointOnClick(view, position, shape);
                this.center.setMode(plane_ts.Mode.depend);
                this.position = position;
            }
            else {
                const point = this.makePointOnClick(view, position, shape);
                const circle = new plane_ts.CircleByPoint({ center: this.center, point });
                addShapeSetRelations(view, circle);
                this.resetTool(circle);
                this.center = undefined;
            }
        }
        pointermove(event, view, position, shape) {
            this.position = position;
            plane_ts.View.current.dirty = true;
        }
        drawTool(view) {
            if (this.center != undefined) {
                const radius = this.position.distance(this.center.position);
                plane_ts.View.current.canvas.drawCircleRaw(this.center.position, radius, plane_ts.fgColor, plane_ts.defaultLineWidth);
            }
        }
    }
    class CircleByRadiusBuilder extends Builder {
        center;
        position;
        async click(view, position, shape) {
            if (this.center == undefined) {
                this.center = this.makePointOnClick(view, position, shape);
                this.center.setMode(plane_ts.Mode.depend);
                this.position = this.center.position;
            }
            else {
                if (shape instanceof plane_ts.LengthSymbol) {
                    const circle = new plane_ts.CircleByRadius({ center: this.center, lengthSymbol: shape });
                    addShapeSetRelations(view, circle);
                    this.center = undefined;
                    this.position = undefined;
                    this.resetTool(circle);
                }
            }
        }
        pointermove(event, view, position, shape) {
            if (this.center != undefined) {
                this.position = this.getPosition(position, shape);
                plane_ts.View.current.dirty = true;
            }
        }
        drawTool(view) {
            if (this.center != undefined) {
                const radius = this.center.position.distance(this.position);
                plane_ts.View.current.canvas.drawCircleRaw(this.center.position, radius, plane_ts.fgColor, plane_ts.defaultLineWidth);
            }
        }
    }
    class EllipseBuilder extends Builder {
        center;
        xPoint;
        radiusY = 0;
        async click(view, position, shape) {
            if (this.center == undefined) {
                this.center = this.makePointOnClick(view, position, shape);
                this.center.setMode(plane_ts.Mode.depend);
            }
            else if (this.xPoint == undefined) {
                this.xPoint = this.makePointOnClick(view, position, shape);
                this.xPoint.setMode(plane_ts.Mode.depend);
            }
            else {
                this.radiusY = this.getRadiusY(position);
                const ellipse = new plane_ts.Ellipse({ center: this.center, xPoint: this.xPoint, radiusY: this.radiusY });
                addShapeSetRelations(view, ellipse);
                this.resetTool(ellipse);
                this.center = undefined;
                this.xPoint = undefined;
            }
        }
        pointermove(event, view, position, shape) {
            if (this.center != undefined && this.xPoint != undefined) {
                this.radiusY = this.getRadiusY(position);
            }
        }
        getRadiusY(position) {
            if (this.center == undefined || this.xPoint == undefined) {
                throw new plane_ts.MyError();
            }
            const foot = plane_ts.calcFootFrom2Pos(position, this.center.position, this.xPoint.position);
            const radius_y = foot.distance(position);
            return radius_y;
        }
    }
    class ArcByPointBuilder extends Builder {
        center;
        pointA;
        lastPosition;
        async click(view, position, shape) {
            if (this.center == undefined) {
                this.center = this.makePointOnClick(view, position, shape);
                this.center.setMode(plane_ts.Mode.depend);
            }
            else if (this.pointA == undefined) {
                this.pointA = this.makePointOnClick(view, position, shape);
                this.pointA.setMode(plane_ts.Mode.depend);
                this.lastPosition = position;
            }
            else {
                const pointB = this.makePointOnClick(view, position, shape);
                const arc = new plane_ts.ArcByPoint({ center: this.center, pointA: this.pointA, pointB });
                addShapeSetRelations(view, arc);
                this.resetTool(arc);
                this.center = undefined;
                this.pointA = undefined;
            }
        }
        pointermove(event, view, position, shape) {
            this.lastPosition = position;
            view.dirty = true;
        }
        drawTool(view) {
            [this.center, this.pointA].filter(x => x != undefined).forEach(x => x.draw());
            if (this.pointA != undefined) {
                const radius = this.center.position.distance(this.pointA.position);
                const [startAngle, endAngle] = plane_ts.Arc.getAngles(this.center, this.pointA, this.lastPosition);
                plane_ts.View.current.canvas.drawArcRaw(this.center.position, radius, startAngle, endAngle, plane_ts.fgColor, plane_ts.defaultLineWidth);
            }
        }
    }
    class ArcByRadiusBuilder extends Builder {
        center;
        lengthSymbol;
        circle;
        pointA;
        position;
        async click(view, position, shape) {
            if (shape instanceof plane_ts.LengthSymbol) {
                this.lengthSymbol = shape;
                shape.setMode(plane_ts.Mode.depend);
                this.circle = undefined;
            }
            else if (shape instanceof plane_ts.CircleArc) {
                this.circle = shape;
                shape.setMode(plane_ts.Mode.depend);
                this.lengthSymbol = undefined;
            }
            else if (this.center == undefined) {
                this.center = this.makePointOnClick(view, position, shape);
                this.center.setMode(plane_ts.Mode.depend);
            }
            else if ((this.lengthSymbol != undefined || this.circle != undefined) && this.center != undefined) {
                this.position = position;
                if (this.pointA == undefined) {
                    this.pointA = this.makePointOnClick(view, position, shape);
                    this.pointA.setMode(plane_ts.Mode.depend);
                }
                else {
                    const [startAngle, endAngle] = plane_ts.Arc.getAngles(this.center, this.pointA, position);
                    let arc;
                    if (this.lengthSymbol != undefined) {
                        arc = new plane_ts.ArcByLengthSymbol({ center: this.center, lengthSymbol: this.lengthSymbol, startAngle, endAngle });
                    }
                    else {
                        arc = new plane_ts.ArcByCircle({ center: this.center, circle: this.circle, startAngle, endAngle });
                    }
                    addShapeSetRelations(view, arc);
                    this.center = undefined;
                    this.lengthSymbol = undefined;
                    this.circle = undefined;
                    this.pointA = undefined;
                    this.resetTool(arc);
                }
            }
        }
        pointermove(event, view, position, shape) {
            if (this.pointA != undefined) {
                this.position = position;
                view.dirty = true;
            }
        }
        drawTool(view) {
            [this.center, this.lengthSymbol, this.circle, this.pointA].filter(x => x != undefined).forEach(x => x.draw());
            if ((this.lengthSymbol != undefined || this.circle != undefined) && this.center != undefined && this.pointA != undefined) {
                const radius = (this.lengthSymbol != undefined ? this.lengthSymbol.length() : this.circle.radius());
                const [startAngle, endAngle] = plane_ts.Arc.getAngles(this.center, this.pointA, this.position);
                plane_ts.View.current.canvas.drawArcRaw(this.center.position, radius, startAngle, endAngle, plane_ts.fgColor, plane_ts.defaultLineWidth);
            }
        }
    }
    class LineByPointsBuilder extends Builder {
        pointA;
        position;
        async click(view, position, shape) {
            if (this.pointA == undefined) {
                this.pointA = this.makePointOnClick(view, position, shape);
                this.pointA.setMode(plane_ts.Mode.depend);
                this.position = position;
            }
            else {
                const pointB = this.makePointOnClick(view, position, shape);
                let line;
                if (this instanceof LineSegmentBuilder) {
                    line = plane_ts.makeLineSegment(this.pointA, pointB);
                }
                else {
                    line = plane_ts.makeRay(this.pointA, pointB);
                }
                addShapeSetRelations(view, line);
                this.pointA = undefined;
                this.position = undefined;
                this.resetTool(line);
            }
        }
        pointermove(event, view, position, shape) {
            if (this.pointA != undefined) {
                if (shape instanceof plane_ts.Point) {
                    this.position = shape.position;
                }
                else {
                    this.position = position;
                }
                view.dirty = true;
            }
        }
        drawTool(view) {
            if (this.pointA != undefined) {
                this.pointA.draw();
                view.canvas.drawLineRaw(this.pointA.position, this.position, plane_ts.fgColor, plane_ts.defaultLineWidth);
            }
        }
    }
    class LineSegmentBuilder extends LineByPointsBuilder {
    }
    class PolygonBuilder extends Builder {
        points = [];
        lines = [];
        lastPosition;
        pendingShapes() {
            return this.points;
        }
        async click(view, position, shape) {
            const point = this.makePointOnClick(view, position, shape);
            if (this.points.length != 0) {
                const pointA = plane_ts.last(this.points);
                let line = plane_ts.getCommonLineOfPoints(pointA, point);
                if (line == undefined) {
                    line = plane_ts.makeLineSegment(pointA, point);
                }
                this.lines.push(line);
            }
            if (3 <= this.points.length && this.points[0] == point) {
                const polygon = new plane_ts.Polygon({ points: this.points, lines: this.lines });
                addShapeSetRelations(view, polygon);
                this.resetTool(polygon);
                this.points = [];
                this.lines = [];
            }
            else {
                point.setMode(plane_ts.Mode.depend);
                this.points.push(point);
            }
        }
        pointermove(event, view, position, shape) {
            if (this.points.length != 0) {
                this.lastPosition = position;
                plane_ts.View.current.dirty = true;
            }
        }
        drawTool(view) {
            if (this.points.length != 0 && this.lastPosition != undefined) {
                this.points.forEach(x => x.draw());
                for (const [idx, point] of this.points.entries()) {
                    let position;
                    if (idx + 1 < this.points.length) {
                        position = this.points[idx + 1].position;
                    }
                    else {
                        position = this.lastPosition;
                    }
                    view.canvas.drawLineRaw(point.position, position, plane_ts.dependColor, plane_ts.defaultLineWidth);
                }
            }
        }
    }
    class ParallelLineBuilder extends Builder {
        line;
        point;
        async click(view, position, shape) {
            if (shape instanceof plane_ts.Point) {
                this.point = this.makePointOnClick(view, position, shape);
                this.point.setMode(plane_ts.Mode.depend);
            }
            else if (shape instanceof plane_ts.AbstractLine) {
                this.line = shape;
                this.line.setMode(plane_ts.Mode.depend);
            }
            if (this.line != undefined && this.point != undefined) {
                const parallel_line = new plane_ts.ParallelLine({ lineKind: plane_ts.LineKind.line, pointA: this.point, line: this.line });
                addShapeSetRelations(view, parallel_line);
                this.line = undefined;
                this.point = undefined;
                this.resetTool(parallel_line);
            }
        }
        pointermove(event, view, position, shape) {
        }
    }
    class PerpendicularBuilder extends Builder {
        point;
        line;
        async click(view, position, shape) {
            if (this.point == undefined && shape instanceof plane_ts.Point) {
                this.point = this.makePointOnClick(view, position, shape);
                this.point.setMode(plane_ts.Mode.depend);
            }
            else if (shape instanceof plane_ts.AbstractLine) {
                this.line = shape;
            }
            if (this.point != undefined && this.line != undefined) {
                const foot = plane_ts.Point.fromArgs(plane_ts.Vec2.nan());
                const perpendicular = new plane_ts.FootOfPerpendicular({ lineKind: 3, pointA: this.point, line: this.line, foot });
                addShapeSetRelations(view, perpendicular);
                this.point = undefined;
                this.line = undefined;
                this.resetTool(perpendicular);
            }
        }
    }
    class PerpendicularLineBuilder extends Builder {
        line;
        pointA;
        async click(view, position, shape) {
            if (shape instanceof plane_ts.AbstractLine) {
                this.line = shape;
            }
            else if (shape instanceof plane_ts.Point) {
                this.pointA = shape;
            }
            if (this.line != undefined && this.pointA != undefined) {
                if (this.line.includesPoint(this.pointA)) {
                    const line = new plane_ts.PerpendicularLine({ lineKind: plane_ts.LineKind.line, line: this.line, pointA: this.pointA });
                    addShapeSetRelations(view, line);
                    this.line = undefined;
                    this.pointA = undefined;
                    this.resetTool(line);
                }
                else {
                    plane_ts.msg("The point is not on the line.");
                }
            }
        }
    }
    class IntersectionBuilder extends Builder {
        shape1;
        async click(view, position, shape) {
            if (shape instanceof plane_ts.AbstractLine || shape instanceof plane_ts.CircleArc) {
                if (this.shape1 == undefined) {
                    this.shape1 = shape;
                    this.shape1.setMode(plane_ts.Mode.depend);
                }
                else {
                    this.shape1.setMode(plane_ts.Mode.none);
                    let new_shape;
                    if (this.shape1 instanceof plane_ts.AbstractLine && shape instanceof plane_ts.AbstractLine) {
                        const [lineA, lineB] = [this.shape1, shape];
                        const position = plane_ts.calcLineLineIntersection(lineA, lineB);
                        new_shape = new plane_ts.LineLineIntersection({ lineA, lineB, position });
                    }
                    else if (this.shape1 instanceof plane_ts.CircleArc && shape instanceof plane_ts.CircleArc) {
                        const pointA = plane_ts.Point.fromArgs(plane_ts.Vec2.zero());
                        const pointB = plane_ts.Point.fromArgs(plane_ts.Vec2.zero());
                        new_shape = new plane_ts.ArcArcIntersection({ arc1: this.shape1, arc2: shape, pointA, pointB });
                    }
                    else {
                        let line;
                        let circle;
                        if (this.shape1 instanceof plane_ts.AbstractLine) {
                            line = this.shape1;
                            circle = shape;
                        }
                        else {
                            circle = this.shape1;
                            line = shape;
                        }
                        const pointA = plane_ts.Point.fromArgs(plane_ts.Vec2.zero());
                        const pointB = plane_ts.Point.fromArgs(plane_ts.Vec2.zero());
                        new_shape = new plane_ts.LineArcIntersection({ line, arc: circle, pointA, pointB });
                    }
                    addShapeSetRelations(view, new_shape);
                    this.shape1 = undefined;
                    this.resetTool(new_shape);
                }
            }
        }
    }
    class CirclePointTangentBuilder extends Builder {
        circle;
        point;
        async click(view, position, shape) {
            if (shape instanceof plane_ts.Circle) {
                this.circle = shape;
            }
            if (shape instanceof plane_ts.Point) {
                this.point = this.makePointOnClick(view, position, shape);
            }
            if (this.circle != undefined && this.point != undefined) {
                const tangent = new plane_ts.CirclePointTangent({ circle: this.circle, point: this.point });
                addShapeSetRelations(view, tangent);
                this.circle = undefined;
                this.point = undefined;
                this.resetTool(tangent);
            }
        }
    }
    class CircleCircleTangentBuilder extends Builder {
        circle;
        async click(view, position, shape) {
            if (shape instanceof plane_ts.Circle) {
                if (this.circle == undefined) {
                    this.circle = shape;
                }
                else {
                    const tangent = new plane_ts.CircleCircleTangent({ circle1: this.circle, circle2: shape });
                    addShapeSetRelations(view, tangent);
                    this.circle = undefined;
                    this.resetTool(tangent);
                }
            }
        }
    }
    class AbstractAngleBuilder extends Builder {
        line1;
        pos1;
        async click(view, position, shape) {
            if (shape instanceof plane_ts.AbstractLine) {
                if (this.line1 == undefined) {
                    this.line1 = shape;
                    this.line1.setMode(plane_ts.Mode.depend);
                    this.pos1 = position;
                }
                else {
                    const [lineA, pos1, lineB, pos2] = [this.line1, this.pos1, shape, position];
                    lineB.setMode(plane_ts.Mode.depend);
                    lineA.calc();
                    lineB.calc();
                    const common_point = plane_ts.getCommonPointOfLines(lineA, lineB);
                    if (common_point == undefined) {
                        throw new plane_ts.MyError();
                    }
                    const directionA = Math.sign(pos1.sub(common_point.position).dot(lineA.e));
                    const directionB = Math.sign(pos2.sub(common_point.position).dot(lineB.e));
                    let target;
                    if (this instanceof AngleBuilder) {
                        let angleMark = 1;
                        if (plane_ts.isPerpendicular(lineA, lineB)) {
                            angleMark = plane_ts.Angle.RightAngleMark;
                        }
                        target = new plane_ts.Angle({ angleMark, lineA, directionA, lineB, directionB });
                        target.calc();
                        addShapeSetRelations(view, target);
                    }
                    else {
                        target = new plane_ts.AngleBisector({ lineKind: 0, lineA, directionA, lineB, directionB });
                        addShapeSetRelations(view, target);
                        const angleA = new plane_ts.Angle({ angleMark: 1, lineA, directionA, lineB: target, directionB: 1 });
                        const angleB = new plane_ts.Angle({ angleMark: 1, lineA: target, directionA: 1, lineB, directionB });
                        const angleEquality = plane_ts.makeAngleEqualityByAngleBisector(angleA, angleB, target);
                        addShapeSetRelations(view, angleA);
                        addShapeSetRelations(view, angleB);
                        addShapeSetRelations(view, angleEquality);
                    }
                    this.line1 = undefined;
                    this.resetTool(target);
                }
            }
        }
    }
    class AngleBuilder extends AbstractAngleBuilder {
    }
    class AngleBisectorBuilder extends AbstractAngleBuilder {
    }
    class DimensionLineBuilder extends Builder {
        pointA;
        pointB;
        dimLine;
        async click(view, position, shape) {
            if (this.dimLine == undefined) {
                if (shape instanceof plane_ts.Point) {
                    if (this.pointA == undefined) {
                        this.pointA = this.makePointOnClick(view, position, shape);
                        this.pointA.setMode(plane_ts.Mode.depend);
                    }
                    else {
                        this.pointB = this.makePointOnClick(view, position, shape);
                        this.pointB.setMode(plane_ts.Mode.depend);
                        const caption = new plane_ts.TextBlock({ text: "\\int \\frac{1}{2}", isTex: true, offset: plane_ts.Vec2.zero() });
                        this.dimLine = new plane_ts.DimensionLine({ caption, pointA: this.pointA, pointB: this.pointB, shift: 0 });
                    }
                    plane_ts.View.current.dirty = true;
                }
            }
            else {
                addShapeSetRelations(view, this.dimLine);
                this.resetTool(this.dimLine);
                this.pointA = undefined;
                this.pointB = undefined;
                this.dimLine = undefined;
            }
        }
        pointermove(event, view, position, shape) {
            if (this.dimLine != undefined) {
                const normal = this.pointB.sub(this.pointA).rot90().unit();
                const shift = position.sub(this.pointB.position).dot(normal);
                this.dimLine.setShift(shift);
            }
        }
        drawTool(view) {
            if (this.dimLine != undefined) {
                this.dimLine.draw();
            }
        }
    }
    class LengthSymbolBuilder extends LineByPointsBuilder {
        async click(view, position, shape) {
            if (shape instanceof plane_ts.LineByPoints) {
                const symbol = new plane_ts.LengthSymbol({ pointA: shape.pointA, pointB: shape.pointB, lengthKind: 0 });
                addShapeSetRelations(view, symbol);
            }
            else {
                if (this.pointA == undefined) {
                    this.pointA = this.makePointOnClick(view, position, shape);
                    this.position = position;
                }
                else {
                    const clicked_point = this.makePointOnClick(view, position, shape);
                    const [pointA, pointB] = plane_ts.sortShape([this.pointA, clicked_point]);
                    let line = plane_ts.getCommonLineOfPoints(pointA, pointB);
                    if (line == undefined) {
                        line = plane_ts.makeLineSegment(pointA, pointB);
                        // msg(`make line:${pointA.id} - ${line.id} - ${pointB.id}`);
                        addShapeSetRelations(view, line);
                    }
                    const symbol = new plane_ts.LengthSymbol({ pointA, pointB, lengthKind: 0 });
                    addShapeSetRelations(view, symbol);
                    this.pointA = undefined;
                    this.position = undefined;
                    this.resetTool(symbol);
                }
            }
        }
    }
    class TextBlockBuilder extends Builder {
        async click(view, position, shape) {
            const text_block = new plane_ts.TextBlock({ text: "Text", isTex: false, offset: position });
            text_block.updateTextPosition();
            addShapeSetRelations(view, text_block);
            this.resetTool(text_block);
        }
    }
    class AssumptionBuilder extends Builder {
        async init() {
            const view = plane_ts.View.current;
            const mathText = plane_ts.inputTextPrompt(plane_ts.TT("Enter a mathematical expression."));
            if (mathText == null) {
                Builder.cancelTool();
            }
            else {
                const equation = parser_ts.parseMath(mathText);
                let assumption;
                assumption = new plane_ts.Assumption({ equation });
                addShapeSetRelations(view, assumption);
            }
        }
    }
    plane_ts.AssumptionBuilder = AssumptionBuilder;
    class StatementBuilder extends Builder {
        statement;
        specifiedShapes = [];
        constructor(statement) {
            super();
            if (statement == undefined) {
                this.statement = new plane_ts.Statement({ shapes: [] });
                plane_ts.View.current.addShape(this.statement);
            }
            else {
                this.statement = statement;
            }
            plane_ts.showProperty(this.statement, 0);
        }
        async clickWithMouseEvent(event, view, position, shape) {
            if (shape != undefined) {
                let selected_shape = shape;
                if (event.ctrlKey) {
                    if (shape instanceof plane_ts.Shape) {
                        shape.setMode(plane_ts.Mode.depend);
                        this.specifiedShapes.push(shape);
                    }
                    return;
                }
                else {
                    if (this.specifiedShapes.length != 0) {
                        if (shape instanceof plane_ts.Shape) {
                            this.specifiedShapes.push(shape);
                            this.statement.selectedShapes.push(...this.specifiedShapes);
                            this.specifiedShapes.forEach(x => x.setMode(plane_ts.Mode.none));
                            this.specifiedShapes = [];
                        }
                        else {
                            return;
                        }
                    }
                    else {
                        this.statement.selectedShapes.push(shape);
                    }
                }
                const button = makeShapeButton(selected_shape, false);
                button.button.style.position = "";
                if (plane_ts.ShapesProperty.one.buttonsUI instanceof layout_ts.Grid) {
                    plane_ts.ShapesProperty.one.buttonsUI.addChild(button);
                }
                else {
                    throw new plane_ts.MyError();
                }
            }
        }
    }
    plane_ts.StatementBuilder = StatementBuilder;
    class TriangleCongruenceSimilarityBuilder extends Builder {
        trianglePairSelector = new TrianglePairSelector();
        async click(view, position, shape) {
            this.trianglePairSelector.click(view, position, shape);
            if (this.trianglePairSelector.done()) {
                const triangle_statement = this.makeTriangleCongruenceSimilarity(this.trianglePairSelector.triangleA, this.trianglePairSelector.triangleB);
                if (triangle_statement != undefined) {
                    addShapeSetRelations(view, triangle_statement);
                    this.resetTool(triangle_statement);
                }
                else {
                    this.resetTool(undefined);
                }
                this.trianglePairSelector.clear();
            }
        }
        drawTool(view) {
            this.trianglePairSelector.drawTool(view);
        }
    }
    class TriangleCongruenceBuilder extends TriangleCongruenceSimilarityBuilder {
        constructor(triangleCongruence) {
            super();
        }
        makeTriangleCongruenceSimilarity(A, B) {
            return plane_ts.makeTriangleCongruence(A, B);
        }
    }
    plane_ts.TriangleCongruenceBuilder = TriangleCongruenceBuilder;
    class TriangleSimilarityBuilder extends TriangleCongruenceSimilarityBuilder {
        constructor(triangleSimilarity) {
            super();
        }
        makeTriangleCongruenceSimilarity(A, B) {
            return plane_ts.makeTriangleSimilarity(A, B);
        }
    }
    plane_ts.TriangleSimilarityBuilder = TriangleSimilarityBuilder;
    class LengthEqualityBuilder extends Builder {
        lengthSymbolA;
        lengthSymbolB;
        lengthEqualityReason;
        trianglePairSelector;
        constructor(lengthEquality) {
            super();
        }
        async init() {
            this.lengthEqualityReason = await plane_ts.showMenu(plane_ts.LengthEqualityReason);
        }
        clear() {
            this.lengthSymbolA = undefined;
            this.lengthSymbolB = undefined;
            this.lengthEqualityReason = plane_ts.LengthEqualityReason.none;
        }
        async click(view, position, shape) {
            let lengthEquality;
            if (shape instanceof plane_ts.LengthSymbol) {
                if (this.lengthSymbolA == undefined) {
                    this.lengthSymbolA = shape;
                    shape.setMode(plane_ts.Mode.depend);
                }
                else if (this.lengthSymbolB == undefined) {
                    this.lengthSymbolB = shape;
                    shape.setMode(plane_ts.Mode.depend);
                    switch (this.lengthEqualityReason) {
                        case plane_ts.LengthEqualityReason.radii_equal:
                            lengthEquality = plane_ts.makeEqualLengthByRadiiEqual(this.lengthSymbolA, this.lengthSymbolB);
                            break;
                        case plane_ts.LengthEqualityReason.common_circle:
                            plane_ts.showPrompt(plane_ts.TT("click the common circle."));
                            break;
                        case plane_ts.LengthEqualityReason.parallel_lines_distance:
                            plane_ts.linesSelector_2.clear();
                            plane_ts.showPrompt(plane_ts.TT("click two parallel lines."));
                            break;
                        case plane_ts.LengthEqualityReason.congruent_triangles:
                            lengthEquality = plane_ts.makeEqualLengthByCongruentTriangles(this.lengthSymbolA, this.lengthSymbolB);
                            break;
                        case plane_ts.LengthEqualityReason.parallelogram_opposite_sides:
                            lengthEquality = plane_ts.makeEqualLengthByParallelogramOppositeSides(this.lengthSymbolA, this.lengthSymbolB);
                            break;
                        case plane_ts.LengthEqualityReason.parallelogram_diagonal_bisection:
                            lengthEquality = plane_ts.makeEqualLengthByParallelogramDiagonalBisection(this.lengthSymbolA, this.lengthSymbolB);
                            break;
                        case plane_ts.LengthEqualityReason.equivalence_class:
                            lengthEquality = plane_ts.makeEqualLengthByEquivalenceClass(this.lengthSymbolA, this.lengthSymbolB);
                            break;
                        case plane_ts.LengthEqualityReason.not_used:
                        default:
                            throw new plane_ts.MyError();
                    }
                }
            }
            else {
                if (this.lengthSymbolA == undefined || this.lengthSymbolB == undefined) {
                    throw new plane_ts.MyError();
                }
                switch (this.lengthEqualityReason) {
                    // case LengthEqualityReason.radii_equal:
                    case plane_ts.LengthEqualityReason.common_circle:
                        if (shape instanceof plane_ts.CircleArc) {
                            lengthEquality = plane_ts.makeEqualLengthByCommonCircle(this.lengthSymbolA, this.lengthSymbolB, shape);
                        }
                        break;
                    case plane_ts.LengthEqualityReason.parallel_lines_distance:
                        plane_ts.linesSelector_2.click(view, position, shape);
                        if (plane_ts.linesSelector_2.done()) {
                            lengthEquality = plane_ts.makeEqualLengthByParallelLines(this.lengthSymbolA, this.lengthSymbolB, plane_ts.linesSelector_2.shapes);
                            plane_ts.linesSelector_2.clear();
                        }
                        break;
                    // case LengthEqualityReason.circle_by_radius:
                    case plane_ts.LengthEqualityReason.congruent_triangles:
                        break;
                    case plane_ts.LengthEqualityReason.parallelogram_opposite_sides:
                        break;
                    case plane_ts.LengthEqualityReason.parallelogram_diagonal_bisection:
                        break;
                    default:
                        throw new plane_ts.MyError();
                }
            }
            if (lengthEquality != undefined) {
                addShapeSetRelations(view, lengthEquality);
                this.resetTool(lengthEquality);
                this.clear();
            }
        }
        drawTool(view) {
            if (this.trianglePairSelector != undefined) {
                this.trianglePairSelector.drawTool(view);
            }
        }
    }
    plane_ts.LengthEqualityBuilder = LengthEqualityBuilder;
    class AngleEqualityBuilder extends Builder {
        angleA;
        angleB;
        angleEqualityReason = plane_ts.AngleEqualityReason.none;
        trianglePairSelector;
        constructor(angleEquality) {
            super();
        }
        async init() {
            this.angleEqualityReason = await plane_ts.showMenu(plane_ts.AngleEqualityReason);
        }
        clear() {
            this.angleA = undefined;
            this.angleB = undefined;
            this.angleEqualityReason = plane_ts.AngleEqualityReason.none;
            this.trianglePairSelector = undefined;
        }
        async click(view, position, shape) {
            let angleEquality;
            if (this.angleA == undefined || this.angleB == undefined) {
                if (shape instanceof plane_ts.Angle) {
                    if (this.angleA == undefined) {
                        this.angleA = shape;
                        shape.setMode(plane_ts.Mode.depend);
                    }
                    else if (this.angleB == undefined) {
                        this.angleB = shape;
                        shape.setMode(plane_ts.Mode.depend);
                        switch (this.angleEqualityReason) {
                            case plane_ts.AngleEqualityReason.vertical_angles:
                                angleEquality = plane_ts.makeAngleEqualityByVertical_angles(this.angleA, this.angleB);
                                break;
                            case plane_ts.AngleEqualityReason.parallel_line_angles:
                                angleEquality = plane_ts.makeAngleEqualityByParallelLines(this.angleA, this.angleB);
                                break;
                            case plane_ts.AngleEqualityReason.angle_bisector:
                                break;
                            case plane_ts.AngleEqualityReason.congruent_triangles:
                                angleEquality = plane_ts.makeAngleEqualityByCongruentTriangles(this.angleA, this.angleB);
                                break;
                            case plane_ts.AngleEqualityReason.parallelogram_opposite_angles:
                                plane_ts.quadrilateralSelector.clear();
                                break;
                            case plane_ts.AngleEqualityReason.similar_triangles:
                                angleEquality = plane_ts.makeAngleEqualityBySimilarTriangles(this.angleA, this.angleB);
                                break;
                            case plane_ts.AngleEqualityReason.isosceles_triangle_base_angles:
                                angleEquality = plane_ts.makeAngleEqualityByIsoscelesTriangleBaseAngles(this.angleA, this.angleB);
                                break;
                            default:
                                throw new plane_ts.MyError();
                        }
                    }
                }
            }
            else {
                switch (this.angleEqualityReason) {
                    case plane_ts.AngleEqualityReason.vertical_angles:
                        break;
                    case plane_ts.AngleEqualityReason.parallel_line_angles:
                        break;
                    case plane_ts.AngleEqualityReason.angle_bisector:
                        break;
                    case plane_ts.AngleEqualityReason.congruent_triangles:
                        break;
                    case plane_ts.AngleEqualityReason.parallelogram_opposite_angles:
                        plane_ts.quadrilateralSelector.click(view, position, shape);
                        if (plane_ts.quadrilateralSelector.done()) {
                            const parallelogram = plane_ts.quadrilateralSelector.polygon;
                            angleEquality = plane_ts.makeAngleEqualityByParallelogramOppositeAngles(this.angleA, this.angleB, parallelogram);
                        }
                        break;
                    case plane_ts.AngleEqualityReason.similar_triangles:
                        break;
                    default:
                        throw new plane_ts.MyError();
                }
            }
            if (angleEquality != undefined) {
                addShapeSetRelations(view, angleEquality);
                this.resetTool(angleEquality);
                this.clear();
            }
        }
        drawTool(view) {
            if (this.trianglePairSelector != undefined) {
                this.trianglePairSelector.drawTool(view);
            }
        }
    }
    plane_ts.AngleEqualityBuilder = AngleEqualityBuilder;
    class ParallelDetectorBuilder extends Builder {
        parallelReason;
        lineA;
        angles = [];
        async init() {
            this.parallelReason = await plane_ts.showMenu(plane_ts.ParallelReason);
        }
        clear() {
            this.lineA = undefined;
            this.angles = [];
        }
        async click(view, position, shape) {
            let detector;
            let finished = false;
            switch (this.parallelReason) {
                case plane_ts.ParallelReason.parallelogram:
                    if (shape instanceof plane_ts.AbstractLine) {
                        if (this.lineA == undefined) {
                            this.lineA = shape;
                            shape.setMode(plane_ts.Mode.depend);
                        }
                        else {
                            shape.setMode(plane_ts.Mode.depend);
                            finished = true;
                            detector = plane_ts.makeParallelDetectorByParallelogram(this.lineA, shape);
                        }
                    }
                    break;
                case plane_ts.ParallelReason.corresponding_angles_or_alternate_angles_are_equal:
                case plane_ts.ParallelReason.supplementary_angles:
                    if (shape instanceof plane_ts.Angle) {
                        this.angles.push(shape);
                        shape.setMode(plane_ts.Mode.depend);
                        if (this.angles.length == 2) {
                            finished = true;
                            if (this.parallelReason == plane_ts.ParallelReason.corresponding_angles_or_alternate_angles_are_equal) {
                                detector = plane_ts.makeParallelDetectorByCorrespondingAlternateAnglesEqual(this.angles[0], this.angles[1]);
                            }
                            else {
                                detector = plane_ts.makeParallelDetectorBySupplementaryAngles(this.angles[0], this.angles[1]);
                            }
                        }
                    }
                    break;
                default:
                    throw new plane_ts.MyError();
            }
            if (detector != undefined) {
                addShapeSetRelations(view, detector);
                this.resetTool(detector);
                this.clear();
            }
        }
    }
    plane_ts.ParallelDetectorBuilder = ParallelDetectorBuilder;
    class EqualityConstraintBuilder extends Builder {
        lengthSymbolA;
        angleA;
        async click(view, position, shape) {
            let constraint;
            if (shape instanceof plane_ts.LengthSymbol) {
                if (this.lengthSymbolA == undefined) {
                    this.lengthSymbolA = shape;
                    shape.setMode(plane_ts.Mode.depend);
                }
                else {
                    constraint = new plane_ts.LengthEqualityConstraint({
                        lengthSymbolA: this.lengthSymbolA,
                        lengthSymbolB: shape
                    });
                }
            }
            else if (shape instanceof plane_ts.Angle) {
                if (this.angleA == undefined) {
                    this.angleA = shape;
                    shape.setMode(plane_ts.Mode.depend);
                }
                else {
                    constraint = new plane_ts.AngleEqualityConstraint({
                        shapes: [this.angleA, shape]
                    });
                }
            }
            if (constraint != undefined) {
                addShapeSetRelations(view, constraint);
                this.resetTool(constraint);
                this.lengthSymbolA = undefined;
                this.angleA = undefined;
            }
        }
    }
    plane_ts.EqualityConstraintBuilder = EqualityConstraintBuilder;
    class ParallelPerpendicularLineBuilder extends Builder {
        line;
        async click(view, position, shape) {
            if (shape instanceof plane_ts.AbstractLine) {
                if (this.line == undefined) {
                    this.line = shape;
                    this.line.setMode(plane_ts.Mode.depend);
                }
                else {
                    const [lineA, lineB] = plane_ts.sortShape([this.line, shape]);
                    if (lineB instanceof plane_ts.LineByPoints) {
                        let constraint;
                        if (this instanceof ParallelConstraintBuilder) {
                            constraint = new plane_ts.ParallelConstraint({ lineA, lineB });
                        }
                        else {
                            constraint = new plane_ts.PerpendicularConstraint({ lineA, lineB });
                        }
                        addShapeSetRelations(view, constraint);
                        this.line = undefined;
                        this.resetTool(constraint);
                    }
                    else {
                        this.line.setMode(plane_ts.Mode.none);
                        this.line = undefined;
                    }
                }
            }
        }
    }
    class ParallelConstraintBuilder extends ParallelPerpendicularLineBuilder {
    }
    class PerpendicularConstraintBuilder extends ParallelPerpendicularLineBuilder {
    }
    class ClassifierBuilder extends Builder {
    }
    class QuadrilateralClassifierBuilder extends ClassifierBuilder {
        shapeType;
        reason;
        points = [];
        async init() {
            this.shapeType = await plane_ts.showMenu(plane_ts.ShapeType);
            switch (this.shapeType) {
                case plane_ts.ShapeType.parallelogram:
                    this.reason = await plane_ts.showMenu(plane_ts.ParallelogramReason);
                    break;
                case plane_ts.ShapeType.rhombus:
                    this.reason = await plane_ts.showMenu(plane_ts.RhombusReason);
                    break;
                case plane_ts.ShapeType.isosceles_triangle:
                    this.reason = await plane_ts.showMenu(plane_ts.IsoscelesTriangleReason);
                    break;
                default:
                    throw new plane_ts.MyError();
            }
        }
        async click(view, position, shape) {
            if (shape instanceof plane_ts.Point) {
                this.points.push(shape);
                shape.setMode(plane_ts.Mode.depend);
                const num_points = (this.shapeType == plane_ts.ShapeType.isosceles_triangle ? 3 : 4);
                if (this.points.length == num_points) {
                    // msg(`reason:[${reason}]`);
                    const points = plane_ts.toClockwisePoints(this.points);
                    let detector;
                    if (this.shapeType == plane_ts.ShapeType.isosceles_triangle) {
                        detector = plane_ts.makeIsoscelesTriangleDetector(points, this.reason);
                    }
                    else {
                        detector = plane_ts.makeQuadrilateralClassifier(points, this.reason);
                    }
                    if (detector != undefined) {
                        addShapeSetRelations(view, detector);
                        this.resetTool(detector);
                    }
                    this.points = [];
                }
            }
        }
    }
    class ShapeEquationBuilder extends Builder {
        reason = plane_ts.ShapeEquationReason.none;
        shapes = [];
        async init() {
            this.reason = await plane_ts.showMenu(plane_ts.ShapeEquationReason);
        }
        async click(view, position, shape) {
            if (shape == undefined || this.shapes.includes(shape)) {
                return;
            }
            switch (this.reason) {
                case plane_ts.ShapeEquationReason.sum_of_angles_is_pi:
                case plane_ts.ShapeEquationReason.sum_of_angles_is_equal:
                case plane_ts.ShapeEquationReason.exterior_angle_theorem:
                    if (shape instanceof plane_ts.Angle) {
                        if (shape.name == "") {
                            plane_ts.msg(plane_ts.TT("The name of the shape is blank."));
                            return;
                        }
                        this.shapes.push(shape);
                        shape.setMode(plane_ts.Mode.depend);
                        // msg(`click eq ${this.shapes.length}`);
                        if (this.reason == plane_ts.ShapeEquationReason.exterior_angle_theorem && this.shapes.length == 3) {
                            await this.finish(view);
                        }
                    }
                    break;
                case plane_ts.ShapeEquationReason.sum_of_lengths_is_equal:
                    throw new plane_ts.MyError();
                case plane_ts.ShapeEquationReason.sum_of_interior_angles_of_triangle_is_pi:
                case plane_ts.ShapeEquationReason.sum_of_interior_angles_of_quadrilateral_is_2pi:
                    if (shape instanceof plane_ts.Point) {
                        this.shapes.push(shape);
                        shape.setMode(plane_ts.Mode.depend);
                        const num_vertices = (this.reason == plane_ts.ShapeEquationReason.sum_of_interior_angles_of_triangle_is_pi ? 3 : 4);
                        if (this.shapes.length == num_vertices) {
                            await this.finish(view);
                        }
                    }
                    break;
                default:
                    throw new plane_ts.MyError();
            }
        }
        async finish(view) {
            // msg(`finish shapes ${this.shapes.length}`);
            const shapeEquation = await plane_ts.makeShapeEquation(this.reason, this.shapes);
            if (shapeEquation != undefined) {
                addShapeSetRelations(view, shapeEquation);
                this.resetTool(shapeEquation);
                await plane_ts.simplifyEquationTextBlock(shapeEquation);
            }
            this.shapes = [];
        }
    }
    plane_ts.ShapeEquationBuilder = ShapeEquationBuilder;
    class ExprTransformBuilder extends Builder {
        reason = plane_ts.ExprTransformReason.none;
        terms = [];
        textBlocks = [];
        mathText = null;
        root;
        shift = 0;
        async init() {
            this.reason = await plane_ts.showMenu(plane_ts.ExprTransformReason);
        }
        async click(view, position, shape) {
            // msg(`click eq ${this.terms.length}`);
        }
        async dblclick(view, position, shape) {
            plane_ts.msg(`dblclick eq ${this.terms.length}`);
        }
        async termClick(term, textBlock) {
            // msg(`term click ${this.terms.length}`);
            if (!this.terms.includes(term)) {
                this.terms.push(term);
                this.textBlocks.push(textBlock);
                if (this.reason == plane_ts.ExprTransformReason.dividing_equation) {
                    plane_ts.assert(term.isRootEq());
                    this.root = term;
                    this.mathText = plane_ts.inputTextPrompt(plane_ts.TT("Enter a mathematical expression."));
                    if (this.mathText == null) {
                        Builder.cancelTool();
                    }
                    else {
                        await this.finish(plane_ts.View.current);
                    }
                }
                else if (this.reason == plane_ts.ExprTransformReason.arg_shift) {
                    term.colorName = "blue";
                    plane_ts.renderKatexSub(textBlock.div, term.getRoot().tex());
                }
            }
        }
        getDstTermRect(termRects, srcTermRect) {
            if (this.reason == plane_ts.ExprTransformReason.add_equation) {
                for (let term = srcTermRect.term; term.parent != null; term = term.parent) {
                    if (term.parent.isEq()) {
                        const dstTermRect = termRects.find(x => x.term == term);
                        if (dstTermRect == undefined) {
                            throw new plane_ts.MyError();
                        }
                        dstTermRect.span.style.backgroundColor = "blue";
                        return dstTermRect;
                    }
                }
                throw new plane_ts.MyError();
            }
            else if (this.reason == plane_ts.ExprTransformReason.dividing_equation) {
                const root = srcTermRect.term.getRoot();
                const dstTermRect = termRects.find(x => x.term == root);
                if (dstTermRect == undefined) {
                    throw new plane_ts.MyError();
                }
                dstTermRect.span.style.backgroundColor = "blue";
                return dstTermRect;
            }
            else if (this.reason == plane_ts.ExprTransformReason.substitution) {
                let dstTermRect;
                if (this.terms.length == 0) {
                    const side = srcTermRect.term.getEqSide();
                    if (side != null) {
                        dstTermRect = termRects.find(x => x.term == side);
                    }
                }
                else {
                    const src_term = this.terms[0];
                    algebra_ts.initHashTerm();
                    algebra_ts.setHashTerm([], src_term);
                    for (let dst_term = srcTermRect.term; dst_term.parent != null; dst_term = dst_term.parent) {
                        algebra_ts.setHashTerm([], dst_term);
                        if (src_term.hash == dst_term.hash) {
                            dstTermRect = termRects.find(x => x.term == dst_term);
                            if (dstTermRect != undefined) {
                                break;
                            }
                        }
                    }
                }
                if (dstTermRect != undefined) {
                    dstTermRect.span.style.backgroundColor = "blue";
                    return dstTermRect;
                }
                throw new plane_ts.MyError();
            }
            else {
                srcTermRect.span.style.backgroundColor = "blue";
                return srcTermRect;
            }
        }
        async finish(view) {
            // msg(`finish terms ${this.terms.length}`);
            const speech = new plane_ts.Speech();
            let exprTransform;
            plane_ts.msg(`expr:${plane_ts.enumToImgName.get(this.reason)}`);
            this.terms.forEach(x => plane_ts.msg(`${x.getRoot().str()}[${x.str()}]`));
            switch (this.reason) {
                case plane_ts.ExprTransformReason.transposition:
                    // msg("Expr-Transform-Reason.transposition");
                    if (this.terms.length == 1) {
                        exprTransform = await plane_ts.makeExprTransformByTransposition(this.terms[0], this.textBlocks[0], speech);
                    }
                    else {
                        throw new plane_ts.MyError(`terms length != 1`);
                    }
                    break;
                case plane_ts.ExprTransformReason.equality:
                    // msg("Expr-Transform-Reason.equality");
                    if (2 <= this.terms.length) {
                        exprTransform = await plane_ts.makeExprTransformByEquality(this.terms, this.textBlocks, speech);
                    }
                    else {
                        throw new plane_ts.MyError(`terms length < 2`);
                    }
                    break;
                case plane_ts.ExprTransformReason.add_equation:
                    // msg("Expr-Transform-Reason.add-equation");
                    exprTransform = await plane_ts.makeExprTransformByAddEquation(this.terms, this.textBlocks, speech);
                    break;
                case plane_ts.ExprTransformReason.substitution:
                    // msg("Expr-Transform-Reason.substitution");
                    exprTransform = await plane_ts.makeExprTransformBySubstitution(this.terms, this.textBlocks, speech);
                    break;
                case plane_ts.ExprTransformReason.dividing_equation:
                    // msg("Expr-Transform-Reason.dividing-equation");
                    plane_ts.assert(this.textBlocks.length == 1);
                    exprTransform = await plane_ts.makeExprTransformByDividingEquation(this.root, this.mathText, this.textBlocks[0], speech);
                    break;
                case plane_ts.ExprTransformReason.arg_shift:
                    // msg("ExprTransformReason.arg_shift");
                    throw new plane_ts.MyError();
            }
            if (exprTransform != undefined) {
                plane_ts.msg(`result:${exprTransform.equation.str()}`);
                addShapeSetRelations(view, exprTransform);
                this.resetTool(exprTransform);
                await plane_ts.simplifyEquationTextBlock(exprTransform);
            }
        }
    }
    plane_ts.ExprTransformBuilder = ExprTransformBuilder;
    class PropositionBuilder extends Builder {
        reason = plane_ts.PropositionReason.none;
        shapes = [];
        async init() {
            this.reason = await plane_ts.showMenu(plane_ts.PropositionReason);
        }
        async click(view, position, shape) {
            if (shape == undefined || this.shapes.includes(shape)) {
                return;
            }
            switch (this.reason) {
                case plane_ts.PropositionReason.angle_equality:
                case plane_ts.PropositionReason.length_equality:
                    if (this.reason == plane_ts.PropositionReason.angle_equality && shape instanceof plane_ts.Angle ||
                        this.reason == plane_ts.PropositionReason.length_equality && shape instanceof plane_ts.LengthSymbol) {
                        this.shapes.push(shape);
                        shape.setMode(plane_ts.Mode.depend);
                        if (this.shapes.length == 2) {
                            const proposition = plane_ts.makeShapeProposition(this.reason, this.shapes);
                            addShapeSetRelations(view, proposition);
                            this.resetTool(proposition);
                        }
                    }
                    break;
                case plane_ts.PropositionReason.equation:
                    {
                        const mathText = plane_ts.inputTextPrompt(plane_ts.TT("Enter a mathematical expression."));
                        if (mathText == null) {
                            Builder.cancelTool();
                        }
                        else {
                            const proposition = plane_ts.makeEquationProposition(this.reason, mathText);
                            if (proposition != undefined) {
                                addShapeSetRelations(view, proposition);
                                this.resetTool(proposition);
                                await plane_ts.simplifyEquationTextBlock(proposition);
                                return;
                            }
                        }
                        Builder.cancelTool();
                    }
                    throw new plane_ts.MyError();
                default:
                    throw new plane_ts.MyError();
            }
        }
    }
    plane_ts.PropositionBuilder = PropositionBuilder;
    class MotionBuilder extends SelectionTool {
        animation;
        constructor() {
            super();
            this.animation = new plane_ts.Motion({ propertyChanges: [] });
            plane_ts.View.current.addShape(this.animation);
            plane_ts.showProperty(this.animation, 0);
        }
    }
    plane_ts.MotionBuilder = MotionBuilder;
    const toolList = [
        [SelectionTool, "selection", plane_ts.TT("selection"), []],
        [PointBuilder, "point", plane_ts.TT("point"), [plane_ts.Point]],
        [MidpointBuilder, "mid_point", plane_ts.TT("mid point"), [plane_ts.Midpoint]],
        [IntersectionBuilder, "intersection", plane_ts.TT("intersection"), [plane_ts.LineLineIntersection, plane_ts.LineArcIntersection, plane_ts.ArcArcIntersection]],
        [LineSegmentBuilder, "line_segment", plane_ts.TT("line segment"), [plane_ts.LineByPoints]],
        [PolygonBuilder, "polygon", plane_ts.TT("polygon"), [plane_ts.Polygon]],
        [PerpendicularBuilder, "perpendicular", plane_ts.TT("perpendicular"), [plane_ts.FootOfPerpendicular]],
        [PerpendicularLineBuilder, "perpendicular_line", plane_ts.TT("perpendicular"), [plane_ts.PerpendicularLine]],
        [ParallelLineBuilder, "parallel_line", plane_ts.TT("parallel line"), [plane_ts.ParallelLine]],
        [AngleBisectorBuilder, "angle_bisector", plane_ts.TT("angle bisector"), [plane_ts.AngleBisector]],
        [CircleByPointBuilder, "circle_by_point", plane_ts.TT("circle by point"), [plane_ts.CircleByPoint]],
        [CircleByRadiusBuilder, "circle_by_radius", plane_ts.TT("circle by radius"), [plane_ts.CircleByRadius]],
        [ArcByPointBuilder, "arc_by_point", plane_ts.TT("arc by point"), [plane_ts.ArcByPoint]],
        [ArcByRadiusBuilder, "arc_by_radius", plane_ts.TT("arc by radius"), [plane_ts.ArcByLengthSymbol, plane_ts.ArcByCircle]],
        [AngleBuilder, "angle", plane_ts.TT("angle"), [plane_ts.Angle]],
        [LengthSymbolBuilder, "length_symbol", plane_ts.TT("length symbol"), [plane_ts.LengthSymbol]],
        [TriangleCongruenceBuilder, "triangle_congruence", plane_ts.TT("triangle congruence"), [plane_ts.TriangleCongruence]],
        [TriangleSimilarityBuilder, "triangle_similarity", plane_ts.TT("triangle similarity"), [plane_ts.TriangleSimilarity]],
        [LengthEqualityBuilder, "equal_length", plane_ts.TT("equal length"), [plane_ts.LengthEquality]],
        [AngleEqualityBuilder, "equal_angle", plane_ts.TT("equal angle"), [plane_ts.AngleEquality]],
        [ParallelDetectorBuilder, "parallel_detector", plane_ts.TT("parallel detector"), [plane_ts.ParallelDetector]],
        [EqualityConstraintBuilder, "equality_constraint", plane_ts.TT("equality constraint"), [plane_ts.LengthEqualityConstraint, plane_ts.AngleEqualityConstraint]],
        [AssumptionBuilder, "assumption", plane_ts.TT("assumption"), [plane_ts.Assumption]],
        [ParallelConstraintBuilder, "parallel_constraint", plane_ts.TT("parallel constraint"), [plane_ts.ParallelConstraint]],
        [PerpendicularConstraintBuilder, "perpendicular_constraint", plane_ts.TT("perpendicular constraint"), [plane_ts.PerpendicularConstraint]],
        [QuadrilateralClassifierBuilder, "quadrilateral_classifier", plane_ts.TT("quadrilateral classifier"), [plane_ts.ParallelogramClassifier, plane_ts.RhombusClassifier, plane_ts.TriangleDetector]],
        [ShapeEquationBuilder, "shape_equation", plane_ts.TT("shape equation"), [plane_ts.ShapeEquation]],
        [ExprTransformBuilder, "expr_transform", plane_ts.TT("expression transformation"), [plane_ts.ExprTransform]],
        [PropositionBuilder, "proposition", plane_ts.TT("proposition"), [plane_ts.Proposition]],
        [TextBlockBuilder, "text", plane_ts.TT("text"), [plane_ts.TextBlock]],
    ];
    const editToolList = [
        [RangeTool, "range", plane_ts.TT("range"), []],
        [EllipseBuilder, "ellipse", plane_ts.TT("ellipse"), [plane_ts.Ellipse]],
        [CirclePointTangentBuilder, "tangent_point", plane_ts.TT("tangent point"), [plane_ts.CirclePointTangent]],
        [CircleCircleTangentBuilder, "tangent_circles", plane_ts.TT("tangent circles"), [plane_ts.CircleCircleTangent]],
        [DimensionLineBuilder, "dimension_line", plane_ts.TT("dimension line"), [plane_ts.DimensionLine]],
        [StatementBuilder, "statement", plane_ts.TT("statement"), [plane_ts.Statement]],
        [MotionBuilder, "animation", plane_ts.TT("animation"), [plane_ts.Motion]],
    ];
    function initToolList() {
        if (i18n_ts.appMode == i18n_ts.AppMode.edit) {
            toolList.push(...editToolList);
        }
    }
    function makeShapeButton(shape, in_shape_history) {
        let shape_img_name;
        for (const [tool, img_name, title, shape_classes] of toolList) {
            if (shape_classes.some(x => x.name == shape.constructor.name)) {
                shape_img_name = img_name;
                break;
            }
        }
        if (shape_img_name == undefined) {
            if (shape instanceof plane_ts.Polygon) {
                shape_img_name = "polygon";
            }
            else {
                throw new plane_ts.MyError(`unknown shape class name:[${shape.constructor.name}]`);
            }
        }
        const button = layout_ts.$button({
            url: `${plane_ts.urlOrigin}/lib/plane/img/${shape_img_name}.png`,
            width: "20px",
            height: "20px",
        });
        button.click = async (ev) => {
            if (in_shape_history) {
                plane_ts.PlayBack.setStartIndex(shape);
                if (button.parent == plane_ts.Plane.one.shapes_block && shape instanceof plane_ts.Statement) {
                    Builder.setToolByShape(shape);
                }
                plane_ts.showProperty(shape, 0);
            }
            plane_ts.View.current.resetMode();
            shape.setMode(plane_ts.Mode.target);
        };
        return button;
    }
    plane_ts.makeShapeButton = makeShapeButton;
    function addToShapeHistory(shape) {
        const button = makeShapeButton(shape, true);
        plane_ts.Plane.one.shapes_block.addChild(button);
        plane_ts.assert(plane_ts.Plane.one.shapes_block.children.length == plane_ts.View.current.shapes.length);
        layout_ts.Layout.root.updateRootLayout();
    }
    plane_ts.addToShapeHistory = addToShapeHistory;
    function pushShapeList(ui) {
        plane_ts.Plane.one.shapes_block.addChild(ui);
        layout_ts.Layout.root.updateRootLayout();
    }
    plane_ts.pushShapeList = pushShapeList;
    function popShapeList() {
        const child = plane_ts.Plane.one.shapes_block.popChild();
        layout_ts.Layout.root.updateRootLayout();
        return child;
    }
    plane_ts.popShapeList = popShapeList;
    function clearShapeList() {
        plane_ts.Plane.one.shapes_block.clear();
        layout_ts.Layout.root.updateRootLayout();
    }
    plane_ts.clearShapeList = clearShapeList;
    function makeToolButtons() {
        initToolList();
        const tool_buttons = [];
        for (const [tool, img_name, title, shapes] of toolList) {
            const id = `${tool.name}-radio`;
            const radio = layout_ts.$radio({
                id,
                value: tool.name,
                title: title,
                url: `${plane_ts.urlOrigin}/lib/plane/img/${img_name}.png`,
                width: "36px",
                height: "36px",
            });
            tool_buttons.push(radio);
        }
        return tool_buttons;
    }
    plane_ts.makeToolButtons = makeToolButtons;
    function makeToolByType(tool_name) {
        for (const [tool, img_name, title, shapes] of toolList) {
            if (tool.name == tool_name) {
                return new tool();
            }
        }
        throw new plane_ts.MyError();
    }
    plane_ts.makeToolByType = makeToolByType;
})(plane_ts || (plane_ts = {}));
var plane_ts;
(function (plane_ts) {
    //
    function recalc(shape, changed) {
        const dependencies = shape.dependencies();
        for (const dep of dependencies) {
            recalc(dep, changed);
        }
        if (shape instanceof plane_ts.Shape && dependencies.some(x => changed.has(x))) {
            shape.calc();
            changed.add(shape);
        }
    }
    class View extends plane_ts.Widget {
        static nearThreshold = 8;
        static current;
        static isPlayBack = false;
        name = "";
        board;
        canvas;
        grid;
        operations = [];
        shapes = [];
        relationLogs = [];
        undoStack = [];
        changed = new Set();
        downPosition;
        movePosition;
        min;
        max;
        textBase;
        textBaseY;
        dirty = false;
        makeObj() {
            let obj = Object.assign(super.makeObj(), {
                name: this.name,
                scale: this.board.clientWidth / (this.max.x - this.min.x),
                min: this.min,
                max: this.max,
                shapes: this.shapes.map(x => x.toObj())
            });
            return obj;
        }
        isNear(real_distance) {
            const pix_distance = this.toXPixScale(real_distance);
            return pix_distance < View.nearThreshold;
        }
        constructor(canvas) {
            super({});
            this.board = canvas;
            this.board.innerHTML = "";
            this.canvas = new plane_ts.Canvas(this, this.board);
            this.grid = new CanvasGrid(this);
            this.board.width = this.board.clientWidth;
            this.board.height = this.board.clientHeight;
            const scale = 100;
            const span_x = this.board.clientWidth / scale;
            const min_x = -0.75 * span_x;
            const max_x = 0.25 * span_x;
            const span_y = this.board.clientHeight / scale;
            const max_y = 0.5 * span_y;
            const min_y = -max_y;
            plane_ts.msg(`min-x:${min_x} max-x:${max_x} max-y:${max_y}`);
            this.setMinMax(new plane_ts.Vec2(min_x, min_y), new plane_ts.Vec2(max_x, max_y));
            this.textBaseY = max_y - 0.1 * span_y;
            this.textBase = new plane_ts.Vec2(min_x + 0.05 * span_x, this.textBaseY);
            View.current = this;
            this.resizeView();
        }
        clearView() {
            const all_shapes = this.allShapes();
            all_shapes.forEach(x => x.hide());
            plane_ts.removeDiv();
            plane_ts.Widget.maxId = this.id;
            plane_ts.idMap.clear();
            plane_ts.idMap.set(this.id, this);
            this.operations = [];
            this.shapes = [];
            this.dirty = true;
            this.textBase.y = this.textBaseY;
            plane_ts.Plane.one.clearPlane();
            plane_ts.clearShapeList();
            plane_ts.initRelations();
        }
        setMinMax(min, max) {
            this.min = min;
            this.max = max;
            plane_ts.Point.radius = this.fromXPixScale(plane_ts.Point.radiusPix);
            plane_ts.Angle.radius1 = this.fromXPixScale(plane_ts.Angle.radius1Pix);
        }
        eventPosition(event) {
            const flipped_y = this.board.clientHeight - event.offsetY;
            const x = plane_ts.linear(0, event.offsetX, this.board.clientWidth, this.min.x, this.max.x);
            const y = plane_ts.linear(0, flipped_y, this.board.clientHeight, this.min.y, this.max.y);
            return new plane_ts.Vec2(x, y);
        }
        fromXPixScale(pix) {
            return (this.max.x - this.min.x) * (pix / this.board.clientWidth);
        }
        fromYPixScale(pix) {
            return (this.max.y - this.min.y) * (pix / this.board.clientHeight);
        }
        fromPixScale(position) {
            return new plane_ts.Vec2(this.fromXPixScale(position.x), this.fromYPixScale(position.y));
        }
        fromXPix(pix) {
            return plane_ts.linear(0, pix, this.board.clientWidth, this.min.x, this.max.x);
        }
        fromYPix(pix) {
            return plane_ts.linear(0, pix, this.board.clientHeight, this.min.y, this.max.y);
        }
        fromPix(position) {
            return new plane_ts.Vec2(this.fromXPix(position.x), this.fromYPix(position.y));
        }
        toXPixScale(n) {
            return this.board.clientWidth * n / (this.max.x - this.min.x);
        }
        toYPixScale(n) {
            return this.board.clientHeight * n / (this.max.y - this.min.y);
        }
        toXPix(x) {
            const x_pix = plane_ts.linear(this.min.x, x, this.max.x, 0, this.board.clientWidth);
            return x_pix;
        }
        toYPix(y) {
            const pix_y = plane_ts.linear(this.min.y, y, this.max.y, 0, this.board.clientHeight);
            const flipped_y = this.board.clientHeight - pix_y;
            return flipped_y;
        }
        toPixPosition(position) {
            const x_pix = this.toXPix(position.x);
            const y_pix = this.toYPix(position.y);
            return new plane_ts.Vec2(x_pix, y_pix);
        }
        getShapes() {
            return this.shapes.filter(x => x instanceof plane_ts.Shape);
        }
        allRealShapes() {
            return this.allShapes().filter(x => x instanceof plane_ts.Shape);
        }
        allShapes() {
            const shapes = [];
            this.shapes.forEach(x => x.getAllShapes(shapes));
            const unique_shapes = plane_ts.unique(shapes);
            return unique_shapes;
        }
        removeUnusedDivs() {
            const used_divs = this.allRealShapes().filter(x => x.caption != undefined).map(x => x.caption.div);
            const used_divs_set = new Set(used_divs);
            const canvas_divs = Array.from(this.board.getElementsByTagName("div"));
            const unused_divs = canvas_divs.filter(x => !used_divs_set.has);
            for (const div of unused_divs) {
                this.board.removeChild(div);
            }
        }
        resetMode() {
            this.allShapes().forEach(x => { x.setMode(plane_ts.Mode.none); x.isOver = false; });
            this.dirty = true;
        }
        resetOrders() {
            plane_ts.MathEntity.orderSet.clear();
            this.allShapes().forEach(x => x.order = NaN);
            this.shapes.forEach(x => x.setOrder());
        }
        drawShapes() {
            if (this.dirty) {
                this.dirty = false;
                // msg("redraw");
                this.canvas.clear();
                plane_ts.Polygon.colorIndex = 0;
                this.grid.showGrid(plane_ts.Plane.one.show_axis.checked(), plane_ts.Plane.one.show_grid.checked());
                const shapes = this.allRealShapes();
                const visible_shapes = shapes.filter(x => x.visible);
                if (plane_ts.getPlayMode() != plane_ts.PlayMode.stop || !plane_ts.Plane.one.editMode) {
                    visible_shapes.forEach(c => c.draw());
                }
                else {
                    shapes.forEach(c => c.draw());
                }
                visible_shapes.filter(x => x.mode != plane_ts.Mode.none).forEach(c => c.draw());
                plane_ts.Builder.tool.drawTool(this);
                if (plane_ts.Plane.one.snap_to_grid.checked()) {
                    this.grid.showPointer();
                }
            }
            window.requestAnimationFrame(this.drawShapes.bind(this));
        }
        async click(event) {
            plane_ts.msg("click");
            let position = this.eventPosition(event);
            if (plane_ts.Plane.one.snap_to_grid.checked()) {
                position = this.grid.snap(position);
            }
            plane_ts.Point.tempPoints = [];
            const shape = this.getShape(position);
            if (plane_ts.Builder.tool instanceof plane_ts.SelectionTool) {
                if (shape instanceof plane_ts.Point) {
                    const click_shape = this.operations.find(x => x instanceof plane_ts.ClickShape && x.createdPoint === shape);
                    if (click_shape != undefined) {
                        plane_ts.msg(`click shape position is changed: ${click_shape.position}=>${position}`);
                        click_shape.position = position;
                    }
                }
                await plane_ts.Builder.tool.click(this, position, shape);
            }
            else {
                this.addOperation(new plane_ts.ClickShape(position, (shape != undefined ? shape.id : NaN)));
                if (plane_ts.Builder.tool instanceof plane_ts.StatementBuilder) {
                    await plane_ts.Builder.tool.clickWithMouseEvent(event, this, position, shape);
                }
                else {
                    await plane_ts.Builder.tool.click(this, position, shape);
                }
            }
            this.dirty = true;
        }
        async dblclick(event) {
            let position = this.eventPosition(event);
            const shape = this.getShape(position);
            if (shape == undefined) {
                return;
            }
            if (plane_ts.Builder.tool instanceof plane_ts.SelectionTool) {
                this.resetMode();
                if (shape instanceof plane_ts.LengthSymbol) {
                    const length_symbols = plane_ts.equalLengths.find(x => x.has(shape));
                    if (length_symbols != undefined) {
                        Array.from(length_symbols.values()).forEach(x => x.setMode(plane_ts.Mode.depend));
                        this.dirty = true;
                    }
                }
                else if (shape instanceof plane_ts.Angle) {
                    const angles = Array.from(plane_ts.supplementaryAngles.flat()).find(x => x.has(shape));
                    if (angles != undefined) {
                        this.resetMode();
                        angles.forEach(x => x.setMode(plane_ts.Mode.depend));
                        this.dirty = true;
                    }
                }
                else if (shape instanceof plane_ts.AbstractLine) {
                    const points = plane_ts.getPointsFromLine(shape);
                    points.forEach(x => x.setMode(plane_ts.Mode.depend));
                    const parallel_lines = plane_ts.getParallelLines(shape);
                    if (parallel_lines != undefined) {
                        parallel_lines.forEach(x => x.setMode(plane_ts.Mode.target));
                    }
                    const perpendicular_lines = plane_ts.getPerpendicularLines(shape);
                    if (perpendicular_lines != undefined) {
                        perpendicular_lines.forEach(x => x.setMode(plane_ts.Mode.depend));
                    }
                }
                shape.setMode(plane_ts.Mode.target);
            }
            this.dirty = true;
        }
        pointerdown(event) {
            if (event.button != 0) {
                plane_ts.msg(`pointerdown:${event.button.toString(2)}`);
                return;
            }
            let position = this.eventPosition(event);
            if (plane_ts.Plane.one.snap_to_grid.checked()) {
                position = this.grid.snap(position);
            }
            this.downPosition = position;
            const shape = this.getShape(position);
            plane_ts.Builder.tool.pointerdown(event, this, position, shape);
        }
        pointermove(event) {
            // 
            event.preventDefault();
            let position = this.eventPosition(event);
            if (plane_ts.Plane.one.snap_to_grid.checked()) {
                position = this.grid.snap(position);
            }
            const shapes = this.allShapes().concat(plane_ts.Builder.tool.pendingShapes());
            const old_near_shape = shapes.find(x => x.isOver);
            const near_shape = this.getShape(position);
            if (old_near_shape != near_shape) {
                if (old_near_shape != undefined) {
                    old_near_shape.isOver = false;
                }
                if (near_shape != undefined) {
                    near_shape.isOver = true;
                    // msg(`over:${near_shape.constructor.name}`);
                }
                this.dirty = true;
            }
            const shape = this.getShape(position);
            plane_ts.Builder.tool.pointermove(event, this, position, shape);
            this.movePosition = position;
            if (plane_ts.Plane.one.snap_to_grid.checked()) {
                const prev_snap_position = this.grid.snapPosition;
                this.grid.setSnapPosition();
                if (!prev_snap_position.equals(this.grid.snapPosition)) {
                    this.dirty = true;
                }
            }
        }
        pointerup(event) {
            if (event.button != 0) {
                plane_ts.msg(`pointerup:${event.button.toString(2)}`);
                return;
            }
            let position = this.eventPosition(event);
            if (plane_ts.Plane.one.snap_to_grid.checked()) {
                position = this.grid.snap(position);
            }
            const shape = this.getShape(position);
            plane_ts.Builder.tool.pointerup(event, this, position, shape);
            this.downPosition = undefined;
        }
        wheel(event) {
            event.preventDefault();
            let position = this.eventPosition(event);
            if (plane_ts.Plane.one.snap_to_grid.checked()) {
                position = this.grid.snap(position);
            }
            const ratio = 0.002 * event.deltaY;
            const min_x = this.min.x - (position.x - this.min.x) * ratio;
            const min_y = this.min.y - (position.y - this.min.y) * ratio;
            const max_x = this.max.x + (this.max.x - position.x) * ratio;
            const max_y = this.max.y + (this.max.y - position.y) * ratio;
            this.setMinMax(new plane_ts.Vec2(min_x, min_y), new plane_ts.Vec2(max_x, max_y));
            this.allRealShapes().forEach(x => x.updateCaption());
            View.current.dirty = true;
        }
        resizeView() {
            this.board.width = this.board.clientWidth;
            this.board.height = this.board.clientHeight;
            this.updateTextBlockPositions();
            this.dirty = true;
            plane_ts.msg(`resize: w:${this.board.width} h:${this.board.height} max:${this.max}`);
        }
        addOperation(operation) {
            this.operations.push(operation);
        }
        addShape(shape) {
            this.shapes.push(shape);
            shape.setOrder();
            plane_ts.addToShapeHistory(shape);
        }
        getShape(position) {
            const shapes = this.allRealShapes().concat(plane_ts.Builder.tool.pendingShapes());
            const point = shapes.filter(x => x instanceof plane_ts.Point).find(x => x.isNear(position));
            if (point != undefined) {
                return point;
            }
            const symbol = shapes.filter(x => x instanceof plane_ts.LengthSymbol).find(x => x.isNear(position));
            if (symbol != undefined) {
                return symbol;
            }
            const angle = shapes.filter(x => x instanceof plane_ts.Angle).find(x => x.isNear(position));
            if (angle != undefined) {
                return angle;
            }
            const line = shapes.filter(x => x instanceof plane_ts.AbstractLine).find(x => x.isNear(position));
            if (line != undefined) {
                return line;
            }
            const circle = shapes.filter(x => x instanceof plane_ts.CircleArcEllipse).find(x => x.isNear(position));
            return circle;
        }
        updateShapes() {
            for (const shape of this.getShapes()) {
                let shapes = [];
                shape.getAllShapes(shapes);
                const points = shapes.filter(x => x instanceof plane_ts.Point);
                for (const point of points) {
                    const bounds = point.getBounds();
                    if (bounds.length == 1) {
                        const bound = bounds[0];
                        bound.adjustPosition(point, point.position);
                        this.changed.add(point);
                    }
                }
                recalc(shape, this.changed);
            }
        }
        updateTextBlockPositions() {
            const shapes = this.allShapes();
            const parents = shapes.filter(x => (x instanceof plane_ts.Point || x instanceof plane_ts.DimensionLine) && x.caption != undefined);
            parents.forEach(x => x.updateCaption());
            const text_blocks = this.shapes.filter(x => x instanceof plane_ts.TextBlock);
            text_blocks.forEach(x => x.updateTextPosition());
        }
        async undo() {
            if (this.operations.length == 0) {
                return;
            }
            let undoData;
            for (let idx = this.operations.length - 1 - 1; 0 <= idx; idx--) {
                const operation = this.operations[idx];
                if (!isNaN(operation.shapesLength)) {
                    undoData = {
                        operations: this.operations.slice(idx + 1),
                        shapes: this.shapes.slice(operation.shapesLength),
                        relationLogs: this.relationLogs.slice(operation.relationLogsLength),
                        historyUIs: []
                    };
                    this.operations = this.operations.slice(0, idx + 1);
                    this.shapes = this.shapes.slice(0, operation.shapesLength);
                    this.relationLogs = this.relationLogs.slice(0, operation.relationLogsLength);
                    break;
                }
            }
            if (undoData == undefined) {
                undoData = {
                    operations: this.operations.slice(),
                    shapes: this.shapes.slice(),
                    relationLogs: this.relationLogs.slice(),
                    historyUIs: []
                };
                this.operations = [];
                this.shapes = [];
                this.relationLogs = [];
                plane_ts.initRelations();
            }
            undoData.shapes.forEach(x => x.hide());
            while (View.current.shapes.length < plane_ts.Plane.one.shapes_block.children.length) {
                const ui = plane_ts.popShapeList();
                if (ui != undefined) {
                    undoData.historyUIs.unshift(ui);
                }
            }
            this.undoStack.push(undoData);
            this.dirty = true;
        }
        async redo() {
            const view = View.current;
            if (this.undoStack.length == 0) {
                return;
            }
            const undoData = this.undoStack.pop();
            this.operations.push(...undoData.operations);
            this.shapes.push(...undoData.shapes);
            this.relationLogs.push(...undoData.relationLogs);
            undoData.shapes.forEach(x => x.show());
            undoData.historyUIs.forEach(x => plane_ts.pushShapeList(x));
            this.dirty = true;
        }
        restoreView() {
            const motions = this.shapes.filter(x => x instanceof plane_ts.Motion);
            motions.reverse().forEach(x => x.restorePropertyChanges());
        }
        texPosition() {
        }
    }
    plane_ts.View = View;
    class CanvasGrid {
        view;
        subSpanX;
        subSpanY;
        snapPosition = plane_ts.Vec2.zero();
        constructor(view) {
            this.view = view;
        }
        drawGridAxis(axis, show_grid, show_axis) {
            let size;
            let min_a;
            let max_a;
            let min_b;
            let max_b;
            if (axis == "X") {
                size = this.view.fromXPixScale(75);
                [min_a, max_a] = [this.view.min.x, this.view.max.x];
                [min_b, max_b] = [this.view.min.y, this.view.max.y];
            }
            else {
                size = this.view.fromYPixScale(75);
                [min_a, max_a] = [this.view.min.y, this.view.max.y];
                [min_b, max_b] = [this.view.min.x, this.view.max.x];
            }
            const power = Math.round(Math.log10(size));
            let fraction_digits;
            fraction_digits = -power;
            let main_span = 10 ** power;
            if (main_span < size) {
                if (Math.abs(2 * main_span - size) < size - main_span) {
                    main_span = 2 * main_span;
                }
            }
            else {
                if (Math.abs(0.5 * main_span - size) < main_span - size) {
                    main_span = 0.5 * main_span;
                    fraction_digits++;
                }
            }
            fraction_digits = Math.max(0, fraction_digits);
            let sub_span = main_span / 5;
            if (show_grid) {
                const n1 = Math.floor(min_a / sub_span);
                const n2 = Math.ceil(max_a / sub_span);
                const main_lines = [];
                const sub_lines = [];
                const axis_lines = [];
                for (let n = n1; n <= n2; n++) {
                    const a = n * sub_span;
                    let p1;
                    let p2;
                    if (axis == "X") {
                        p1 = new plane_ts.Vec2(a, min_b);
                        p2 = new plane_ts.Vec2(a, max_b);
                    }
                    else {
                        p1 = new plane_ts.Vec2(min_b, a);
                        p2 = new plane_ts.Vec2(max_b, a);
                    }
                    if (n == 0) {
                        axis_lines.push([p1, p2]);
                    }
                    else if (n % 5 == 0) {
                        main_lines.push([p1, p2]);
                    }
                    else {
                        sub_lines.push([p1, p2]);
                    }
                }
                this.view.canvas.drawLinesRaw(axis_lines, plane_ts.fgColor, 1.0);
                this.view.canvas.drawLinesRaw(main_lines, "gray", 0.5);
                this.view.canvas.drawLinesRaw(sub_lines, "gray", 0.2);
            }
            if (show_axis) {
                const n1 = Math.floor(min_a / main_span);
                const n2 = Math.ceil(max_a / main_span);
                for (let n = n1; n <= n2; n++) {
                    const a = n * main_span;
                    const text = (n == 0 ? "0" : a.toFixed(fraction_digits));
                    if (axis == "X") {
                        this.view.canvas.drawText(new plane_ts.Vec2(a, 0), text, plane_ts.fgColor);
                    }
                    else {
                        this.view.canvas.drawText(new plane_ts.Vec2(0, a), text, plane_ts.fgColor);
                    }
                }
            }
            if (axis == "X") {
                this.subSpanX = sub_span;
            }
            else {
                this.subSpanY = sub_span;
            }
        }
        showGrid(show_grid, show_axis) {
            if (show_grid || show_axis) {
                this.drawGridAxis("X", show_grid, show_axis);
                this.drawGridAxis("Y", show_grid, show_axis);
            }
        }
        setSnapPosition() {
            if (this.view.movePosition == undefined || this.subSpanX == undefined || this.subSpanY == undefined) {
                return;
            }
            this.snapPosition = this.snap(this.view.movePosition);
        }
        showPointer() {
            if (this.subSpanX == undefined || this.subSpanY == undefined) {
                return;
            }
            let position = this.snapPosition;
            const lines = [
                [new plane_ts.Vec2(position.x - this.subSpanX, position.y), new plane_ts.Vec2(position.x + this.subSpanX, position.y)],
                [new plane_ts.Vec2(position.x, position.y - this.subSpanY), new plane_ts.Vec2(position.x, position.y + this.subSpanY)]
            ];
            this.view.canvas.drawLinesRaw(lines, "blue", 1);
        }
        snap(position) {
            if (this.subSpanX == undefined || this.subSpanY == undefined) {
                return position;
            }
            const x = Math.round(position.x / this.subSpanX) * this.subSpanX;
            const y = Math.round(position.y / this.subSpanY) * this.subSpanY;
            return new plane_ts.Vec2(x, y);
        }
    }
})(plane_ts || (plane_ts = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGxhbmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi90cy9jYW52YXMudHMiLCIuLi8uLi8uLi90cy9qc29uLnRzIiwiLi4vLi4vLi4vdHMvc2hhcGUudHMiLCIuLi8uLi8uLi90cy9zdGF0ZW1lbnQudHMiLCIuLi8uLi8uLi90cy9jb25zdHJhaW50LnRzIiwiLi4vLi4vLi4vdHMvZGltZW5zaW9uX3N5bWJvbC50cyIsIi4uLy4uLy4uL3RzL2dlb21ldHJ5LnRzIiwiLi4vLi4vLi4vdHMvcGxhbmVfdXRpbC50cyIsIi4uLy4uLy4uL3RzL2RlZHVjdGlvbi90cmlhbmdsZV9jb25ncnVlbmNlLnRzIiwiLi4vLi4vLi4vdHMvaW5mZXJlbmNlLnRzIiwiLi4vLi4vLi4vdHMvbWF0cml4LnRzIiwiLi4vLi4vLi4vdHMvb3BlcmF0aW9uLnRzIiwiLi4vLi4vLi4vdHMvcGxhbmVfZXZlbnQudHMiLCIuLi8uLi8uLi90cy9wbGFuZV91aS50cyIsIi4uLy4uLy4uL3RzL3ZlY3Rvci50cyIsIi4uLy4uLy4uL3RzL3BsYXkudHMiLCIuLi8uLi8uLi90cy9wcm9wZXJ0eS50cyIsIi4uLy4uLy4uL3RzL2RlZHVjdGlvbi9sZW5ndGhfZXF1YWxpdHkudHMiLCIuLi8uLi8uLi90cy9kZWR1Y3Rpb24vYW5nbGVfZXF1YWxpdHkudHMiLCIuLi8uLi8uLi90cy9kZWR1Y3Rpb24vcXVhZHJpbGF0ZXJhbC50cyIsIi4uLy4uLy4uL3RzL2RlZHVjdGlvbi9wYXJhbGxlbF9kZXRlY3Rvci50cyIsIi4uLy4uLy4uL3RzL2RlZHVjdGlvbi90cmlhbmdsZV9zaW1pbGFyaXR5LnRzIiwiLi4vLi4vLi4vdHMvZGVkdWN0aW9uL3RyaWFuZ2xlX2RldGVjdG9yLnRzIiwiLi4vLi4vLi4vdHMvZGVkdWN0aW9uL3NoYXBlX2VxdWF0aW9uLnRzIiwiLi4vLi4vLi4vdHMvZGVkdWN0aW9uL2V4cHJfdHJhbnNmb3JtLnRzIiwiLi4vLi4vLi4vdHMvZGVkdWN0aW9uL3Byb3Bvc2l0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QUFLLFNBQVEsR0FBRztRQUN6QixHQUFHO1lBQ0MsT0FBTyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztRQUNqQixDQUFDO1FBRUQsR0FBRztZQUNDLE9BQU8sSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6RSxDQUFDO1FBRUQsR0FBRyxDQUFDLENBQU07WUFDTixPQUFPLElBQUksU0FBQSxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUcsQ0FBQztRQUVELEdBQUc7WUFDQyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDdkIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7WUFFekIsT0FBTyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMs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LENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBRTtnQkFDdEcsQ0FBRSxJQUFJLFNBQUEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsSUFBSSxTQUFBLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFFO2FBQ3pHLENBQUE7WUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNwRCxDQUFDO1FBRUQsSUFBSSxDQUFDLFFBQWU7WUFDaEIsSUFBRyxJQUFJLENBQUMsUUFBUSxJQUFJLFNBQVMsSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLFNBQVMsRUFBQyxDQUFDO2dCQUN6RCxPQUFPLFFBQVEsQ0FBQztZQUNwQixDQUFDO1lBRUQsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ2pFLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUVqRSxPQUFPLElBQUksU0FBQSxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzFCLENBQUM7S0FDSjtBQUlELENBQUMsRUEvdkJTLFFBQVEsS0FBUixRQUFRLFFBK3ZCakIiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgcGxhbmVfdHMge1xyXG4vL1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1vZGVQb2ludFJhZGl1cyhtb2RlIDogTW9kZSkgOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIChtb2RlID09IE1vZGUubm9uZSA/IDEgOiAyKSAqIFBvaW50LnJhZGl1cztcclxufVxyXG5cclxuZnVuY3Rpb24gbW9kZUxpbmVXaWR0aChtb2RlIDogTW9kZSkgOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIChtb2RlID09IE1vZGUubm9uZSA/IGRlZmF1bHRMaW5lV2lkdGggOiBPdmVyTGluZVdpZHRoKTsgICAgXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDYW52YXMge1xyXG4gICAgdmlldyAgIDogVmlldztcclxuICAgIGNhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgY3R4ICAgIDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHZpZXcgOiBWaWV3LCBjYW52YXMgOiBIVE1MQ2FudmFzRWxlbWVudCl7XHJcbiAgICAgICAgdGhpcy52aWV3ICAgPSB2aWV3O1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xyXG4gICAgICAgIHRoaXMuY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSE7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuY3R4ICE9IG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEF0dHJpYnV0ZXMoc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCkgOiBbc3RyaW5nLCBudW1iZXJde1xyXG4gICAgICAgIGxldCBjb2xvciA6IHN0cmluZztcclxuICAgICAgICBsZXQgbGluZV93aWR0aCA6IG51bWJlcjtcclxuXHJcbiAgICAgICAgaWYoc2hhcGUgIT0gdW5kZWZpbmVkKXtcclxuXHJcbiAgICAgICAgICAgIGNvbG9yICAgICAgPSBzaGFwZS5tb2RlQ29sb3IoKTtcclxuICAgICAgICAgICAgbGluZV93aWR0aCA9IHNoYXBlLm1vZGVMaW5lV2lkdGgoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgIGNvbG9yID0gZmdDb2xvcjtcclxuICAgICAgICAgICAgbGluZV93aWR0aCA9IGRlZmF1bHRMaW5lV2lkdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gW2NvbG9yLCBsaW5lX3dpZHRoXTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpe1xyXG4gICAgICAgIGNvbnN0IHJjID0gdGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gYmdDb2xvcjtcclxuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCgwLCAwLCByYy53aWR0aCwgcmMuaGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3TGluZVJhdyhwMSA6IFZlYzIsIHAyIDogVmVjMiwgY29sb3IgOiBzdHJpbmcsIGxpbmVfd2lkdGggOiBudW1iZXIpe1xyXG4gICAgICAgIGNvbnN0IHBpeDEgPSB0aGlzLnZpZXcudG9QaXhQb3NpdGlvbihwMSk7XHJcbiAgICAgICAgY29uc3QgcGl4MiA9IHRoaXMudmlldy50b1BpeFBvc2l0aW9uKHAyKTtcclxuXHJcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5tb3ZlVG8ocGl4MS54LCBwaXgxLnkpO1xyXG4gICAgICAgIGN0eC5saW5lVG8ocGl4Mi54LCBwaXgyLnkpO1xyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBsaW5lX3dpZHRoO1xyXG4gICAgICAgIGN0eC5zdHJva2UoKTsgICBcclxuICAgIH1cclxuXHJcbiAgICBkcmF3TGluZShzaGFwZSA6IFNoYXBlIHwgdW5kZWZpbmVkLCBwMSA6IFZlYzIsIHAyIDogVmVjMil7XHJcbiAgICAgICAgY29uc3QgW2NvbG9yLCBsaW5lX3dpZHRoXSA9IHRoaXMuZ2V0QXR0cmlidXRlcyhzaGFwZSk7XHJcbiAgICAgICAgdGhpcy5kcmF3TGluZVJhdyhwMSwgcDIsIGNvbG9yLCBsaW5lX3dpZHRoKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3TGluZVdpdGgyUG9pbnRzKGxpbmUgOiBBYnN0cmFjdExpbmUsIHBvaW50QiA6IFBvaW50KXtcclxuICAgICAgICBjb25zdCBsID0gVmlldy5jdXJyZW50Lm1heC5kaXN0YW5jZShWaWV3LmN1cnJlbnQubWluKTtcclxuICAgICAgICBjb25zdCBwX3BsdXMgID0gbGluZS5wb2ludEEucG9zaXRpb24uYWRkKGxpbmUuZS5tdWwoIGwpKTtcclxuICAgICAgICBjb25zdCBwX21pbnVzID0gbGluZS5wb2ludEEucG9zaXRpb24uYWRkKGxpbmUuZS5tdWwoLWwpKTtcclxuXHJcbiAgICAgICAgc3dpdGNoKGxpbmUubGluZUtpbmQpe1xyXG4gICAgICAgIGNhc2UgTGluZUtpbmQubGluZV9zZWdtZW50OlxyXG4gICAgICAgICAgICB0aGlzLmRyYXdMaW5lKGxpbmUsIGxpbmUucG9pbnRBLnBvc2l0aW9uLCBwb2ludEIucG9zaXRpb24pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBMaW5lS2luZC5yYXk6XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0xpbmUobGluZSwgbGluZS5wb2ludEEucG9zaXRpb24sIHBfcGx1cyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIExpbmVLaW5kLnJheV9yZXZlcnNlOlxyXG4gICAgICAgICAgICB0aGlzLmRyYXdMaW5lKGxpbmUsIGxpbmUucG9pbnRBLnBvc2l0aW9uLCBwX21pbnVzKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgTGluZUtpbmQubGluZTpcclxuICAgICAgICAgICAgdGhpcy5kcmF3TGluZShsaW5lLCBwX21pbnVzLCBwX3BsdXMpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1BvbHlnb25SYXcocG9zaXRpb25zIDogVmVjMltdLCBjb2xvciA6IHN0cmluZywgbGluZV93aWR0aCA6IG51bWJlciwgZmlsbCA6IGJvb2xlYW4gPSBmYWxzZSl7XHJcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XHJcblxyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBpZihmaWxsKXtcclxuXHJcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNTtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggICA9IGxpbmVfd2lkdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IoY29uc3QgW2lkeCwgcG9zaXRpb25dIG9mIHBvc2l0aW9ucy5lbnRyaWVzKCkpe1xyXG4gICAgICAgICAgICBjb25zdCBwaXggPSB0aGlzLnZpZXcudG9QaXhQb3NpdGlvbihwb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICBpZihpZHggPT0gMCl7XHJcblxyXG4gICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhwaXgueCwgcGl4LnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhwaXgueCwgcGl4LnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcblxyXG4gICAgICAgIGlmKGZpbGwpe1xyXG5cclxuICAgICAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1BvbHlnb24oc2hhcGUgOiBTaGFwZSwgcG9zaXRpb25zIDogVmVjMltdKXtcclxuICAgICAgICBjb25zdCBbY29sb3IsIGxpbmVfd2lkdGhdID0gdGhpcy5nZXRBdHRyaWJ1dGVzKHNoYXBlKTtcclxuICAgICAgICB0aGlzLmRyYXdQb2x5Z29uUmF3KHBvc2l0aW9ucywgY29sb3IsIGxpbmVfd2lkdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdQYXJ0aWFsUG9seWdvbihwb2ludHMgOiBQb2ludFtdLCBtb2RlIDogTW9kZSl7XHJcbiAgICAgICAgY29uc3QgY29sb3IgPSBnZXRNb2RlQ29sb3IobW9kZSk7XHJcbiAgICAgICAgY29uc3QgcmFkaXVzID0gbW9kZVBvaW50UmFkaXVzKG1vZGUpO1xyXG5cclxuICAgICAgICBjb25zdCBwb3NpdGlvbnMgPSBwb2ludHMubWFwKHggPT4geC5wb3NpdGlvbik7XHJcbiAgICAgICAgcG9zaXRpb25zLmZvckVhY2goeCA9PiBWaWV3LmN1cnJlbnQuY2FudmFzLmRyYXdDaXJjbGVSYXcoeCwgcmFkaXVzLCBjb2xvcikpO1xyXG5cclxuICAgICAgICBjb25zdCBsaW5lX3dpZHRoID0gbW9kZUxpbmVXaWR0aChtb2RlKTtcclxuICAgICAgICBWaWV3LmN1cnJlbnQuY2FudmFzLmRyYXdQb2x5Z29uUmF3KHBvc2l0aW9ucywgY29sb3IsIGxpbmVfd2lkdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdMaW5lc1JhdyhsaW5lcyA6IFtWZWMyLCBWZWMyXVtdLCBjb2xvciA6IHN0cmluZywgbGluZV93aWR0aCA6IG51bWJlcil7XHJcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XHJcblxyXG4gICAgICAgIGZvcihjb25zdCBbcDEsIHAyXSBvZiBsaW5lcyl7XHJcbiAgICAgICAgICAgIGNvbnN0IHBpeDEgPSB0aGlzLnZpZXcudG9QaXhQb3NpdGlvbihwMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBpeDIgPSB0aGlzLnZpZXcudG9QaXhQb3NpdGlvbihwMik7XHJcblxyXG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8ocGl4MS54LCBwaXgxLnkpO1xyXG4gICAgICAgICAgICBjdHgubGluZVRvKHBpeDIueCwgcGl4Mi55KTtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggICA9IGxpbmVfd2lkdGg7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0xpbmVzKHNoYXBlIDogU2hhcGUsIGxpbmVzIDogW1ZlYzIsIFZlYzJdW10pe1xyXG4gICAgICAgIGNvbnN0IFtjb2xvciwgbGluZV93aWR0aF0gPSB0aGlzLmdldEF0dHJpYnV0ZXMoc2hhcGUpO1xyXG4gICAgICAgIHRoaXMuZHJhd0xpbmVzUmF3KGxpbmVzLCBjb2xvciwgbGluZV93aWR0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0FyY1JhdyhjZW50ZXIgOiBWZWMyLCByYWRpdXMgOiBudW1iZXIsIHN0YXJ0X2FuZ2xlIDogbnVtYmVyLCBlbmRfYW5nbGUgOiBudW1iZXIsIGNvbG9yIDogc3RyaW5nLCBsaW5lX3dpZHRoPyA6IG51bWJlcil7XHJcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHg7XHJcbiAgICAgICAgY29uc3QgcGl4ID0gdGhpcy52aWV3LnRvUGl4UG9zaXRpb24oY2VudGVyKTtcclxuXHJcbiAgICAgICAgLy8gZmxpcCBZXHJcbiAgICAgICAgc3RhcnRfYW5nbGUgPSAyICogTWF0aC5QSSAtIHN0YXJ0X2FuZ2xlO1xyXG4gICAgICAgIGVuZF9hbmdsZSAgID0gMiAqIE1hdGguUEkgLSBlbmRfYW5nbGU7XHJcblxyXG4gICAgICAgIGNvbnN0IHJhZGl1c19waXggPSB0aGlzLnZpZXcudG9YUGl4U2NhbGUocmFkaXVzKTtcclxuXHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5hcmMocGl4LngsIHBpeC55LCByYWRpdXNfcGl4LCBzdGFydF9hbmdsZSwgZW5kX2FuZ2xlLCB0cnVlKTtcclxuXHJcbiAgICAgICAgaWYobGluZV93aWR0aCA9PSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCAgID0gbGluZV93aWR0aDtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0NpcmNsZVJhdyhjZW50ZXIgOiBWZWMyLCByYWRpdXMgOiBudW1iZXIsIGNvbG9yIDogc3RyaW5nLCBsaW5lX3dpZHRoPyA6IG51bWJlcil7XHJcbiAgICAgICAgdGhpcy5kcmF3QXJjUmF3KGNlbnRlciwgcmFkaXVzLCAwLCAyICogTWF0aC5QSSwgY29sb3IsIGxpbmVfd2lkdGgpXHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0FyYyhzaGFwZSA6IFNoYXBlLCBjZW50ZXIgOiBWZWMyLCByYWRpdXMgOiBudW1iZXIsIHN0YXJ0X2FuZ2xlIDogbnVtYmVyLCBlbmRfYW5nbGUgOiBudW1iZXIpe1xyXG4gICAgICAgIGNvbnN0IFtjb2xvciwgbGluZV93aWR0aF0gPSB0aGlzLmdldEF0dHJpYnV0ZXMoc2hhcGUpO1xyXG4gICAgICAgIHRoaXMuZHJhd0FyY1JhdyhjZW50ZXIsIHJhZGl1cywgc3RhcnRfYW5nbGUsIGVuZF9hbmdsZSwgY29sb3IsIGxpbmVfd2lkdGgpXHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0NpcmNsZShzaGFwZSA6IFNoYXBlLCBjZW50ZXIgOiBWZWMyLCByYWRpdXMgOiBudW1iZXIpe1xyXG4gICAgICAgIHRoaXMuZHJhd0FyYyhzaGFwZSwgY2VudGVyLCByYWRpdXMsIDAsIDIgKiBNYXRoLlBJKVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdFbGxpcHNlKGNlbnRlciA6IFZlYzIsIHJhZGl1c194IDogbnVtYmVyLCByYWRpdXNfeSA6IG51bWJlciwgcm90YXRpb24gOiBudW1iZXIsIGNvbG9yIDogc3RyaW5nLCBsaW5lX3dpZHRoIDogbnVtYmVyKXtcclxuXHJcbiAgICAgICAgY29uc3QgY2VudGVyX3BpeCA9IHRoaXMudmlldy50b1BpeFBvc2l0aW9uKGNlbnRlcik7XHJcbiAgICAgICAgY29uc3QgcmFkaXVzX3hfcGl4ID0gdGhpcy52aWV3LnRvWFBpeFNjYWxlKHJhZGl1c194KTtcclxuICAgICAgICBjb25zdCByYWRpdXNfeV9waXggPSB0aGlzLnZpZXcudG9YUGl4U2NhbGUocmFkaXVzX3kpO1xyXG5cclxuICAgICAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcclxuXHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5lbGxpcHNlKGNlbnRlcl9waXgueCwgY2VudGVyX3BpeC55LCByYWRpdXNfeF9waXgsIHJhZGl1c195X3BpeCwgcm90YXRpb24sIDAsIDIgKiBNYXRoLlBJKTtcclxuICAgICAgICBjdHgubGluZVdpZHRoID0gbGluZV93aWR0aDtcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBjb2xvcjtcclxuICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1RleHQocG9zaXRpb24gOiBWZWMyLCB0ZXh0IDogc3RyaW5nLCBjb2xvciA6IHN0cmluZyl7XHJcbiAgICAgICAgY29uc3QgcG9zX3BpeCA9IHRoaXMudmlldy50b1BpeFBvc2l0aW9uKHBvc2l0aW9uKTtcclxuICAgICAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcclxuICAgICAgICBjdHguZm9udCA9IFwiMTZweCBzZXJpZlwiO1xyXG4gICAgICAgIGN0eC5saW5lV2lkdGggPSAxO1xyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgIGN0eC5zdHJva2VUZXh0KHRleHQsIHBvc19waXgueCwgcG9zX3BpeC55KTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3UmVjdChzaGFwZSA6IFNoYXBlIHwgdW5kZWZpbmVkLCBwMSA6IFZlYzIsIHAyIDogVmVjMil7XHJcbiAgICAgICAgY29uc3QgW2NvbG9yLCBsaW5lX3dpZHRoXSA9IHRoaXMuZ2V0QXR0cmlidXRlcyhzaGFwZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBpeDEgPSB0aGlzLnZpZXcudG9QaXhQb3NpdGlvbihwMSk7XHJcbiAgICAgICAgY29uc3QgcGl4MiA9IHRoaXMudmlldy50b1BpeFBvc2l0aW9uKHAyKTtcclxuXHJcbiAgICAgICAgY29uc3QgeCA9IE1hdGgubWluKHBpeDEueCwgcGl4Mi54KTtcclxuICAgICAgICBjb25zdCB5ID0gTWF0aC5taW4ocGl4MS55LCBwaXgyLnkpO1xyXG4gICAgICAgIGNvbnN0IHcgPSBNYXRoLmFicyhwaXgxLnggLSBwaXgyLngpO1xyXG4gICAgICAgIGNvbnN0IGggPSBNYXRoLmFicyhwaXgxLnkgLSBwaXgyLnkpO1xyXG5cclxuICAgICAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IGxpbmVfd2lkdGg7XHJcbiAgICAgICAgY3R4LnJlY3QoeCwgeSwgdywgaCk7XHJcbiAgICAgICAgY3R4LnN0cm9rZSgpOyAgIFxyXG4gICAgfVxyXG59XHJcbn0iLCJuYW1lc3BhY2UgcGxhbmVfdHMge1xyXG5cclxuZXhwb3J0IGxldCBpZE1hcCA9IG5ldyBNYXA8bnVtYmVyLCBXaWRnZXQ+KCk7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgV2lkZ2V0IHtcclxuICAgIHN0YXRpYyByZWZNYXAgOiBNYXA8bnVtYmVyLCBhbnk+ID0gbmV3IE1hcDxudW1iZXIsIGFueT4oKTtcclxuICAgIHN0YXRpYyBpc0xvYWRpbmcgOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgLy8gc3RhdGljIFxyXG4gICAgc3RhdGljIG1heElkID0gMDtcclxuICAgIHN0YXRpYyBwcm9jZXNzZWQgOiBTZXQ8bnVtYmVyPjtcclxuICAgIGlkIDogbnVtYmVyO1xyXG4gICAgb3JkZXIgOiBudW1iZXIgPSBOYU47XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqIDogYW55KXsgICAgICAgIFxyXG4gICAgICAgIGlmKG9iai5pZCAhPSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pZCA9IG9iai5pZDtcclxuICAgICAgICAgICAgV2lkZ2V0Lm1heElkID0gTWF0aC5tYXgoV2lkZ2V0Lm1heElkLCB0aGlzLmlkKTtcclxuXHJcbiAgICAgICAgICAgIFdpZGdldC5yZWZNYXAuc2V0KG9iai5pZCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmlkID0gKytXaWRnZXQubWF4SWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFzc2VydCh0aGlzLmlkIDw9IFdpZGdldC5tYXhJZCAmJiAhaWRNYXAuaGFzKHRoaXMuaWQpKTtcclxuICAgICAgICBpZE1hcC5zZXQodGhpcy5pZCwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UHJvcGVydGllcygpe1xyXG4gICAgICAgIHJldHVybiBbIFwiaWRcIiwgXCJvcmRlclwiIF07XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZU9iaigpIDogYW55e1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxyXG4gICAgICAgICAgICB0eXBlTmFtZTogdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICB0b09iaigpe1xyXG4gICAgICAgIGlmKFdpZGdldC5wcm9jZXNzZWQuaGFzKHRoaXMuaWQpKXtcclxuICAgICAgICAgICAgcmV0dXJuIHsgcmVmOiB0aGlzLmlkIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBXaWRnZXQucHJvY2Vzc2VkLmFkZCh0aGlzLmlkKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFrZU9iaigpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VPYmplY3Qob2JqOiBhbnksIHBhcnNlX290aGVyX29iamVjdD8gOiAobyA6IGFueSk9PmFueSkgOiBhbnkge1xyXG4gICAgaWYob2JqID09IHVuZGVmaW5lZCB8fCBvYmogPT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9IFwib2JqZWN0XCIpe1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYob2JqIGluc3RhbmNlb2YgV2lkZ2V0IHx8IG9iaiBpbnN0YW5jZW9mIFZlYzIpe1xyXG4gICAgLy8gICAgIHJldHVybiBvYmo7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgaWYoQXJyYXkuaXNBcnJheShvYmopKXtcclxuICAgICAgICBsZXQgdiA9IG9iai5tYXAoeCA9PiBwYXJzZU9iamVjdCh4LCBwYXJzZV9vdGhlcl9vYmplY3QpKTtcclxuICAgICAgICByZXR1cm4gdjtcclxuICAgIH1cclxuXHJcbiAgICBpZihvYmoucmVmICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgbGV0IG8gPSBXaWRnZXQucmVmTWFwLmdldChvYmoucmVmKTsgICAgICAgXHJcbiAgICAgICAgaWYobyA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcihcIm5vLXJlZlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG87XHJcbiAgICB9XHJcblxyXG4gICAgaWYob2JqLnR5cGVOYW1lID09IFZlYzIubmFtZSl7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKG9iai54LCBvYmoueSk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yKGxldCBbbmFtZSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhvYmopKXtcclxuICAgICAgICBpZihuYW1lID09IFwiYm91bmRcIiAmJiAodmFsIGFzIGFueSkucmVmICE9IHVuZGVmaW5lZCAmJiBXaWRnZXQucmVmTWFwLmdldCgodmFsIGFzIGFueSkucmVmKSA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBtc2coYG5vIGJvdW5kOiR7b2JqLmlkfWApO1xyXG4gICAgICAgICAgICBvYmouYm91bmQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvYmpbbmFtZV0gPSBwYXJzZU9iamVjdCh2YWwsIHBhcnNlX290aGVyX29iamVjdCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3dpdGNoKG9iai50eXBlTmFtZSl7XHJcbiAgICBjYXNlIFRleHRCbG9jay5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgVGV4dEJsb2NrKG9iaik7XHJcblxyXG4gICAgLy8gY2FzZSBTcGVlY2gubmFtZTpcclxuICAgIC8vICAgICByZXR1cm4gbmV3IFNwZWVjaChvYmopO1xyXG5cclxuICAgIC8vIGNhc2UgU2ltdWxhdGlvbi5uYW1lOlxyXG4gICAgLy8gICAgIHJldHVybiBuZXcgU2ltdWxhdGlvbihvYmopO1xyXG5cclxuICAgIC8vIGNhc2UgVmlld1BvaW50Lm5hbWU6XHJcbiAgICAvLyAgICAgcmV0dXJuIG5ldyBWaWV3UG9pbnQob2JqKTtcclxuICAgIFxyXG4gICAgLy8gY2FzZSBQYWNrYWdlSW5mby5uYW1lOlxyXG4gICAgLy8gICAgIHJldHVybiBvYmo7XHJcblxyXG4gICAgLy8gY2FzZSBWYXJpYWJsZS5uYW1lOlxyXG4gICAgLy8gICAgIHJldHVybiBuZXcgVmFyaWFibGUob2JqKTtcclxuICAgIFxyXG4gICAgY2FzZSBQb2ludC5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQob2JqKTtcclxuXHJcbiAgICBjYXNlIExpbmVCeVBvaW50cy5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgTGluZUJ5UG9pbnRzKG9iaik7XHJcblxyXG4gICAgY2FzZSBQb2x5Z29uLm5hbWU6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2x5Z29uKG9iaik7XHJcblxyXG4gICAgLy8gY2FzZSBSZWN0Lm5hbWU6XHJcbiAgICAvLyAgICAgcmV0dXJuIG5ldyBSZWN0KG9iaik7XHJcblxyXG4gICAgY2FzZSBDaXJjbGVCeVBvaW50Lm5hbWU6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDaXJjbGVCeVBvaW50KG9iaik7XHJcblxyXG4gICAgY2FzZSBDaXJjbGVCeVJhZGl1cy5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgQ2lyY2xlQnlSYWRpdXMob2JqKTtcclxuXHJcbiAgICBjYXNlIEVsbGlwc2UubmFtZTpcclxuICAgICAgICByZXR1cm4gbmV3IEVsbGlwc2Uob2JqKTtcclxuXHJcbiAgICBjYXNlIERpbWVuc2lvbkxpbmUubmFtZTpcclxuICAgICAgICByZXR1cm4gbmV3IERpbWVuc2lvbkxpbmUob2JqKTtcclxuXHJcbiAgICBjYXNlIExlbmd0aFN5bWJvbC5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgTGVuZ3RoU3ltYm9sKG9iaik7XHJcbiAgICBcclxuICAgIC8vIGNhc2UgVHJpYW5nbGUubmFtZTpcclxuICAgIC8vICAgICByZXR1cm4gbmV3IFRyaWFuZ2xlKG9iaik7XHJcblxyXG4gICAgY2FzZSBNaWRwb2ludC5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgTWlkcG9pbnQob2JqKTtcclxuXHJcbiAgICBjYXNlIEZvb3RPZlBlcnBlbmRpY3VsYXIubmFtZTpcclxuICAgICAgICByZXR1cm4gbmV3IEZvb3RPZlBlcnBlbmRpY3VsYXIob2JqKTtcclxuXHJcbiAgICBjYXNlIFBlcnBlbmRpY3VsYXJMaW5lLm5hbWU6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJwZW5kaWN1bGFyTGluZShvYmopO1xyXG5cclxuICAgIGNhc2UgUGFyYWxsZWxMaW5lLm5hbWU6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJhbGxlbExpbmUob2JqKTtcclxuXHJcbiAgICBjYXNlIExpbmVMaW5lSW50ZXJzZWN0aW9uLm5hbWU6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lTGluZUludGVyc2VjdGlvbihvYmopO1xyXG5cclxuICAgIGNhc2UgQXJjQXJjSW50ZXJzZWN0aW9uLm5hbWU6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBcmNBcmNJbnRlcnNlY3Rpb24ob2JqKTtcclxuXHJcbiAgICBjYXNlIExpbmVBcmNJbnRlcnNlY3Rpb24ubmFtZTpcclxuICAgICAgICByZXR1cm4gbmV3IExpbmVBcmNJbnRlcnNlY3Rpb24ob2JqKTtcclxuXHJcbiAgICBjYXNlIENpcmNsZVBvaW50VGFuZ2VudC5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgQ2lyY2xlUG9pbnRUYW5nZW50KG9iaik7XHJcblxyXG4gICAgY2FzZSBDaXJjbGVDaXJjbGVUYW5nZW50Lm5hbWU6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDaXJjbGVDaXJjbGVUYW5nZW50KG9iaik7XHJcblxyXG4gICAgY2FzZSBBcmNCeVBvaW50Lm5hbWU6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBcmNCeVBvaW50KG9iaik7XHJcblxyXG4gICAgY2FzZSBBcmNCeVJhZGl1cy5uYW1lOlxyXG4gICAgY2FzZSBBcmNCeUxlbmd0aFN5bWJvbC5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgQXJjQnlMZW5ndGhTeW1ib2wob2JqKTtcclxuXHJcbiAgICBjYXNlIEFyY0J5Q2lyY2xlLm5hbWU6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBcmNCeUNpcmNsZShvYmopO1xyXG5cclxuICAgIGNhc2UgVHJpYW5nbGUubmFtZTpcclxuICAgICAgICByZXR1cm4gbmV3IFRyaWFuZ2xlKG9iaik7XHJcbiAgICBcclxuICAgIGNhc2UgQW5nbGUubmFtZTpcclxuICAgICAgICByZXR1cm4gbmV3IEFuZ2xlKG9iaik7XHJcblxyXG4gICAgY2FzZSBBbmdsZUJpc2VjdG9yLm5hbWU6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBbmdsZUJpc2VjdG9yKG9iaik7XHJcblxyXG4gICAgLy8gY2FzZSBJbWFnZS5uYW1lOlxyXG4gICAgLy8gICAgIHJldHVybiBuZXcgSW1hZ2Uob2JqKTtcclxuXHJcbiAgICAvLyBjYXNlIFdpZGdldFNlbGVjdGlvbi5uYW1lOlxyXG4gICAgLy8gY2FzZSBcIlNoYXBlU2VsZWN0aW9uXCI6XHJcbiAgICAvLyAgICAgICAgIHJldHVybiBuZXcgV2lkZ2V0U2VsZWN0aW9uKG9iaik7XHJcblxyXG4gICAgLy8gY2FzZSBUZXh0U2VsZWN0aW9uLm5hbWU6XHJcbiAgICAvLyAgICAgcmV0dXJuIG5ldyBUZXh0U2VsZWN0aW9uKG9iaik7XHJcblxyXG4gICAgLy8gY2FzZSBGdW5jTGluZS5uYW1lOlxyXG4gICAgLy8gICAgIHJldHVybiBuZXcgRnVuY0xpbmUob2JqKTtcclxuXHJcbiAgICAvLyAgICAgY2FzZSBTdXJmYWNlLm5hbWU6XHJcbiAgICAvLyAgICAgICAgIHJldHVybiBuZXcgU3VyZmFjZShvYmopO1xyXG4gICAgXHJcbiAgICBjYXNlIFN0YXRlbWVudC5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgU3RhdGVtZW50KG9iaik7XHJcblxyXG4gICAgY2FzZSBUcmlhbmdsZUNvbmdydWVuY2UubmFtZTpcclxuICAgICAgICByZXR1cm4gbmV3IFRyaWFuZ2xlQ29uZ3J1ZW5jZShvYmopO1xyXG5cclxuICAgIGNhc2UgVHJpYW5nbGVTaW1pbGFyaXR5Lm5hbWU6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUcmlhbmdsZVNpbWlsYXJpdHkob2JqKTtcclxuXHJcbiAgICBjYXNlIFwiRXF1YWxMZW5ndGhcIjpcclxuICAgIGNhc2UgTGVuZ3RoRXF1YWxpdHkubmFtZTpcclxuICAgICAgICByZXR1cm4gbmV3IExlbmd0aEVxdWFsaXR5KG9iaik7XHJcblxyXG4gICAgY2FzZSBBbmdsZUVxdWFsaXR5Lm5hbWU6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBbmdsZUVxdWFsaXR5KG9iaik7XHJcblxyXG4gICAgY2FzZSBQYXJhbGxlbERldGVjdG9yLm5hbWU6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJhbGxlbERldGVjdG9yKG9iaik7XHJcblxyXG4gICAgY2FzZSBQcm9wZXJ0eUNoYW5nZS5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvcGVydHlDaGFuZ2Uob2JqKTtcclxuXHJcbiAgICBjYXNlIExlbmd0aEVxdWFsaXR5Q29uc3RyYWludC5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgTGVuZ3RoRXF1YWxpdHlDb25zdHJhaW50KG9iaik7XHJcblxyXG4gICAgY2FzZSBBbmdsZUVxdWFsaXR5Q29uc3RyYWludC5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgQW5nbGVFcXVhbGl0eUNvbnN0cmFpbnQob2JqKTtcclxuXHJcbiAgICBjYXNlIFBhcmFsbGVsQ29uc3RyYWludC5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgUGFyYWxsZWxDb25zdHJhaW50KG9iaik7XHJcblxyXG4gICAgY2FzZSBQZXJwZW5kaWN1bGFyQ29uc3RyYWludC5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgUGVycGVuZGljdWxhckNvbnN0cmFpbnQob2JqKTtcclxuXHJcbiAgICBjYXNlIE1vdGlvbi5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgTW90aW9uKG9iaik7XHJcblxyXG4gICAgY2FzZSBRdWFkcmlsYXRlcmFsLm5hbWU6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWFkcmlsYXRlcmFsKG9iaik7XHJcblxyXG4gICAgY2FzZSBQYXJhbGxlbG9ncmFtQ2xhc3NpZmllci5uYW1lOlxyXG4gICAgICAgIHJldHVybiBuZXcgUGFyYWxsZWxvZ3JhbUNsYXNzaWZpZXIob2JqKTtcclxuXHJcbiAgICBjYXNlIFJob21idXNDbGFzc2lmaWVyLm5hbWU6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSaG9tYnVzQ2xhc3NpZmllcihvYmopO1xyXG5cclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgaWYocGFyc2Vfb3RoZXJfb2JqZWN0ICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZV9vdGhlcl9vYmplY3Qob2JqKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoYHBhcnNlIE9iamVjdDogdW5rbm93biB0eXBlOlske29iai50eXBlTmFtZX1dYCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzYXZlSnNvbihhbmNob3IgOiBsYXlvdXRfdHMuQW5jaG9yKXtcclxuICAgIGNvbnN0IHRleHQgPSBwbGFuZV90cy5nZXRPcGVyYXRpb25zVGV4dCgpO1xyXG5cclxuICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbdGV4dF0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nIH0pO1xyXG5cclxuICAgIGxheW91dF90cy5zYXZlQmxvYihhbmNob3IsIFwibW92aWVcIiwgYmxvYik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVGaWxlU2VsZWN0KGV2OiBEcmFnRXZlbnQpIHtcclxuICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBjb25zdCBmaWxlcyA9IGV2LmRhdGFUcmFuc2ZlciEuZmlsZXM7IC8vIEZpbGVMaXN0IG9iamVjdC5cclxuXHJcbiAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XHJcbiAgICAgICAgbXNnKGBkcm9wIG5hbWU6JHtlc2NhcGUoZmlsZS5uYW1lKX0gdHlwZToke2ZpbGUudHlwZX0gc2l6ZToke2ZpbGUuc2l6ZX0gbXRpbWU6JHtmaWxlLmxhc3RNb2RpZmllZC50b0xvY2FsZVN0cmluZygpfSBgKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuXHJcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QganNvbiA9IHJlYWRlci5yZXN1bHQgYXMgc3RyaW5nO1xyXG4gICAgICAgICAgICBjb25zdCBvYmogID0gSlNPTi5wYXJzZShqc29uKTtcclxuXHJcbiAgICAgICAgICAgIGFzc2VydChmYWxzZSk7XHJcbiAgICAgICAgICAgIGxvYWREYXRhKG9iaik7XHJcblxyXG4gICAgICAgICAgICAvLyB2aWV3RXZlbnQob2JqKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOyAgICAgICAgXHJcbiAgICAgICAgLy8gdXBsb2FkRmlsZShmKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxvYWREYXRhKG9iaiA6IGFueSl7XHJcblxyXG4gICAgUGxhbmUub25lLmNsZWFyUGxhbmUoKTtcclxuXHJcbiAgICBXaWRnZXQubWF4SWQgID0gLTE7XHJcbiAgICBpZE1hcCA9IG5ldyBNYXA8bnVtYmVyLCBXaWRnZXQ+KCk7XHJcbiAgICBXaWRnZXQucmVmTWFwID0gbmV3IE1hcDxudW1iZXIsIGFueT4oKTtcclxuICAgIE1hdGhFbnRpdHkub3JkZXJTZXQuY2xlYXIoKTtcclxuXHJcbiAgICBjb25zdCB2aWV3ID0gVmlldy5jdXJyZW50O1xyXG4gICAgZm9yKGxldCBbbmFtZSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhvYmopKXtcclxuICAgICAgICBpZihuYW1lICE9IFwic2hhcGVzXCIpe1xyXG4gICAgICAgICAgICAodmlldyBhcyBhbnkpW25hbWVdID0gcGFyc2VPYmplY3QodmFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmlldy5zaGFwZXMgPSBbXTtcclxuICAgIGNvbnN0IGFsbF9zaGFwZXMgOiBNYXRoRW50aXR5W10gPSBbXTtcclxuICAgIHBsYW5lX3RzLmluaXRSZWxhdGlvbnMoKTtcclxuICAgIGZvcihjb25zdCBzaGFwZV9vYmogb2Ygb2JqLnNoYXBlcyl7XHJcbiAgICAgICAgV2lkZ2V0LmlzTG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgY29uc3Qgc2hhcGUgPSBwYXJzZU9iamVjdChzaGFwZV9vYmopIGFzIE1hdGhFbnRpdHk7XHJcbiAgICAgICAgV2lkZ2V0LmlzTG9hZGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICB2aWV3LnNoYXBlcy5wdXNoKCBzaGFwZSApO1xyXG5cclxuICAgICAgICBzaGFwZS5zZXRPcmRlcigpO1xyXG4gICAgICAgIHNoYXBlLnNldFJlbGF0aW9ucygpO1xyXG5cclxuICAgICAgICBzaGFwZS5nZXRBbGxTaGFwZXMoYWxsX3NoYXBlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYWxsX3JlYWxfc2hhcGVzID0gdmlldy5hbGxSZWFsU2hhcGVzKCk7XHJcblxyXG4gICAgYWxsX3JlYWxfc2hhcGVzLmZpbHRlcih4ID0+IHguY2FwdGlvbiAhPSB1bmRlZmluZWQpLmZvckVhY2goeCA9PiB4LmNhcHRpb24hLnBhcmVudCA9IHgpO1xyXG5cclxuICAgIGFsbF9yZWFsX3NoYXBlcy5mb3JFYWNoKHggPT4geC51cGRhdGVDYXB0aW9uKCkpO1xyXG5cclxuICAgICh2aWV3LnNoYXBlcy5maWx0ZXIoeCA9PiB4IGluc3RhbmNlb2YgVGV4dEJsb2NrKSBhcyBUZXh0QmxvY2tbXSkuZm9yRWFjaCh4ID0+IHgudXBkYXRlVGV4dFBvc2l0aW9uKCkpO1xyXG5cclxuICAgIFBsYW5lLm9uZS5zaGFwZXNfYmxvY2suY2xlYXIoKTtcclxuICAgIHZpZXcuc2hhcGVzLmZvckVhY2goeCA9PiBhZGRUb1NoYXBlSGlzdG9yeSh4KSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVEcmFnT3ZlcihldnQ6IERyYWdFdmVudCkge1xyXG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBldnQuZGF0YVRyYW5zZmVyIS5kcm9wRWZmZWN0ID0gJ2NvcHknOyAvLyBFeHBsaWNpdGx5IHNob3cgdGhpcyBpcyBhIGNvcHkuXHJcbn1cclxuXHJcblxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwianNvbi50c1wiIC8+XHJcblxyXG50eXBlICBSZWFkaW5nID0gaTE4bl90cy5SZWFkaW5nO1xyXG5jb25zdCBSZWFkaW5nID0gaTE4bl90cy5SZWFkaW5nO1xyXG5cclxubmFtZXNwYWNlIHBsYW5lX3RzIHtcclxuLy9cclxuZXhwb3J0IGNvbnN0IGZnQ29sb3IgPSBsYXlvdXRfdHMuZmdDb2xvcjtcclxuZXhwb3J0IGNvbnN0IGJnQ29sb3IgPSBsYXlvdXRfdHMuYmdDb2xvcjtcclxuZXhwb3J0IGNvbnN0IGRlcGVuZENvbG9yID0gXCJibHVlXCI7XHJcbmV4cG9ydCBjb25zdCB0YXJnZXRDb2xvciA9IFwicmVkXCI7XHJcbmV4cG9ydCBjb25zdCBkZWZhdWx0TGluZVdpZHRoID0gMztcclxuZXhwb3J0IGNvbnN0IE92ZXJMaW5lV2lkdGggPSA1O1xyXG5sZXQgY2FwdHVyZWRTaGFwZSA6IE1hdGhFbnRpdHkgfCB1bmRlZmluZWQ7XHJcblxyXG5leHBvcnQgZW51bSBNb2RlIHtcclxuICAgIG5vbmUsXHJcbiAgICBkZXBlbmQsXHJcbiAgICBkZXBlbmQxLFxyXG4gICAgZGVwZW5kMixcclxuICAgIHRhcmdldCxcclxuICAgIHRhcmdldDEsXHJcbiAgICB0YXJnZXQyLFxyXG59XHJcblxyXG5jb25zdCBtb2RlQ29sb3JNYXAgPSBuZXcgTWFwPE1vZGUsc3RyaW5nPihbXHJcbiAgICBbIE1vZGUubm9uZSAgICwgZmdDb2xvciBdLFxyXG4gICAgWyBNb2RlLmRlcGVuZCAsIGRlcGVuZENvbG9yIF0sXHJcbiAgICBbIE1vZGUuZGVwZW5kMSwgXCJBcXVhXCIgXSxcclxuICAgIFsgTW9kZS5kZXBlbmQyLCBcImxpbWVcIiBdLFxyXG4gICAgWyBNb2RlLnRhcmdldCAsIHRhcmdldENvbG9yIF0sXHJcbiAgICBbIE1vZGUudGFyZ2V0MSwgXCJvcmFuZ2VcIiBdLFxyXG4gICAgWyBNb2RlLnRhcmdldDIsIFwibWFnZW50YVwiIF0sXHJcbl0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE1vZGVDb2xvcihtb2RlIDogTW9kZSkgOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIG1vZGVDb2xvck1hcC5nZXQobW9kZSkhO1xyXG59XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgTWF0aEVudGl0eSBleHRlbmRzIFdpZGdldCBpbXBsZW1lbnRzIGkxOG5fdHMuUmVhZGFibGUsIHBhcnNlcl90cy5IaWdobGlnaHRhYmxlIHtcclxuICAgIHN0YXRpYyBvcmRlclNldCA9IG5ldyBTZXQ8TWF0aEVudGl0eT4oKTtcclxuICAgIHNldFJlbGF0aW9uc0NvdW50IDogbnVtYmVyID0gMDtcclxuICAgIHZpc2libGUgOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIG1vZGUgOiBNb2RlID0gTW9kZS5ub25lO1xyXG4gICAgaXNPdmVyIDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgbXV0ZSA6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIGludGVydmFsIDogbnVtYmVyID0gMTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiBhbnkpe1xyXG4gICAgICAgIHN1cGVyKG9iaik7XHJcblxyXG4gICAgICAgIGlmKG9iai52aXNpYmxlICE9IHVuZGVmaW5lZCAmJiAhb2JqLnZpc2libGUpe1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG9iai5tdXRlICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHRoaXMubXV0ZSA9IG9iai5tdXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYob2JqLmludGVydmFsICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBvYmouaW50ZXJ2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKFZpZXcuY3VycmVudCAhPSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgVmlldy5jdXJyZW50LmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZU9iaigpIDogYW55IHtcclxuICAgICAgICBsZXQgb2JqID0gc3VwZXIubWFrZU9iaigpO1xyXG5cclxuICAgICAgICBpZih0aGlzLm11dGUpe1xyXG4gICAgICAgICAgICBvYmoubXV0ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLmludGVydmFsICE9IDEpe1xyXG4gICAgICAgICAgICBvYmouaW50ZXJ2YWwgPSB0aGlzLmludGVydmFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoIXRoaXMudmlzaWJsZSl7XHJcbiAgICAgICAgICAgIG9iai52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFByb3BlcnRpZXMoKXtcclxuICAgICAgICByZXR1cm4gc3VwZXIuZ2V0UHJvcGVydGllcygpLmNvbmNhdChbXHJcbiAgICAgICAgICAgIFwibXV0ZVwiLCBcInZpc2libGVcIiwgXCJpbnRlcnZhbFwiXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWJzdHJhY3QgcmVhZGluZygpIDogUmVhZGluZztcclxuXHJcbiAgICB0ZXh0UmVhZGluZyh0ZXh0IDogc3RyaW5nKSA6IFJlYWRpbmcge1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVhZGluZyh0aGlzLCB0ZXh0LCBbXSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGlnaGxpZ2h0KG9uIDogYm9vbGVhbikgOiB2b2lkIHtcclxuICAgICAgICBpZihvbil7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TW9kZShNb2RlLnRhcmdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TW9kZShNb2RlLm5vbmUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxTaGFwZXMoc2hhcGVzIDogTWF0aEVudGl0eVtdKXtcclxuICAgICAgICBzaGFwZXMucHVzaCh0aGlzKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgYWxsU2hhcGVzKCkgOiBTaGFwZVtdIHtcclxuICAgICAgICBjb25zdCBzaGFwZXMgOiBTaGFwZVtdID0gW107XHJcbiAgICAgICAgdGhpcy5nZXRBbGxTaGFwZXMoc2hhcGVzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHVuaXF1ZShzaGFwZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlcGVuZGVuY2llcygpIDogTWF0aEVudGl0eVtdIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgc2V0T3JkZXIoKXtcclxuICAgICAgICBpZihNYXRoRW50aXR5Lm9yZGVyU2V0Lmhhcyh0aGlzKSl7XHJcbiAgICAgICAgICAgIGFzc2VydCghaXNOYU4odGhpcy5vcmRlcikpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvcihjb25zdCBkZXAgb2YgdGhpcy5kZXBlbmRlbmNpZXMoKSl7XHJcbiAgICAgICAgICAgIGRlcC5zZXRPcmRlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXNzZXJ0KCFNYXRoRW50aXR5Lm9yZGVyU2V0Lmhhcyh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5vcmRlciA9IE1hdGhFbnRpdHkub3JkZXJTZXQuc2l6ZTtcclxuICAgICAgICBNYXRoRW50aXR5Lm9yZGVyU2V0LmFkZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRNb2RlKG1vZGUgOiBNb2RlKXtcclxuICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xyXG4gICAgICAgIFZpZXcuY3VycmVudC5kaXJ0eSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlKGRlbGV0ZWQgOiBTZXQ8bnVtYmVyPil7XHJcbiAgICAgICAgaWYoZGVsZXRlZC5oYXModGhpcy5pZCkpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZWQuYWRkKHRoaXMuaWQpO1xyXG5cclxuICAgICAgICBmb3IobGV0IFtuYW1lLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMpKXtcclxuICAgICAgICAgICAgaWYodmFsIGluc3RhbmNlb2YgTWF0aEVudGl0eSl7XHJcbiAgICAgICAgICAgICAgICB2YWwuZGVsZXRlKGRlbGV0ZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgICBcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBwbGF5KHNwZWVjaCA6IGkxOG5fdHMuQWJzdHJhY3RTcGVlY2gpe1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRleHRCbG9jaygpIDogVGV4dEJsb2NrIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZih0aGlzIGluc3RhbmNlb2YgVGV4dEJsb2NrKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYodGhpcyBpbnN0YW5jZW9mIFNoYXBlICYmIHRoaXMuY2FwdGlvbiAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXB0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoaWRlVGV4dEJsb2NrKCl7XHJcbiAgICAgICAgY29uc3QgdGV4dF9ibG9jayA9IHRoaXMuZ2V0VGV4dEJsb2NrKCk7XHJcbiAgICAgICAgaWYodGV4dF9ibG9jayAhPSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgdGV4dF9ibG9jay5kaXYuZGF0YXNldC5kaXNwbGF5X2JhY2t1cCA9IHRleHRfYmxvY2suZGl2LnN0eWxlLmRpc3BsYXk7XHJcbiAgICAgICAgICAgIHRleHRfYmxvY2suZGl2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdG9yZVRleHRCbG9jaygpe1xyXG4gICAgICAgIGNvbnN0IHRleHRfYmxvY2sgPSB0aGlzLmdldFRleHRCbG9jaygpO1xyXG4gICAgICAgIGlmKHRleHRfYmxvY2sgIT0gdW5kZWZpbmVkICYmIHRleHRfYmxvY2suZGl2LmRhdGFzZXQuZGlzcGxheV9iYWNrdXAgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGV4dF9ibG9jay5kaXYuc3R5bGUuZGlzcGxheSA9IHRleHRfYmxvY2suZGl2LmRhdGFzZXQuZGlzcGxheV9iYWNrdXA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3coKXsgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGhpZGUoKXsgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHNldFJlbGF0aW9ucygpe1xyXG4gICAgICAgIHRoaXMuc2V0UmVsYXRpb25zQ291bnQrKztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRlcm1SZWN0IHtcclxuICAgIHRlcm0gOiBUZXJtO1xyXG4gICAgc3BhbiA6IEhUTUxTcGFuRWxlbWVudDtcclxuICAgIHJlY3QgOiBET01SZWN0O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRlcm0gOiBUZXJtLCBzcGFuIDogSFRNTFNwYW5FbGVtZW50KXtcclxuICAgICAgICB0aGlzLnRlcm0gPSB0ZXJtO1xyXG4gICAgICAgIHRoaXMuc3BhbiA9IHNwYW47XHJcbiAgICAgICAgdGhpcy5yZWN0ID0gc3Bhbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRCbG9jayBleHRlbmRzIE1hdGhFbnRpdHkge1xyXG4gICAgcGFyZW50IDogTWF0aEVudGl0eSB8IHVuZGVmaW5lZDtcclxuICAgIHRleHQgIDogc3RyaW5nO1xyXG4gICAgaXNUZXggOiBib29sZWFuO1xyXG4gICAgZGl2ICAgOiBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgICBvZmZzZXQgOiBWZWMyID0gbmV3IFZlYzIoMCwgMCk7XHJcbiAgICB0ZXJtUmVjdHMgOiBUZXJtUmVjdFtdID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqIDogeyBwYXJlbnQ/IDogTWF0aEVudGl0eSwgdGV4dCA6IHN0cmluZywgaXNUZXggOiBib29sZWFuLCBvZmZzZXQgOiBWZWMyIH0pe1xyXG4gICAgICAgIHN1cGVyKG9iaik7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBvYmoucGFyZW50O1xyXG4gICAgICAgIHRoaXMudGV4dCAgPSBvYmoudGV4dDtcclxuICAgICAgICB0aGlzLmlzVGV4ID0gb2JqLmlzVGV4O1xyXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2JqLm9mZnNldDtcclxuXHJcbiAgICAgICAgdGhpcy5kaXYgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaWYodGhpcy5nZXRFcXVhdGlvbigpICE9IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRpdi5jbGFzc05hbWUgPSBcInNlbGVjdGFibGVfdGV4XCI7XHJcbiAgICAgICAgICAgIHRoaXMuZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnRleENsaWNrLmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kaXYuY2xhc3NOYW1lID0gXCJ0ZXhfZGl2XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLmZvbnRTaXplID0gXCJ4LWxhcmdlXCI7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0VmlzaWJsZSh0aGlzLnZpc2libGUpO1xyXG5cclxuICAgICAgICBWaWV3LmN1cnJlbnQuYm9hcmQucGFyZW50RWxlbWVudCEuYXBwZW5kKHRoaXMuZGl2KTtcclxuXHJcbiAgICAgICAgaWYodGhpcy5nZXRFcXVhdGlvbigpID09IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICBzZXRDYXB0aW9uRXZlbnQodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZVRleHRQb3NpdGlvbigpO1xyXG5cclxuICAgICAgICB0ZXh0QmxvY2tFdmVudC5zZXRUZXh0QmxvY2tFdmVudCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRFcXVhdGlvbigpIDogQXBwIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZihpc0VxdWF0aW9uVGV4dEJsb2NrKHRoaXMucGFyZW50KSl7XHJcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5wYXJlbnQgYXMgRXF1YXRpb25UZXh0QmxvY2tDbGFzcykuZXF1YXRpb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIG1ha2VPYmooKSA6IGFueSB7XHJcbiAgICAgICAgbGV0IG9iaiA9IE9iamVjdC5hc3NpZ24oc3VwZXIubWFrZU9iaigpLCB7XHJcbiAgICAgICAgICAgIHRleHQgICA6IHRoaXMudGV4dCxcclxuICAgICAgICAgICAgaXNUZXggIDogdGhpcy5pc1RleCxcclxuICAgICAgICAgICAgb2Zmc2V0IDogdGhpcy5vZmZzZXRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQcm9wZXJ0aWVzKCl7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldFByb3BlcnRpZXMoKS5jb25jYXQoW1xyXG4gICAgICAgICAgICBcInRleHRcIiwgXCJpc1RleFwiLCBcIm9mZnNldFwiXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2xpY2tlZFRlcm1SZWN0KHggOiBudW1iZXIsIHkgOiBudW1iZXIpIDogVGVybVJlY3Qge1xyXG4gICAgICAgIHRoaXMudGVybVJlY3RzLmZvckVhY2goeCA9PiB4LnNwYW4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ0cmFuc3BhcmVudFwiKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVmdmFyX3JlY3RzID0gdGhpcy50ZXJtUmVjdHMuZmlsdGVyKHggPT4geC50ZXJtIGluc3RhbmNlb2YgUmVmVmFyKTtcclxuICAgICAgICBmb3IoY29uc3QgdGVybV9yZWN0IG9mIHJlZnZhcl9yZWN0cyl7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSB0ZXJtX3JlY3QucmVjdDtcclxuICAgICAgICAgICAgY29uc3Qgc3BhbiA9IHRlcm1fcmVjdC5zcGFuO1xyXG5cclxuICAgICAgICAgICAgaWYocmVjdC5sZWZ0IDw9IHggJiYgeCA8IHJlY3QucmlnaHQgJiYgcmVjdC50b3AgPD0geSAmJiB5IDwgcmVjdC5ib3R0b20pe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRlcm1fcmVjdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB0ZXhDbGljayhldiA6IE1vdXNlRXZlbnQpe1xyXG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICBpZihCdWlsZGVyLnRvb2wgaW5zdGFuY2VvZiBFeHByVHJhbnNmb3JtQnVpbGRlcil7XHJcbiAgICAgICAgICAgIGNvbnN0IHNyY1Rlcm1SZWN0ID0gdGhpcy5nZXRDbGlja2VkVGVybVJlY3QoZXYuY2xpZW50WCwgZXYuY2xpZW50WSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkc3RUZXJtUmVjdCA9IEJ1aWxkZXIudG9vbC5nZXREc3RUZXJtUmVjdCh0aGlzLnRlcm1SZWN0cywgc3JjVGVybVJlY3QpO1xyXG4gICAgICAgICAgICBjb25zdCBkc3RUZXJtID0gZHN0VGVybVJlY3QudGVybTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKCFWaWV3LmlzUGxheUJhY2spe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0aCA9IGRzdFRlcm0uZ2V0UGF0aCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IG5ldyBDbGlja1Rlcm0odGhpcy5pZCwgcGF0aC5pbmRleGVzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBWaWV3LmN1cnJlbnQuYWRkT3BlcmF0aW9uKG9wZXJhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IEJ1aWxkZXIudG9vbC50ZXJtQ2xpY2soZHN0VGVybSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVRleHREaXYoKXtcclxuICAgICAgICBsZXQgdGV4dCA9IHRoaXMudGV4dDtcclxuICAgICAgICBpZih0ZXh0ID09IFwiXCIgJiYgdGhpcy5wYXJlbnQgaW5zdGFuY2VvZiBTaGFwZSl7XHJcbiAgICAgICAgICAgIHRleHQgPSB0aGlzLnBhcmVudC5uYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5pc1RleCl7XHJcblxyXG4gICAgICAgICAgICBpZihwYXJzZXJfdHMuaXNHcmVlayh0ZXh0KSl7XHJcbiAgICAgICAgICAgICAgICB0ZXh0ID0gYFxcXFwke3RleHR9YDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmVuZGVyS2F0ZXhTdWIodGhpcy5kaXYsIHRleHQpO1xyXG5cclxuICAgICAgICAgICAgaWYodGhpcy5nZXRFcXVhdGlvbigpICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXJtcyA9IHRoaXMuZ2V0RXF1YXRpb24oKSEuYWxsVGVybXMoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleF9zcGFucyA9IEFycmF5LmZyb20odGhpcy5kaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImVuY2xvc2luZ1wiKSkgYXMgSFRNTFNwYW5FbGVtZW50W107XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRlcm1SZWN0cyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkX29mZnNldCA9IFwidGV4LXRlcm0tXCIubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZm9yKGNvbnN0IHNwYW4gb2YgdGV4X3NwYW5zKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHBhcnNlSW50KHNwYW4uaWQuc3Vic3RyaW5nKGlkX29mZnNldCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm0gPSB0ZXJtcy5maW5kKHggPT4geC5pZCA9PSBpZCkhO1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydCh0ZXJtICE9IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXJtUmVjdHMucHVzaChuZXcgVGVybVJlY3QodGVybSwgc3BhbikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRpdi5pbm5lclRleHQgPSB0ZXh0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRWaXNpYmxlKHZpc2libGUgOiBib29sZWFuKXtcclxuICAgICAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlO1xyXG5cclxuICAgICAgICBpZih0aGlzLnZpc2libGUpe1xyXG4gICAgICAgICAgICB0aGlzLmRpdi5zdHlsZS5jb2xvciA9IFwiXCI7XHJcbiAgICAgICAgICAgIHRoaXMuZGl2LnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBpZihQbGFuZS5vbmUuZWRpdE1vZGUpe1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZGl2LnN0eWxlLmNvbG9yID0gXCJncmF5XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGl2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93KCl7ICAgICAgICBcclxuICAgICAgICB0aGlzLmRpdi5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlKCl7ICAgICAgICBcclxuICAgICAgICB0aGlzLmRpdi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0SXNUZXgoaXNfdGV4IDogYm9vbGVhbil7XHJcbiAgICAgICAgdGhpcy5pc1RleCA9IGlzX3RleDtcclxuICAgICAgICB0aGlzLnVwZGF0ZVRleHREaXYoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUZXh0UG9zaXRpb24oeCA6IG51bWJlciwgeSA6IG51bWJlcil7XHJcbiAgICAgICAgdGhpcy5kaXYuc3R5bGUubGVmdCA9IGAke1ZpZXcuY3VycmVudC5ib2FyZC5vZmZzZXRMZWZ0ICsgdG9YUGl4KHggKyB0aGlzLm9mZnNldC54KX1weGA7XHJcbiAgICAgICAgdGhpcy5kaXYuc3R5bGUudG9wICA9IGAke1ZpZXcuY3VycmVudC5ib2FyZC5vZmZzZXRUb3AgICsgdG9ZUGl4KHkgKyB0aGlzLm9mZnNldC55KX1weGA7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlVGV4dFBvc2l0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5kaXYuc3R5bGUubGVmdCA9IGAke1ZpZXcuY3VycmVudC5ib2FyZC5vZmZzZXRMZWZ0ICsgdG9YUGl4KHRoaXMub2Zmc2V0LngpfXB4YDtcclxuICAgICAgICB0aGlzLmRpdi5zdHlsZS50b3AgID0gYCR7Vmlldy5jdXJyZW50LmJvYXJkLm9mZnNldFRvcCAgKyB0b1lQaXgodGhpcy5vZmZzZXQueSl9cHhgO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFJvdGF0aW9uKGRlZ3JlZSA6IG51bWJlcil7XHJcbiAgICAgICAgdGhpcy5kaXYuc3R5bGUudHJhbnNmb3JtID0gYHJvdGF0ZSgke2RlZ3JlZX1kZWcpYDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTaXplKCkgOiBbbnVtYmVyLCBudW1iZXJdIHtcclxuICAgICAgICByZXR1cm4gWyB0aGlzLmRpdi5vZmZzZXRXaWR0aCwgdGhpcy5kaXYub2Zmc2V0SGVpZ2h0IF07XHJcbiAgICB9XHJcblxyXG4gICAgY2FwdGlvblBvaW50ZXJkb3duKGV2ZW50IDogUG9pbnRlckV2ZW50KXtcclxuICAgICAgICB0aGlzLmRpdi5zZXRQb2ludGVyQ2FwdHVyZShldmVudC5wb2ludGVySWQpO1xyXG4gICAgICAgIGNhcHR1cmVkU2hhcGUgPSB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGNhcHRpb25Qb2ludGVybW92ZShldmVudCA6IFBvaW50ZXJFdmVudCl7XHJcbiAgICAgICAgaWYoY2FwdHVyZWRTaGFwZSAhPSB0aGlzKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5vZmZzZXQueCArPSBmcm9tWFBpeFNjYWxlKGV2ZW50Lm1vdmVtZW50WCk7XHJcbiAgICAgICAgdGhpcy5vZmZzZXQueSAtPSBmcm9tWVBpeFNjYWxlKGV2ZW50Lm1vdmVtZW50WSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5kaXYuc3R5bGUubGVmdCA9IGAke3RoaXMuZGl2Lm9mZnNldExlZnQgKyBldmVudC5tb3ZlbWVudFh9cHhgO1xyXG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLnRvcCAgPSBgJHt0aGlzLmRpdi5vZmZzZXRUb3AgICsgZXZlbnQubW92ZW1lbnRZfXB4YDtcclxuICAgIH1cclxuXHJcbiAgICBjYXB0aW9uUG9pbnRlcnVwKGV2ZW50IDogUG9pbnRlckV2ZW50KXtcclxuICAgICAgICB0aGlzLmRpdi5yZWxlYXNlUG9pbnRlckNhcHR1cmUoZXZlbnQucG9pbnRlcklkKTtcclxuICAgICAgICBjYXB0dXJlZFNoYXBlID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRpbmcoKSA6IFJlYWRpbmcge1xyXG4gICAgICAgIC8vIG1zZyhgZW1wdHkgcmVhZGluZzoke3RoaXMuY29uc3RydWN0b3IubmFtZX1gKTtcclxuICAgICAgICByZXR1cm4gbmV3IFJlYWRpbmcodGhpcywgXCJcIiwgW10pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZShkZWxldGVkIDogU2V0PG51bWJlcj4pe1xyXG4gICAgICAgIGlmKGRlbGV0ZWQuaGFzKHRoaXMuaWQpKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdXBlci5kZWxldGUoZGVsZXRlZCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGl2LnJlbW92ZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgU2hhcGUgZXh0ZW5kcyBNYXRoRW50aXR5IHtcclxuICAgIG5hbWUgICAgICA6IHN0cmluZyA9IFwiXCI7XHJcbiAgICBjb2xvciAgICAgOiBzdHJpbmcgPSBmZ0NvbG9yO1xyXG4gICAgbGluZVdpZHRoIDogbnVtYmVyID0gZGVmYXVsdExpbmVXaWR0aDtcclxuICAgIGNhcHRpb24gICA6IFRleHRCbG9jayB8IHVuZGVmaW5lZDtcclxuICAgIGRlcGVuZHMgICA6IFNoYXBlW10gPSBbXTtcclxuICAgIGNvbnN0cmFpbnRzIDogQ29uc3RyYWludFtdID0gW107XHJcblxyXG4gICAgYWJzdHJhY3QgZHJhdygpIDogdm9pZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiBhbnkpe1xyXG4gICAgICAgIHN1cGVyKG9iaik7XHJcbiAgICAgICAgaWYob2JqLm5hbWUgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gb2JqLm5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihvYmouY29sb3IgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5jb2xvciA9IG9iai5jb2xvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG9iai5saW5lV2lkdGggIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5saW5lV2lkdGggPSBvYmoubGluZVdpZHRoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jYXB0aW9uID0gb2JqLmNhcHRpb247XHJcblxyXG4gICAgICAgIGlmKHRoaXMuY2FwdGlvbiA9PSB1bmRlZmluZWQgJiYgdGhpcy5uYW1lICE9IFwiXCIpe1xyXG4gICAgICAgICAgICB0aGlzLmNhcHRpb24gPSB0aGlzLm1ha2VDYXB0aW9uKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5jYXB0aW9uICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHRoaXMuY2FwdGlvbi5wYXJlbnQgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLmNhcHRpb24udXBkYXRlVGV4dERpdigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb3B5KCkgOiBTaGFwZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgIH1cclxuXHJcbiAgICBtYWtlT2JqKCkgOiBhbnkge1xyXG4gICAgICAgIGxldCBvYmogPSBPYmplY3QuYXNzaWduKHN1cGVyLm1ha2VPYmooKSwge1xyXG4gICAgICAgICAgICBuYW1lIDogdGhpcy5uYW1lXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuY29sb3IgIT0gZmdDb2xvcil7XHJcbiAgICAgICAgICAgIG9iai5jb2xvciA9IHRoaXMuY29sb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLmxpbmVXaWR0aCAhPSBkZWZhdWx0TGluZVdpZHRoKXtcclxuICAgICAgICAgICAgb2JqLmxpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5jYXB0aW9uICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIG9iai5jYXB0aW9uID0gdGhpcy5jYXB0aW9uLm1ha2VPYmooKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMuZGVwZW5kcy5sZW5ndGggIT0gMCl7XHJcbiAgICAgICAgICAgIG9iai5kZXBlbmRzID0gdGhpcy5kZXBlbmRzLm1hcCh4ID0+IHguaWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICBtYWtlQ2FwdGlvbihwYXJlbnQgOiBNYXRoRW50aXR5KSA6IFRleHRCbG9jayB7XHJcbiAgICAgICAgY29uc3QgeCA9IGZyb21YUGl4U2NhbGUoMTApO1xyXG4gICAgICAgIGNvbnN0IHkgPSBmcm9tWVBpeFNjYWxlKDIwKTtcclxuICAgICAgICByZXR1cm4gbmV3IFRleHRCbG9jayggeyBwYXJlbnQsIHRleHQgOiBcIlwiLCBpc1RleCA6IGZhbHNlLCBvZmZzZXQgOiBuZXcgVmVjMih4LCB5KSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXROYW1lKG5hbWUgOiBzdHJpbmcpe1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcblxyXG4gICAgICAgIGlmKHRoaXMubmFtZSA9PSBcIlwiKXtcclxuXHJcbiAgICAgICAgICAgIGlmKHRoaXMuY2FwdGlvbiAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYXB0aW9uLmRlbGV0ZShuZXcgU2V0PG51bWJlcj4oKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhcHRpb24gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgIGlmKHRoaXMubmFtZSAhPSBcIlwiICYmIHRoaXMuY2FwdGlvbiA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYXB0aW9uID0gdGhpcy5tYWtlQ2FwdGlvbih0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jYXB0aW9uIS51cGRhdGVUZXh0RGl2KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBWaWV3LmN1cnJlbnQuZGlydHkgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFByb3BlcnRpZXMoKXtcclxuICAgICAgICByZXR1cm4gc3VwZXIuZ2V0UHJvcGVydGllcygpLmNvbmNhdChbXHJcbiAgICAgICAgICAgIFwibmFtZVwiLCBcImNvbG9yXCIsIFwibGluZVdpZHRoXCIsIFwiY2FwdGlvblwiXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNOZWFyKHBvc2l0aW9uIDogVmVjMikgOiBib29sZWFuIHsgICAgICAgIFxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBtb2RlQ29sb3IoKSA6IHN0cmluZyB7XHJcbiAgICAgICAgaWYodGhpcy5tb2RlID09IE1vZGUubm9uZSl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbG9yOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gZ2V0TW9kZUNvbG9yKHRoaXMubW9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vZGVMaW5lV2lkdGgoKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmlzT3ZlciA/IE92ZXJMaW5lV2lkdGggOiB0aGlzLmxpbmVXaWR0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FsYygpeyAgICAgIFxyXG4gICAgICAgIHRoaXMuY29uc3RyYWludHMuZm9yRWFjaCh4ID0+IHguYXBwbHlDb25zdHJhaW50KHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVDYXB0aW9uKCl7IFxyXG4gICAgfVxyXG5cclxuICAgIHNoYXBlUG9pbnRlcmRvd24ocG9zaXRpb24gOiBWZWMyKXtcclxuICAgIH1cclxuXHJcbiAgICBzaGFwZVBvaW50ZXJtb3ZlKHBvc2l0aW9uIDogVmVjMiwgZGlmZiA6IFZlYzIpe1xyXG4gICAgfVxyXG5cclxuICAgIHNoYXBlUG9pbnRlcnVwKHBvc2l0aW9uIDogVmVjMil7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZGluZygpIDogUmVhZGluZyB7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9ICh0aGlzLm5hbWUgIT0gXCJcIiA/IHRoaXMubmFtZSA6IHRoaXMuY29uc3RydWN0b3IubmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWFkaW5nKHRoaXMsIGkxOG5fdHMudG9rZW4obmFtZSksIFtdKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93KCl7ICAgICAgICBcclxuICAgICAgICBpZih0aGlzLmNhcHRpb24gIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5jYXB0aW9uLnNob3coKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoaWRlKCl7ICAgICAgICBcclxuICAgICAgICBpZih0aGlzLmNhcHRpb24gIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5jYXB0aW9uLmhpZGUoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkZWxldGUoZGVsZXRlZCA6IFNldDxudW1iZXI+KXsgICAgICAgIFxyXG4gICAgICAgIGlmKGRlbGV0ZWQuaGFzKHRoaXMuaWQpKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3VwZXIuZGVsZXRlKGRlbGV0ZWQpO1xyXG4gICAgICAgIGlmKHRoaXMuY2FwdGlvbiAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB0aGlzLmNhcHRpb24uZGVsZXRlKGRlbGV0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGRDb25zdHJhaW50KGNvbnN0cmFpbnQgOiBDb25zdHJhaW50KXtcclxuICAgICAgICBpZighIHRoaXMuY29uc3RyYWludHMuaW5jbHVkZXMoY29uc3RyYWludCkpe1xyXG4gICAgICAgICAgICB0aGlzLmNvbnN0cmFpbnRzLnB1c2goY29uc3RyYWludCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUG9pbnQgZXh0ZW5kcyBTaGFwZSB7XHJcbiAgICBzdGF0aWMgdGVtcFBvaW50cyA6IFBvaW50W10gPSBbXTtcclxuXHJcbiAgICBzdGF0aWMgcmFkaXVzUGl4ID0gNDtcclxuICAgIHN0YXRpYyByYWRpdXMgOiBudW1iZXI7XHJcblxyXG4gICAgcG9zaXRpb24hIDogVmVjMjtcclxuICAgIHBvc2l0aW9uU2F2ZSA6IFZlYzIgfCB1bmRlZmluZWQ7XHJcbiAgICBib3VuZCA6IEFic3RyYWN0TGluZSB8IENpcmNsZUFyYyB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBvcmlnaW4gOiBQb2ludCB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBzdGF0aWMgemVybygpIDogUG9pbnQge1xyXG4gICAgICAgIHJldHVybiBQb2ludC5mcm9tQXJncyhWZWMyLnplcm8oKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZyb21BcmdzKHBvc2l0aW9uIDogVmVjMil7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludCggeyBwb3NpdGlvbiB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqIDogeyBwb3NpdGlvbiA6IFZlYzIsIGJvdW5kPyA6IEFic3RyYWN0TGluZSB8IENpcmNsZUFyYyB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG5cclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gb2JqLnBvc2l0aW9uO1xyXG5cclxuICAgICAgICBpZih0aGlzLm5hbWUgIT0gXCJcIiAmJiB0aGlzLmNhcHRpb24gPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5jYXB0aW9uID0gdGhpcy5tYWtlQ2FwdGlvbih0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG9iai5ib3VuZCAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB0aGlzLnNldEJvdW5kKG9iai5ib3VuZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UG9zaXRpb24ob2JqLnBvc2l0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFBvaW50LnRlbXBQb2ludHMucHVzaCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb3B5KCkgOiBQb2ludCB7XHJcbiAgICAgICAgcmV0dXJuIFBvaW50LmZyb21BcmdzKHRoaXMucG9zaXRpb24uY29weSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBtYWtlT2JqKCkgOiBhbnkge1xyXG4gICAgICAgIGxldCBvYmogPSBPYmplY3QuYXNzaWduKHN1cGVyLm1ha2VPYmooKSwge1xyXG4gICAgICAgICAgICBwb3NpdGlvbiA6IHRoaXMucG9zaXRpb25cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYodGhpcy5ib3VuZCAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBvYmouYm91bmQgPSB0aGlzLmJvdW5kLnRvT2JqKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFBvc2l0aW9uKHBvc2l0aW9uIDogVmVjMil7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUNhcHRpb24oKTtcclxuXHJcbiAgICAgICAgVmlldy5jdXJyZW50LmNoYW5nZWQuYWRkKHRoaXMpO1xyXG4gICAgICAgIFZpZXcuY3VycmVudC5kaXJ0eSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Qm91bmRzKCkgOiAoQWJzdHJhY3RMaW5lIHwgQ2lyY2xlQXJjKVtdIHtcclxuICAgICAgICBjb25zdCBsaW5lcyAgID0gZ2V0TGluZXNCeVBvaW50KHRoaXMpIGFzIChBYnN0cmFjdExpbmUgfCBDaXJjbGVBcmMpW107XHJcbiAgICAgICAgY29uc3QgY2lyY2xlcyA9IGdldENpcmNsZUFyY3NCeVBvaW50KHRoaXMpO1xyXG5cclxuICAgICAgICByZXR1cm4gbGluZXMuY29uY2F0KGNpcmNsZXMpLmZpbHRlcih4ID0+IHgub3JkZXIgPCB0aGlzLm9yZGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRCb3VuZChib3VuZCA6IEFic3RyYWN0TGluZSB8IENpcmNsZUFyYyl7XHJcbiAgICAgICAgdGhpcy5ib3VuZCA9IGJvdW5kO1xyXG5cclxuICAgICAgICB0aGlzLmJvdW5kLmFkanVzdFBvc2l0aW9uKHRoaXMsIHRoaXMucG9zaXRpb24pO1xyXG5cclxuICAgICAgICB0aGlzLnNldFJlbGF0aW9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUNhcHRpb24oKXtcclxuICAgICAgICBpZih0aGlzLmNhcHRpb24gIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5jYXB0aW9uLnVwZGF0ZVRleHREaXYoKTtcclxuICAgICAgICAgICAgdGhpcy5jYXB0aW9uLnNldFRleHRQb3NpdGlvbih0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFByb3BlcnRpZXMoKXtcclxuICAgICAgICByZXR1cm4gc3VwZXIuZ2V0UHJvcGVydGllcygpLmNvbmNhdChbXHJcbiAgICAgICAgICAgIFwicG9zaXRpb25cIlxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlzTmVhcihwb3NpdGlvbiA6IFZlYzIpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIFZpZXcuY3VycmVudC5pc05lYXIocG9zaXRpb24uZGlzdGFuY2UodGhpcy5wb3NpdGlvbikpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoKSA6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gdGhpcy5tb2RlQ29sb3IoKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmFkaXVzID0gbW9kZVBvaW50UmFkaXVzKHRoaXMubW9kZSk7XHJcbiAgICAgICAgaWYodGhpcy52aXNpYmxlKXtcclxuXHJcbiAgICAgICAgICAgIFZpZXcuY3VycmVudC5jYW52YXMuZHJhd0NpcmNsZVJhdyh0aGlzLnBvc2l0aW9uLCByYWRpdXMsIGNvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgIFZpZXcuY3VycmVudC5jYW52YXMuZHJhd0NpcmNsZVJhdyh0aGlzLnBvc2l0aW9uLCByYWRpdXMsIGNvbG9yLCBkZWZhdWx0TGluZVdpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYodGhpcy5pc092ZXIpe1xyXG5cclxuICAgICAgICAgICAgVmlldy5jdXJyZW50LmNhbnZhcy5kcmF3Q2lyY2xlUmF3KHRoaXMucG9zaXRpb24sIDMgKiBQb2ludC5yYWRpdXMsIFwiZ3JheVwiLCBkZWZhdWx0TGluZVdpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWRkKHBvaW50IDogUG9pbnQpIDogVmVjMiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24uYWRkKHBvaW50LnBvc2l0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBzdWIocG9pbnQgOiBQb2ludCkgOiBWZWMyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi5zdWIocG9pbnQucG9zaXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGRvdChwb2ludCA6IFBvaW50KSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24uZG90KHBvaW50LnBvc2l0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBkaXN0YW5jZShwIDogUG9pbnQgfCBWZWMyKSA6IG51bWJlciB7XHJcbiAgICAgICAgaWYocCBpbnN0YW5jZW9mIFBvaW50KXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24uZGlzdGFuY2UocC5wb3NpdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLmRpc3RhbmNlKHApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaGFwZVBvaW50ZXJkb3duKHBvc2l0aW9uIDogVmVjMil7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvblNhdmUgPSB0aGlzLnBvc2l0aW9uLmNvcHkoKTtcclxuICAgIH1cclxuXHJcbiAgICBzaGFwZVBvaW50ZXJtb3ZlKHBvc2l0aW9uIDogVmVjMiwgZGlmZiA6IFZlYzIpe1xyXG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuZ2V0Qm91bmRzKCk7XHJcblxyXG4gICAgICAgIGlmKDIgPD0gYm91bmRzLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihib3VuZHMubGVuZ3RoID09IDEpe1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYm91bmQgPSBib3VuZHNbMF07XHJcbiAgICAgICAgICAgIGlmKGJvdW5kIGluc3RhbmNlb2YgQWJzdHJhY3RMaW5lKXtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBvc2l0aW9uKGNhbGNGb290T2ZQZXJwZW5kaWN1bGFyKHBvc2l0aW9uLCBib3VuZCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYoYm91bmQgaW5zdGFuY2VvZiBDaXJjbGVBcmMpe1xyXG4gICAgICAgICAgICAgICAgYm91bmQuYWRqdXN0UG9zaXRpb24odGhpcywgcG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICBpZih0aGlzLnBvc2l0aW9uU2F2ZSAhPSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9zaXRpb24odGhpcy5wb3NpdGlvblNhdmUuYWRkKGRpZmYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2FsYygpO1xyXG4gICAgfVxyXG5cclxuICAgIHNoYXBlUG9pbnRlcnVwKHBvc2l0aW9uIDogVmVjMil7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvblNhdmUgPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZGluZygpOiBSZWFkaW5nIHtcclxuICAgICAgICBpZih0aGlzLmJvdW5kIGluc3RhbmNlb2YgQWJzdHJhY3RMaW5lKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGV4dFJlYWRpbmcoVFQoXCJEcmF3IGEgcG9pbnQgb24gdGhlIGxpbmUuXCIpKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYodGhpcy5ib3VuZCBpbnN0YW5jZW9mIENpcmNsZSl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRleHRSZWFkaW5nKFRUKFwiRHJhdyBhIHBvaW50IG9uIHRoZSBjaXJjbGUuXCIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0aGlzLmJvdW5kIGluc3RhbmNlb2YgQXJjKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGV4dFJlYWRpbmcoVFQoXCJEcmF3IGEgcG9pbnQgb24gdGhlIGFyYy5cIikpOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZXh0UmVhZGluZyhUVChcIkRyYXcgYSBwb2ludC5cIikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRSZWxhdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuc2V0UmVsYXRpb25zKCk7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuYm91bmQgaW5zdGFuY2VvZiBBYnN0cmFjdExpbmUpe1xyXG4gICAgICAgICAgICBhZGRQb2ludE9uTGluZXModGhpcywgdGhpcy5ib3VuZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYodGhpcy5ib3VuZCBpbnN0YW5jZW9mIENpcmNsZUFyYyl7XHJcbiAgICAgICAgICAgIGFkZFBvaW50T25DaXJjbGVBcmNzKHRoaXMsIHRoaXMuYm91bmQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHRoaXMuYm91bmQgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIExpbmVLaW5kIHtcclxuICAgIGxpbmUgPSAwLFxyXG4gICAgcmF5ICA9IDEsXHJcbiAgICByYXlfcmV2ZXJzZSA9IDIsXHJcbiAgICBsaW5lX3NlZ21lbnQgPSAzXHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdExpbmUgZXh0ZW5kcyBTaGFwZSB7XHJcbiAgICBsaW5lS2luZCA6IG51bWJlcjtcclxuICAgIHBvaW50QSA6IFBvaW50O1xyXG4gICAgZSEgICAgIDogVmVjMjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiB7IGxpbmVLaW5kIDogbnVtYmVyLCBwb2ludEE6IFBvaW50IH0pe1xyXG4gICAgICAgIHN1cGVyKG9iaik7XHJcbiAgICAgICAgaWYob2JqLmxpbmVLaW5kID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKFwibGluZSBraW5kIGlzIHVuZGVmaW5lZC5cIilcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5saW5lS2luZCA9IG9iai5saW5lS2luZDtcclxuICAgICAgICB0aGlzLnBvaW50QSA9IG9iai5wb2ludEE7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG1ha2VPYmooKSA6IGFueSB7XHJcbiAgICAgICAgbGV0IG9iaiA9IE9iamVjdC5hc3NpZ24oc3VwZXIubWFrZU9iaigpLCB7XHJcbiAgICAgICAgICAgIGxpbmVLaW5kIDogdGhpcy5saW5lS2luZCxcclxuICAgICAgICAgICAgcG9pbnRBICAgOiB0aGlzLnBvaW50QS50b09iaigpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9ICAgIFxyXG5cclxuICAgIGRlcGVuZGVuY2llcygpIDogTWF0aEVudGl0eVtdIHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuZGVwZW5kZW5jaWVzKCkuY29uY2F0KFsgdGhpcy5wb2ludEEgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsU2hhcGVzKHNoYXBlcyA6IE1hdGhFbnRpdHlbXSl7XHJcbiAgICAgICAgc3VwZXIuZ2V0QWxsU2hhcGVzKHNoYXBlcyk7XHJcbiAgICAgICAgc2hhcGVzLnB1c2godGhpcy5wb2ludEEpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFByb3BlcnRpZXMoKXtcclxuICAgICAgICByZXR1cm4gc3VwZXIuZ2V0UHJvcGVydGllcygpLmNvbmNhdChbXHJcbiAgICAgICAgICAgIFwibGluZUtpbmRcIlxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIG5vcm1hbCgpIDogVmVjMiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZS5yb3Q5MCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzTmVhcihwb3NpdGlvbiA6IFZlYzIpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBkaXN0YW5jZUZyb21MaW5lKHRoaXMubm9ybWFsKCksIHRoaXMucG9pbnRBLnBvc2l0aW9uLCBwb3NpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIFZpZXcuY3VycmVudC5pc05lYXIoZGlzdGFuY2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoKSA6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGwgPSBWaWV3LmN1cnJlbnQubWF4LmRpc3RhbmNlKFZpZXcuY3VycmVudC5taW4pO1xyXG4gICAgICAgIGNvbnN0IHBfbWludXMgPSB0aGlzLnBvaW50QS5wb3NpdGlvbi5hZGQodGhpcy5lLm11bCgtbCkpO1xyXG4gICAgICAgIGNvbnN0IHBfcGx1cyAgPSB0aGlzLnBvaW50QS5wb3NpdGlvbi5hZGQodGhpcy5lLm11bCggbCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHN3aXRjaCh0aGlzLmxpbmVLaW5kKXtcclxuICAgICAgICBjYXNlIExpbmVLaW5kLmxpbmVfc2VnbWVudDpcclxuICAgICAgICBjYXNlIExpbmVLaW5kLmxpbmU6XHJcbiAgICAgICAgICAgIFZpZXcuY3VycmVudC5jYW52YXMuZHJhd0xpbmUodGhpcywgcF9taW51cywgcF9wbHVzKTsgXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIExpbmVLaW5kLnJheTpcclxuICAgICAgICAgICAgVmlldy5jdXJyZW50LmNhbnZhcy5kcmF3TGluZSh0aGlzLCB0aGlzLnBvaW50QS5wb3NpdGlvbiwgcF9wbHVzKTsgXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIExpbmVLaW5kLnJheV9yZXZlcnNlOlxyXG4gICAgICAgICAgICBWaWV3LmN1cnJlbnQuY2FudmFzLmRyYXdMaW5lKHRoaXMsIHRoaXMucG9pbnRBLnBvc2l0aW9uLCBwX21pbnVzKTsgXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGp1c3RQb3NpdGlvbihwb2ludCA6IFBvaW50LCBwb3NpdGlvbiA6IFZlYzIpe1xyXG4gICAgICAgIGNvbnN0IGZvb3QgPSBjYWxjRm9vdE9mUGVycGVuZGljdWxhcihwb2ludC5wb3NpdGlvbiwgdGhpcyk7XHJcbiAgICAgICAgcG9pbnQuc2V0UG9zaXRpb24oZm9vdCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UmVsYXRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnNldFJlbGF0aW9ucygpO1xyXG4gICAgICAgIHRoaXMucG9pbnRBLnNldFJlbGF0aW9ucygpO1xyXG4gICAgICAgIGFkZFBvaW50T25MaW5lcyh0aGlzLnBvaW50QSwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5jbHVkZXNQb2ludChwb2ludCA6IFBvaW50KSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBsaW5lX3NldCA9IHBvaW50T25MaW5lcy5nZXQocG9pbnQpO1xyXG5cclxuICAgICAgICBpZihsaW5lX3NldCAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICByZXR1cm4gbGluZV9zZXQuaGFzKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTGluZUJ5UG9pbnRzIGV4dGVuZHMgQWJzdHJhY3RMaW5lIHtcclxuICAgIHBvaW50QiAgIDogUG9pbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqIDogeyBsaW5lS2luZCA6IG51bWJlciwgcG9pbnRBOiBQb2ludCwgcG9pbnRCOiBQb2ludCB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG4gICAgICAgIHRoaXMucG9pbnRCID0gb2JqLnBvaW50QjtcclxuXHJcbiAgICAgICAgdGhpcy5jYWxjKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZU9iaigpIDogYW55IHtcclxuICAgICAgICBsZXQgb2JqID0gT2JqZWN0LmFzc2lnbihzdXBlci5tYWtlT2JqKCksIHtcclxuICAgICAgICAgICAgcG9pbnRCIDogdGhpcy5wb2ludEIudG9PYmooKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuICAgIGRlcGVuZGVuY2llcygpIDogTWF0aEVudGl0eVtdIHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuZGVwZW5kZW5jaWVzKCkuY29uY2F0KFsgdGhpcy5wb2ludEIgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FsYygpe1xyXG4gICAgICAgIHRoaXMuZSA9IHRoaXMucG9pbnRCLnN1Yih0aGlzLnBvaW50QSkudW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFsbFNoYXBlcyhzaGFwZXMgOiBNYXRoRW50aXR5W10pe1xyXG4gICAgICAgIHN1cGVyLmdldEFsbFNoYXBlcyhzaGFwZXMpO1xyXG4gICAgICAgIHNoYXBlcy5wdXNoKHRoaXMucG9pbnRCKTtcclxuICAgIH1cclxuXHJcbiAgICBsZW5ndGgoKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucG9pbnRBLmRpc3RhbmNlKHRoaXMucG9pbnRCKTtcclxuICAgIH1cclxuXHJcbiAgICBpc05lYXIocG9zaXRpb24gOiBWZWMyKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmKCFzdXBlci5pc05lYXIocG9zaXRpb24pKXtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5saW5lS2luZCA9PSBMaW5lS2luZC5saW5lKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbiA6IG51bWJlcjtcclxuXHJcbiAgICAgICAgaWYodGhpcy5saW5lS2luZCA9PSBMaW5lS2luZC5yYXkgfHwgdGhpcy5saW5lS2luZCA9PSBMaW5lS2luZC5saW5lX3NlZ21lbnQpe1xyXG4gICAgICAgICAgICBuID0gdGhpcy5lLmRvdChwb3NpdGlvbi5zdWIodGhpcy5wb2ludEEucG9zaXRpb24pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0aGlzLmxpbmVLaW5kID09IExpbmVLaW5kLnJheV9yZXZlcnNlKXtcclxuICAgICAgICAgICAgbiA9IC0gdGhpcy5lLmRvdChwb3NpdGlvbi5zdWIodGhpcy5wb2ludEIucG9zaXRpb24pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN3aXRjaCh0aGlzLmxpbmVLaW5kKXtcclxuICAgICAgICBjYXNlIExpbmVLaW5kLnJheTpcclxuICAgICAgICBjYXNlIExpbmVLaW5kLnJheV9yZXZlcnNlOlxyXG4gICAgICAgICAgICByZXR1cm4gMCA8PSBuO1xyXG5cclxuICAgICAgICBjYXNlIExpbmVLaW5kLmxpbmVfc2VnbWVudDp7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBBQiA9IHRoaXMucG9pbnRBLmRpc3RhbmNlKHRoaXMucG9pbnRCKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMCA8PSBuICYmIG4gPD0gQUI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdygpIDogdm9pZCB7XHJcbiAgICAgICAgVmlldy5jdXJyZW50LmNhbnZhcy5kcmF3TGluZVdpdGgyUG9pbnRzKHRoaXMsIHRoaXMucG9pbnRCKTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkaW5nKCk6IFJlYWRpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRleHRSZWFkaW5nKFRUKCdEcmF3IGEgbGluZS4nKSk7XHJcbi8qXHJcbiAgICAgICAgc3dpdGNoKHRoaXMubGluZUtpbmQpe1xyXG4gICAgICAgIGNhc2UgTGluZUtpbmQubGluZTpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWFkaW5nKHRoaXMsIFRUKCdEcmF3IGEgbGluZSB0aHJvdWdoIHR3byBwb2ludHMuJyksIFtdKTtcclxuICAgICAgICBjYXNlIExpbmVLaW5kLnJheTpcclxuICAgICAgICBjYXNlIExpbmVLaW5kLnJheV9yZXZlcnNlOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlYWRpbmcodGhpcywgVFQoJ0RyYXcgYSBoYWxmLWxpbmUgdGhyb3VnaCB0d28gcG9pbnRzLicpLCBbXSk7XHJcbiAgICAgICAgY2FzZSBMaW5lS2luZC5saW5lX3NlZ21lbnQ6XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVhZGluZyh0aGlzLCBUVCgnRHJhdyBhIGxpbmUgc2VnbWVudCB0aHJvdWdoIHR3byBwb2ludHMuJyksIFtdKTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgIH1cclxuKi9cclxuICAgIH1cclxuXHJcbiAgICBzZXRSZWxhdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuc2V0UmVsYXRpb25zKCk7XHJcbiAgICAgICAgdGhpcy5wb2ludEIuc2V0UmVsYXRpb25zKCk7XHJcbiAgICAgICAgYWRkUG9pbnRPbkxpbmVzKHRoaXMucG9pbnRCLCB0aGlzKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VMaW5lU2VnbWVudChwb2ludEE6IFBvaW50LCBwb2ludEI6IFBvaW50KXtcclxuICAgIHJldHVybiBuZXcgTGluZUJ5UG9pbnRzKHsgbGluZUtpbmQgOiBMaW5lS2luZC5saW5lX3NlZ21lbnQsIHBvaW50QSwgcG9pbnRCIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZVJheShwb2ludEE6IFBvaW50LCBwb2ludEI6IFBvaW50KXtcclxuICAgIHJldHVybiBuZXcgTGluZUJ5UG9pbnRzKHsgbGluZUtpbmQgOiBMaW5lS2luZC5yYXksIHBvaW50QSwgcG9pbnRCIH0pO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFBhcmFsbGVsTGluZSBleHRlbmRzIEFic3RyYWN0TGluZSB7ICAgXHJcbiAgICBsaW5lIDogQWJzdHJhY3RMaW5lO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgbGluZUtpbmQgOiBudW1iZXIsIHBvaW50QTogUG9pbnQsIGxpbmU6IEFic3RyYWN0TGluZSB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG5cclxuICAgICAgICB0aGlzLmxpbmUgPSBvYmoubGluZTtcclxuXHJcbiAgICAgICAgdGhpcy5jYWxjKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZU9iaigpIDogYW55IHtcclxuICAgICAgICBsZXQgb2JqID0gT2JqZWN0LmFzc2lnbihzdXBlci5tYWtlT2JqKCksIHtcclxuICAgICAgICAgICAgbGluZSA6IHRoaXMubGluZS50b09iaigpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgZGVwZW5kZW5jaWVzKCkgOiBNYXRoRW50aXR5W10ge1xyXG4gICAgICAgIHJldHVybiBzdXBlci5kZXBlbmRlbmNpZXMoKS5jb25jYXQoWyB0aGlzLmxpbmUgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsU2hhcGVzKHNoYXBlcyA6IE1hdGhFbnRpdHlbXSl7XHJcbiAgICAgICAgc3VwZXIuZ2V0QWxsU2hhcGVzKHNoYXBlcyk7XHJcbiAgICAgICAgc2hhcGVzLnB1c2godGhpcy5saW5lKTtcclxuICAgIH1cclxuXHJcbiAgICBjYWxjKCl7XHJcbiAgICAgICAgdGhpcy5lID0gdGhpcy5saW5lLmUuY29weSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRpbmcoKTogUmVhZGluZyB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWFkaW5nKHRoaXMsIFRUKCdEcmF3IGEgbGluZSB0aHJvdWdoIGEgcG9pbnQgdGhhdCBpcyBwYXJhbGxlbCB0byBhbm90aGVyIGxpbmUuJyksIFtdKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRSZWxhdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuc2V0UmVsYXRpb25zKCk7XHJcbiAgICAgICAgYWRkUGFyYWxsZWxMaW5lcyh0aGlzLCB0aGlzLmxpbmUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ2lyY2xlQXJjRWxsaXBzZSBleHRlbmRzIFNoYXBlIHtcclxuICAgIGNlbnRlciA6IFBvaW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgY2VudGVyIDogUG9pbnQgfSl7XHJcbiAgICAgICAgc3VwZXIob2JqKTtcclxuICAgICAgICB0aGlzLmNlbnRlciA9IG9iai5jZW50ZXI7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZU9iaigpIDogYW55IHtcclxuICAgICAgICBsZXQgb2JqID0gT2JqZWN0LmFzc2lnbihzdXBlci5tYWtlT2JqKCksIHtcclxuICAgICAgICAgICAgY2VudGVyIDogdGhpcy5jZW50ZXIudG9PYmooKSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxTaGFwZXMoc2hhcGVzIDogTWF0aEVudGl0eVtdKXtcclxuICAgICAgICBzdXBlci5nZXRBbGxTaGFwZXMoc2hhcGVzKTtcclxuICAgICAgICBzaGFwZXMucHVzaCh0aGlzLmNlbnRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZGVwZW5kZW5jaWVzKCkgOiBNYXRoRW50aXR5W10ge1xyXG4gICAgICAgIHJldHVybiBbIHRoaXMuY2VudGVyIF07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDaXJjbGVBcmMgZXh0ZW5kcyBDaXJjbGVBcmNFbGxpcHNlIHtcclxuICAgIGFic3RyYWN0IHJhZGl1cygpIDogbnVtYmVyO1xyXG5cclxuICAgIGFkanVzdFBvc2l0aW9uKHBvaW50IDogUG9pbnQsIHBvc2l0aW9uIDogVmVjMil7XHJcbiAgICAgICAgY29uc3QgdiA9IHBvc2l0aW9uLnN1Yih0aGlzLmNlbnRlci5wb3NpdGlvbik7XHJcbiAgICAgICAgY29uc3QgdGhldGEgPSBNYXRoLmF0YW4yKHYueSwgdi54KTtcclxuICAgICAgICBjb25zdCB4ID0gdGhpcy5yYWRpdXMoKSAqIE1hdGguY29zKHRoZXRhKTtcclxuICAgICAgICBjb25zdCB5ID0gdGhpcy5yYWRpdXMoKSAqIE1hdGguc2luKHRoZXRhKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBuZXdfcG9zID0gdGhpcy5jZW50ZXIucG9zaXRpb24uYWRkKCBuZXcgVmVjMih4LCB5KSApO1xyXG4gICAgICAgIHBvaW50LnNldFBvc2l0aW9uKG5ld19wb3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGluY2x1ZGVzUG9pbnQocG9pbnQgOiBQb2ludCkgOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgY2lyY2xlX2FyY19zZXQgPSBwb2ludE9uQ2lyY2xlQXJjcy5nZXQocG9pbnQpO1xyXG5cclxuICAgICAgICBpZihjaXJjbGVfYXJjX3NldCAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICByZXR1cm4gY2lyY2xlX2FyY19zZXQuaGFzKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFJlbGF0aW9ucygpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5zZXRSZWxhdGlvbnMoKTtcclxuICAgICAgICBhZGRDZW50ZXJPZkNpcmNsZUFyY3ModGhpcy5jZW50ZXIsIHRoaXMpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ2lyY2xlIGV4dGVuZHMgQ2lyY2xlQXJjIHtcclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgY2VudGVyIDogUG9pbnQgfSl7XHJcbiAgICAgICAgc3VwZXIob2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBpc05lYXIocG9zaXRpb24gOiBWZWMyKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IHIgPSBwb3NpdGlvbi5kaXN0YW5jZSh0aGlzLmNlbnRlci5wb3NpdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIFZpZXcuY3VycmVudC5pc05lYXIoIE1hdGguYWJzKHIgLSB0aGlzLnJhZGl1cygpKSApO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoKSA6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHN0cm9rZV9jb2xvciA9IHRoaXMubW9kZUNvbG9yKCk7XHJcbiAgICAgICAgY29uc3QgbGluZV93aWR0aCA9IHRoaXMubW9kZUxpbmVXaWR0aCgpO1xyXG4gICAgICAgIFZpZXcuY3VycmVudC5jYW52YXMuZHJhd0NpcmNsZSh0aGlzLCB0aGlzLmNlbnRlci5wb3NpdGlvbiwgdGhpcy5yYWRpdXMoKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDaXJjbGVCeVBvaW50IGV4dGVuZHMgQ2lyY2xlIHtcclxuICAgIHBvaW50IDogUG9pbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqIDogeyBjZW50ZXIgOiBQb2ludCwgcG9pbnQgOiBQb2ludCB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG4gICAgICAgIHRoaXMucG9pbnQgPSBvYmoucG9pbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZU9iaigpIDogYW55IHtcclxuICAgICAgICBsZXQgb2JqID0gT2JqZWN0LmFzc2lnbihzdXBlci5tYWtlT2JqKCksIHtcclxuICAgICAgICAgICAgcG9pbnQgOiB0aGlzLnBvaW50LnRvT2JqKCksXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsU2hhcGVzKHNoYXBlcyA6IE1hdGhFbnRpdHlbXSl7XHJcbiAgICAgICAgc3VwZXIuZ2V0QWxsU2hhcGVzKHNoYXBlcyk7XHJcbiAgICAgICAgc2hhcGVzLnB1c2godGhpcy5wb2ludCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVwZW5kZW5jaWVzKCkgOiBNYXRoRW50aXR5W10ge1xyXG4gICAgICAgIHJldHVybiBzdXBlci5kZXBlbmRlbmNpZXMoKS5jb25jYXQoWyB0aGlzLnBvaW50IF0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGMoKXsgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHJhZGl1cygpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jZW50ZXIucG9zaXRpb24uZGlzdGFuY2UodGhpcy5wb2ludC5wb3NpdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZGluZygpOiBSZWFkaW5nIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJlYWRpbmcodGhpcywgVFQoJ0RyYXcgYSBjaXJjbGUuJyksIFtdKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRSZWxhdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuc2V0UmVsYXRpb25zKCk7XHJcblxyXG4gICAgICAgIGFkZFBvaW50T25DaXJjbGVBcmNzKHRoaXMucG9pbnQsIHRoaXMpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ2lyY2xlQnlSYWRpdXMgZXh0ZW5kcyBDaXJjbGUge1xyXG4gICAgbGVuZ3RoU3ltYm9sIDogTGVuZ3RoU3ltYm9sO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgY2VudGVyIDogUG9pbnQsIGxlbmd0aFN5bWJvbCA6IExlbmd0aFN5bWJvbCB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG4gICAgICAgIHRoaXMubGVuZ3RoU3ltYm9sID0gb2JqLmxlbmd0aFN5bWJvbDtcclxuICAgIH1cclxuXHJcbiAgICBtYWtlT2JqKCkgOiBhbnkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHN1cGVyLm1ha2VPYmooKSwge1xyXG4gICAgICAgICAgICBsZW5ndGhTeW1ib2wgOiB0aGlzLmxlbmd0aFN5bWJvbC50b09iaigpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFsbFNoYXBlcyhzaGFwZXMgOiBNYXRoRW50aXR5W10pe1xyXG4gICAgICAgIHN1cGVyLmdldEFsbFNoYXBlcyhzaGFwZXMpO1xyXG4gICAgICAgIHRoaXMubGVuZ3RoU3ltYm9sLmdldEFsbFNoYXBlcyhzaGFwZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlcGVuZGVuY2llcygpIDogTWF0aEVudGl0eVtdIHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuZGVwZW5kZW5jaWVzKCkuY29uY2F0KFsgdGhpcy5sZW5ndGhTeW1ib2wgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmFkaXVzKCkgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aFN5bWJvbC5sZW5ndGgoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRSZWxhdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuc2V0UmVsYXRpb25zKCk7XHJcblxyXG4gICAgICAgIGlmKHRoaXMubGVuZ3RoU3ltYm9sLmNpcmNsZSAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBhZGRFcXVhbENpcmNsZUFyY3ModGhpcywgdGhpcy5sZW5ndGhTeW1ib2wuY2lyY2xlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFbGxpcHNlIGV4dGVuZHMgQ2lyY2xlQXJjRWxsaXBzZSB7XHJcbiAgICB4UG9pbnQgIDogUG9pbnQ7XHJcbiAgICByYWRpdXNZIDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgY2VudGVyIDogUG9pbnQsIHhQb2ludCA6IFBvaW50LCByYWRpdXNZIDogbnVtYmVyIH0pe1xyXG4gICAgICAgIHN1cGVyKG9iaik7XHJcbiAgICAgICAgdGhpcy54UG9pbnQgID0gb2JqLnhQb2ludDtcclxuICAgICAgICB0aGlzLnJhZGl1c1kgPSBvYmoucmFkaXVzWTtcclxuICAgIH1cclxuXHJcbiAgICBtYWtlT2JqKCkgOiBhbnkge1xyXG4gICAgICAgIGxldCBvYmogPSBPYmplY3QuYXNzaWduKHN1cGVyLm1ha2VPYmooKSwge1xyXG4gICAgICAgICAgICB4UG9pbnQgOiB0aGlzLnhQb2ludC50b09iaigpLFxyXG4gICAgICAgICAgICByYWRpdXNZIDogdGhpcy5yYWRpdXNZXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UmFkaXVzWShyYWRpdXNZIDogbnVtYmVyKXtcclxuICAgICAgICB0aGlzLnJhZGl1c1kgPSByYWRpdXNZO1xyXG4gICAgICAgIFZpZXcuY3VycmVudC5kaXJ0eSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsU2hhcGVzKHNoYXBlcyA6IE1hdGhFbnRpdHlbXSl7XHJcbiAgICAgICAgc3VwZXIuZ2V0QWxsU2hhcGVzKHNoYXBlcyk7XHJcbiAgICAgICAgc2hhcGVzLnB1c2godGhpcy54UG9pbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlcGVuZGVuY2llcygpIDogTWF0aEVudGl0eVtdIHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuZGVwZW5kZW5jaWVzKCkuY29uY2F0KFsgdGhpcy5jZW50ZXIsIHRoaXMueFBvaW50IF0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoKSA6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHJhZGl1c194ID0gdGhpcy54UG9pbnQucG9zaXRpb24uZGlzdGFuY2UodGhpcy5jZW50ZXIucG9zaXRpb24pO1xyXG5cclxuICAgICAgICBjb25zdCBjZW50ZXJfdG9feCA9IHRoaXMueFBvaW50LnN1Yih0aGlzLmNlbnRlcilcclxuICAgICAgICBjb25zdCByb3RhdGlvbiA9IE1hdGguYXRhbjIoLSBjZW50ZXJfdG9feC55LCBjZW50ZXJfdG9feC54KTtcclxuXHJcbiAgICAgICAgY29uc3QgY29sb3IgPSB0aGlzLm1vZGVDb2xvcigpO1xyXG4gICAgICAgIGNvbnN0IGxpbmVfd2lkdGggPSAodGhpcy5pc092ZXIgfHwgdGhpcy5tb2RlICE9IE1vZGUubm9uZSA/IDMgOiAxKTtcclxuXHJcbiAgICAgICAgVmlldy5jdXJyZW50LmNhbnZhcy5kcmF3RWxsaXBzZSh0aGlzLmNlbnRlci5wb3NpdGlvbiwgcmFkaXVzX3gsIHRoaXMucmFkaXVzWSwgcm90YXRpb24sIGNvbG9yLCBsaW5lX3dpZHRoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFyYyBleHRlbmRzIENpcmNsZUFyYyB7XHJcbiAgICBzdGF0aWMgZ2V0QW5nbGVzKGNlbnRlciA6IFBvaW50IHwgVmVjMiwgcG9pbnRBIDogUG9pbnQgfCBWZWMyLCBwb2ludEIgOiBQb2ludCB8IFZlYzIpIDogW251bWJlciwgbnVtYmVyXSB7XHJcbiAgICAgICAgY29uc3QgY2VudGVyX3BvcyA9IChjZW50ZXIgaW5zdGFuY2VvZiBQb2ludCA/IGNlbnRlci5wb3NpdGlvbiA6IGNlbnRlcik7XHJcbiAgICAgICAgY29uc3QgcG9pbnRBX3BvcyA9IChwb2ludEEgaW5zdGFuY2VvZiBQb2ludCA/IHBvaW50QS5wb3NpdGlvbiA6IHBvaW50QSk7XHJcbiAgICAgICAgY29uc3QgcG9pbnRCX3BvcyA9IChwb2ludEIgaW5zdGFuY2VvZiBQb2ludCA/IHBvaW50Qi5wb3NpdGlvbiA6IHBvaW50Qik7XHJcblxyXG4gICAgICAgIHJldHVybiBbcG9pbnRBX3BvcywgcG9pbnRCX3Bvc10ubWFwKHAgPT4gcC5zdWIoY2VudGVyX3BvcykpLm1hcCh2ID0+IE1hdGguYXRhbjIodi55LCB2LngpKSBhcyBbbnVtYmVyLCBudW1iZXJdO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQXJjQnlQb2ludCBleHRlbmRzIEFyYyB7XHJcbiAgICBwb2ludEEgOiBQb2ludDtcclxuICAgIHBvaW50QiA6IFBvaW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgY2VudGVyIDogUG9pbnQsIHBvaW50QSA6IFBvaW50LCBwb2ludEIgOiBQb2ludCB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG4gICAgICAgIHRoaXMucG9pbnRBID0gb2JqLnBvaW50QTtcclxuICAgICAgICB0aGlzLnBvaW50QiA9IG9iai5wb2ludEI7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZU9iaigpIDogYW55IHtcclxuICAgICAgICBsZXQgb2JqID0gT2JqZWN0LmFzc2lnbihzdXBlci5tYWtlT2JqKCksIHtcclxuICAgICAgICAgICAgcG9pbnRBIDogdGhpcy5wb2ludEEudG9PYmooKSxcclxuICAgICAgICAgICAgcG9pbnRCIDogdGhpcy5wb2ludEIudG9PYmooKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFsbFNoYXBlcyhzaGFwZXMgOiBNYXRoRW50aXR5W10pe1xyXG4gICAgICAgIHN1cGVyLmdldEFsbFNoYXBlcyhzaGFwZXMpO1xyXG4gICAgICAgIHNoYXBlcy5wdXNoKHRoaXMucG9pbnRBLCB0aGlzLnBvaW50Qik7XHJcbiAgICB9XHJcblxyXG4gICAgZGVwZW5kZW5jaWVzKCkgOiBNYXRoRW50aXR5W10ge1xyXG4gICAgICAgIHJldHVybiBzdXBlci5kZXBlbmRlbmNpZXMoKS5jb25jYXQoWyB0aGlzLnBvaW50QSwgdGhpcy5wb2ludEIgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FsYygpeyAgICAgICAgXHJcbiAgICAgICAgdGhpcy5hZGp1c3RQb3NpdGlvbih0aGlzLnBvaW50QiwgdGhpcy5wb2ludEIucG9zaXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGlzTmVhcihwb3NpdGlvbiA6IFZlYzIpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgciA9IHBvc2l0aW9uLmRpc3RhbmNlKHRoaXMuY2VudGVyLnBvc2l0aW9uKTtcclxuICAgICAgICBpZihWaWV3LmN1cnJlbnQuaXNOZWFyKCBNYXRoLmFicyhyIC0gdGhpcy5yYWRpdXMoKSkgKSl7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB2ID0gcG9zaXRpb24uc3ViKHRoaXMuY2VudGVyLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgbGV0IHRoZXRhID0gTWF0aC5hdGFuMih2LnksIHYueCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBbc3RhcnRBbmdsZSwgZW5kQW5nbGVdID0gQXJjLmdldEFuZ2xlcyh0aGlzLmNlbnRlciwgdGhpcy5wb2ludEEsIHRoaXMucG9pbnRCKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBpc0JldHdlZW5BbmdsZXMoc3RhcnRBbmdsZSwgdGhldGEsIGVuZEFuZ2xlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IFtzdGFydEFuZ2xlLCBlbmRBbmdsZV0gPSBBcmMuZ2V0QW5nbGVzKHRoaXMuY2VudGVyLCB0aGlzLnBvaW50QSwgdGhpcy5wb2ludEIpO1xyXG4gICAgICAgIFZpZXcuY3VycmVudC5jYW52YXMuZHJhd0FyYyh0aGlzLCB0aGlzLmNlbnRlci5wb3NpdGlvbiwgdGhpcy5yYWRpdXMoKSwgc3RhcnRBbmdsZSwgZW5kQW5nbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJhZGl1cygpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jZW50ZXIucG9zaXRpb24uZGlzdGFuY2UodGhpcy5wb2ludEEucG9zaXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRpbmcoKTogUmVhZGluZyB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWFkaW5nKHRoaXMsIFRUKCdEcmF3IGFuIGFyYy4nKSwgWyBdKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRSZWxhdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuc2V0UmVsYXRpb25zKCk7XHJcblxyXG4gICAgICAgIGFkZFBvaW50T25DaXJjbGVBcmNzKHRoaXMucG9pbnRBLCB0aGlzKTtcclxuICAgICAgICBhZGRQb2ludE9uQ2lyY2xlQXJjcyh0aGlzLnBvaW50QiwgdGhpcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQXJjQnlSYWRpdXMgZXh0ZW5kcyBBcmMge1xyXG4gICAgc3RhcnRBbmdsZSA6IG51bWJlcjtcclxuICAgIGVuZEFuZ2xlIDogbnVtYmVyO1xyXG4gICAgcG9pbnRBIDogUG9pbnQ7XHJcbiAgICBwb2ludEIgOiBQb2ludDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiB7IGNlbnRlciA6IFBvaW50LCBzdGFydEFuZ2xlIDogbnVtYmVyLCBlbmRBbmdsZSA6IG51bWJlciAgfSl7XHJcbiAgICAgICAgc3VwZXIob2JqKTtcclxuICAgICAgICB0aGlzLnN0YXJ0QW5nbGUgICA9IG9iai5zdGFydEFuZ2xlO1xyXG4gICAgICAgIHRoaXMuZW5kQW5nbGUgICAgID0gb2JqLmVuZEFuZ2xlO1xyXG5cclxuICAgICAgICB0aGlzLnBvaW50QSA9IFBvaW50Lnplcm8oKTtcclxuICAgICAgICB0aGlzLnBvaW50QiA9IFBvaW50Lnplcm8oKTtcclxuXHJcbiAgICAgICAgdGhpcy5wb2ludEEudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucG9pbnRCLnZpc2libGUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBtYWtlT2JqKCkgOiBhbnkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHN1cGVyLm1ha2VPYmooKSwge1xyXG4gICAgICAgICAgICBzdGFydEFuZ2xlICAgOiB0aGlzLnN0YXJ0QW5nbGUsXHJcbiAgICAgICAgICAgIGVuZEFuZ2xlICAgICA6IHRoaXMuZW5kQW5nbGVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxTaGFwZXMoc2hhcGVzIDogTWF0aEVudGl0eVtdKXtcclxuICAgICAgICBzdXBlci5nZXRBbGxTaGFwZXMoc2hhcGVzKTtcclxuICAgICAgICBzaGFwZXMucHVzaCh0aGlzLnBvaW50QSwgdGhpcy5wb2ludEIpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzZXRPcmRlcigpe1xyXG4gICAgICAgIGlmKE1hdGhFbnRpdHkub3JkZXJTZXQuaGFzKHRoaXMpKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5vcmRlciA9IE1hdGhFbnRpdHkub3JkZXJTZXQuc2l6ZTtcclxuICAgICAgICBNYXRoRW50aXR5Lm9yZGVyU2V0LmFkZCh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5wb2ludEEuc2V0T3JkZXIoKTtcclxuICAgICAgICB0aGlzLnBvaW50Qi5zZXRPcmRlcigpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwb3NpdGlvbkZyb21BbmdsZSh0aGV0YSA6IG51bWJlcikgOiBWZWMyIHtcclxuICAgICAgICBjb25zdCBsZW5ndGggPSB0aGlzLnJhZGl1cygpO1xyXG5cclxuICAgICAgICBjb25zdCB4ID0gdGhpcy5jZW50ZXIucG9zaXRpb24ueCArIGxlbmd0aCAqIE1hdGguY29zKHRoZXRhKTtcclxuICAgICAgICBjb25zdCB5ID0gdGhpcy5jZW50ZXIucG9zaXRpb24ueSArIGxlbmd0aCAqIE1hdGguc2luKHRoZXRhKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIoeCwgeSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRqdXN0UG9zaXRpb24ocG9pbnQgOiBQb2ludCwgcG9zaXRpb24gOiBWZWMyKXtcclxuICAgICAgICBjb25zdCB2ID0gcG9zaXRpb24uc3ViKHRoaXMuY2VudGVyLnBvc2l0aW9uKTtcclxuICAgICAgICBjb25zdCB0aGV0YSA9IE1hdGguYXRhbjIodi55LCB2LngpO1xyXG5cclxuICAgICAgICBpZihwb2ludCA9PSB0aGlzLnBvaW50QSl7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRBbmdsZSA9IHRoZXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0aGlzLmVuZEFuZ2xlICAgPSB0aGV0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgbmV3X3BvcyA9IHRoaXMucG9zaXRpb25Gcm9tQW5nbGUodGhldGEpO1xyXG4gICAgICAgIHBvaW50LnNldFBvc2l0aW9uKG5ld19wb3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGMoKXsgICAgICAgIFxyXG4gICAgICAgIHRoaXMucG9pbnRBLnNldFBvc2l0aW9uKCB0aGlzLnBvc2l0aW9uRnJvbUFuZ2xlKHRoaXMuc3RhcnRBbmdsZSkgKVxyXG4gICAgICAgIHRoaXMucG9pbnRCLnNldFBvc2l0aW9uKCB0aGlzLnBvc2l0aW9uRnJvbUFuZ2xlKHRoaXMuZW5kQW5nbGUpIClcclxuICAgIH1cclxuXHJcbiAgICBpc05lYXIocG9zaXRpb24gOiBWZWMyKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IHIgPSBwb3NpdGlvbi5kaXN0YW5jZSh0aGlzLmNlbnRlci5wb3NpdGlvbik7XHJcbiAgICAgICAgaWYoVmlldy5jdXJyZW50LmlzTmVhciggTWF0aC5hYnMociAtIHRoaXMucmFkaXVzKCkpICkpe1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdiA9IHBvc2l0aW9uLnN1Yih0aGlzLmNlbnRlci5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgIGNvbnN0IHRoID0gTWF0aC5hdGFuMih2LnksIHYueCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydEFuZ2xlIDw9IHRoICYmIHRoIDw9IHRoaXMuZW5kQW5nbGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgYW5nbGVzKCkgOiBbbnVtYmVyLCBudW1iZXJdIHtcclxuICAgICAgICBjb25zdCB2MSA9IHRoaXMucG9pbnRBLnN1Yih0aGlzLmNlbnRlcik7XHJcbiAgICAgICAgY29uc3QgdGgxID0gTWF0aC5hdGFuMih2MS55LCB2MS54KTtcclxuXHJcbiAgICAgICAgY29uc3QgdjIgPSB0aGlzLnBvaW50Qi5zdWIodGhpcy5jZW50ZXIpO1xyXG4gICAgICAgIGNvbnN0IHRoMiA9IE1hdGguYXRhbjIodjIueSwgdjIueCk7XHJcblxyXG4gICAgICAgIHJldHVybiBbdGgxLCB0aDJdO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoKTogdm9pZCB7XHJcbiAgICAgICAgVmlldy5jdXJyZW50LmNhbnZhcy5kcmF3QXJjKHRoaXMsIHRoaXMuY2VudGVyLnBvc2l0aW9uLCB0aGlzLnJhZGl1cygpLCB0aGlzLnN0YXJ0QW5nbGUsIHRoaXMuZW5kQW5nbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRpbmcoKTogUmVhZGluZyB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWFkaW5nKHRoaXMsIFRUKFwiRHJhdyBhbiBhcmMgd2l0aCB0aGUgc2FtZSByYWRpdXMuXCIpLCBbIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFJlbGF0aW9ucygpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5zZXRSZWxhdGlvbnMoKTtcclxuXHJcbiAgICAgICAgYWRkUG9pbnRPbkNpcmNsZUFyY3ModGhpcy5wb2ludEEsIHRoaXMpO1xyXG4gICAgICAgIGFkZFBvaW50T25DaXJjbGVBcmNzKHRoaXMucG9pbnRCLCB0aGlzKTsgICAgICAgIFxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQXJjQnlMZW5ndGhTeW1ib2wgZXh0ZW5kcyBBcmNCeVJhZGl1cyB7XHJcbiAgICBsZW5ndGhTeW1ib2wgOiBMZW5ndGhTeW1ib2w7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqIDogeyBjZW50ZXIgOiBQb2ludCwgbGVuZ3RoU3ltYm9sIDogTGVuZ3RoU3ltYm9sLCBzdGFydEFuZ2xlIDogbnVtYmVyLCBlbmRBbmdsZSA6IG51bWJlciAgfSl7XHJcbiAgICAgICAgc3VwZXIob2JqKTtcclxuICAgICAgICB0aGlzLmxlbmd0aFN5bWJvbCA9IG9iai5sZW5ndGhTeW1ib2w7XHJcblxyXG4gICAgICAgIHRoaXMuY2FsYygpO1xyXG4gICAgfVxyXG5cclxuICAgIG1ha2VPYmooKSA6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oc3VwZXIubWFrZU9iaigpLCB7XHJcbiAgICAgICAgICAgIGxlbmd0aFN5bWJvbCA6IHRoaXMubGVuZ3RoU3ltYm9sLnRvT2JqKCksXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsU2hhcGVzKHNoYXBlcyA6IE1hdGhFbnRpdHlbXSl7XHJcbiAgICAgICAgc3VwZXIuZ2V0QWxsU2hhcGVzKHNoYXBlcyk7XHJcbiAgICAgICAgdGhpcy5sZW5ndGhTeW1ib2wuZ2V0QWxsU2hhcGVzKHNoYXBlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVwZW5kZW5jaWVzKCkgOiBNYXRoRW50aXR5W10ge1xyXG4gICAgICAgIHJldHVybiBzdXBlci5kZXBlbmRlbmNpZXMoKS5jb25jYXQoWyB0aGlzLmxlbmd0aFN5bWJvbCBdKTtcclxuICAgIH1cclxuXHJcbiAgICByYWRpdXMoKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoU3ltYm9sLmxlbmd0aCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFJlbGF0aW9ucygpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5zZXRSZWxhdGlvbnMoKTtcclxuXHJcbiAgICAgICAgaWYodGhpcy5sZW5ndGhTeW1ib2wuY2lyY2xlICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGFkZEVxdWFsQ2lyY2xlQXJjcyh0aGlzLCB0aGlzLmxlbmd0aFN5bWJvbC5jaXJjbGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFyY0J5Q2lyY2xlIGV4dGVuZHMgQXJjQnlSYWRpdXMge1xyXG4gICAgY2lyY2xlIDogQ2lyY2xlQXJjO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgY2VudGVyIDogUG9pbnQsIGNpcmNsZSA6IENpcmNsZUFyYywgc3RhcnRBbmdsZSA6IG51bWJlciwgZW5kQW5nbGUgOiBudW1iZXIgIH0pe1xyXG4gICAgICAgIHN1cGVyKG9iaik7XHJcbiAgICAgICAgdGhpcy5jaXJjbGUgPSBvYmouY2lyY2xlO1xyXG5cclxuICAgICAgICB0aGlzLmNhbGMoKTtcclxuICAgIH1cclxuXHJcbiAgICBtYWtlT2JqKCkgOiBhbnkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHN1cGVyLm1ha2VPYmooKSwge1xyXG4gICAgICAgICAgICBjaXJjbGUgOiB0aGlzLmNpcmNsZS50b09iaigpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFsbFNoYXBlcyhzaGFwZXMgOiBNYXRoRW50aXR5W10pe1xyXG4gICAgICAgIHN1cGVyLmdldEFsbFNoYXBlcyhzaGFwZXMpO1xyXG4gICAgICAgIHRoaXMuY2lyY2xlLmdldEFsbFNoYXBlcyhzaGFwZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlcGVuZGVuY2llcygpIDogTWF0aEVudGl0eVtdIHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuZGVwZW5kZW5jaWVzKCkuY29uY2F0KFsgdGhpcy5jaXJjbGUgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmFkaXVzKCkgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNpcmNsZS5yYWRpdXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRSZWxhdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuc2V0UmVsYXRpb25zKCk7XHJcbiAgICAgICAgYWRkRXF1YWxDaXJjbGVBcmNzKHRoaXMsIHRoaXMuY2lyY2xlKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBQb2x5Z29uIGV4dGVuZHMgU2hhcGUge1xyXG4gICAgc3RhdGljIGNvbG9ySW5kZXggOiBudW1iZXIgPSAwO1xyXG4gICAgcG9pbnRzIDogUG9pbnRbXTtcclxuICAgIGxpbmVzICA6IEFic3RyYWN0TGluZVtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgcG9pbnRzIDogUG9pbnRbXSwgbGluZXMgOiBBYnN0cmFjdExpbmVbXSB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG4gICAgICAgIHRoaXMucG9pbnRzID0gb2JqLnBvaW50cztcclxuICAgICAgICB0aGlzLmxpbmVzICA9IG9iai5saW5lcztcclxuICAgIH1cclxuXHJcbiAgICBtYWtlT2JqKCkgOiBhbnkge1xyXG4gICAgICAgIGxldCBvYmogPSBPYmplY3QuYXNzaWduKHN1cGVyLm1ha2VPYmooKSwge1xyXG4gICAgICAgICAgICBwb2ludHMgOiB0aGlzLnBvaW50cy5tYXAoeCA9PiB4LnRvT2JqKCkpLFxyXG4gICAgICAgICAgICBsaW5lcyAgOiB0aGlzLmxpbmVzLm1hcCh4ID0+IHgudG9PYmooKSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICBkZXBlbmRlbmNpZXMoKSA6IE1hdGhFbnRpdHlbXSB7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRlcGVuZGVuY2llcygpLmNvbmNhdCh0aGlzLmxpbmVzKS5jb25jYXQodGhpcy5wb2ludHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHNocmlua1BvaW50cygpIDogVmVjMltdIHtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbnMgPSB0aGlzLnBvaW50cy5tYXAoeCA9PiB4LnBvc2l0aW9uKTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgY2VudGVyID0gcG9zaXRpb25zWzBdO1xyXG4gICAgICAgIHBvc2l0aW9ucy5zbGljZSgxKS5mb3JFYWNoKHggPT4gY2VudGVyID0gY2VudGVyLmFkZCh4KSk7XHJcblxyXG4gICAgICAgIGNlbnRlciA9IGNlbnRlci5tdWwoMSAvIHBvc2l0aW9ucy5sZW5ndGgpO1xyXG5cclxuICAgICAgICBjb25zdCBzaHJpbmtlZF9wb3NpdGlvbnMgOiBWZWMyW10gPSBbXTtcclxuICAgICAgICBmb3IoY29uc3QgcG9zaXRpb24gb2YgcG9zaXRpb25zKXtcclxuICAgICAgICAgICAgY29uc3QgdiA9IHBvc2l0aW9uLnN1YihjZW50ZXIpO1xyXG4gICAgICAgICAgICBjb25zdCBsZW4gPSB2LmxlbigpO1xyXG4gICAgICAgICAgICBjb25zdCBkaWZmID0gVmlldy5jdXJyZW50LmZyb21YUGl4U2NhbGUoMSAqIE92ZXJMaW5lV2lkdGgpO1xyXG4gICAgICAgICAgICBjb25zdCBzaHJpbmtlZF92ID0gdi51bml0KCkubXVsKGxlbiAtIGRpZmYpO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdfcG9zaXRpb24gPSBjZW50ZXIuYWRkKHNocmlua2VkX3YpO1xyXG4gICAgICAgICAgICBzaHJpbmtlZF9wb3NpdGlvbnMucHVzaChuZXdfcG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHNocmlua2VkX3Bvc2l0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBkcmF3KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gdGhpcy5tb2RlQ29sb3IoKTtcclxuXHJcbiAgICAgICAgaWYoW01vZGUudGFyZ2V0MSwgTW9kZS50YXJnZXQyXS5pbmNsdWRlcyh0aGlzLm1vZGUpKXtcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb25zID0gdGhpcy5wb2ludHMubWFwKHggPT4geC5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgIFZpZXcuY3VycmVudC5jYW52YXMuZHJhd1BvbHlnb25SYXcocG9zaXRpb25zLCBjb2xvciwgTmFOLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJhZGl1cyA9ICh0aGlzLm1vZGUgPT0gTW9kZS5ub25lID8gMSA6IDIpICogUG9pbnQucmFkaXVzO1xyXG5cclxuICAgICAgICBsZXQgcG9zaXRpb25zIDogVmVjMltdO1xyXG4gICAgICAgIGlmKHRoaXMubW9kZSA9PSBNb2RlLm5vbmUpe1xyXG4gICAgICAgICAgICBwb3NpdGlvbnMgPSB0aGlzLnBvaW50cy5tYXAoeCA9PiB4LnBvc2l0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgcG9zaXRpb25zID0gdGhpcy5zaHJpbmtQb2ludHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvcihjb25zdCBwb3NpdGlvbiBvZiBwb3NpdGlvbnMpe1xyXG4gICAgICAgICAgICBWaWV3LmN1cnJlbnQuY2FudmFzLmRyYXdDaXJjbGVSYXcocG9zaXRpb24sIHJhZGl1cywgY29sb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbGluZV93aWR0aCA9ICh0aGlzLm1vZGUgPT0gTW9kZS5ub25lID8gZGVmYXVsdExpbmVXaWR0aCA6IE92ZXJMaW5lV2lkdGgpO1xyXG4gICAgICAgIFZpZXcuY3VycmVudC5jYW52YXMuZHJhd1BvbHlnb25SYXcocG9zaXRpb25zLCBjb2xvciwgbGluZV93aWR0aCwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFsbFNoYXBlcyhzaGFwZXMgOiBNYXRoRW50aXR5W10pe1xyXG4gICAgICAgIHN1cGVyLmdldEFsbFNoYXBlcyhzaGFwZXMpO1xyXG4gICAgICAgIHNoYXBlcy5wdXNoKC4uLiB0aGlzLnBvaW50cywgLi4uIHRoaXMubGluZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRpbmcoKTogUmVhZGluZyB7XHJcbiAgICAgICAgc3dpdGNoKHRoaXMucG9pbnRzLmxlbmd0aCl7XHJcbiAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlYWRpbmcodGhpcywgVFQoJ0RyYXcgYSB0cmlhbmdsZS4nKSwgW10pO1xyXG4gICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWFkaW5nKHRoaXMsIFRUKCdEcmF3IGEgcXVhZHJpbGF0ZXJhbC4nKSwgW10pOyAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFJlbGF0aW9ucygpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5zZXRSZWxhdGlvbnMoKTtcclxuICAgICAgICB0aGlzLnBvaW50cy5mb3JFYWNoKHggPT4geC5zZXRSZWxhdGlvbnMoKSk7XHJcbiAgICAgICAgdGhpcy5saW5lcy5mb3JFYWNoKHggPT4geC5zZXRSZWxhdGlvbnMoKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG51bV9wb2ludHMgPSB0aGlzLnBvaW50cy5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgbGluZXMgPSByYW5nZShudW1fcG9pbnRzKS5tYXAoaSA9PiBnZXRDb21tb25MaW5lT2ZQb2ludHModGhpcy5wb2ludHNbaV0sIHRoaXMucG9pbnRzWyhpICsgMSkgJSBudW1fcG9pbnRzXSkpIGFzIEFic3RyYWN0TGluZVtdO1xyXG4gICAgICAgIGlmKGxpbmVzLnNvbWUoeCA9PiB4ID09IHVuZGVmaW5lZCkpe1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVzLmZvckVhY2goeCA9PiB4LnNldFJlbGF0aW9ucygpKTtcclxuXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihyYW5nZSh0aGlzLnBvaW50cy5sZW5ndGgpLnNvbWUoaSA9PiBsaW5lc1tpXSAhPSB0aGlzLmxpbmVzW2ldKSl7XHJcbiAgICAgICAgICAgIC8vIG1zZyhgbW9kaWZ5IGxpbmVzIG9mICR7dGhpcy5pZH06JHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YCk7XHJcbiAgICAgICAgICAgIHRoaXMubGluZXMgPSBsaW5lcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNFcXVhbChwb2x5Z29uIDogUG9seWdvbikgOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gYXJlU2V0c0VxdWFsKHRoaXMucG9pbnRzLCBwb2x5Z29uLnBvaW50cyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUcmlhbmdsZSBleHRlbmRzIFBvbHlnb24geyAgXHJcbiAgICBzdGF0aWMgZnJvbVBvaW50cyhwb2ludHMgOiBQb2ludFtdKSA6IFRyaWFuZ2xlIHtcclxuICAgICAgICBjb25zdCBsaW5lcyA9IHJhbmdlKDMpLm1hcChpID0+IGdldENvbW1vbkxpbmVPZlBvaW50cyhwb2ludHNbaV0sIHBvaW50c1soaSArIDEpICUgM10pKSBhcyBBYnN0cmFjdExpbmVbXTtcclxuICAgICAgICBpZihsaW5lcy5zb21lKHggPT4geCA9PSB1bmRlZmluZWQpKXtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBjb25zdCB0cmlhbmdsZSA9IG5ldyBUcmlhbmdsZSh7cG9pbnRzLCBsaW5lc30pO1xyXG4gICAgICAgIHJldHVybiB0cmlhbmdsZTtcclxuICAgIH1cclxuXHJcbiAgICBhbmdsZUluZGV4KGFuZ2xlIDogQW5nbGUpIDogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCBpZHggPSB0aGlzLnBvaW50cy5pbmRleE9mKGFuZ2xlLmludGVyc2VjdGlvbik7XHJcbiAgICAgICAgaWYoaWR4ICE9IC0xKXtcclxuICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgb3RoZXJfcG9pbnRzID0gWzAsIDEsIDJdLmZpbHRlcihpID0+IGkgIT0gaWR4KS5tYXAoaSA9PiB0aGlzLnBvaW50c1tpXSk7XHJcbiAgICAgICAgICAgIGFzc2VydChvdGhlcl9wb2ludHMubGVuZ3RoID09IDIpO1xyXG4gICAgICAgICAgICBmb3IoY29uc3QgW3AxLCBwMl0gb2YgcGVybXV0YXRpb248UG9pbnQ+KG90aGVyX3BvaW50cykpe1xyXG4gICAgICAgICAgICAgICAgaWYoYW5nbGUubGluZUEuaW5jbHVkZXNQb2ludChwMSkgJiYgYW5nbGUubGluZUIuaW5jbHVkZXNQb2ludChwMikpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpZHg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuXHJcbiAgICBsZW5ndGhTeW1ib2xJbmRleChsZW5ndGhTeW1ib2wgOiBMZW5ndGhTeW1ib2wpIDogbnVtYmVyIHtcclxuICAgICAgICBmb3IoY29uc3QgW2kxLCBpMl0gb2YgW1swLDFdLCBbMSwyXSwgWzIsMF1dKXtcclxuICAgICAgICAgICAgZm9yKGNvbnN0IFtwMSwgcDJdIG9mIHBlcm11dGF0aW9uPFBvaW50PihbIHRoaXMucG9pbnRzW2kxXSwgdGhpcy5wb2ludHNbaTJdIF0pKXtcclxuICAgICAgICAgICAgICAgIGlmKGxlbmd0aFN5bWJvbC5wb2ludEEgPT0gcDEgJiYgbGVuZ3RoU3ltYm9sLnBvaW50QiA9PSBwMil7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcblxyXG4gICAga2V5KCkgOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBvaW50cy5tYXAoeCA9PiBgJHt4LmlkfWApLmpvaW4oXCI6XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzQ29uZ3J1ZW50KHRyaWFuZ2xlIDogVHJpYW5nbGUpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgZm9yKGNvbnN0IHRyaWFuZ2xlcyBvZiBjb25ncnVlbnRUcmlhbmdsZXMpeyAgIFxyXG4gICAgICAgICAgICBpZih0cmlhbmdsZXMuc29tZSh4ID0+IHguaXNFcXVhbCh0aGlzKSkpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyaWFuZ2xlcy5zb21lKHggPT4geC5pc0VxdWFsKHRyaWFuZ2xlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpc1NpbWlsYXIodHJpYW5nbGUgOiBUcmlhbmdsZSkgOiBib29sZWFuIHtcclxuICAgICAgICBpZih0aGlzLmlzQ29uZ3J1ZW50KHRyaWFuZ2xlKSl7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yKGNvbnN0IHRyaWFuZ2xlcyBvZiBzaW1pbGFyVHJpYW5nbGVzKXsgICBcclxuICAgICAgICAgICAgaWYodHJpYW5nbGVzLnNvbWUoeCA9PiB4LmlzRXF1YWwodGhpcykpKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmlhbmdsZXMuc29tZSh4ID0+IHguaXNFcXVhbCh0cmlhbmdsZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUXVhZHJpbGF0ZXJhbCBleHRlbmRzIFBvbHlnb24ge1xyXG4gICAgaXNQYXJhbGxlbG9ncmFtKCkgOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gaXNQYXJhbGxlbG9ncmFtUG9pbnRzKHRoaXMucG9pbnRzKTtcclxuICAgIH1cclxuXHJcbiAgICBkaWFnb25hbEludGVyc2VjdGlvbigpIDogUG9pbnQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGNvbnN0IHBvaW50X3BhaXJzID0gWyBbdGhpcy5wb2ludHNbMF0sIHRoaXMucG9pbnRzWzJdXSwgW3RoaXMucG9pbnRzWzFdLCB0aGlzLnBvaW50c1szXV0gXVxyXG4gICAgICAgIGNvbnN0IGRpYWdvbmFscyA9IHBvaW50X3BhaXJzLm1hcCh4ID0+IGdldENvbW1vbkxpbmVPZlBvaW50cyh4WzBdLCB4WzFdKSApO1xyXG4gICAgICAgIGlmKGRpYWdvbmFscy5ldmVyeSh4ID0+IHggIT0gdW5kZWZpbmVkKSl7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRDb21tb25Qb2ludE9mTGluZXMoZGlhZ29uYWxzWzBdLCBkaWFnb25hbHNbMV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5cclxufVxyXG4iLCJuYW1lc3BhY2UgcGxhbmVfdHMge1xyXG4vL1xyXG5cclxuY29uc3QgcGFyc2VNYXRoID0gcGFyc2VyX3RzLnBhcnNlTWF0aDtcclxuXHJcbmV4cG9ydCBjb25zdCBlbnVtU2VsZWN0aW9uQ2xhc3NOYW1lID0gXCJlbnVtX3NlbGVjdGlvbl9pdGVtXCI7XHJcblxyXG5leHBvcnQgdHlwZSBtZW51RGlhbG9nVHlwZSA9IHR5cGVvZiBMZW5ndGhFcXVhbGl0eVJlYXNvbiB8IHR5cGVvZiBBbmdsZUVxdWFsaXR5UmVhc29uIHwgdHlwZW9mIFNoYXBlVHlwZSB8IFxyXG50eXBlb2YgUGFyYWxsZWxvZ3JhbVJlYXNvbiB8IHR5cGVvZiBSaG9tYnVzUmVhc29uIHwgdHlwZW9mIElzb3NjZWxlc1RyaWFuZ2xlUmVhc29uIHwgdHlwZW9mIFBhcmFsbGVsUmVhc29uIHwgdHlwZW9mIFNoYXBlRXF1YXRpb25SZWFzb24gfCB0eXBlb2YgRXhwclRyYW5zZm9ybVJlYXNvbiB8IHR5cGVvZiBQcm9wb3NpdGlvblJlYXNvbjtcclxuZXhwb3J0IGNvbnN0IG1lbnVEaWFsb2dzID0gbmV3IE1hcDxtZW51RGlhbG9nVHlwZSwgbGF5b3V0X3RzLkRpYWxvZz4oKTtcclxuXHJcbmV4cG9ydCBlbnVtIFRyaWFuZ2xlQ29uZ3J1ZW5jZVJlYXNvbiB7XHJcbiAgICBub25lLFxyXG4gICAgc2lkZV9zaWRlX3NpZGUsXHJcbiAgICBzaWRlX2FuZ2xlX3NpZGUsXHJcbiAgICBhbmdsZV9zaWRlX2FuZ2xlLFxyXG59O1xyXG5cclxuZXhwb3J0IGVudW0gU2hhcGVFcXVhdGlvblJlYXNvbiB7XHJcbiAgICBub25lID0gNTAsXHJcbiAgICBzdW1fb2ZfYW5nbGVzX2lzX3BpLFxyXG4gICAgc3VtX29mX2FuZ2xlc19pc19lcXVhbCxcclxuICAgIHN1bV9vZl9sZW5ndGhzX2lzX2VxdWFsLFxyXG4gICAgc3VtX29mX2ludGVyaW9yX2FuZ2xlc19vZl90cmlhbmdsZV9pc19waSxcclxuICAgIHN1bV9vZl9pbnRlcmlvcl9hbmdsZXNfb2ZfcXVhZHJpbGF0ZXJhbF9pc18ycGksXHJcbiAgICBleHRlcmlvcl9hbmdsZV90aGVvcmVtLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBMZW5ndGhFcXVhbGl0eVJlYXNvbiB7XHJcbiAgICBub25lID0gMTAwLFxyXG4gICAgcmFkaWlfZXF1YWwsXHJcbiAgICBjb21tb25fY2lyY2xlLFxyXG4gICAgcGFyYWxsZWxfbGluZXNfZGlzdGFuY2UsXHJcbiAgICBub3RfdXNlZCxcclxuICAgIGNvbmdydWVudF90cmlhbmdsZXMsXHJcbiAgICBwYXJhbGxlbG9ncmFtX29wcG9zaXRlX3NpZGVzLFxyXG4gICAgcGFyYWxsZWxvZ3JhbV9kaWFnb25hbF9iaXNlY3Rpb24sXHJcbiAgICBlcXVpdmFsZW5jZV9jbGFzcyxcclxuICAgIG1pZHBvaW50LFxyXG59O1xyXG5cclxuZXhwb3J0IGVudW0gRXhwclRyYW5zZm9ybVJlYXNvbiB7XHJcbiAgICBub25lID0gMTUwLFxyXG4gICAgdHJhbnNwb3NpdGlvbixcclxuICAgIGVxdWFsaXR5LFxyXG4gICAgYWRkX2VxdWF0aW9uLFxyXG4gICAgc3Vic3RpdHV0aW9uLFxyXG4gICAgZGl2aWRpbmdfZXF1YXRpb24sXHJcbiAgICBhcmdfc2hpZnQsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEFuZ2xlRXF1YWxpdHlSZWFzb24ge1xyXG4gICAgbm9uZSA9IDIwMCxcclxuICAgIHZlcnRpY2FsX2FuZ2xlcyxcclxuICAgIHBhcmFsbGVsX2xpbmVfYW5nbGVzLFxyXG4gICAgYW5nbGVfYmlzZWN0b3IsXHJcbiAgICBjb25ncnVlbnRfdHJpYW5nbGVzLFxyXG4gICAgcGFyYWxsZWxvZ3JhbV9vcHBvc2l0ZV9hbmdsZXMsXHJcbiAgICBzaW1pbGFyX3RyaWFuZ2xlcyxcclxuICAgIGlzb3NjZWxlc190cmlhbmdsZV9iYXNlX2FuZ2xlcyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUHJvcG9zaXRpb25SZWFzb24ge1xyXG4gICAgbm9uZSA9IDI1MCxcclxuICAgIGFuZ2xlX2VxdWFsaXR5LFxyXG4gICAgbGVuZ3RoX2VxdWFsaXR5LFxyXG4gICAgZXF1YXRpb24sXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFRyaWFuZ2xlUXVhZHJpbGF0ZXJhbENsYXNzIHtcclxuICAgIG5vbmUgPSAzMDAsXHJcbiAgICB0cmFwZXpvaWQsXHJcbiAgICBwYXJhbGxlbG9ncmFtLFxyXG4gICAgcmhvbWJ1cyxcclxuICAgIGlzb3NjZWxlc1RyaWFuZ2xlLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBQYXJhbGxlbG9ncmFtUmVhc29uIHtcclxuICAgIG5vbmUgPSA0MDAsXHJcbiAgICBlYWNoX29wcG9zaXRlX3NpZGVzX2FyZV9lcXVhbCxcclxuICAgIGVhY2hfb3Bwb3NpdGVfc2lkZXNfYXJlX3BhcmFsbGVsLFxyXG4gICAgZWFjaF9vcHBvc2l0ZV9hbmdsZXNfYXJlX2VxdWFsLFxyXG4gICAgb25lX29wcG9zaXRlX3NpZGVzX2FyZV9wYXJhbGxlbF9hbmRfZXF1YWwsXHJcbiAgICBlYWNoX2RpYWdvbmFsX2Jpc2VjdGlvbnMsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFJob21idXNSZWFzb24ge1xyXG4gICAgbm9uZSA9IDUwMCxcclxuICAgIGFsbF9zaWRlc19hcmVfZXF1YWwsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIElzb3NjZWxlc1RyaWFuZ2xlUmVhc29uIHtcclxuICAgIG5vbmUgPSA1MjAsXHJcbiAgICB0d29fc2lkZXNfYXJlX2VxdWFsLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBQYXJhbGxlbFJlYXNvbiB7XHJcbiAgICBub25lID0gNjAwLFxyXG4gICAgcGFyYWxsZWxvZ3JhbSxcclxuICAgIGNvcnJlc3BvbmRpbmdfYW5nbGVzX29yX2FsdGVybmF0ZV9hbmdsZXNfYXJlX2VxdWFsLFxyXG4gICAgc3VwcGxlbWVudGFyeV9hbmdsZXMsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFRyaWFuZ2xlU2ltaWxhcml0eVJlYXNvbiB7XHJcbiAgICBub25lID0gNzAwLFxyXG4gICAgdHdvX2VxdWFsX2FuZ2xlX3BhaXJzLFxyXG59O1xyXG5cclxuZXhwb3J0IGVudW0gU2hhcGVUeXBlIHtcclxuICAgIHBhcmFsbGVsb2dyYW0gPSA4MDAsXHJcbiAgICByaG9tYnVzLFxyXG4gICAgaXNvc2NlbGVzX3RyaWFuZ2xlLFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZW51bVRvSW1nTmFtZSA9IG5ldyBNYXA8bnVtYmVyLCBzdHJpbmc+KFtcclxuICAgIFsgVHJpYW5nbGVDb25ncnVlbmNlUmVhc29uLnNpZGVfc2lkZV9zaWRlLCBcInNpZGVfc2lkZV9zaWRlXCIgXSxcclxuICAgIFsgVHJpYW5nbGVDb25ncnVlbmNlUmVhc29uLnNpZGVfYW5nbGVfc2lkZSwgXCJzaWRlX2FuZ2xlX3NpZGVcIiBdLFxyXG4gICAgWyBUcmlhbmdsZUNvbmdydWVuY2VSZWFzb24uYW5nbGVfc2lkZV9hbmdsZSwgXCJhbmdsZV9zaWRlX2FuZ2xlXCIgXSxcclxuXHJcbiAgICBbIFNoYXBlRXF1YXRpb25SZWFzb24uc3VtX29mX2FuZ2xlc19pc19waSwgXCJzdW1fb2ZfYW5nbGVzX2lzX3BpXCIgXSxcclxuICAgIFsgU2hhcGVFcXVhdGlvblJlYXNvbi5zdW1fb2ZfYW5nbGVzX2lzX2VxdWFsLCBcInN1bV9vZl9hbmdsZXNfaXNfZXF1YWxcIiBdLFxyXG4gICAgWyBTaGFwZUVxdWF0aW9uUmVhc29uLnN1bV9vZl9sZW5ndGhzX2lzX2VxdWFsLCBcInN1bV9vZl9sZW5ndGhzX2lzX2VxdWFsXCIgXSxcclxuICAgIFsgU2hhcGVFcXVhdGlvblJlYXNvbi5zdW1fb2ZfaW50ZXJpb3JfYW5nbGVzX29mX3RyaWFuZ2xlX2lzX3BpLCBcInN1bV9vZl9pbnRlcmlvcl9hbmdsZXNfb2ZfdHJpYW5nbGVfaXNfcGlcIiBdLFxyXG4gICAgWyBTaGFwZUVxdWF0aW9uUmVhc29uLnN1bV9vZl9pbnRlcmlvcl9hbmdsZXNfb2ZfcXVhZHJpbGF0ZXJhbF9pc18ycGksIFwic3VtX29mX2ludGVyaW9yX2FuZ2xlc19vZl9xdWFkcmlsYXRlcmFsX2lzXzJwaVwiIF0sXHJcbiAgICBbIFNoYXBlRXF1YXRpb25SZWFzb24uZXh0ZXJpb3JfYW5nbGVfdGhlb3JlbSwgXCJleHRlcmlvcl9hbmdsZV90aGVvcmVtXCIgXSxcclxuXHJcbiAgICBbIExlbmd0aEVxdWFsaXR5UmVhc29uLnJhZGlpX2VxdWFsLCBcInJhZGlpX2VxdWFsXCIgXSxcclxuICAgIFsgTGVuZ3RoRXF1YWxpdHlSZWFzb24uY29tbW9uX2NpcmNsZSwgXCJjb21tb25fY2lyY2xlXCIgXSxcclxuICAgIFsgTGVuZ3RoRXF1YWxpdHlSZWFzb24ucGFyYWxsZWxfbGluZXNfZGlzdGFuY2UsIFwicGFyYWxsZWxfbGluZXNfZGlzdGFuY2VcIiBdLFxyXG4gICAgWyBMZW5ndGhFcXVhbGl0eVJlYXNvbi5jb25ncnVlbnRfdHJpYW5nbGVzLCBcInRyaWFuZ2xlX2NvbmdydWVuY2VcIiBdLFxyXG4gICAgWyBMZW5ndGhFcXVhbGl0eVJlYXNvbi5wYXJhbGxlbG9ncmFtX29wcG9zaXRlX3NpZGVzLCBcImVhY2hfb3Bwb3NpdGVfc2lkZXNfYXJlX2VxdWFsXCIgXSxcclxuICAgIFsgTGVuZ3RoRXF1YWxpdHlSZWFzb24ucGFyYWxsZWxvZ3JhbV9kaWFnb25hbF9iaXNlY3Rpb24sIFwiZWFjaF9kaWFnb25hbF9iaXNlY3Rpb25zXCIgXSxcclxuICAgIFsgTGVuZ3RoRXF1YWxpdHlSZWFzb24uZXF1aXZhbGVuY2VfY2xhc3MsIFwiZXF1aXZhbGVuY2VfY2xhc3NcIiBdLFxyXG4gICAgWyBMZW5ndGhFcXVhbGl0eVJlYXNvbi5taWRwb2ludCwgXCJtaWRwb2ludFwiIF0sXHJcblxyXG4gICAgWyBFeHByVHJhbnNmb3JtUmVhc29uLnRyYW5zcG9zaXRpb24sIFwidHJhbnNwb3NpdGlvblwiIF0sXHJcbiAgICBbIEV4cHJUcmFuc2Zvcm1SZWFzb24uZXF1YWxpdHksIFwiZXF1YWxpdHlcIiBdLFxyXG4gICAgWyBFeHByVHJhbnNmb3JtUmVhc29uLmFkZF9lcXVhdGlvbiwgXCJhZGRfZXF1YXRpb25cIiBdLFxyXG4gICAgWyBFeHByVHJhbnNmb3JtUmVhc29uLnN1YnN0aXR1dGlvbiwgXCJzdWJzdGl0dXRpb25cIiBdLFxyXG4gICAgWyBFeHByVHJhbnNmb3JtUmVhc29uLmRpdmlkaW5nX2VxdWF0aW9uLCBcImRpdmlkaW5nX2VxdWF0aW9uXCIgXSxcclxuICAgIFsgRXhwclRyYW5zZm9ybVJlYXNvbi5hcmdfc2hpZnQsIFwiYXJnX3NoaWZ0XCIgXSxcclxuXHJcbiAgICBbIEFuZ2xlRXF1YWxpdHlSZWFzb24udmVydGljYWxfYW5nbGVzLCBcInZlcnRpY2FsX2FuZ2xlc1wiIF0sXHJcbiAgICBbIEFuZ2xlRXF1YWxpdHlSZWFzb24ucGFyYWxsZWxfbGluZV9hbmdsZXMsIFwicGFyYWxsZWxfbGluZV9hbmdsZXNcIiBdLFxyXG4gICAgWyBBbmdsZUVxdWFsaXR5UmVhc29uLmFuZ2xlX2Jpc2VjdG9yLCBcImFuZ2xlX2Jpc2VjdG9yXCIgXSxcclxuICAgIFsgQW5nbGVFcXVhbGl0eVJlYXNvbi5jb25ncnVlbnRfdHJpYW5nbGVzLCBcInRyaWFuZ2xlX2NvbmdydWVuY2VcIiBdLFxyXG4gICAgWyBBbmdsZUVxdWFsaXR5UmVhc29uLnBhcmFsbGVsb2dyYW1fb3Bwb3NpdGVfYW5nbGVzLCBcImVhY2hfb3Bwb3NpdGVfYW5nbGVzX2FyZV9lcXVhbFwiIF0sXHJcbiAgICBbIEFuZ2xlRXF1YWxpdHlSZWFzb24uc2ltaWxhcl90cmlhbmdsZXMsIFwidHJpYW5nbGVfc2ltaWxhcml0eVwiIF0sXHJcbiAgICBbIEFuZ2xlRXF1YWxpdHlSZWFzb24uaXNvc2NlbGVzX3RyaWFuZ2xlX2Jhc2VfYW5nbGVzLCBcImlzb3NjZWxlc190cmlhbmdsZV9iYXNlX2FuZ2xlc1wiIF0sXHJcblxyXG4gICAgWyBUcmlhbmdsZVF1YWRyaWxhdGVyYWxDbGFzcy50cmFwZXpvaWQsIFwiXCIgXSxcclxuICAgIFsgVHJpYW5nbGVRdWFkcmlsYXRlcmFsQ2xhc3MucGFyYWxsZWxvZ3JhbSwgXCJxdWFkcmlsYXRlcmFsX2NsYXNzaWZpZXJcIiBdLFxyXG4gICAgWyBUcmlhbmdsZVF1YWRyaWxhdGVyYWxDbGFzcy5yaG9tYnVzLCBcImFsbF9zaWRlc19hcmVfZXF1YWxcIiBdLFxyXG5cclxuICAgIFsgUGFyYWxsZWxvZ3JhbVJlYXNvbi5lYWNoX29wcG9zaXRlX3NpZGVzX2FyZV9lcXVhbCwgXCJlYWNoX29wcG9zaXRlX3NpZGVzX2FyZV9lcXVhbFwiIF0sXHJcbiAgICBbIFBhcmFsbGVsb2dyYW1SZWFzb24uZWFjaF9vcHBvc2l0ZV9zaWRlc19hcmVfcGFyYWxsZWwsIFwiZWFjaF9vcHBvc2l0ZV9zaWRlc19hcmVfcGFyYWxsZWxcIiBdLFxyXG4gICAgWyBQYXJhbGxlbG9ncmFtUmVhc29uLmVhY2hfb3Bwb3NpdGVfYW5nbGVzX2FyZV9lcXVhbCwgXCJlYWNoX29wcG9zaXRlX2FuZ2xlc19hcmVfZXF1YWxcIiBdLFxyXG4gICAgWyBQYXJhbGxlbG9ncmFtUmVhc29uLm9uZV9vcHBvc2l0ZV9zaWRlc19hcmVfcGFyYWxsZWxfYW5kX2VxdWFsLCBcIm9uZV9vcHBvc2l0ZV9zaWRlc19hcmVfcGFyYWxsZWxfYW5kX2VxdWFsXCIgXSxcclxuICAgIFsgUGFyYWxsZWxvZ3JhbVJlYXNvbi5lYWNoX2RpYWdvbmFsX2Jpc2VjdGlvbnMsIFwiZWFjaF9kaWFnb25hbF9iaXNlY3Rpb25zXCIgXSxcclxuXHJcbiAgICBbIFJob21idXNSZWFzb24uYWxsX3NpZGVzX2FyZV9lcXVhbCwgXCJhbGxfc2lkZXNfYXJlX2VxdWFsXCIgXSxcclxuXHJcbiAgICBbIElzb3NjZWxlc1RyaWFuZ2xlUmVhc29uLnR3b19zaWRlc19hcmVfZXF1YWwsIFwiaXNvc2NlbGVzX3RyaWFuZ2xlXCIgXSxcclxuXHJcbiAgICBbIFBhcmFsbGVsUmVhc29uLnBhcmFsbGVsb2dyYW0sIFwicXVhZHJpbGF0ZXJhbF9jbGFzc2lmaWVyXCIgXSxcclxuICAgIFsgUGFyYWxsZWxSZWFzb24uY29ycmVzcG9uZGluZ19hbmdsZXNfb3JfYWx0ZXJuYXRlX2FuZ2xlc19hcmVfZXF1YWwsIFwicGFyYWxsZWxfbGluZV9hbmdsZXNcIiBdLFxyXG4gICAgWyBQYXJhbGxlbFJlYXNvbi5zdXBwbGVtZW50YXJ5X2FuZ2xlcywgXCJwYXJhbGxlbF9ieV9zdXBwbGVtZW50YXJ5X2FuZ2xlc1wiIF0sXHJcblxyXG4gICAgWyBUcmlhbmdsZVNpbWlsYXJpdHlSZWFzb24udHdvX2VxdWFsX2FuZ2xlX3BhaXJzLCBcInR3b19lcXVhbF9hbmdsZV9wYWlyc1wiIF0sXHJcblxyXG4gICAgWyBTaGFwZVR5cGUucGFyYWxsZWxvZ3JhbSwgXCJxdWFkcmlsYXRlcmFsX2NsYXNzaWZpZXJcIiBdLFxyXG4gICAgWyBTaGFwZVR5cGUucmhvbWJ1cywgXCJhbGxfc2lkZXNfYXJlX2VxdWFsXCIgXSxcclxuICAgIFsgU2hhcGVUeXBlLmlzb3NjZWxlc190cmlhbmdsZSwgXCJpc29zY2VsZXNfdHJpYW5nbGVcIl0sXHJcblxyXG4gICAgWyBQcm9wb3NpdGlvblJlYXNvbi5hbmdsZV9lcXVhbGl0eSwgXCJlcXVhbF9hbmdsZVwiIF0sXHJcbiAgICBbIFByb3Bvc2l0aW9uUmVhc29uLmxlbmd0aF9lcXVhbGl0eSwgXCJlcXVhbF9sZW5ndGhcIiBdLFxyXG4gICAgWyBQcm9wb3NpdGlvblJlYXNvbi5lcXVhdGlvbiwgXCJleHByX3RyYW5zZm9ybVwiIF0sXHJcbl0pO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1ha2VTZWxlY3Rpb25EbGcoKXsgICAgXHJcbiAgICBjb25zdCBkYXRhIDogW3N0cmluZywgc3RyaW5nLCAodHlwZW9mIExlbmd0aEVxdWFsaXR5UmVhc29uIHwgdHlwZW9mIEFuZ2xlRXF1YWxpdHlSZWFzb24gfCB0eXBlb2YgU2hhcGVUeXBlIHwgXHJcbiAgICAgICAgdHlwZW9mIFBhcmFsbGVsb2dyYW1SZWFzb24gfCB0eXBlb2YgUmhvbWJ1c1JlYXNvbiB8IHR5cGVvZiBJc29zY2VsZXNUcmlhbmdsZVJlYXNvbiB8IHR5cGVvZiBQYXJhbGxlbFJlYXNvbiB8IHR5cGVvZiBTaGFwZUVxdWF0aW9uUmVhc29uIHwgdHlwZW9mIEV4cHJUcmFuc2Zvcm1SZWFzb24gfCB0eXBlb2YgUHJvcG9zaXRpb25SZWFzb24pXVtdID0gWyBcclxuICAgICAgICBbIFRUKFwiUmVhc29uIGZvciBsZW5ndGggZXF1YWxpdHlcIiksIFwibGVuZ3RoLWVxdWFsaXR5LXJlYXNvblwiLCBMZW5ndGhFcXVhbGl0eVJlYXNvbiBdLFxyXG4gICAgICAgIFsgVFQoXCJSZWFzb24gZm9yIGFuZ2xlIGVxdWFsaXR5XCIgKSwgXCJhbmdsZS1lcXVhbGl0eS1yZWFzb25cIiAsIEFuZ2xlRXF1YWxpdHlSZWFzb24gXSxcclxuICAgICAgICBbIFRUKFwiU2hhcGUgdHlwZVwiICAgICAgICAgICAgICAgICksIFwic2hhcGUtdHlwZVwiICAgICAgICAgICAgLCBTaGFwZVR5cGUgXSxcclxuICAgICAgICBbIFRUKFwiUmVhc29uIGZvciBwYXJhbGxlbG9ncmFtXCIgICksIFwicGFyYWxsZWxvZ3JhbS1yZWFzb25cIiAgLCBQYXJhbGxlbG9ncmFtUmVhc29uIF0sXHJcbiAgICAgICAgWyBUVChcIlJlYXNvbiBmb3IgcmhvbWJ1c1wiICAgICAgICApLCBcInJob21idXMtcmVhc29uXCIgICAgICAgICwgUmhvbWJ1c1JlYXNvbiBdLCBcclxuICAgICAgICBbIFRUKFwiUmVhc29uIGZvciBpc29zY2VsZXMgdHJpYW5nbGVcIiksIFwiaXNvc2NlbGVzLXRyaWFuZ2xlLXJlYXNvblwiLCBJc29zY2VsZXNUcmlhbmdsZVJlYXNvbiBdLFxyXG4gICAgICAgIFsgVFQoXCJSZWFzb24gZm9yIHBhcmFsbGVsXCIgICAgICAgKSwgXCJwYXJhbGxlbC1yZWFzb25cIiAgICAgICAsIFBhcmFsbGVsUmVhc29uIF0sIFxyXG4gICAgICAgIFsgVFQoXCJFcXVhdGlvbiBkZXJpdmVkIGZyb20gc2hhcGVzXCIgKSwgXCJzaGFwZS1lcXVhdGlvbi1yZWFzb25cIiAgICAgICAsIFNoYXBlRXF1YXRpb25SZWFzb24gXSwgXHJcbiAgICAgICAgWyBUVChcIlR5cGVzIG9mIGZvcm11bGEgdHJhbnNmb3JtYXRpb25cIiksIFwiZXhwci10cmFuc2Zvcm0tcmVhc29uXCIsIEV4cHJUcmFuc2Zvcm1SZWFzb24gXSwgXHJcbiAgICAgICAgWyBUVChcIlR5cGVzIG9mIHByb3Bvc2l0aW9uXCIpLCBcInByb3Bvc2l0aW9uLXJlYXNvblwiLCBQcm9wb3NpdGlvblJlYXNvbiBdLCBcclxuICAgIF07XHJcblxyXG4gICAgY29uc3QgdGl0bGVzID0gZGF0YS5tYXAoeCA9PiB4WzBdKTtcclxuICAgIGNvbnN0IHNwYW5faWRfcHJlZml4ZXMgPSBkYXRhLm1hcCh4ID0+IHhbMV0pO1xyXG4gICAgY29uc3QgZGljcyA9IGRhdGEubWFwKHggPT4geFsyXSk7XHJcblxyXG4gICAgbWVudURpYWxvZ3MuY2xlYXIoKTtcclxuICAgIGZvcihjb25zdCBbaWR4LCBkaWNdIG9mIGRpY3MuZW50cmllcygpKXtcclxuICAgICAgICBjb25zdCBjaGlsZHJlbiA6IGxheW91dF90cy5VSVtdID0gW107XHJcblxyXG4gICAgICAgIGNvbnN0IHRpdGxlID0gbGF5b3V0X3RzLiRsYWJlbCh7XHJcbiAgICAgICAgICAgIHRleHQgOiB0aXRsZXNbaWR4XSxcclxuICAgICAgICAgICAgYm9yZGVyV2lkdGggOiA1LFxyXG4gICAgICAgICAgICBib3JkZXJTdHlsZSA6IFwicmlkZ2VcIixcclxuICAgICAgICAgICAgcGFkZGluZyA6IDUsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2hpbGRyZW4ucHVzaCh0aXRsZSk7XHJcblxyXG4gICAgICAgIGZvcihjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGljKSl7XHJcbiAgICAgICAgICAgIGlmIChpc05hTihOdW1iZXIoa2V5KSkpe1xyXG4gICAgICAgICAgICAgICAgaWYoW1wibm9uZVwiLCBcIm5vdF91c2VkXCJdLmluY2x1ZGVzKGtleSkpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBpbWdfbmFtZSA9IGVudW1Ub0ltZ05hbWUuZ2V0KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGFzc2VydChpbWdfbmFtZSAhPSB1bmRlZmluZWQgJiYgaW1nX25hbWUgIT0gXCJcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYG9mIGtleTpbJHtrZXl9XSR7dHlwZW9mIGtleX0gdmFsdWU6WyR7dmFsdWV9XSR7dHlwZW9mIHZhbHVlfSBkaWNbdmFsdWVdOlske2RpY1t2YWx1ZV19XWApOyBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IGxheW91dF90cy4kaW1nKHtcclxuICAgICAgICAgICAgICAgICAgICBpZCAgICAgOiBgJHtzcGFuX2lkX3ByZWZpeGVzW2lkeF19LSR7a2V5fWAsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogZW51bVNlbGVjdGlvbkNsYXNzTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBpbWdVcmwgOiBgLi9saWIvcGxhbmUvaW1nLyR7aW1nX25hbWV9LnBuZ2AsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggIDogXCI2NHB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0IDogXCI2NHB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyV2lkdGggOiA1LFxyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlclN0eWxlIDogXCJyaWRnZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhvcml6b250YWxBbGlnbiA6IFwiY2VudGVyXCIsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGltZy5odG1sKCkuZGF0YXNldC5vcGVyYXRpb25fdmFsdWUgPSBgJHt2YWx1ZX1gO1xyXG4gICAgICAgICAgICAgICAgLy8gaW1nLmh0bWwoKS5zdHlsZS5wb3NpdGlvbiA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChpbWcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBncmlkID0gbGF5b3V0X3RzLiRncmlkKHtcclxuICAgICAgICAgICAgY2hpbGRyZW4gOiBjaGlsZHJlblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBkbGcgPSBsYXlvdXRfdHMuJGRpYWxvZyh7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgOiBncmlkXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1lbnVEaWFsb2dzLnNldChkaWMsIGRsZyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBc3N1bXB0aW9uIGV4dGVuZHMgTWF0aEVudGl0eSBpbXBsZW1lbnRzIEVxdWF0aW9uVGV4dEJsb2NrIHtcclxuICAgIGVxdWF0aW9uICA6IEFwcDtcclxuICAgIHRleHRCbG9jayA6IFRleHRCbG9jaztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiB7IGVxdWF0aW9uIDogQXBwIH0gKXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG5cclxuICAgICAgICB0aGlzLmVxdWF0aW9uID0gb2JqLmVxdWF0aW9uO1xyXG4gICAgICAgIHRoaXMudGV4dEJsb2NrID0gbWFrZUVxdWF0aW9uVGV4dEJsb2NrKHRoaXMsIHRoaXMuZXF1YXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFsbFNoYXBlcyhzaGFwZXMgOiBNYXRoRW50aXR5W10pe1xyXG4gICAgICAgIHN1cGVyLmdldEFsbFNoYXBlcyhzaGFwZXMpO1xyXG4gICAgICAgIGlmKHRoaXMudGV4dEJsb2NrICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHNoYXBlcy5wdXNoKHRoaXMudGV4dEJsb2NrISk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlYWRpbmcoKSA6IFJlYWRpbmcge1xyXG4gICAgICAgIC8vIG1zZyhgZW1wdHkgcmVhZGluZzoke3RoaXMuY29uc3RydWN0b3IubmFtZX1gKTtcclxuICAgICAgICByZXR1cm4gbmV3IFJlYWRpbmcodGhpcywgXCJcIiwgW10pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU3RhdGVtZW50IGV4dGVuZHMgU2hhcGUge1xyXG4gICAgc3RhdGljIGlkVGltZW91dCA6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICByZWFzb24gOiBudW1iZXIgPSAwO1xyXG4gICAgbWF0aFRleHQgOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgbGF0ZXhCb3g/IDogbGF5b3V0X3RzLkxhVGVYQm94O1xyXG4gICAgYXV4aWxpYXJ5U2hhcGVzIDogTWF0aEVudGl0eVtdID0gW107XHJcbiAgICBzZWxlY3RlZFNoYXBlcyA6IE1hdGhFbnRpdHlbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiB7IHJlYXNvbj8gOiBudW1iZXIsIHNoYXBlcyA6IE1hdGhFbnRpdHlbXSwgYXV4aWxpYXJ5U2hhcGVzPyA6IE1hdGhFbnRpdHlbXSwgbWF0aFRleHQ/IDogc3RyaW5nIH0pe1xyXG4gICAgICAgIHN1cGVyKG9iaik7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNoYXBlcyA9IG9iai5zaGFwZXM7XHJcblxyXG4gICAgICAgIGlmKG9iai5yZWFzb24gIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5yZWFzb24gPSBvYmoucmVhc29uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYob2JqLmF1eGlsaWFyeVNoYXBlcyAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB0aGlzLmF1eGlsaWFyeVNoYXBlcyA9IG9iai5hdXhpbGlhcnlTaGFwZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihvYmoubWF0aFRleHQgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5tYXRoVGV4dCA9IG9iai5tYXRoVGV4dDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGVwZW5kZW5jaWVzKCkgOiBNYXRoRW50aXR5W10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkU2hhcGVzIGFzIFNoYXBlW107XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UHJvcGVydGllcygpe1xyXG4gICAgICAgIHJldHVybiBzdXBlci5nZXRQcm9wZXJ0aWVzKCkuY29uY2F0KFtcclxuICAgICAgICAgICAgXCJyZWFzb25cIiwgXCJzZWxlY3RlZFNoYXBlc1wiLCBcImF1eGlsaWFyeVNoYXBlc1wiLCBcIm1hdGhUZXh0XCJcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkaW5nKCkgOiBSZWFkaW5nIHtcclxuICAgICAgICAvLyBtc2coYGVtcHR5IHJlYWRpbmc6JHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWFkaW5nKHRoaXMsIFwiXCIsIFtdKTtcclxuICAgIH0gICAgXHJcblxyXG4gICAgbWFrZU9iaigpIDogYW55IHtcclxuICAgICAgICBsZXQgb2JqID0gT2JqZWN0LmFzc2lnbihzdXBlci5tYWtlT2JqKCksIHtcclxuICAgICAgICAgICAgc2hhcGVzIDogdGhpcy5zZWxlY3RlZFNoYXBlcy5tYXAoeCA9PiB4LnRvT2JqKCkpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmKHRoaXMucmVhc29uICE9IDApe1xyXG4gICAgICAgICAgICBvYmoucmVhc29uID0gdGhpcy5yZWFzb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLmF1eGlsaWFyeVNoYXBlcy5sZW5ndGggIT0gMCl7XHJcbiAgICAgICAgICAgIG9iai5hdXhpbGlhcnlTaGFwZXMgPSB0aGlzLmF1eGlsaWFyeVNoYXBlcy5tYXAoeCA9PiB4LnRvT2JqKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5tYXRoVGV4dCAhPSBcIlwiKXtcclxuICAgICAgICAgICAgb2JqLm1hdGhUZXh0ID0gdGhpcy5tYXRoVGV4dDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZVRleFVJKCkgOiBsYXlvdXRfdHMuTGFUZVhCb3gge1xyXG4gICAgICAgIHJldHVybiBuZXcgbGF5b3V0X3RzLkxhVGVYQm94KHtcclxuICAgICAgICAgICAgcGFyZW50IDogUGxhbmUub25lLnRleHRfYmxvY2ssXHJcbiAgICAgICAgICAgIHRleHQgOiBcIlwiLFxyXG4gICAgICAgICAgICBjbGljayA6IGFzeW5jIChldiA6IE1vdXNlRXZlbnQpPT57XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IFZpZXcuY3VycmVudC5ldmVudFBvc2l0aW9uKGV2KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IChCdWlsZGVyLnRvb2wgYXMgU3RhdGVtZW50QnVpbGRlcikuY2xpY2tXaXRoTW91c2VFdmVudChldiwgVmlldy5jdXJyZW50LCBwb3NpdGlvbiwgdGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxTaGFwZXMoc2hhcGVzIDogTWF0aEVudGl0eVtdKXtcclxuICAgICAgICBzdXBlci5nZXRBbGxTaGFwZXMoc2hhcGVzKTtcclxuICAgICAgICBzaGFwZXMucHVzaCguLi4gdGhpcy5zZWxlY3RlZFNoYXBlcyk7XHJcbiAgICAgICAgc2hhcGVzLnB1c2goLi4uIHRoaXMuYXV4aWxpYXJ5U2hhcGVzKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93TWF0aFRleHQoKXtcclxuICAgICAgICBTdGF0ZW1lbnQuaWRUaW1lb3V0ID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBsZXQgdGVybSA6IFRlcm07XHJcbiAgICAgICAgdHJ5e1xyXG5cclxuICAgICAgICAgICAgdGVybSA9IHBhcnNlTWF0aCh0aGlzLm1hdGhUZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2goZSl7XHJcbiAgICAgICAgICAgIGlmKGUgaW5zdGFuY2VvZiBwYXJzZXJfdHMuU3ludGF4RXJyb3Ipe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0ZXhfdGV4dCA9IHRlcm0udGV4KCk7XHJcblxyXG4gICAgICAgIGlmKHRoaXMubGF0ZXhCb3ggPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5sYXRleEJveCA9IHRoaXMubWFrZVRleFVJKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxhdGV4Qm94LnNldFRleHQodGV4X3RleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldE1vZGUobW9kZSA6IE1vZGUpe1xyXG4gICAgICAgIHN1cGVyLnNldE1vZGUobW9kZSk7XHJcbiAgICAgICAgaWYodGhpcy5sYXRleEJveCAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IChtb2RlID09IE1vZGUubm9uZSA/IFwidHJhbnNwYXJlbnRcIiA6IGdldE1vZGVDb2xvcihtb2RlKSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxhdGV4Qm94LnNldEJvcmRlckNvbG9yKGNvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdygpIDogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgc2hhcGVzID0gdGhpcy5hdXhpbGlhcnlTaGFwZXMuY29uY2F0KHRoaXMuc2VsZWN0ZWRTaGFwZXMpLmZpbHRlcih4ID0+IHggaW5zdGFuY2VvZiBTaGFwZSkgYXMgU2hhcGVbXTtcclxuICAgICAgICBzaGFwZXMuZmlsdGVyKHggPT4geC5tb2RlICE9IE1vZGUubm9uZSkuZm9yRWFjaCh4ID0+IHguZHJhdygpKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93KCl7ICAgIFxyXG4gICAgICAgIGlmKHRoaXMubGF0ZXhCb3ggIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5sYXRleEJveC5zaG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGhpZGUoKXsgICAgICAgIFxyXG4gICAgICAgIGlmKHRoaXMubGF0ZXhCb3ggIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5sYXRleEJveC5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNob3dSZWFzb25BbmRTdGF0ZW1lbnQoc3BlZWNoIDogQWJzdHJhY3RTcGVlY2gpe1xyXG4gICAgICAgIGlmKHRoaXMucmVhc29uICE9IDApe1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgc3BlYWtSZWFzb24oc3BlZWNoLCB0aGlzLnJlYXNvbik7XHJcblxyXG4gICAgICAgICAgICBpZihbTGVuZ3RoRXF1YWxpdHlSZWFzb24uY29uZ3J1ZW50X3RyaWFuZ2xlcywgQW5nbGVFcXVhbGl0eVJlYXNvbi5jb25ncnVlbnRfdHJpYW5nbGVzXS5pbmNsdWRlcyh0aGlzLnJlYXNvbikpe1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KCB0aGlzLmF1eGlsaWFyeVNoYXBlcy5ldmVyeSh4ID0+IHggaW5zdGFuY2VvZiBUcmlhbmdsZSkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IoY29uc3QgW2ksIHNoYXBlXSBvZiB0aGlzLmF1eGlsaWFyeVNoYXBlcy5lbnRyaWVzKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlLnNldE1vZGUoaSA9PSAwID8gTW9kZS50YXJnZXQxIDogTW9kZS50YXJnZXQyKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzbGVlcCg1MDApO1xyXG4gICAgICAgICAgICAgICAgfSAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IHNob3dBdXhpbGlhcnlTaGFwZXModGhpcy5yZWFzb24sIHRoaXMuYXV4aWxpYXJ5U2hhcGVzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXdhaXQgc3BlZWNoLndhaXRFbmQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJlYWRpbmcgPSB0aGlzLnJlYWRpbmcoKTtcclxuICAgICAgICBhd2FpdCBzcGVlY2guc3BlYWsocmVhZGluZy50ZXh0KTtcclxuXHJcbiAgICAgICAgaWYodGhpcyBpbnN0YW5jZW9mIFRyaWFuZ2xlQ29uZ3J1ZW5jZSl7XHJcbiAgICAgICAgICAgIGFzc2VydCggdGhpcy5zZWxlY3RlZFNoYXBlcy5ldmVyeSh4ID0+IHggaW5zdGFuY2VvZiBUcmlhbmdsZSkgKTtcclxuXHJcbiAgICAgICAgICAgIGZvcihjb25zdCBbaSwgc2hhcGVdIG9mIHRoaXMuc2VsZWN0ZWRTaGFwZXMuZW50cmllcygpKXtcclxuICAgICAgICAgICAgICAgIHNoYXBlLnNldE1vZGUoaSA9PSAwID8gTW9kZS50YXJnZXQxIDogTW9kZS50YXJnZXQyKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNsZWVwKDUwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgZm9yKGNvbnN0IHNoYXBlIG9mIHRoaXMuc2VsZWN0ZWRTaGFwZXMpe1xyXG4gICAgICAgICAgICAgICAgc2hhcGUuc2V0TW9kZShNb2RlLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzbGVlcCg1MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHNwZWVjaC53YWl0RW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UmVsYXRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnNldFJlbGF0aW9ucygpO1xyXG5cclxuICAgICAgICB0aGlzLmF1eGlsaWFyeVNoYXBlcy5mb3JFYWNoKHggPT4geC5zZXRSZWxhdGlvbnMoKSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNoYXBlcy5mb3JFYWNoKHggPT4geC5zZXRSZWxhdGlvbnMoKSk7XHJcblxyXG4gICAgICAgIHVzZWRSZWFzb25zLmFkZCh0aGlzLnJlYXNvbik7XHJcbiAgICAgICAgLy8gaWYodGhpcy5yZWFzb24gPT0gMCl7XHJcblxyXG4gICAgICAgIC8vICAgICBtc2coYHVzZWQgMCBbJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9XWApO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBlbHNle1xyXG5cclxuICAgICAgICAvLyAgICAgbXNnKGB1c2VkIFske3JlYXNvbk1zZyh0aGlzLnJlYXNvbil9XWApO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNwZWFrUmVhc29uKHNwZWVjaCA6IEFic3RyYWN0U3BlZWNoLCByZWFzb24gOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IHJlYXNvbl9tc2cgPSByZWFzb25Nc2cocmVhc29uKTtcclxuICAgIGF3YWl0IHNwZWVjaC5zcGVhayhyZWFzb25fbXNnKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNob3dBdXhpbGlhcnlTaGFwZXMocmVhc29uIDogbnVtYmVyLCBhdXhpbGlhcnlTaGFwZXMgOiBNYXRoRW50aXR5W10pe1xyXG4gICAgc3dpdGNoKHJlYXNvbil7XHJcbiAgICBjYXNlIFBhcmFsbGVsb2dyYW1SZWFzb24uZWFjaF9vcHBvc2l0ZV9zaWRlc19hcmVfZXF1YWw6XHJcbiAgICBjYXNlIFBhcmFsbGVsb2dyYW1SZWFzb24uZWFjaF9vcHBvc2l0ZV9zaWRlc19hcmVfcGFyYWxsZWw6XHJcbiAgICBjYXNlIFBhcmFsbGVsb2dyYW1SZWFzb24uZWFjaF9vcHBvc2l0ZV9hbmdsZXNfYXJlX2VxdWFsOlxyXG4gICAgY2FzZSBQYXJhbGxlbG9ncmFtUmVhc29uLmVhY2hfZGlhZ29uYWxfYmlzZWN0aW9uczpcclxuICAgICAgICBhc3NlcnQoYXV4aWxpYXJ5U2hhcGVzLmxlbmd0aCA9PSA0KTtcclxuXHJcbiAgICAgICAgZm9yKGNvbnN0IHNoYXBlIG9mIGF1eGlsaWFyeVNoYXBlcy5zbGljZSgwLCAyKSl7XHJcbiAgICAgICAgICAgIHNoYXBlLnNldE1vZGUoTW9kZS5kZXBlbmQxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgc2xlZXAoNTAwKTtcclxuXHJcbiAgICAgICAgZm9yKGNvbnN0IHNoYXBlIG9mIGF1eGlsaWFyeVNoYXBlcy5zbGljZSgyKSl7XHJcbiAgICAgICAgICAgIHNoYXBlLnNldE1vZGUoTW9kZS5kZXBlbmQyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgY2FzZSBQYXJhbGxlbG9ncmFtUmVhc29uLm9uZV9vcHBvc2l0ZV9zaWRlc19hcmVfcGFyYWxsZWxfYW5kX2VxdWFsOlxyXG4gICAgY2FzZSBSaG9tYnVzUmVhc29uLmFsbF9zaWRlc19hcmVfZXF1YWw6XHJcbiAgICAgICAgYXV4aWxpYXJ5U2hhcGVzLmZvckVhY2goeCA9PiB4LnNldE1vZGUoTW9kZS5kZXBlbmQpKTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICAgIGZvcihjb25zdCBzaGFwZSBvZiBhdXhpbGlhcnlTaGFwZXMpe1xyXG4gICAgICAgICAgICBzaGFwZS5zZXRNb2RlKE1vZGUuZGVwZW5kKTtcclxuICAgICAgICAgICAgYXdhaXQgc2xlZXAoNTAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgc2xlZXAoNTAwKTtcclxufVxyXG5cclxuXHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCJzaGFwZS50c1wiIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cInN0YXRlbWVudC50c1wiIC8+XHJcblxyXG5uYW1lc3BhY2UgcGxhbmVfdHMge1xyXG4vL1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNvcnRTaGFwZTxUPihzaGFwZXMgOiBUW10pIDogVFtdIHtcclxuICAgIHJldHVybiBzaGFwZXMuc2xpY2UoKS5zb3J0KChhOlQsIGI6VCkgPT4gKGEgYXMgU2hhcGUpLm9yZGVyIC0gKGIgYXMgU2hhcGUpLm9yZGVyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbGFzdFNoYXBlPFQ+KHNoYXBlcyA6IFRbXSkgOiBUIHtcclxuICAgIGNvbnN0IHNvcnRlZF9zaGFwZXMgPSBzb3J0U2hhcGU8VD4oc2hhcGVzKTtcclxuXHJcbiAgICByZXR1cm4gbGFzdChzb3J0ZWRfc2hhcGVzKTtcclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENvbnN0cmFpbnQgZXh0ZW5kcyBTdGF0ZW1lbnQge1xyXG4gICAgdGV4dEJsb2NrIDogVGV4dEJsb2NrIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHtzaGFwZXMgOiBNYXRoRW50aXR5W119KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFsbFNoYXBlcyhzaGFwZXMgOiBNYXRoRW50aXR5W10pe1xyXG4gICAgICAgIHN1cGVyLmdldEFsbFNoYXBlcyhzaGFwZXMpO1xyXG4gICAgICAgIGlmKHRoaXMudGV4dEJsb2NrICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHNoYXBlcy5wdXNoKHRoaXMudGV4dEJsb2NrKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHlDb25zdHJhaW50KHNoYXBlIDogU2hhcGUpeyAgICAgICAgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGRyYXcoKTogdm9pZCB7ICAgICAgICBcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExlbmd0aEVxdWFsaXR5Q29uc3RyYWludCBleHRlbmRzIENvbnN0cmFpbnQge1xyXG4gICAgcG9pbnQgOiBQb2ludDtcclxuICAgIGxlbmd0aFN5bWJvbEEgOiBMZW5ndGhTeW1ib2w7XHJcbiAgICBsZW5ndGhTeW1ib2xCIDogTGVuZ3RoU3ltYm9sO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgbGVuZ3RoU3ltYm9sQSA6IExlbmd0aFN5bWJvbCwgbGVuZ3RoU3ltYm9sQiA6IExlbmd0aFN5bWJvbCB9KXtcclxuICAgICAgICBjb25zdCBkYXRhID0gb2JqIGFzIGFueTtcclxuICAgICAgICBkYXRhLnNoYXBlcyA9IFsgb2JqLmxlbmd0aFN5bWJvbEEsIG9iai5sZW5ndGhTeW1ib2xCIF07XHJcbiAgICAgICAgc3VwZXIoZGF0YSk7XHJcbiAgICAgICAgY29uc3QgW2xlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEJdID0gc29ydFNoYXBlPExlbmd0aFN5bWJvbD4oWyBvYmoubGVuZ3RoU3ltYm9sQSwgb2JqLmxlbmd0aFN5bWJvbEIgXSk7XHJcbiAgICAgICAgbGV0IHBvaW50cyA9IFsgb2JqLmxlbmd0aFN5bWJvbEEsIG9iai5sZW5ndGhTeW1ib2xCIF0ubWFwKHggPT4gW3gucG9pbnRBLCB4LnBvaW50Ql0pLmZsYXQoKTtcclxuICAgICAgICB0aGlzLnBvaW50ID0gbGFzdFNoYXBlKHBvaW50cyk7XHJcbiAgICAgICAgdGhpcy5wb2ludC5hZGRDb25zdHJhaW50KHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmxlbmd0aFN5bWJvbEEgPSBvYmoubGVuZ3RoU3ltYm9sQTtcclxuICAgICAgICB0aGlzLmxlbmd0aFN5bWJvbEIgPSBvYmoubGVuZ3RoU3ltYm9sQjtcclxuXHJcbiAgICAgICAgdGhpcy5jYWxjKCk7XHJcblxyXG4gICAgICAgIExlbmd0aFN5bWJvbC5zZXRFcXVhbExlbmd0aEtpbmRzKHRoaXMuc2VsZWN0ZWRTaGFwZXMgYXMgTGVuZ3RoU3ltYm9sW10pO1xyXG4gICAgfVxyXG5cclxuICAgIG1ha2VPYmooKSA6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oc3VwZXIubWFrZU9iaigpLCB7XHJcbiAgICAgICAgICAgIGxlbmd0aFN5bWJvbEEgOiB0aGlzLmxlbmd0aFN5bWJvbEEudG9PYmooKSxcclxuICAgICAgICAgICAgbGVuZ3RoU3ltYm9sQiA6IHRoaXMubGVuZ3RoU3ltYm9sQi50b09iaigpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlcGVuZGVuY2llcygpIDogTWF0aEVudGl0eVtdIHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuZGVwZW5kZW5jaWVzKCkuY29uY2F0KFsgdGhpcy5sZW5ndGhTeW1ib2xBIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wb2ludC5jYWxjKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHlDb25zdHJhaW50KHNoYXBlIDogU2hhcGUpe1xyXG4gICAgICAgIGlmKHNoYXBlICE9IHRoaXMucG9pbnQpe1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5sZW5ndGhTeW1ib2xBLmxlbmd0aCgpO1xyXG4gICAgICAgIGNvbnN0IGFuY2hvciA9IHRoaXMuZ2V0QW5jaG9yKCk7XHJcbiAgICAgICAgaWYoYW5jaG9yID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIC8vIG1zZyhgbm8gYW5jaG9yIGZvciBsZW5ndGgtU3ltYm9sLUI6JHt0aGlzLmxlbmd0aFN5bWJvbEIuaWR9YClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGlyID0gdGhpcy5wb2ludC5wb3NpdGlvbi5zdWIoYW5jaG9yLnBvc2l0aW9uKS51bml0KCk7XHJcbiAgICAgICAgY29uc3QgdGhldGEgPSBNYXRoLmF0YW4yKGRpci55LCBkaXIueCk7XHJcbiAgICAgICAgY29uc3QgYWRqdXN0ZWRfcG9zaXRpb24gPSBhbmNob3IucG9zaXRpb24uYWRkKGRpci5tdWwobGVuZ3RoKSk7XHJcbiAgICAgICAgdGhpcy5wb2ludC5zZXRQb3NpdGlvbihhZGp1c3RlZF9wb3NpdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QW5jaG9yKCkgOiBQb2ludCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYodGhpcy5sZW5ndGhTeW1ib2xCLnBvaW50QSA9PSB0aGlzLnBvaW50KXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoU3ltYm9sQi5wb2ludEI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYodGhpcy5sZW5ndGhTeW1ib2xCLnBvaW50QiA9PSB0aGlzLnBvaW50KXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoU3ltYm9sQi5wb2ludEE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlYWRpbmcoKTogUmVhZGluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dFJlYWRpbmcoVFQoXCJNYWtlIHRoZSB0d28gbGluZSBzZWdtZW50cyBlcXVhbCBpbiBsZW5ndGguXCIpKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRSZWxhdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuc2V0UmVsYXRpb25zKCk7XHJcbiAgICAgICAgYWRkRXF1YWxMZW5ndGhzKHRoaXMubGVuZ3RoU3ltYm9sQSwgdGhpcy5sZW5ndGhTeW1ib2xCKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFuZ2xlRXF1YWxpdHlDb25zdHJhaW50IGV4dGVuZHMgQ29uc3RyYWludCB7XHJcbiAgICBlcXVhdGlvbiA6IEFwcCB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiB7c2hhcGVzIDogTWF0aEVudGl0eVtdfSl7XHJcbiAgICAgICAgc3VwZXIob2JqKTtcclxuXHJcbiAgICAgICAgY29uc3QgYW5nbGVzID0gdGhpcy5zZWxlY3RlZFNoYXBlcyBhcyBBbmdsZVtdO1xyXG4gICAgICAgIGlmKGFuZ2xlcy5ldmVyeSh4ID0+IHgubmFtZSAhPSBcIlwiKSl7XHJcbiAgICAgICAgICAgIGFzc2VydChhbmdsZXMubGVuZ3RoID09IDIpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gYCR7YW5nbGVzWzBdLm5hbWV9ID09ICR7YW5nbGVzWzFdLm5hbWV9YDtcclxuICAgICAgICAgICAgdGhpcy5lcXVhdGlvbiA9IHBhcnNlcl90cy5wYXJzZU1hdGgodGV4dCkgYXMgQXBwO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy50ZXh0QmxvY2sgPSBtYWtlRXF1YXRpb25UZXh0QmxvY2sodGhpcywgdGhpcy5lcXVhdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICBBbmdsZS5zZXRFcXVhbEFuZ2xlTWFya3MoYW5nbGVzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UmVsYXRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnNldFJlbGF0aW9ucygpO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnNlbGVjdGVkU2hhcGVzLmxlbmd0aCA9PSAyICYmIHRoaXMuc2VsZWN0ZWRTaGFwZXMuZXZlcnkoeCA9PiB4IGluc3RhbmNlb2YgQW5nbGUpKTtcclxuICAgICAgICBjb25zdCBbYW5nbGVBLCBhbmdsZUJdID0gdGhpcy5zZWxlY3RlZFNoYXBlcyBhcyBBbmdsZVtdO1xyXG5cclxuICAgICAgICBhZGRFcXVhbEFuZ2xlcyhhbmdsZUEsIGFuZ2xlQik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZGluZygpIDogUmVhZGluZyB7XHJcbiAgICAgICAgLy8gbXNnKGBlbXB0eSByZWFkaW5nOiR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfWApO1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVhZGluZyh0aGlzLCBcIlwiLCBbXSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmFic3RyYWN0IGNsYXNzIExpbmVDb25zdHJhaW50IGV4dGVuZHMgQ29uc3RyYWludCB7XHJcbiAgICBsaW5lQSA6IEFic3RyYWN0TGluZTtcclxuICAgIGxpbmVCIDogTGluZUJ5UG9pbnRzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgbGluZUEgOiBBYnN0cmFjdExpbmUsIGxpbmVCIDogTGluZUJ5UG9pbnRzIH0pe1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBvYmogYXMgYW55O1xyXG4gICAgICAgIGRhdGEuc2hhcGVzID0gWyBvYmoubGluZUEsIG9iai5saW5lQiBdO1xyXG4gICAgICAgIHN1cGVyKGRhdGEpO1xyXG4gICAgICAgIGFzc2VydChvYmoubGluZUEub3JkZXIgPCBvYmoubGluZUIub3JkZXIpO1xyXG4gICAgICAgIHRoaXMubGluZUEgPSBvYmoubGluZUE7XHJcbiAgICAgICAgdGhpcy5saW5lQiA9IG9iai5saW5lQjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFBhcmFsbGVsUGVycGVuZGljdWxhckNvbnN0cmFpbnQgZXh0ZW5kcyBMaW5lQ29uc3RyYWludCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiB7IGxpbmVBIDogQWJzdHJhY3RMaW5lLCBsaW5lQiA6IExpbmVCeVBvaW50cyB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG5cclxuICAgICAgICB0aGlzLmxpbmVCLnBvaW50Qi5hZGRDb25zdHJhaW50KHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY2FsYygpO1xyXG4gICAgfVxyXG5cclxuICAgIG1ha2VPYmooKSA6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oc3VwZXIubWFrZU9iaigpLCB7XHJcbiAgICAgICAgICAgIGxpbmVBIDogdGhpcy5saW5lQS50b09iaigpLFxyXG4gICAgICAgICAgICBsaW5lQiA6IHRoaXMubGluZUIudG9PYmooKSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkZXBlbmRlbmNpZXMoKSA6IE1hdGhFbnRpdHlbXSB7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRlcGVuZGVuY2llcygpLmNvbmNhdChbIHRoaXMubGluZUEsIHRoaXMubGluZUIucG9pbnRBIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5saW5lQi5wb2ludEIuY2FsYygpOyAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHlDb25zdHJhaW50KHNoYXBlIDogU2hhcGUpeyAgXHJcbiAgICAgICAgYXNzZXJ0KHNoYXBlID09IHRoaXMubGluZUIucG9pbnRCKTtcclxuICAgICAgICBjb25zdCBBQiA9IHRoaXMubGluZUIucG9pbnRCLnN1Yih0aGlzLmxpbmVCLnBvaW50QSk7XHJcbiAgICAgICAgbGV0IG5ld0FCIDogVmVjMjtcclxuICAgICAgICBpZih0aGlzIGluc3RhbmNlb2YgUGFyYWxsZWxDb25zdHJhaW50KXtcclxuICAgICAgICAgICAgbmV3QUIgPSB0aGlzLmxpbmVBLmUucHJvamVjdChBQik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIG5ld0FCID0gdGhpcy5saW5lQS5lLnJvdDkwKCkucHJvamVjdChBQik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwb3NpdGlvbkIgPSB0aGlzLmxpbmVCLnBvaW50QS5wb3NpdGlvbi5hZGQoIG5ld0FCICk7XHJcbiAgICAgICAgdGhpcy5saW5lQi5wb2ludEIuc2V0UG9zaXRpb24ocG9zaXRpb25CKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBhcmFsbGVsQ29uc3RyYWludCBleHRlbmRzIFBhcmFsbGVsUGVycGVuZGljdWxhckNvbnN0cmFpbnQge1xyXG4gICAgc2V0UmVsYXRpb25zKCl7XHJcbiAgICAgICAgc3VwZXIuc2V0UmVsYXRpb25zKCk7XHJcbiAgICAgICAgYWRkUGFyYWxsZWxMaW5lcyh0aGlzLmxpbmVBLCB0aGlzLmxpbmVCKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBlcnBlbmRpY3VsYXJDb25zdHJhaW50IGV4dGVuZHMgUGFyYWxsZWxQZXJwZW5kaWN1bGFyQ29uc3RyYWludCB7XHJcbiAgICBzZXRSZWxhdGlvbnMoKXtcclxuICAgICAgICBzdXBlci5zZXRSZWxhdGlvbnMoKTtcclxuICAgICAgICBhZGRQZXJwZW5kaWN1bGFyUGFpcnModGhpcy5saW5lQSwgdGhpcy5saW5lQik7XHJcbiAgICB9XHJcbn1cclxuXHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCJzaGFwZS50c1wiIC8+XHJcblxyXG5uYW1lc3BhY2UgcGxhbmVfdHMge1xyXG4vL1xyXG5leHBvcnQgY29uc3QgVFQgPSBpMThuX3RzLlRUO1xyXG5leHBvcnQgY29uc3QgVFRzID0gaTE4bl90cy5UVHM7XHJcblxyXG5leHBvcnQgY2xhc3MgQW5nbGUgZXh0ZW5kcyBTaGFwZSB7XHJcbiAgICBzdGF0aWMgcmFkaXVzMVBpeCA9IDIwO1xyXG4gICAgc3RhdGljIHJhZGl1czEgOiBudW1iZXI7XHJcbiAgICBzdGF0aWMgbnVtTWFya3MgPSA1O1xyXG4gICAgc3RhdGljIFJpZ2h0QW5nbGVNYXJrID0gMDtcclxuICAgIHN0YXRpYyBEZWZhdWx0QW5nbGVNYXJrID0gMTtcclxuICAgIHN0YXRpYyBvdXRlckFuZ2xlU2NhbGUgPSAyO1xyXG5cclxuICAgIGFuZ2xlTWFyayEgIDogbnVtYmVyO1xyXG4gICAgbGluZUEgICAgICAgOiBBYnN0cmFjdExpbmU7XHJcbiAgICBkaXJlY3Rpb25BICA6IG51bWJlcjtcclxuICAgIGVBICAgICAgICAgIDogVmVjMjtcclxuXHJcbiAgICBsaW5lQiAgICAgICA6IEFic3RyYWN0TGluZTtcclxuICAgIGRpcmVjdGlvbkIgIDogbnVtYmVyO1xyXG4gICAgZUIgICAgICAgICAgOiBWZWMyO1xyXG5cclxuICAgIGludGVyc2VjdGlvbiEgOiBQb2ludDtcclxuXHJcbiAgICBvdXRlckFuZ2xlIDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgYW5nbGVNYXJrIDogbnVtYmVyLCBsaW5lQSA6IEFic3RyYWN0TGluZSwgZGlyZWN0aW9uQSA6IG51bWJlciwgbGluZUIgOiBBYnN0cmFjdExpbmUsIGRpcmVjdGlvbkIgOiBudW1iZXIgfSl7XHJcbiAgICAgICAgc3VwZXIob2JqKTtcclxuICAgICAgICBcclxuICAgICAgICBhc3NlcnQob2JqLmFuZ2xlTWFyayAhPSB1bmRlZmluZWQpO1xyXG4gICAgICAgIHRoaXMuc2V0QW5nbGVNYXJrKG9iai5hbmdsZU1hcmspO1xyXG5cclxuICAgICAgICB0aGlzLmxpbmVBICAgICAgID0gb2JqLmxpbmVBO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uQSAgPSBvYmouZGlyZWN0aW9uQTtcclxuXHJcbiAgICAgICAgdGhpcy5saW5lQiAgICAgICA9IG9iai5saW5lQjtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbkIgID0gb2JqLmRpcmVjdGlvbkI7XHJcblxyXG4gICAgICAgIHRoaXMuZUEgICAgICAgICAgPSB0aGlzLmxpbmVBLmUubXVsKHRoaXMuZGlyZWN0aW9uQSk7XHJcbiAgICAgICAgdGhpcy5lQiAgICAgICAgICA9IHRoaXMubGluZUIuZS5tdWwodGhpcy5kaXJlY3Rpb25CKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmludGVyc2VjdGlvbiA9IGdldENvbW1vblBvaW50T2ZMaW5lcyh0aGlzLmxpbmVBLCB0aGlzLmxpbmVCKSE7XHJcbiAgICAgICAgaWYodGhpcy5pbnRlcnNlY3Rpb24gPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZU9iaigpIDogYW55IHtcclxuICAgICAgICBsZXQgb2JqID0gT2JqZWN0LmFzc2lnbihzdXBlci5tYWtlT2JqKCksIHtcclxuICAgICAgICAgICAgYW5nbGVNYXJrICA6IHRoaXMuYW5nbGVNYXJrLFxyXG4gICAgICAgICAgICBsaW5lQSAgICAgIDogdGhpcy5saW5lQS50b09iaigpLFxyXG4gICAgICAgICAgICBkaXJlY3Rpb25BIDogdGhpcy5kaXJlY3Rpb25BLFxyXG4gICAgICAgICAgICBsaW5lQiAgICAgIDogdGhpcy5saW5lQi50b09iaigpLFxyXG4gICAgICAgICAgICBkaXJlY3Rpb25CIDogdGhpcy5kaXJlY3Rpb25CXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UHJvcGVydGllcygpe1xyXG4gICAgICAgIHJldHVybiBzdXBlci5nZXRQcm9wZXJ0aWVzKCkuY29uY2F0KFtcclxuICAgICAgICAgICAgXCJhbmdsZU1hcmtcIlxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldE5hbWUobmFtZSA6IHN0cmluZyl7XHJcbiAgICAgICAgc3VwZXIuc2V0TmFtZShuYW1lKTtcclxuICAgICAgICB0aGlzLnNldENhcHRpb25Qb3NpdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEFuZ2xlTWFyayhhbmdsZV9tYXJrIDogbnVtYmVyKXtcclxuICAgICAgICB0aGlzLmFuZ2xlTWFyayA9IGFuZ2xlX21hcms7XHJcbiAgICAgICAgaWYoYW5nbGVfbWFyayA9PSBBbmdsZS5SaWdodEFuZ2xlTWFyayl7XHJcbiAgICAgICAgICAgIHJpZ2h0QW5nbGVzLmFkZCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNSaWdodEFuZ2xlKCkgOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hbmdsZU1hcmsgPT0gQW5nbGUuUmlnaHRBbmdsZU1hcms7XHJcbiAgICB9XHJcblxyXG4gICAgZGVwZW5kZW5jaWVzKCkgOiBNYXRoRW50aXR5W10ge1xyXG4gICAgICAgIHJldHVybiBbIHRoaXMubGluZUEsIHRoaXMubGluZUIgXTtcclxuICAgIH1cclxuXHJcbiAgICBzdGFydEVuZEFuZ2xlKCkgOiBbbnVtYmVyLCBudW1iZXJdIHtcclxuICAgICAgICBjb25zdCBlMSA9IHRoaXMubGluZUEuZS5tdWwodGhpcy5kaXJlY3Rpb25BKTtcclxuICAgICAgICBjb25zdCBlMiA9IHRoaXMubGluZUIuZS5tdWwodGhpcy5kaXJlY3Rpb25CKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBNYXRoLmF0YW4yKGUxLnksIGUxLngpO1xyXG4gICAgICAgIGNvbnN0IGVuZCAgID0gTWF0aC5hdGFuMihlMi55LCBlMi54KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFtzdGFydCwgZW5kXTtcclxuICAgIH1cclxuXHJcbiAgICByYWRpdXNQbHVzKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0ZXJBbmdsZSA/IEFuZ2xlLm91dGVyQW5nbGVTY2FsZSAqIEFuZ2xlLnJhZGl1czEgOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGlzTmVhcihwb3NpdGlvbiA6IFZlYzIpIDogYm9vbGVhbiB7ICBcclxuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHRoaXMuaW50ZXJzZWN0aW9uLnBvc2l0aW9uLmRpc3RhbmNlKHBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgbGV0IHJhZGl1cyA9IEFuZ2xlLnJhZGl1czEgKiAxLjI7XHJcblxyXG4gICAgICAgIGxldCBuZWFyX3JhZGl1cztcclxuICAgICAgICBpZih0aGlzLm91dGVyQW5nbGUpe1xyXG4gICAgICAgICAgICBjb25zdCBvdXRlcl9yYWRpdXMgPSByYWRpdXMgKyB0aGlzLnJhZGl1c1BsdXMoKTtcclxuICAgICAgICAgICAgbmVhcl9yYWRpdXMgPSAocmFkaXVzIDw9IGRpc3RhbmNlICYmIGRpc3RhbmNlIDwgb3V0ZXJfcmFkaXVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgbmVhcl9yYWRpdXMgPSBkaXN0YW5jZSA8PSByYWRpdXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihuZWFyX3JhZGl1cyl7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSB0aGlzLnN0YXJ0RW5kQW5nbGUoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHRoZSB2ZWN0b3IgZnJvbSB0aGUgaW50ZXJzZWN0aW9uIHRvIHBvc2l0aW9uLlxyXG4gICAgICAgICAgICBjb25zdCB2ID0gcG9zaXRpb24uc3ViKHRoaXMuaW50ZXJzZWN0aW9uLnBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRoZXRhID0gTWF0aC5hdGFuMih2LnksIHYueCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGluUmFuZ2Uoc3RhcnQsIHRoZXRhLCBlbmQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGluUmFuZ2Uoc3RhcnQsIHRoZXRhLCBlbmQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGMoKXsgICAgICAgXHJcbiAgICAgICAgY29uc3QgaWR4ID0gVmlldy5jdXJyZW50LnNoYXBlcy5pbmRleE9mKHRoaXMpO1xyXG4gICAgICAgIGxldCBzaGFwZXMgPSAoaWR4ID09IC0xID8gVmlldy5jdXJyZW50LnNoYXBlcyA6IFZpZXcuY3VycmVudC5zaGFwZXMuc2xpY2UoMCwgaWR4KSk7XHJcblxyXG4gICAgICAgIHRoaXMub3V0ZXJBbmdsZSA9IHNoYXBlcy5zb21lKHggPT4geCBpbnN0YW5jZW9mIEFuZ2xlICYmIHRoaXMuaW50ZXJzZWN0aW9uID09IHguaW50ZXJzZWN0aW9uICYmICh0aGlzLmNvbW1vbkxpbmVBQSh4KSB8fCB0aGlzLmNvbW1vbkxpbmVCQih4KSkgKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRDYXB0aW9uUG9zaXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3KCkgOiB2b2lkIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5hbmdsZU1hcmsgPCBBbmdsZS5udW1NYXJrcyk7XHJcblxyXG4gICAgICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IHRoaXMuc3RhcnRFbmRBbmdsZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNlbnRlciA9IHRoaXMuaW50ZXJzZWN0aW9uLnBvc2l0aW9uO1xyXG5cclxuICAgICAgICBpZih0aGlzLmlzUmlnaHRBbmdsZSgpKXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHZ4ID0gKG5ldyBWZWMyKEFuZ2xlLnJhZGl1czEsIDApKS5yb3Qoc3RhcnQpO1xyXG4gICAgICAgICAgICBjb25zdCB2eSA9IChuZXcgVmVjMihBbmdsZS5yYWRpdXMxLCAwKSkucm90KGVuZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9ucyA6IFZlYzJbXSA9IFtcclxuICAgICAgICAgICAgICAgIGNlbnRlciwgY2VudGVyLmFkZCh2eCksIGNlbnRlci5hZGQodngpLmFkZCh2eSksIGNlbnRlci5hZGQodnkpXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIFZpZXcuY3VycmVudC5jYW52YXMuZHJhd1BvbHlnb24odGhpcywgcG9zaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlcyA9IFsgMSwgMC42LCAxLjQsIDIuMCwgMi41LCAzLjBdO1xyXG5cclxuICAgICAgICAgICAgZm9yKGNvbnN0IGkgb2YgcmFuZ2UodGhpcy5hbmdsZU1hcmspKXsgICAgXHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoaSA8IHNjYWxlcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gQW5nbGUucmFkaXVzMSAqIHNjYWxlc1tpXSArIHRoaXMucmFkaXVzUGx1cygpO1xyXG4gICAgICAgICAgICAgICAgVmlldy5jdXJyZW50LmNhbnZhcy5kcmF3QXJjKHRoaXMsIGNlbnRlciwgcmFkaXVzLCBzdGFydCwgZW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRDYXB0aW9uUG9zaXRpb24oKXtcclxuICAgICAgICBpZih0aGlzLmNhcHRpb24gPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IFtzdGFydCwgZW5kXSA9IHRoaXMuc3RhcnRFbmRBbmdsZSgpO1xyXG4gICAgICAgIGlmKHN0YXJ0ID4gZW5kKXtcclxuICAgICAgICAgICAgZW5kICs9IDIgKiBNYXRoLlBJO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtaWRfYW5nbGUgPSAoc3RhcnQgKyBlbmQpIC8gMjtcclxuICAgICAgICBjb25zdCBjZW50ZXIgPSB0aGlzLmludGVyc2VjdGlvbi5wb3NpdGlvbjtcclxuXHJcbiAgICAgICAgY29uc3QgcmFkaXVzID0gQW5nbGUucmFkaXVzMSAqIDIgKyB0aGlzLnJhZGl1c1BsdXMoKTtcclxuXHJcbiAgICAgICAgY29uc3QgZHggPSByYWRpdXMgKiBNYXRoLmNvcyhtaWRfYW5nbGUpO1xyXG4gICAgICAgIGNvbnN0IGR5ID0gcmFkaXVzICogTWF0aC5zaW4obWlkX2FuZ2xlKTtcclxuICAgICAgICBjb25zdCBjYXB0aW9uX2NlbnRlciA9IGNlbnRlci5hZGQobmV3IFZlYzIoZHgsIGR5KSk7XHJcbiAgICAgICAgY29uc3QgY2FwdGlvbl9jZW50ZXJfcGl4ID0gVmlldy5jdXJyZW50LnRvUGl4UG9zaXRpb24oY2FwdGlvbl9jZW50ZXIpO1xyXG5cclxuICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5jYXB0aW9uLmRpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBjb25zdCB4ID0gY2FwdGlvbl9jZW50ZXJfcGl4LnggLSAwLjUgKiByZWN0LndpZHRoO1xyXG4gICAgICAgIGNvbnN0IHkgPSBjYXB0aW9uX2NlbnRlcl9waXgueSAtIDAuNSAqIHJlY3QuaGVpZ2h0O1xyXG5cclxuICAgICAgICB0aGlzLmNhcHRpb24uZGl2LnN0eWxlLmxlZnQgPSBgJHt4fXB4YDtcclxuICAgICAgICB0aGlzLmNhcHRpb24uZGl2LnN0eWxlLnRvcCAgPSBgJHt5fXB4YDtcclxuICAgIH1cclxuXHJcbiAgICByZWFkaW5nKCkgOiBSZWFkaW5nIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJlYWRpbmcodGhpcywgVFQoJ0RyYXcgYW4gYW5nbGUuJyksIFtdKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRSZWxhdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuc2V0UmVsYXRpb25zKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGtleSA9IGFuZ2xlS2V5KHRoaXMubGluZUEsIHRoaXMuZGlyZWN0aW9uQSwgdGhpcy5saW5lQiwgdGhpcy5kaXJlY3Rpb25CLCB0aGlzLmludGVyc2VjdGlvbik7XHJcbiAgICAgICAgYW5nbGVNYXAuc2V0KGtleSwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgbGluZXMoKSA6IFtBYnN0cmFjdExpbmUsIEFic3RyYWN0TGluZV0ge1xyXG4gICAgICAgIHJldHVybiBbdGhpcy5saW5lQSwgdGhpcy5saW5lQl07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHNldEVxdWFsQW5nbGVNYXJrcyhhbmdsZXMgOiBBbmdsZVtdKXtcclxuICAgICAgICBhc3NlcnQoYW5nbGVzLmxlbmd0aCA9PSAyICYmIGFuZ2xlcy5ldmVyeSh4ID0+IHggaW5zdGFuY2VvZiBBbmdsZSkpO1xyXG5cclxuICAgICAgICBjb25zdCBuYW1lZF9hbmdsZSA9IGFuZ2xlcy5maW5kKHggPT4geC5uYW1lICE9IFwiXCIpO1xyXG4gICAgICAgIGlmKG5hbWVkX2FuZ2xlICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGZvcihjb25zdCBhbmdsZSBvZiBhbmdsZXMpe1xyXG4gICAgICAgICAgICAgICAgaWYoYW5nbGUgIT0gbmFtZWRfYW5nbGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ2xlLnNldEFuZ2xlTWFyayhBbmdsZS5EZWZhdWx0QW5nbGVNYXJrKTtcclxuICAgICAgICAgICAgICAgICAgICBhbmdsZS5zZXROYW1lKG5hbWVkX2FuZ2xlLm5hbWUpOyAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBmb3IoY29uc3QgW2FuZ2xlMSwgYW5nbGUyXSBvZiBwZXJtdXRhdGlvbihbYW5nbGVzWzBdLCBhbmdsZXNbMV1dKSl7XHJcbiAgICAgICAgICAgIGlmKGFuZ2xlMS5pbnRlcnNlY3Rpb24gPT0gYW5nbGUyLmludGVyc2VjdGlvbil7XHJcbiAgICAgICAgICAgICAgICBpZihhbmdsZTEubGluZUEgPT0gYW5nbGUyLmxpbmVCICYmIGFuZ2xlMS5saW5lQiA9PSBhbmdsZTIubGluZUEpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBtc2coXCJBbmdsZSBFcXVhbGl0eTpTaW5jZSB0aGUgdHdvIGFuZ2xlcyBiaXNlY3QgdGhlIGxpbmUsIHRoZXkgYXJlIHJpZ2h0IGFuZ2xlcy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5nbGVzLmZvckVhY2goeCA9PiB4LnNldEFuZ2xlTWFyayhBbmdsZS5SaWdodEFuZ2xlTWFyaykpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoYW5nbGVzLnNvbWUoeCA9PiB4LmlzUmlnaHRBbmdsZSgpKSl7XHJcbiAgICAgICAgICAgIC8vIG1zZyhcIkFuZ2xlIEVxdWFsaXR5OlNpbmNlIG9uZSBhbmdsZSBpcyBhIHJpZ2h0IGFuZ2xlLCB0aGUgb3RoZXIgYW5nbGUgaXMgYWxzbyBhIHJpZ2h0IGFuZ2xlLlwiKTtcclxuICAgICAgICAgICAgYW5nbGVzLmZvckVhY2goeCA9PiB4LnNldEFuZ2xlTWFyayhBbmdsZS5SaWdodEFuZ2xlTWFyaykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbWF4X2FuZ2xlTWFyayA9IE1hdGgubWF4KC4uLiBhbmdsZXMubWFwKHggPT4geC5hbmdsZU1hcmspKTtcclxuICAgICAgICAgICAgaWYobWF4X2FuZ2xlTWFyayAhPSBBbmdsZS5EZWZhdWx0QW5nbGVNYXJrKXtcclxuICAgICAgICAgICAgICAgIGFuZ2xlcy5mb3JFYWNoKHggPT4geC5hbmdsZU1hcmsgPSBtYXhfYW5nbGVNYXJrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsX2FuZ2xlcyA9IFZpZXcuY3VycmVudC5hbGxTaGFwZXMoKS5maWx0ZXIoeCA9PiB4IGluc3RhbmNlb2YgQW5nbGUpO1xyXG4gICAgICAgICAgICAgICAgaWYoYWxsX2FuZ2xlcy5sZW5ndGggPT0gMCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFuZ2xlcy5mb3JFYWNoKHggPT4geC5hbmdsZU1hcmsgPSBBbmdsZS5EZWZhdWx0QW5nbGVNYXJrICsgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXhfYWxsX2FuZ2xlTWFyayA9IE1hdGgubWF4KC4uLiBhbGxfYW5nbGVzLm1hcCh4ID0+IHguYW5nbGVNYXJrKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5nbGVzLmZvckVhY2goeCA9PiB4LmFuZ2xlTWFyayA9IG1heF9hbGxfYW5nbGVNYXJrICsgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29tbW9uTGluZUFBKGFuZ2xlIDogQW5nbGUpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGluZUEgPT0gYW5nbGUubGluZUEgJiYgdGhpcy5kaXJlY3Rpb25BID09IGFuZ2xlLmRpcmVjdGlvbkE7XHJcbiAgICB9XHJcblxyXG4gICAgY29tbW9uTGluZUNvbm5lY3QoYW5nbGUgOiBBbmdsZSkgOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5saW5lQSA9PSBhbmdsZS5saW5lQiAmJiB0aGlzLmRpcmVjdGlvbkEgPT0gLSBhbmdsZS5kaXJlY3Rpb25CO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbW1vbkxpbmVCQShhbmdsZSA6IEFuZ2xlKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxpbmVCID09IGFuZ2xlLmxpbmVBICYmIHRoaXMuZGlyZWN0aW9uQiA9PSBhbmdsZS5kaXJlY3Rpb25BO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbW1vbkxpbmVCQihhbmdsZSA6IEFuZ2xlKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxpbmVCID09IGFuZ2xlLmxpbmVCICYmIHRoaXMuZGlyZWN0aW9uQiA9PSBhbmdsZS5kaXJlY3Rpb25CO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIERpbWVuc2lvbkxpbmUgZXh0ZW5kcyBTaGFwZSB7XHJcbiAgICBwb2ludEEgOiBQb2ludDtcclxuICAgIHBvaW50QiA6IFBvaW50O1xyXG4gICAgc2hpZnQgIDogbnVtYmVyO1xyXG5cclxuICAgIG5vcm1hbCEgOiBWZWMyO1xyXG4gICAgc2hpZnRWZWMhIDogVmVjMjtcclxuICAgIGNlbnRlciEgOiBWZWMyO1xyXG4gICAgdGV4dCA6IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqIDogeyBjYXB0aW9uIDogVGV4dEJsb2NrLCBwb2ludEEgOiBQb2ludCwgcG9pbnRCIDogUG9pbnQsIHNoaWZ0IDogbnVtYmVyIH0pe1xyXG4gICAgICAgIHN1cGVyKG9iaik7XHJcbiAgICAgICAgdGhpcy5wb2ludEEgICAgPSBvYmoucG9pbnRBO1xyXG4gICAgICAgIHRoaXMucG9pbnRCICAgID0gb2JqLnBvaW50QjtcclxuICAgICAgICB0aGlzLnNoaWZ0ICAgICA9IG9iai5zaGlmdDtcclxuXHJcbiAgICAgICAgdGhpcy5jYWxjKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZU9iaigpIDogYW55IHtcclxuICAgICAgICBsZXQgb2JqID0gT2JqZWN0LmFzc2lnbihzdXBlci5tYWtlT2JqKCksIHtcclxuICAgICAgICAgICAgcG9pbnRBIDogdGhpcy5wb2ludEEudG9PYmooKSxcclxuICAgICAgICAgICAgcG9pbnRCIDogdGhpcy5wb2ludEIudG9PYmooKSxcclxuICAgICAgICAgICAgc2hpZnQgIDogdGhpcy5zaGlmdFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFNoaWZ0KHNoaWZ0IDogbnVtYmVyKXtcclxuICAgICAgICB0aGlzLnNoaWZ0ID0gc2hpZnQ7XHJcbiAgICAgICAgdGhpcy5jYWxjKCk7XHJcbiAgICAgICAgVmlldy5jdXJyZW50LmRpcnR5ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQcm9wZXJ0aWVzKCl7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldFByb3BlcnRpZXMoKS5jb25jYXQoW1xyXG4gICAgICAgICAgICBcInRleHRcIlxyXG4gICAgICAgIF0pXHJcbiAgICB9XHJcblxyXG4gICAgZGVwZW5kZW5jaWVzKCkgOiBNYXRoRW50aXR5W10ge1xyXG4gICAgICAgIHJldHVybiBbIHRoaXMucG9pbnRBLCB0aGlzLnBvaW50QiBdO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGMoKXsgICAgICAgIFxyXG4gICAgICAgIGNvbnN0IEEgPSB0aGlzLnBvaW50QS5wb3NpdGlvbjtcclxuICAgICAgICBjb25zdCBCID0gdGhpcy5wb2ludEIucG9zaXRpb247XHJcbiAgICAgICAgY29uc3QgQUIgPSBCLnN1YihBKTtcclxuXHJcbiAgICAgICAgdGhpcy5ub3JtYWwgPSBBQi5yb3Q5MCgpLnVuaXQoKTtcclxuICAgICAgICB0aGlzLnNoaWZ0VmVjID0gdGhpcy5ub3JtYWwubXVsKHRoaXMuc2hpZnQpO1xyXG4gICAgICAgIHRoaXMuY2VudGVyID0gQS5hZGQoQikubXVsKDAuNSkuYWRkKHRoaXMuc2hpZnRWZWMpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUNhcHRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVDYXB0aW9uKCl7IFxyXG4gICAgICAgIGNvbnN0IFt0ZXh0X3dpZHRoLCB0ZXh0X2hlaWdodF0gPSB0aGlzLmNhcHRpb24hLmdldFNpemUoKTtcclxuICAgICAgICBjb25zdCB4ID0gdGhpcy5jZW50ZXIueCAtIGZyb21YUGl4U2NhbGUoMC41ICogdGV4dF93aWR0aCk7XHJcbiAgICAgICAgY29uc3QgeSA9IHRoaXMuY2VudGVyLnkgKyBmcm9tWVBpeFNjYWxlKDAuNSAqIHRleHRfaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgdGhpcy5jYXB0aW9uIS5zZXRUZXh0UG9zaXRpb24oeCwgeSk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdygpIDogdm9pZCB7XHJcbiAgICAgICAgaWYodGhpcy5jYXB0aW9uID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBBID0gdGhpcy5wb2ludEEucG9zaXRpb247XHJcbiAgICAgICAgY29uc3QgQiA9IHRoaXMucG9pbnRCLnBvc2l0aW9uO1xyXG4gICAgICAgIGNvbnN0IEFCID0gQi5zdWIoQSk7XHJcblxyXG4gICAgICAgIGNvbnN0IEFfc2hpZnQgPSBBLmFkZCh0aGlzLnNoaWZ0VmVjKTtcclxuICAgICAgICBjb25zdCBCX3NoaWZ0ID0gQi5hZGQodGhpcy5zaGlmdFZlYyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNoaWZ0X3BpeF9sZW4gPSBWaWV3LmN1cnJlbnQudG9YUGl4U2NhbGUoTWF0aC5hYnModGhpcy5zaGlmdCkpO1xyXG4gICAgICAgIGNvbnN0IHJhdGlvID0gKHNoaWZ0X3BpeF9sZW4gKyA1KSAvIHNoaWZ0X3BpeF9sZW47XHJcbiAgICAgICAgY29uc3Qgc2hpZnRfcGx1cyA9IHRoaXMuc2hpZnRWZWMubXVsKHJhdGlvKTtcclxuICAgICAgICBjb25zdCBBX3NoaWZ0X3BsdXMgPSBBLmFkZChzaGlmdF9wbHVzKTtcclxuICAgICAgICBjb25zdCBCX3NoaWZ0X3BsdXMgPSBCLmFkZChzaGlmdF9wbHVzKTtcclxuXHJcbiAgICAgICAgY29uc3QgQV9zaGlmdF9pbnNpZGUgPSBBX3NoaWZ0LmFkZChBQi5tdWwoIDEvMykpO1xyXG4gICAgICAgIGNvbnN0IEJfc2hpZnRfaW5zaWRlID0gQl9zaGlmdC5hZGQoQUIubXVsKC0xLzMpKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGVncmVlID0gdG9EZWdyZWUoIE1hdGguYXRhbjIoLUFCLnksIEFCLngpICk7XHJcbiAgICAgICAgdGhpcy5jYXB0aW9uLnNldFJvdGF0aW9uKGRlZ3JlZSk7XHJcblxyXG4gICAgICAgIFZpZXcuY3VycmVudC5jYW52YXMuZHJhd0xpbmUodGhpcywgQSwgQV9zaGlmdF9wbHVzKTtcclxuICAgICAgICBWaWV3LmN1cnJlbnQuY2FudmFzLmRyYXdMaW5lKHRoaXMsIEIsIEJfc2hpZnRfcGx1cyk7XHJcblxyXG4gICAgICAgIFZpZXcuY3VycmVudC5jYW52YXMuZHJhd0xpbmUodGhpcywgQV9zaGlmdCwgQV9zaGlmdF9pbnNpZGUpO1xyXG4gICAgICAgIFZpZXcuY3VycmVudC5jYW52YXMuZHJhd0xpbmUodGhpcywgQl9zaGlmdCwgQl9zaGlmdF9pbnNpZGUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTGVuZ3RoU3ltYm9sIGV4dGVuZHMgU2hhcGUge1xyXG4gICAgc3RhdGljIERlZmF1bHRMZW5ndGhLaW5kID0gMDtcclxuXHJcbiAgICBwb2ludEEgOiBQb2ludDtcclxuICAgIHBvaW50QiA6IFBvaW50O1xyXG4gICAgbGVuZ3RoS2luZCA6IG51bWJlcjtcclxuICAgIGxpbmU/IDogQWJzdHJhY3RMaW5lO1xyXG4gICAgY2lyY2xlPyA6IENpcmNsZUJ5UmFkaXVzIHwgQXJjQnlSYWRpdXM7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqIDogeyBwb2ludEEgOiBQb2ludCwgcG9pbnRCIDogUG9pbnQsIGxlbmd0aEtpbmQgOiBudW1iZXIgfSl7XHJcbiAgICAgICAgc3VwZXIob2JqKTtcclxuXHJcbiAgICAgICAgaWYob2JqLmxlbmd0aEtpbmQgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoXCJsZW5ndGgga2luZCBpcyB1bmRlZmluZWQuXCIpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBvaW50QSA9IG9iai5wb2ludEE7XHJcbiAgICAgICAgdGhpcy5wb2ludEIgPSBvYmoucG9pbnRCO1xyXG4gICAgICAgIHRoaXMubGVuZ3RoS2luZCA9IG9iai5sZW5ndGhLaW5kO1xyXG4gICAgfVxyXG5cclxuICAgIG1ha2VPYmooKSA6IGFueSB7XHJcbiAgICAgICAgbGV0IG9iaiA9IE9iamVjdC5hc3NpZ24oc3VwZXIubWFrZU9iaigpLCB7XHJcbiAgICAgICAgICAgIHBvaW50QSA6IHRoaXMucG9pbnRBLnRvT2JqKCksXHJcbiAgICAgICAgICAgIHBvaW50QiA6IHRoaXMucG9pbnRCLnRvT2JqKCksXHJcbiAgICAgICAgICAgIGxlbmd0aEtpbmQgOiB0aGlzLmxlbmd0aEtpbmRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQcm9wZXJ0aWVzKCl7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldFByb3BlcnRpZXMoKS5jb25jYXQoW1xyXG4gICAgICAgICAgICBcImxlbmd0aEtpbmRcIixcclxuICAgICAgICAgICAgXCJsaW5lXCJcclxuICAgICAgICBdKVxyXG4gICAgfVxyXG5cclxuICAgIGRlcGVuZGVuY2llcygpIDogTWF0aEVudGl0eVtdIHtcclxuICAgICAgICByZXR1cm4gWyB0aGlzLnBvaW50QSwgdGhpcy5wb2ludEIgXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxTaGFwZXMoc2hhcGVzIDogTWF0aEVudGl0eVtdKXtcclxuICAgICAgICBzdXBlci5nZXRBbGxTaGFwZXMoc2hhcGVzKTtcclxuICAgICAgICBzaGFwZXMucHVzaCh0aGlzLnBvaW50QSwgdGhpcy5wb2ludEIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNlbnRlcigpIDogVmVjMiB7XHJcbiAgICAgICAgY29uc3QgQSA9IHRoaXMucG9pbnRBLnBvc2l0aW9uO1xyXG4gICAgICAgIGNvbnN0IEIgPSB0aGlzLnBvaW50Qi5wb3NpdGlvbjtcclxuXHJcbiAgICAgICAgcmV0dXJuIEEuYWRkKEIpLm11bCgwLjUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzTmVhcihwb3NpdGlvbiA6IFZlYzIpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgY2VudGVyID0gdGhpcy5jZW50ZXIoKTsgICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJlYWxfZGlzdGFuY2UgPSBjZW50ZXIuZGlzdGFuY2UocG9zaXRpb24pO1xyXG4gICAgICAgIHJldHVybiBWaWV3LmN1cnJlbnQuaXNOZWFyKHJlYWxfZGlzdGFuY2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGxlbmd0aCgpIDogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCBBID0gdGhpcy5wb2ludEEucG9zaXRpb247XHJcbiAgICAgICAgY29uc3QgQiA9IHRoaXMucG9pbnRCLnBvc2l0aW9uO1xyXG5cclxuICAgICAgICByZXR1cm4gQS5kaXN0YW5jZShCKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0VxdWFsKGxlbmd0aFN5bWJvbCA6IExlbmd0aFN5bWJvbCkgOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBlcXVhbF9sZW5ndGhfc2V0ID0gZXF1YWxMZW5ndGhzLmZpbmQoeCA9PiB4Lmhhcyh0aGlzKSk7XHJcbiAgICAgICAgaWYoZXF1YWxfbGVuZ3RoX3NldCAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICByZXR1cm4gZXF1YWxfbGVuZ3RoX3NldC5oYXMobGVuZ3RoU3ltYm9sKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3KCkgOiB2b2lkIHtcclxuICAgICAgICBWaWV3LmN1cnJlbnQuY2FudmFzLmRyYXdMaW5lKHRoaXMsIHRoaXMucG9pbnRBLnBvc2l0aW9uLCB0aGlzLnBvaW50Qi5wb3NpdGlvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IHRpY2tfaGFsZl9sZW5ndGggPSBmcm9tWFBpeFNjYWxlKDEwKTtcclxuXHJcbiAgICAgICAgY29uc3QgQSA9IHRoaXMucG9pbnRBLnBvc2l0aW9uO1xyXG4gICAgICAgIGNvbnN0IEIgPSB0aGlzLnBvaW50Qi5wb3NpdGlvbjtcclxuICAgICAgICBjb25zdCBBQiA9IEIuc3ViKEEpO1xyXG5cclxuICAgICAgICBjb25zdCBlID0gQUIudW5pdCgpXHJcbiAgICAgICAgY29uc3QgY2VudGVyID0gdGhpcy5jZW50ZXIoKTtcclxuXHJcbiAgICAgICAgaWYodGhpcy5sZW5ndGhLaW5kID09IDApe1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZTQ1ID0gZS5yb3Q0NSgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdGlja18xID0gY2VudGVyLmFkZCggZTQ1Lm11bCgtIHRpY2tfaGFsZl9sZW5ndGgpICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpY2tfMiA9IGNlbnRlci5hZGQoIGU0NS5tdWwoICB0aWNrX2hhbGZfbGVuZ3RoKSApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGRyYXdMaW5lKHRoaXMsIHRpY2tfMSwgdGlja18yKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsID0gZS5yb3Q5MCgpO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbF9taW51cyA9IG5vcm1hbC5tdWwoLSB0aWNrX2hhbGZfbGVuZ3RoKTtcclxuICAgICAgICBjb25zdCBub3JtYWxfcGx1cyAgPSBub3JtYWwubXVsKCAgdGlja19oYWxmX2xlbmd0aCk7XHJcblxyXG4gICAgICAgIGxldCBzaGlmdHMgOiBudW1iZXJbXTtcclxuICAgICAgICBpZih0aGlzLmxlbmd0aEtpbmQgJSAyID09IDEpe1xyXG5cclxuICAgICAgICAgICAgc2hpZnRzID0gWyAwLCAxLCAtMSwgMiwgLTIgXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgc2hpZnRzID0gWyAwLjUsIC0wLjUsIDEuNSwgLTEuNSwgMi41LCAtMi41IF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFzc2VydCh0aGlzLmxlbmd0aEtpbmQgPCBzaGlmdHMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgZm9yKGNvbnN0IGlkeCBvZiByYW5nZSh0aGlzLmxlbmd0aEtpbmQpKXtcclxuICAgICAgICAgICAgY29uc3Qgc2hpZnQgPSBzaGlmdHNbaWR4XTtcclxuICAgICAgICAgICAgY29uc3QgcG9zID0gY2VudGVyLmFkZChlLm11bChzaGlmdCAqIHRpY2tfaGFsZl9sZW5ndGgpKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRpY2tfMSA9IHBvcy5hZGQoIG5vcm1hbF9taW51cyApO1xyXG4gICAgICAgICAgICBjb25zdCB0aWNrXzIgPSBwb3MuYWRkKCBub3JtYWxfcGx1cyApO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGRyYXdMaW5lKHRoaXMsIHRpY2tfMSwgdGlja18yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZmluZEVxdWFsTGVuZ3RoQnlNaWRQb2ludCgpe1xyXG4gICAgICAgIGNvbnN0IGFsbF9zaGFwZXMgPSBWaWV3LmN1cnJlbnQuYWxsU2hhcGVzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgbGVuZ3RoX3N5bWJvbHMgPSBhbGxfc2hhcGVzLmZpbHRlcih4ID0+IHggaW5zdGFuY2VvZiBMZW5ndGhTeW1ib2wgJiYgeCAhPSB0aGlzICYmIHgubGluZSA9PSB0aGlzLmxpbmUpIGFzIExlbmd0aFN5bWJvbFtdO1xyXG4gICAgICAgIGlmKGxlbmd0aF9zeW1ib2xzLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICAgICAgLy8gbXNnKGBubyBsZW5ndGgtc3ltYm9sOiR7dGhpcy5pZH1gKTtcclxuXHJcbiAgICAgICAgICAgIC8vIChhbGxfc2hhcGVzLmZpbHRlcih4ID0+IHggaW5zdGFuY2VvZiBMZW5ndGhTeW1ib2wpIGFzIExlbmd0aFN5bWJvbFtdKS5mb3JFYWNoKHggPT4gbXNnKGAke3guaWR9IGxpbmU6JHt4LmxpbmUhLmlkfWApKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IoY29uc3QgbGVuZ3RoX3N5bWJvbCBvZiBsZW5ndGhfc3ltYm9scyl7XHJcbiAgICAgICAgICAgIC8vIG1zZyhgbGVuZ3RoLXN5bWJvbCBvbiBsaW5lOiAke3RoaXMuaWR9ICR7bGVuZ3RoX3N5bWJvbC5pZH1gKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHBvaW50cyA9IHRoaXMucG9pbnRzKCkuY29uY2F0KGxlbmd0aF9zeW1ib2wucG9pbnRzKCkpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbWlkX3BvaW50cyA9IGFsbF9zaGFwZXMuZmlsdGVyKHggPT4geCBpbnN0YW5jZW9mIE1pZHBvaW50ICYmIGFyZVNldHNFcXVhbChbeCwgeC5wb2ludEEsIHgucG9pbnRCXSwgcG9pbnRzKSkgYXMgTWlkcG9pbnRbXTtcclxuICAgICAgICAgICAgZm9yKGNvbnN0IG1pZF9wb2ludCBvZiBtaWRfcG9pbnRzKXtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMucG9pbnRzKCkuaW5jbHVkZXMobWlkX3BvaW50KSAmJiBsZW5ndGhfc3ltYm9sLnBvaW50cygpLmluY2x1ZGVzKG1pZF9wb2ludCkpe1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZEVxdWFsTGVuZ3Rocyh0aGlzLCBsZW5ndGhfc3ltYm9sKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBtc2coYGVxdWFsLWxlbmd0aC1ieS1taWRwb2ludDoke3RoaXMuaWR9IG1pZDoke21pZF9wb2ludC5pZH0gJHtsZW5ndGhfc3ltYm9sLmlkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZGluZygpOiBSZWFkaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZXh0UmVhZGluZyhUVChcIkRyYXcgYSBsZW5ndGggc3ltYm9sLlwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UmVsYXRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnNldFJlbGF0aW9ucygpO1xyXG5cclxuICAgICAgICB0aGlzLnBvaW50QS5zZXRSZWxhdGlvbnMoKTtcclxuICAgICAgICB0aGlzLnBvaW50Qi5zZXRSZWxhdGlvbnMoKTtcclxuXHJcbiAgICAgICAgY29uc3Qga2V5ID0gcGFpcktleSh0aGlzLnBvaW50QSwgdGhpcy5wb2ludEIpO1xyXG4gICAgICAgIHBvaW50c1RvTGVuZ3RoU3ltYm9sLnNldChrZXksIHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmxpbmUgPSBnZXRDb21tb25MaW5lT2ZQb2ludHModGhpcy5wb2ludEEsIHRoaXMucG9pbnRCKTtcclxuXHJcbiAgICAgICAgdGhpcy5jaXJjbGUgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGZvcihjb25zdCBbY2VudGVyLCBwb2ludF0gb2YgW1t0aGlzLnBvaW50QSwgdGhpcy5wb2ludEJdLCBbdGhpcy5wb2ludEIsIHRoaXMucG9pbnRBXV0pe1xyXG4gICAgICAgICAgICBjb25zdCBjaXJjbGVzID0gTXlsaXN0KGNlbnRlck9mQ2lyY2xlQXJjcy5nZXQoY2VudGVyKSk7XHJcbiAgICAgICAgICAgIGlmKGNpcmNsZXMubGVuZ3RoICE9IDApe1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNpcmNsZSA9IGNpcmNsZXMuZmluZCh4ID0+IHguaW5jbHVkZXNQb2ludChwb2ludCkpIGFzIENpcmNsZUJ5UmFkaXVzIHwgQXJjQnlSYWRpdXM7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmNpcmNsZSAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmZpbmRFcXVhbExlbmd0aEJ5TWlkUG9pbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwb2ludHMoKSA6IFtQb2ludCwgUG9pbnRdIHtcclxuICAgICAgICByZXR1cm4gW3RoaXMucG9pbnRBLCB0aGlzLnBvaW50Ql07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHNldEVxdWFsTGVuZ3RoS2luZHMobGVuZ3RoU3ltYm9scyA6IExlbmd0aFN5bWJvbFtdKXtcclxuICAgICAgICBhc3NlcnQobGVuZ3RoU3ltYm9scy5ldmVyeSh4ID0+IHggaW5zdGFuY2VvZiBMZW5ndGhTeW1ib2wpKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBtYXhfbGVuZ3RoS2luZCA9IE1hdGgubWF4KC4uLiBsZW5ndGhTeW1ib2xzLm1hcCh4ID0+IHgubGVuZ3RoS2luZCkpO1xyXG4gICAgICAgIGlmKG1heF9sZW5ndGhLaW5kICE9IExlbmd0aFN5bWJvbC5EZWZhdWx0TGVuZ3RoS2luZCl7XHJcbiAgICAgICAgICAgIGxlbmd0aFN5bWJvbHMuZm9yRWFjaCh4ID0+IHgubGVuZ3RoS2luZCA9IG1heF9sZW5ndGhLaW5kKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgY29uc3QgYWxsX2xlbmd0aFN5bWJvbHMgPSBWaWV3LmN1cnJlbnQuYWxsU2hhcGVzKCkuZmlsdGVyKHggPT4geCBpbnN0YW5jZW9mIExlbmd0aFN5bWJvbCk7XHJcbiAgICAgICAgICAgIGlmKGFsbF9sZW5ndGhTeW1ib2xzLmxlbmd0aCA9PSAwKXtcclxuXHJcbiAgICAgICAgICAgICAgICBsZW5ndGhTeW1ib2xzLmZvckVhY2goeCA9PiB4Lmxlbmd0aEtpbmQgPSBMZW5ndGhTeW1ib2wuRGVmYXVsdExlbmd0aEtpbmQgKyAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG1heF9hbGxfbGVuZ3RoS2luZCA9IE1hdGgubWF4KC4uLiBhbGxfbGVuZ3RoU3ltYm9scy5tYXAoeCA9PiB4Lmxlbmd0aEtpbmQpKTtcclxuICAgICAgICAgICAgICAgIGxlbmd0aFN5bWJvbHMuZm9yRWFjaCh4ID0+IHgubGVuZ3RoS2luZCA9IG1heF9hbGxfbGVuZ3RoS2luZCArIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuXHJcblxyXG5cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cInNoYXBlLnRzXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBwbGFuZV90cyB7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2FsY0Zvb3RGcm9tMlBvcyhwb3NpdGlvbiA6IFZlYzIsIHBvczEgOiBWZWMyLCBlIDogVmVjMikgOiBWZWMyIHtcclxuICAgIGNvbnN0IHYgPSBwb3NpdGlvbi5zdWIocG9zMSk7XHJcbiAgICBjb25zdCBoID0gZS5kb3Qodik7XHJcblxyXG4gICAgY29uc3QgZm9vdCA9IHBvczEuYWRkKGUubXVsKGgpKTtcclxuXHJcbiAgICByZXR1cm4gZm9vdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNGb290T2ZQZXJwZW5kaWN1bGFyKHBvc2l0aW9uOlZlYzIsIGxpbmU6IEFic3RyYWN0TGluZSkgOiBWZWMyIHtcclxuICAgIHJldHVybiBjYWxjRm9vdEZyb20yUG9zKHBvc2l0aW9uLCBsaW5lLnBvaW50QS5wb3NpdGlvbiwgbGluZS5lKTtcclxufVxyXG4gICAgXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2VGcm9tTGluZShub3JtYWwgOiBWZWMyLCBwb2ludEEgOiBWZWMyLCBwb3NpdGlvbiA6IFZlYzIpIDogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLmFicyggbm9ybWFsLmRvdChwb3NpdGlvbi5zdWIocG9pbnRBKSkgKTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE1pZHBvaW50IGV4dGVuZHMgUG9pbnQge1xyXG4gICAgcG9pbnRBICAgOiBQb2ludDtcclxuICAgIHBvaW50QiAgIDogUG9pbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqIDogeyBwb3NpdGlvbiA6IFZlYzIsIHBvaW50QTogUG9pbnQsIHBvaW50QjogUG9pbnQgfSl7XHJcbiAgICAgICAgc3VwZXIob2JqKTtcclxuICAgICAgICB0aGlzLnBvaW50QSA9IG9iai5wb2ludEE7XHJcbiAgICAgICAgdGhpcy5wb2ludEIgPSBvYmoucG9pbnRCO1xyXG5cclxuICAgICAgICB0aGlzLmNhbGMoKTtcclxuICAgIH1cclxuXHJcbiAgICBtYWtlT2JqKCkgOiBhbnkge1xyXG4gICAgICAgIGxldCBvYmogPSBPYmplY3QuYXNzaWduKHN1cGVyLm1ha2VPYmooKSwge1xyXG4gICAgICAgICAgICBwb2ludEEgOiB0aGlzLnBvaW50QS50b09iaigpLFxyXG4gICAgICAgICAgICBwb2ludEIgOiB0aGlzLnBvaW50Qi50b09iaigpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgZGVwZW5kZW5jaWVzKCkgOiBNYXRoRW50aXR5W10ge1xyXG4gICAgICAgIHJldHVybiBzdXBlci5kZXBlbmRlbmNpZXMoKS5jb25jYXQoWyB0aGlzLnBvaW50QSwgdGhpcy5wb2ludEIgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsU2hhcGVzKHNoYXBlcyA6IE1hdGhFbnRpdHlbXSl7XHJcbiAgICAgICAgc3VwZXIuZ2V0QWxsU2hhcGVzKHNoYXBlcyk7XHJcbiAgICAgICAgc2hhcGVzLnB1c2godGhpcy5wb2ludEEsIHRoaXMucG9pbnRCKTtcclxuICAgIH1cclxuXHJcbiAgICBjYWxjKCl7XHJcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLnBvaW50QS5hZGQodGhpcy5wb2ludEIpLm11bCgwLjUpO1xyXG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb24ocG9zaXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRpbmcoKSA6IFJlYWRpbmcge1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVhZGluZyh0aGlzLCBUVCgnRmluZCB0aGUgbWlkcG9pbnQgb2YgdHdvIHBvaW50cy4nKSwgW10pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFJlbGF0aW9ucygpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5zZXRSZWxhdGlvbnMoKTtcclxuICAgICAgICBjb25zdCBsaW5lID0gZ2V0Q29tbW9uTGluZU9mUG9pbnRzKHRoaXMucG9pbnRBLCB0aGlzLnBvaW50Qik7XHJcbiAgICAgICAgaWYobGluZSAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAvLyBtc2coYGFkZCBtaWQgcG9pbnQgT24gTGluZXMgcG9pbnQ6JHt0aGlzLmlkfSBsaW5lOiR7bGluZS5pZH1gKTtcclxuICAgICAgICAgICAgYWRkUG9pbnRPbkxpbmVzKHRoaXMsIGxpbmUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RQZXJwZW5kaWN1bGFyTGluZSBleHRlbmRzIEFic3RyYWN0TGluZSB7XHJcbiAgICBsaW5lOiBBYnN0cmFjdExpbmU7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqIDogeyBsaW5lS2luZCA6IG51bWJlciwgcG9pbnRBIDogUG9pbnQsIGxpbmUgOiBBYnN0cmFjdExpbmUgfSl7XHJcbiAgICAgICAgc3VwZXIob2JqKTtcclxuXHJcbiAgICAgICAgdGhpcy5saW5lID0gb2JqLmxpbmU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG1ha2VPYmooKSA6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oc3VwZXIubWFrZU9iaigpLCB7XHJcbiAgICAgICAgICAgIGxpbmUgIDogdGhpcy5saW5lLnRvT2JqKCksXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UmVsYXRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnNldFJlbGF0aW9ucygpO1xyXG4gICAgICAgIGFkZFBlcnBlbmRpY3VsYXJQYWlycyh0aGlzLCB0aGlzLmxpbmUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRm9vdE9mUGVycGVuZGljdWxhciBleHRlbmRzIEFic3RyYWN0UGVycGVuZGljdWxhckxpbmUge1xyXG4gICAgZm9vdCA6IFBvaW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgbGluZUtpbmQgOiBudW1iZXIsIHBvaW50QSA6IFBvaW50LCBsaW5lIDogQWJzdHJhY3RMaW5lLCBmb290IDogUG9pbnQgfSl7XHJcbiAgICAgICAgc3VwZXIob2JqKTtcclxuICAgICAgICB0aGlzLmZvb3QgPSBvYmouZm9vdDtcclxuXHJcbiAgICAgICAgdGhpcy5jYWxjKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG1ha2VPYmooKSA6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oc3VwZXIubWFrZU9iaigpLCB7XHJcbiAgICAgICAgICAgIGZvb3QgIDogdGhpcy5mb290LnRvT2JqKCksXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsU2hhcGVzKHNoYXBlcyA6IE1hdGhFbnRpdHlbXSl7XHJcbiAgICAgICAgc3VwZXIuZ2V0QWxsU2hhcGVzKHNoYXBlcyk7XHJcbiAgICAgICAgc2hhcGVzLnB1c2godGhpcy5saW5lLCB0aGlzLmZvb3QpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlcGVuZGVuY2llcygpIDogTWF0aEVudGl0eVtdIHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuZGVwZW5kZW5jaWVzKCkuY29uY2F0KFsgdGhpcy5saW5lIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldE1vZGUobW9kZSA6IE1vZGUpe1xyXG4gICAgICAgIHN1cGVyLnNldE1vZGUobW9kZSk7XHJcbiAgICAgICAgdGhpcy5mb290LnNldE1vZGUobW9kZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FsYygpe1xyXG4gICAgICAgIGNvbnN0IGZvb3RfcG9zID0gY2FsY0Zvb3RPZlBlcnBlbmRpY3VsYXIodGhpcy5wb2ludEEucG9zaXRpb24sIHRoaXMubGluZSk7XHJcbiAgICAgICAgdGhpcy5mb290LnNldFBvc2l0aW9uKGZvb3RfcG9zKTtcclxuXHJcbiAgICAgICAgdGhpcy5lID0gdGhpcy5saW5lLmUucm90OTAoKS51bml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdygpIDogdm9pZCB7XHJcbiAgICAgICAgVmlldy5jdXJyZW50LmNhbnZhcy5kcmF3TGluZVdpdGgyUG9pbnRzKHRoaXMsIHRoaXMuZm9vdCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZGluZygpIDogUmVhZGluZyB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWFkaW5nKHRoaXMsIFRUKCdEcmF3IGEgcGVycGVuZGljdWxhciBsaW5lIGZyb20gdGhlIHBvaW50IHRvIHRoZSBsaW5lLicpLCBbXSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UmVsYXRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnNldFJlbGF0aW9ucygpO1xyXG4gICAgICAgIGFkZFBvaW50T25MaW5lcyh0aGlzLmZvb3QsIHRoaXMpO1xyXG4gICAgICAgIGFkZFBvaW50T25MaW5lcyh0aGlzLmZvb3QsIHRoaXMubGluZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgUGVycGVuZGljdWxhckxpbmUgZXh0ZW5kcyBBYnN0cmFjdFBlcnBlbmRpY3VsYXJMaW5lIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiB7IGxpbmVLaW5kIDogbnVtYmVyLCBwb2ludEEgOiBQb2ludCwgbGluZSA6IEFic3RyYWN0TGluZSB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG5cclxuICAgICAgICB0aGlzLmNhbGMoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgY2FsYygpe1xyXG4gICAgICAgIHRoaXMuZSA9IHRoaXMubGluZS5lLnJvdDkwKCkudW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRpbmcoKSA6IFJlYWRpbmcge1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVhZGluZyh0aGlzLCBUVCgnRHJhdyBhIHBlcnBlbmRpY3VsYXIgbGluZS4nKSwgW10pO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjYWxjTGluZUxpbmVJbnRlcnNlY3Rpb24obDEgOiBBYnN0cmFjdExpbmUsIGwyIDogQWJzdHJhY3RMaW5lKSA6IFZlYzIge1xyXG4gICAgbDEuY2FsYygpO1xyXG4gICAgbDIuY2FsYygpO1xyXG4gICAgaWYobDEuZSA9PSB1bmRlZmluZWQgfHwgbDIuZSA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgIGwxLnAxICsgdSBsMS5lID0gbDIucDEgKyB2IGwyLmVcclxuXHJcbiAgICBsMS5wMS54ICsgdSBsMS5lLnggPSBsMi5wMS54ICsgdiBsMi5lLnhcclxuICAgIGwxLnAxLnkgKyB1IGwxLmUueSA9IGwyLnAxLnkgKyB2IGwyLmUueVxyXG5cclxuICAgIGwxLmUueCwgLSBsMi5lLnggICB1ID0gbDIucDEueCAtIGwxLnAxLnhcclxuICAgIGwxLmUueSwgLSBsMi5lLnkgICB2ID0gbDIucDEueSAtIGwxLnAxLnlcclxuICAgIFxyXG4gICAgKi9cclxuICAgIGNvbnN0IG0gPSBuZXcgTWF0MihbW2wxLmUueCwgLSBsMi5lLnhdLCBbbDEuZS55LCAtIGwyLmUueV1dKTtcclxuICAgIGNvbnN0IHYgPSBuZXcgVmVjMihsMi5wb2ludEEucG9zaXRpb24ueCAtIGwxLnBvaW50QS5wb3NpdGlvbi54LCBsMi5wb2ludEEucG9zaXRpb24ueSAtIGwxLnBvaW50QS5wb3NpdGlvbi55KTtcclxuICAgIGNvbnN0IG1pID0gbS5pbnYoKTtcclxuICAgIGNvbnN0IHV2ID0gbWkuZG90KHYpO1xyXG4gICAgY29uc3QgdSA9IHV2Lng7XHJcblxyXG4gICAgY29uc3QgcG9zaXRpb24gPSBsMS5wb2ludEEucG9zaXRpb24uYWRkKGwxLmUubXVsKHUpKTtcclxuXHJcbiAgICByZXR1cm4gcG9zaXRpb247XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMaW5lTGluZUludGVyc2VjdGlvbiBleHRlbmRzIFBvaW50IHtcclxuICAgIGxpbmVBIDogQWJzdHJhY3RMaW5lO1xyXG4gICAgbGluZUIgOiBBYnN0cmFjdExpbmU7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqIDogeyBwb3NpdGlvbiA6IFZlYzIsIGxpbmVBOkFic3RyYWN0TGluZSwgbGluZUI6QWJzdHJhY3RMaW5lIH0pIHtcclxuICAgICAgICBzdXBlcihvYmopXHJcbiAgICAgICAgdGhpcy5saW5lQSA9IG9iai5saW5lQTtcclxuICAgICAgICB0aGlzLmxpbmVCID0gb2JqLmxpbmVCO1xyXG5cclxuICAgICAgICB0aGlzLmNhbGMoKTtcclxuICAgIH1cclxuXHJcbiAgICBtYWtlT2JqKCkgOiBhbnkge1xyXG4gICAgICAgIGxldCBvYmogPSBPYmplY3QuYXNzaWduKHN1cGVyLm1ha2VPYmooKSwge1xyXG4gICAgICAgICAgICBsaW5lQSA6IHRoaXMubGluZUEudG9PYmooKSxcclxuICAgICAgICAgICAgbGluZUIgOiB0aGlzLmxpbmVCLnRvT2JqKCksXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgZGVwZW5kZW5jaWVzKCkgOiBNYXRoRW50aXR5W10ge1xyXG4gICAgICAgIHJldHVybiBbIHRoaXMubGluZUEsIHRoaXMubGluZUIgXTtcclxuICAgIH1cclxuXHJcbiAgICBjYWxjKCl7ICAgICAgICBcclxuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGNhbGNMaW5lTGluZUludGVyc2VjdGlvbih0aGlzLmxpbmVBLCB0aGlzLmxpbmVCKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZGluZygpOiBSZWFkaW5nIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJlYWRpbmcodGhpcywgVFQoJ1RoZXJlIGlzIG9uZSBpbnRlcnNlY3Rpb24gYmV0d2VlbiB0aGUgdHdvIGxpbmVzLicpLCBbXSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UmVsYXRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnNldFJlbGF0aW9ucygpO1xyXG4gICAgICAgIGFkZFBvaW50T25MaW5lcyh0aGlzLCB0aGlzLmxpbmVBKTtcclxuICAgICAgICBhZGRQb2ludE9uTGluZXModGhpcywgdGhpcy5saW5lQik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMaW5lQXJjSW50ZXJzZWN0aW9uIGV4dGVuZHMgU2hhcGUge1xyXG4gICAgbGluZSA6IEFic3RyYWN0TGluZTtcclxuICAgIGFyYyAgOiBDaXJjbGVBcmM7XHJcbiAgICBwb2ludEEgOiBQb2ludDtcclxuICAgIHBvaW50QiA6IFBvaW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgbGluZTpBYnN0cmFjdExpbmUsIGFyYzpDaXJjbGVBcmMsIHBvaW50QSA6IFBvaW50LCBwb2ludEIgOiBQb2ludCB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG5cclxuICAgICAgICB0aGlzLmxpbmUgICA9IG9iai5saW5lO1xyXG4gICAgICAgIHRoaXMuYXJjICAgID0gb2JqLmFyYztcclxuICAgICAgICB0aGlzLnBvaW50QSA9IG9iai5wb2ludEE7XHJcbiAgICAgICAgdGhpcy5wb2ludEIgPSBvYmoucG9pbnRCO1xyXG5cclxuICAgICAgICB0aGlzLmNhbGMoKTtcclxuICAgIH1cclxuXHJcbiAgICBtYWtlT2JqKCkgOiBhbnkge1xyXG4gICAgICAgIGxldCBvYmogPSBPYmplY3QuYXNzaWduKHN1cGVyLm1ha2VPYmooKSwge1xyXG4gICAgICAgICAgICBsaW5lICAgOiB0aGlzLmxpbmUudG9PYmooKSxcclxuICAgICAgICAgICAgYXJjICAgIDogdGhpcy5hcmMudG9PYmooKSxcclxuICAgICAgICAgICAgcG9pbnRBIDogdGhpcy5wb2ludEEudG9PYmooKSxcclxuICAgICAgICAgICAgcG9pbnRCIDogdGhpcy5wb2ludEIudG9PYmooKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFsbFNoYXBlcyhzaGFwZXMgOiBNYXRoRW50aXR5W10pe1xyXG4gICAgICAgIHN1cGVyLmdldEFsbFNoYXBlcyhzaGFwZXMpO1xyXG4gICAgICAgIHNoYXBlcy5wdXNoKHRoaXMucG9pbnRBLCB0aGlzLnBvaW50Qik7XHJcbiAgICB9XHJcblxyXG4gICAgZGVwZW5kZW5jaWVzKCkgOiBNYXRoRW50aXR5W10ge1xyXG4gICAgICAgIHJldHVybiBbIHRoaXMubGluZSwgdGhpcy5hcmMgXTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRNb2RlKG1vZGUgOiBNb2RlKXtcclxuICAgICAgICB0aGlzLnBvaW50QS5zZXRNb2RlKG1vZGUpO1xyXG4gICAgICAgIHRoaXMucG9pbnRCLnNldE1vZGUobW9kZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2FsYygpeyAgICAgICAgXHJcblxyXG4gICAgICAgIC8vIOWGhi/lvKfjga7kuK3lv4NcclxuICAgICAgICBjb25zdCBjZW50ZXIgPSB0aGlzLmFyYy5jZW50ZXI7XHJcblxyXG4gICAgICAgIC8vIOWGhi/lvKfjga7kuK3lv4PjgYvjgonnt5rliIbjgavlnoLnt5rjgpLjgYrjgo3jgZfjgabjgIHjgZ3jga7otrPjgpJmb29044Go44GZ44KL44CCXHJcbiAgICAgICAgY29uc3QgZm9vdCA9IGNhbGNGb290T2ZQZXJwZW5kaWN1bGFyKGNlbnRlci5wb3NpdGlvbiwgdGhpcy5saW5lKTtcclxuXHJcbiAgICAgICAgLy8g5YaGL+W8p+OBruS4reW/g+OBi+OCieWegue3muOBrui2s+OBvuOBp+OBrui3nembouOAglxyXG4gICAgICAgIGNvbnN0IGggPSBmb290LnN1YihjZW50ZXIucG9zaXRpb24pLmxlbigpO1xyXG5cclxuICAgICAgICAvLyDlhoYv5byn44Gu5Y2K5b6EXHJcbiAgICAgICAgbGV0IHIgPSB0aGlzLmFyYy5yYWRpdXMoKTtcclxuXHJcbiAgICAgICAgaWYociA8IGggKXtcclxuICAgICAgICAgICAgLy8g5Y2K5b6E44GM5Z6C57ea44Gu6Laz44G+44Gn44Gu6Led6Zui44KI44KK5bCP44GV44GE5aC05ZCIXHJcblxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5Z6C57ea44Gu6Laz44GL44KJ5Lqk54K544G+44Gn44Gu6Led6ZuiXHJcbiAgICAgICAgbGV0IHQgPSBNYXRoLnNxcnQocipyIC0gaCAqIGgpO1xyXG5cclxuICAgICAgICAvLyDnt5rliIbjga7ljZjkvY3mlrnlkJHjg5njgq/jg4jjg6tcclxuICAgICAgICB0aGlzLmxpbmUuY2FsYygpO1xyXG4gICAgICAgIGxldCBlID0gdGhpcy5saW5lLmU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g5Lqk54K544Gu5bqn5qiZXHJcbiAgICAgICAgbGV0IHBvc2l0aW9uQSA9IGZvb3QuYWRkKGUubXVsKHQpKTtcclxuICAgICAgICBsZXQgcG9zaXRpb25CID0gZm9vdC5hZGQoZS5tdWwoLXQpKTtcclxuXHJcbiAgICAgICAgdGhpcy5wb2ludEEuc2V0UG9zaXRpb24ocG9zaXRpb25BKTtcclxuICAgICAgICB0aGlzLnBvaW50Qi5zZXRQb3NpdGlvbihwb3NpdGlvbkIpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoKSA6IHZvaWQge1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRpbmcoKTogUmVhZGluZyB7XHJcbiAgICAgICAgaWYodGhpcy5hcmMgaW5zdGFuY2VvZiBDaXJjbGUpe1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWFkaW5nKHRoaXMsIFRUKCdGaW5kIHRoZSBpbnRlcnNlY3Rpb24gb2YgdGhlIGNpcmNsZSBhbmQgdGhlIGxpbmUuJyksIFtdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0aGlzLmFyYyBpbnN0YW5jZW9mIEFyYyl7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlYWRpbmcodGhpcywgVFQoJ0ZpbmQgdGhlIGludGVyc2VjdGlvbiBvZiB0aGUgYXJjIGFuZCB0aGUgbGluZS4nKSwgW10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRSZWxhdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuc2V0UmVsYXRpb25zKCk7XHJcblxyXG4gICAgICAgIGFkZFBvaW50T25MaW5lcyh0aGlzLnBvaW50QSwgdGhpcy5saW5lKTtcclxuICAgICAgICBhZGRQb2ludE9uTGluZXModGhpcy5wb2ludEIsIHRoaXMubGluZSk7XHJcblxyXG4gICAgICAgIGFkZFBvaW50T25DaXJjbGVBcmNzKHRoaXMucG9pbnRBLCB0aGlzLmFyYyk7XHJcbiAgICAgICAgYWRkUG9pbnRPbkNpcmNsZUFyY3ModGhpcy5wb2ludEIsIHRoaXMuYXJjKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFyY0FyY0ludGVyc2VjdGlvbiBleHRlbmRzIFNoYXBlIHtcclxuICAgIGFyYzEgOiBDaXJjbGVBcmM7XHJcbiAgICBhcmMyIDogQ2lyY2xlQXJjO1xyXG4gICAgcG9pbnRBIDogUG9pbnQ7XHJcbiAgICBwb2ludEIgOiBQb2ludDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiB7IGFyYzE6Q2lyY2xlQXJjLCBhcmMyOkNpcmNsZUFyYywgcG9pbnRBIDogUG9pbnQsIHBvaW50QiA6IFBvaW50IH0pe1xyXG4gICAgICAgIHN1cGVyKG9iaik7XHJcblxyXG4gICAgICAgIHRoaXMuYXJjMSAgID0gb2JqLmFyYzE7XHJcbiAgICAgICAgdGhpcy5hcmMyICAgPSBvYmouYXJjMjtcclxuICAgICAgICB0aGlzLnBvaW50QSA9IG9iai5wb2ludEE7XHJcbiAgICAgICAgdGhpcy5wb2ludEIgPSBvYmoucG9pbnRCO1xyXG5cclxuICAgICAgICB0aGlzLmNhbGMoKTtcclxuICAgIH1cclxuXHJcbiAgICBtYWtlT2JqKCkgOiBhbnkge1xyXG4gICAgICAgIGxldCBvYmogPSBPYmplY3QuYXNzaWduKHN1cGVyLm1ha2VPYmooKSwge1xyXG4gICAgICAgICAgICBhcmMxICAgOiB0aGlzLmFyYzEudG9PYmooKSxcclxuICAgICAgICAgICAgYXJjMiAgIDogdGhpcy5hcmMyLnRvT2JqKCksXHJcbiAgICAgICAgICAgIHBvaW50QSA6IHRoaXMucG9pbnRBLnRvT2JqKCksXHJcbiAgICAgICAgICAgIHBvaW50QiA6IHRoaXMucG9pbnRCLnRvT2JqKClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxTaGFwZXMoc2hhcGVzIDogTWF0aEVudGl0eVtdKXtcclxuICAgICAgICBzdXBlci5nZXRBbGxTaGFwZXMoc2hhcGVzKTtcclxuICAgICAgICBzaGFwZXMucHVzaCh0aGlzLnBvaW50QSwgdGhpcy5wb2ludEIpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlcGVuZGVuY2llcygpIDogTWF0aEVudGl0eVtdIHtcclxuICAgICAgICByZXR1cm4gWyB0aGlzLmFyYzEsIHRoaXMuYXJjMiBdO1xyXG4gICAgfVxyXG5cclxuICAgIHNldE1vZGUobW9kZSA6IE1vZGUpe1xyXG4gICAgICAgIHRoaXMucG9pbnRBLnNldE1vZGUobW9kZSk7XHJcbiAgICAgICAgdGhpcy5wb2ludEIuc2V0TW9kZShtb2RlKTtcclxuICAgIH1cclxuXHJcbiAgICBjYWxjKCl7ICAgICAgICBcclxuICAgICAgICAvLyDlhoYv5byn44Gu5Lit5b+DXHJcbiAgICAgICAgY29uc3QgYzEgPSB0aGlzLmFyYzEuY2VudGVyO1xyXG4gICAgICAgIGNvbnN0IGMyID0gdGhpcy5hcmMyLmNlbnRlcjtcclxuXHJcbiAgICAgICAgLy8g5YaGL+W8p+OBruWNiuW+hFxyXG4gICAgICAgIGNvbnN0IHIxID0gdGhpcy5hcmMxLnJhZGl1cygpO1xyXG4gICAgICAgIGNvbnN0IHIyID0gdGhpcy5hcmMyLnJhZGl1cygpO1xyXG5cclxuICAgICAgICAvLyDlhoYv5byn44Gu5Lit5b+D44Gu6Led6ZuiXHJcbiAgICAgICAgY29uc3QgTCA9IGMxLnBvc2l0aW9uLmRpc3RhbmNlKGMyLnBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgLy8gcjEqcjEgLSB0KnQgPSByMipyMiAtIChMIC0gdCkqKEwgLSB0KVxyXG4gICAgICAgIC8vICAgICAgICAgICAgID0gcjIqcjIgLSBMKkwgKyAyTHQgLSB0KnRcclxuICAgICAgICAvLyByMSpyMSA9IHIyKnIyIC0gTCpMICsgMkx0XHJcbiAgICAgICAgY29uc3QgdCA9IChyMSpyMSAtIHIyKnIyICsgTCpMKS8gKDIgKiBMKTtcclxuXHJcbiAgICAgICAgLy8g5YaGL+W8p+OBruS6pOeCueOBi+OCieOAgeWGhi/lvKfjga7kuK3lv4PjgpLntZDjgbbnm7Tnt5rjgavjgYrjgo3jgZfjgZ/lnoLnt5rjga7plbfjgZXjga7kuozkuZdcclxuICAgICAgICBjb25zdCBoMiA9IHIxKnIxIC0gdCp0O1xyXG4gICAgICAgIGlmKGgyIDwgMCl7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBoID0gTWF0aC5zcXJ0KGgyKTtcclxuXHJcbiAgICAgICAgLy8gYzHihpJjMuOBruWNmOS9jeODmeOCr+ODiOODq1xyXG4gICAgICAgIGNvbnN0IGUxID0gYzIuc3ViKGMxKS51bml0KCk7XHJcblxyXG4gICAgICAgIC8vIGUx44Gu5rOV57ea44OZ44Kv44OI44OrXHJcbiAgICAgICAgY29uc3QgZTIgPSBuZXcgVmVjMigtIGUxLnksIGUxLngpO1xyXG5cclxuICAgICAgICAvLyDlhoYv5byn44Gu5Lqk54K544GL44KJ44CB5YaGL+W8p+OBruS4reW/g+OCkue1kOOBtuebtOe3muOBq+OBiuOCjeOBl+OBn+Wegue3muOBrui2s1xyXG4gICAgICAgIGNvbnN0IGZvb3QgPSBjMS5wb3NpdGlvbi5hZGQoZTEubXVsKHQpKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDkuqTngrnjga7luqfmqJlcclxuICAgICAgICBsZXQgcG9zaXRpb25BID0gZm9vdC5hZGQoZTIubXVsKGgpKTtcclxuICAgICAgICBsZXQgcG9zaXRpb25CID0gZm9vdC5hZGQoZTIubXVsKC1oKSk7XHJcblxyXG4gICAgICAgIHRoaXMucG9pbnRBLnNldFBvc2l0aW9uKHBvc2l0aW9uQSk7XHJcbiAgICAgICAgdGhpcy5wb2ludEIuc2V0UG9zaXRpb24ocG9zaXRpb25CKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3KCkgOiB2b2lkIHtcclxuICAgIH1cclxuXHJcbiAgICByZWFkaW5nKCk6IFJlYWRpbmcge1xyXG4gICAgICAgIGlmKHRoaXMuYXJjMSBpbnN0YW5jZW9mIENpcmNsZSAmJiB0aGlzLmFyYzIgaW5zdGFuY2VvZiBDaXJjbGUpe1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlYWRpbmcodGhpcywgVFQoJ0ZpbmQgdGhlIGludGVyc2VjdGlvbiBvZiB0d28gY2lyY2xlcy4nKSwgW10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHRoaXMuYXJjMSBpbnN0YW5jZW9mIEFyYyAmJiB0aGlzLmFyYzIgaW5zdGFuY2VvZiBBcmMpe1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlYWRpbmcodGhpcywgVFQoJ0ZpbmQgdGhlIGludGVyc2VjdGlvbiBvZiB0d28gYXJjcy4nKSwgW10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlYWRpbmcodGhpcywgVFQoJ0ZpbmQgdGhlIGludGVyc2VjdGlvbiBvZiB0aGUgY2lyY2xlIGFuZCB0aGUgYXJjLicpLCBbXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFJlbGF0aW9ucygpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5zZXRSZWxhdGlvbnMoKTtcclxuXHJcbiAgICAgICAgYWRkUG9pbnRPbkNpcmNsZUFyY3ModGhpcy5wb2ludEEsIHRoaXMuYXJjMSk7XHJcbiAgICAgICAgYWRkUG9pbnRPbkNpcmNsZUFyY3ModGhpcy5wb2ludEIsIHRoaXMuYXJjMSk7XHJcblxyXG4gICAgICAgIGFkZFBvaW50T25DaXJjbGVBcmNzKHRoaXMucG9pbnRBLCB0aGlzLmFyYzIpO1xyXG4gICAgICAgIGFkZFBvaW50T25DaXJjbGVBcmNzKHRoaXMucG9pbnRCLCB0aGlzLmFyYzIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVGFuZ2VudCBleHRlbmRzIFNoYXBlIHtcclxuXHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgQ2lyY2xlQ2lyY2xlVGFuZ2VudCBleHRlbmRzIFRhbmdlbnQge1xyXG4gICAgY2lyY2xlMSA6IENpcmNsZTtcclxuICAgIGNpcmNsZTIgOiBDaXJjbGU7ICAgIFxyXG5cclxuICAgIHBvaW50ICAgOiBQb2ludDtcclxuICAgIGxpbmVzICAgOiBMaW5lQnlQb2ludHNbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgY2lyY2xlMSA6IENpcmNsZSwgY2lyY2xlMiA6IENpcmNsZSB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG4gICAgICAgIGlmKG9iai5jaXJjbGUxLnJhZGl1cygpIDw9IG9iai5jaXJjbGUyLnJhZGl1cygpKXtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2lyY2xlMSA9IG9iai5jaXJjbGUxO1xyXG4gICAgICAgICAgICB0aGlzLmNpcmNsZTIgPSBvYmouY2lyY2xlMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2lyY2xlMSA9IG9iai5jaXJjbGUyO1xyXG4gICAgICAgICAgICB0aGlzLmNpcmNsZTIgPSBvYmouY2lyY2xlMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBvYmogYXMgYW55O1xyXG5cclxuICAgICAgICBpZihkYXRhLnBvaW50ICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHRoaXMucG9pbnQgPSBkYXRhLnBvaW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0aGlzLnBvaW50ID0gUG9pbnQuemVybygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoZGF0YS5saW5lcyAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVzID0gZGF0YS5saW5lcztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgY29uc3QgbGluZV9hID0gbWFrZUxpbmVTZWdtZW50KCBQb2ludC56ZXJvKCksIFBvaW50Lnplcm8oKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVfYiA9IG1ha2VMaW5lU2VnbWVudCggUG9pbnQuemVybygpLCBQb2ludC56ZXJvKCkpO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVzID0gWyBsaW5lX2EsIGxpbmVfYiBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jYWxjKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZU9iaigpIDogYW55IHtcclxuICAgICAgICBsZXQgb2JqID0gT2JqZWN0LmFzc2lnbihzdXBlci5tYWtlT2JqKCksIHtcclxuICAgICAgICAgICAgY2lyY2xlMSA6IHRoaXMuY2lyY2xlMS50b09iaigpLFxyXG4gICAgICAgICAgICBjaXJjbGUyIDogdGhpcy5jaXJjbGUyLnRvT2JqKCksXHJcbiAgICAgICAgICAgIHBvaW50ICAgOiB0aGlzLnBvaW50LnRvT2JqKCksXHJcbiAgICAgICAgICAgIGxpbmVzICAgOiB0aGlzLmxpbmVzLm1hcCh4ID0+IHgudG9PYmooKSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxTaGFwZXMoc2hhcGVzIDogTWF0aEVudGl0eVtdKXtcclxuICAgICAgICBzdXBlci5nZXRBbGxTaGFwZXMoc2hhcGVzKTtcclxuICAgICAgICBzaGFwZXMucHVzaCh0aGlzLnBvaW50KTtcclxuICAgICAgICB0aGlzLmxpbmVzLmZvckVhY2gobGluZSA9PiBsaW5lLmdldEFsbFNoYXBlcyhzaGFwZXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBkZXBlbmRlbmNpZXMoKSA6IE1hdGhFbnRpdHlbXSB7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRlcGVuZGVuY2llcygpLmNvbmNhdChbIHRoaXMuY2lyY2xlMSwgdGhpcy5jaXJjbGUyIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldE1vZGUobW9kZSA6IE1vZGUpe1xyXG4gICAgICAgIHRoaXMubGluZXMuZm9yRWFjaCh4ID0+IHguc2V0TW9kZShtb2RlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdygpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wb2ludC5kcmF3KCk7XHJcbiAgICAgICAgdGhpcy5saW5lcy5mb3JFYWNoKHggPT4geC5kcmF3KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgYzF0bzIgPSB0aGlzLmNpcmNsZTEuY2VudGVyLnN1Yih0aGlzLmNpcmNsZTIuY2VudGVyKTtcclxuICAgICAgICBjb25zdCBkaXN0ICA9IGMxdG8yLmxlbigpO1xyXG4gICAgICAgIGNvbnN0IHJhZGl1czEgPSB0aGlzLmNpcmNsZTEucmFkaXVzKCk7XHJcbiAgICAgICAgY29uc3QgcmFkaXVzMiA9IHRoaXMuY2lyY2xlMi5yYWRpdXMoKTtcclxuXHJcbiAgICAgICAgaWYocmFkaXVzMiA8IGRpc3QgKyByYWRpdXMxKXtcclxuICAgICAgICAgICAgY29uc3QgZCA9IChyYWRpdXMxIC8gKHJhZGl1czIgLSByYWRpdXMxKSkgKiBkaXN0O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmNpcmNsZTEuY2VudGVyLnBvc2l0aW9uLmFkZCggYzF0bzIudW5pdCgpLm11bChkKSApO1xyXG4gICAgICAgICAgICB0aGlzLnBvaW50LnNldFBvc2l0aW9uKHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5wb2ludC5zZXROYW1lKFwi54K5XCIpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdGFuZ2VudF9wb3NpdGlvbnNfbGlzdCA6IFZlYzJbXSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IoY29uc3QgY2lyY2xlIG9mIFt0aGlzLmNpcmNsZTEsIHRoaXMuY2lyY2xlMl0pe1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhbmdlbnRfcG9zaXRpb25zID0gY2FsY0NpcmNsZVBvaW50VGFuZ2VudChjaXJjbGUuY2VudGVyLnBvc2l0aW9uLCBjaXJjbGUucmFkaXVzKCksIHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIHRhbmdlbnRfcG9zaXRpb25zX2xpc3QucHVzaCguLi50YW5nZW50X3Bvc2l0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMubGluZXNbMF0ucG9pbnRBLnNldFBvc2l0aW9uKCB0YW5nZW50X3Bvc2l0aW9uc19saXN0WzBdICk7XHJcbiAgICAgICAgICAgIHRoaXMubGluZXNbMF0ucG9pbnRCLnNldFBvc2l0aW9uKCB0YW5nZW50X3Bvc2l0aW9uc19saXN0WzJdICk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxpbmVzWzFdLnBvaW50QS5zZXRQb3NpdGlvbiggdGFuZ2VudF9wb3NpdGlvbnNfbGlzdFsxXSApO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVzWzFdLnBvaW50Qi5zZXRQb3NpdGlvbiggdGFuZ2VudF9wb3NpdGlvbnNfbGlzdFszXSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZWFkaW5nKCk6IFJlYWRpbmcge1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVhZGluZyh0aGlzLCBUVCgnRHJhdyB0YW5nZW50cyB0byB0aGUgdHdvIGNpcmNsZXMuJyksIFtdKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2FsY0NpcmNsZVBvaW50VGFuZ2VudChjZW50ZXIgOiBWZWMyLCByYWRpdXMgOiBudW1iZXIsIHBvc2l0aW9uIDogVmVjMikgOiBbVmVjMiwgVmVjMl0ge1xyXG4gICAgY29uc3QgY2VudGVyX3BvaW50X2Rpc3RhbmNlID0gY2VudGVyLmRpc3RhbmNlKHBvc2l0aW9uKTtcclxuICAgIGNvbnN0IHRhbmdlbnRfcG9pbnRfZGlzdGFuY2UgPSBNYXRoLnNxcnQoY2VudGVyX3BvaW50X2Rpc3RhbmNlICogY2VudGVyX3BvaW50X2Rpc3RhbmNlIC0gcmFkaXVzICogcmFkaXVzKTtcclxuXHJcbiAgICBjb25zdCBbYSwgYiwgY10gPSBbIHJhZGl1cywgdGFuZ2VudF9wb2ludF9kaXN0YW5jZSwgY2VudGVyX3BvaW50X2Rpc3RhbmNlIF07XHJcbiAgICBjb25zdCBjb3NfdGhldGEgPSAoYipiICsgYypjIC0gYSphKSAvICgyICogYiAqIGMgKTtcclxuICAgIGNvbnN0IHRoZXRhICA9IE1hdGguYWNvcyhjb3NfdGhldGEpO1xyXG5cclxuICAgIGNvbnN0IHBjID0gY2VudGVyLnN1Yihwb3NpdGlvbik7XHJcbiAgICBjb25zdCB0YW5nZW50X3Bvc2l0aW9ucyA6IFZlYzJbXSA9IFtdO1xyXG4gICAgZm9yKGNvbnN0IHRoIG9mIFt0aGV0YSwgLXRoZXRhXSl7XHJcbiAgICAgICAgY29uc3QgdiA9IHBjLnJvdCh0aCkudW5pdCgpLm11bCh0YW5nZW50X3BvaW50X2Rpc3RhbmNlKTtcclxuXHJcbiAgICAgICAgY29uc3QgdGFuZ2VudF9wb3NpdGlvbiA9IHBvc2l0aW9uLmFkZCh2KTtcclxuICAgICAgICB0YW5nZW50X3Bvc2l0aW9ucy5wdXNoKHRhbmdlbnRfcG9zaXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0YW5nZW50X3Bvc2l0aW9ucyBhcyBbVmVjMiwgVmVjMl07XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDaXJjbGVQb2ludFRhbmdlbnQgZXh0ZW5kcyBUYW5nZW50IHtcclxuICAgIGNpcmNsZSA6IENpcmNsZTtcclxuICAgIHBvaW50ICA6IFBvaW50O1xyXG4gICAgdGFuZ2VudFBvaW50cyA6IFBvaW50W10gPSBbXTtcclxuICAgIGxpbmVzICAgOiBMaW5lQnlQb2ludHNbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCBvYmogOiB7IGNpcmNsZSA6IENpcmNsZSwgcG9pbnQgOiBQb2ludCB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG4gICAgICAgIHRoaXMuY2lyY2xlID0gb2JqLmNpcmNsZTtcclxuICAgICAgICB0aGlzLnBvaW50ICA9IG9iai5wb2ludDtcclxuXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IG9iaiBhcyBhbnk7XHJcblxyXG4gICAgICAgIGlmKGRhdGEudGFuZ2VudFBvaW50cyAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB0aGlzLnRhbmdlbnRQb2ludHMgPSBkYXRhLnRhbmdlbnRQb2ludHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMudGFuZ2VudFBvaW50cyA9IFsgUG9pbnQuemVybygpLCBQb2ludC56ZXJvKCkgXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGRhdGEubGluZXMgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5saW5lcyA9IGRhdGEubGluZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVfYSA9IG1ha2VMaW5lU2VnbWVudCh0aGlzLnBvaW50LCBQb2ludC56ZXJvKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lX2IgPSBtYWtlTGluZVNlZ21lbnQodGhpcy5wb2ludCwgUG9pbnQuemVybygpKTtcclxuICAgICAgICAgICAgdGhpcy5saW5lcyA9IFsgbGluZV9hLCBsaW5lX2IgXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2FsYygpO1xyXG4gICAgfVxyXG5cclxuICAgIG1ha2VPYmooKSA6IGFueSB7XHJcbiAgICAgICAgbGV0IG9iaiA9IE9iamVjdC5hc3NpZ24oc3VwZXIubWFrZU9iaigpLCB7XHJcbiAgICAgICAgICAgIGNpcmNsZSAgIDogdGhpcy5jaXJjbGUudG9PYmooKSxcclxuICAgICAgICAgICAgcG9pbnQgICA6IHRoaXMucG9pbnQudG9PYmooKSxcclxuICAgICAgICAgICAgdGFuZ2VudFBvaW50cyA6IHRoaXMudGFuZ2VudFBvaW50cy5tYXAoeCA9PiB4LnRvT2JqKCkpLFxyXG4gICAgICAgICAgICBsaW5lcyA6IHRoaXMubGluZXMubWFwKHggPT4geC50b09iaigpKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFsbFNoYXBlcyhzaGFwZXMgOiBNYXRoRW50aXR5W10pe1xyXG4gICAgICAgIHN1cGVyLmdldEFsbFNoYXBlcyhzaGFwZXMpO1xyXG4gICAgICAgIHNoYXBlcy5wdXNoKHRoaXMuY2lyY2xlLCB0aGlzLnBvaW50LCAuLi50aGlzLnRhbmdlbnRQb2ludHMsIC4uLnRoaXMubGluZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlcGVuZGVuY2llcygpIDogTWF0aEVudGl0eVtdIHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuZGVwZW5kZW5jaWVzKCkuY29uY2F0KFsgdGhpcy5jaXJjbGUsIHRoaXMucG9pbnQgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TW9kZShtb2RlIDogTW9kZSl7XHJcbiAgICAgICAgdGhpcy50YW5nZW50UG9pbnRzLmZvckVhY2goeCA9PiB4LnNldE1vZGUobW9kZSkpO1xyXG4gICAgICAgIHRoaXMubGluZXMuZm9yRWFjaCh4ID0+IHguc2V0TW9kZShtb2RlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdygpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50YW5nZW50UG9pbnRzLmZvckVhY2goeCA9PiB4LmRyYXcoKSk7XHJcbiAgICAgICAgdGhpcy5saW5lcy5mb3JFYWNoKHggPT4geC5kcmF3KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGMoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdGFuZ2VudF9wb3NpdGlvbnMgPSBjYWxjQ2lyY2xlUG9pbnRUYW5nZW50KHRoaXMuY2lyY2xlLmNlbnRlci5wb3NpdGlvbiwgdGhpcy5jaXJjbGUucmFkaXVzKCksIHRoaXMucG9pbnQucG9zaXRpb24pO1xyXG5cclxuICAgICAgICBmb3IoY29uc3QgW2ksIHBvc2l0aW9uXSBvZiB0YW5nZW50X3Bvc2l0aW9ucy5lbnRyaWVzKCkpe1xyXG4gICAgICAgICAgICB0aGlzLnRhbmdlbnRQb2ludHNbaV0uc2V0UG9zaXRpb24ocG9zaXRpb24pO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVzW2ldLnBvaW50Qi5zZXRQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlYWRpbmcoKTogUmVhZGluZyB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWFkaW5nKHRoaXMsIFRUKCdEcmF3IGEgdGFuZ2VudCBsaW5lIGZyb20gdGhlIHBvaW50IHRvIHRoZSBjaXJjbGUuJyksXHJcbiAgICAgICAgICAgIFt0aGlzLnBvaW50XS5jb25jYXQodGhpcy50YW5nZW50UG9pbnRzKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBbmdsZUJpc2VjdG9yIGV4dGVuZHMgQWJzdHJhY3RMaW5lIHtcclxuICAgIGxpbmVBICAgICAgIDogQWJzdHJhY3RMaW5lO1xyXG4gICAgZGlyZWN0aW9uQSAgOiBudW1iZXI7XHJcblxyXG4gICAgbGluZUIgICAgICAgOiBBYnN0cmFjdExpbmU7XHJcbiAgICBkaXJlY3Rpb25CICA6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiB7IGxpbmVLaW5kIDogbnVtYmVyLCBsaW5lQSA6IEFic3RyYWN0TGluZSwgZGlyZWN0aW9uQSA6IG51bWJlciwgbGluZUIgOiBBYnN0cmFjdExpbmUsIGRpcmVjdGlvbkIgOiBudW1iZXIgfSl7XHJcbiAgICAgICAgKG9iaiBhcyBhbnkpLnBvaW50QSA9IGdldENvbW1vblBvaW50T2ZMaW5lcyhvYmoubGluZUEsIG9iai5saW5lQik7IFxyXG4gICAgICAgIHN1cGVyKG9iaiBhcyBhbnkpO1xyXG4gICAgICAgIHRoaXMubGluZUEgICAgICAgPSBvYmoubGluZUE7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25BICA9IG9iai5kaXJlY3Rpb25BO1xyXG5cclxuICAgICAgICB0aGlzLmxpbmVCICAgICAgID0gb2JqLmxpbmVCO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uQiAgPSBvYmouZGlyZWN0aW9uQjtcclxuXHJcbiAgICAgICAgdGhpcy5jYWxjKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZU9iaigpIDogYW55IHtcclxuICAgICAgICBsZXQgb2JqID0gT2JqZWN0LmFzc2lnbihzdXBlci5tYWtlT2JqKCksIHtcclxuICAgICAgICAgICAgbGluZUEgICAgICA6IHRoaXMubGluZUEudG9PYmooKSxcclxuICAgICAgICAgICAgZGlyZWN0aW9uQSA6IHRoaXMuZGlyZWN0aW9uQSxcclxuICAgICAgICAgICAgbGluZUIgICAgICA6IHRoaXMubGluZUIudG9PYmooKSxcclxuICAgICAgICAgICAgZGlyZWN0aW9uQiA6IHRoaXMuZGlyZWN0aW9uQlxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuICAgIGRlcGVuZGVuY2llcygpIDogTWF0aEVudGl0eVtdIHtcclxuICAgICAgICByZXR1cm4gWyB0aGlzLmxpbmVBLCB0aGlzLmxpbmVCIF07XHJcbiAgICB9XHJcblxyXG4gICAgY2FsYygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmUgPSB0aGlzLmxpbmVBLmUubXVsKHRoaXMuZGlyZWN0aW9uQSkuYWRkKHRoaXMubGluZUIuZS5tdWwodGhpcy5kaXJlY3Rpb25CKSkubXVsKDAuNSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZGluZygpIDogUmVhZGluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dFJlYWRpbmcoVFQoXCJEcmF3IHRoZSBhbmdsZSBiaXNlY3Rvci5cIikpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgUHJvcGVydHlDaGFuZ2Uge1xyXG4gICAgd2lkZ2V0IDogV2lkZ2V0O1xyXG4gICAgcHJvcGVydHlOYW1lIDogc3RyaW5nO1xyXG4gICAgb2xkVmFsdWUgOiBhbnk7XHJcbiAgICBuZXdWYWx1ZSA6IGFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiB7IHdpZGdldCA6IFdpZGdldCwgcHJvcGVydHlOYW1lIDogc3RyaW5nLCBvbGRWYWx1ZSA6IGFueSwgbmV3VmFsdWUgOiBhbnkgfSl7XHJcbiAgICAgICAgdGhpcy53aWRnZXQgPSBvYmoud2lkZ2V0O1xyXG4gICAgICAgIHRoaXMucHJvcGVydHlOYW1lID0gb2JqLnByb3BlcnR5TmFtZTtcclxuICAgICAgICB0aGlzLm9sZFZhbHVlID0gb2JqLm9sZFZhbHVlO1xyXG4gICAgICAgIHRoaXMubmV3VmFsdWUgPSBvYmoubmV3VmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZU9iaigpIDogYW55IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0eXBlTmFtZTogdGhpcy5jb25zdHJ1Y3Rvci5uYW1lLFxyXG4gICAgICAgICAgICB3aWRnZXQgOiB0aGlzLndpZGdldC50b09iaigpLFxyXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWUgOiB0aGlzLnByb3BlcnR5TmFtZSxcclxuICAgICAgICAgICAgb2xkVmFsdWUgOiBhbnlUb09iaih0aGlzLm9sZFZhbHVlKSxcclxuICAgICAgICAgICAgbmV3VmFsdWUgOiBhbnlUb09iaih0aGlzLm5ld1ZhbHVlKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXN0b3JlKCl7XHJcbiAgICAgICAgc2V0UHJvcGVydHkodGhpcy53aWRnZXQsIHRoaXMucHJvcGVydHlOYW1lLCB0aGlzLm9sZFZhbHVlKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE1vdGlvbiBleHRlbmRzIE1hdGhFbnRpdHkge1xyXG4gICAgcHJvcGVydHlDaGFuZ2VzIDogUHJvcGVydHlDaGFuZ2VbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgcHJvcGVydHlDaGFuZ2VzIDogUHJvcGVydHlDaGFuZ2VbXSB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG4gICAgICAgIHRoaXMucHJvcGVydHlDaGFuZ2VzID0gb2JqLnByb3BlcnR5Q2hhbmdlcztcclxuICAgIH1cclxuXHJcbiAgICBtYWtlT2JqKCkgOiBhbnkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHN1cGVyLm1ha2VPYmooKSwge1xyXG4gICAgICAgICAgICBwcm9wZXJ0eUNoYW5nZXMgOiB0aGlzLnByb3BlcnR5Q2hhbmdlcy5tYXAoeCA9PiB4Lm1ha2VPYmooKSksXHJcbiAgICAgICAgfSk7XHJcbiAgICB9ICAgIFxyXG5cclxuICAgIGFkZFByb3BlcnR5Q2hhbmdlKHdpZGdldCA6IFdpZGdldCwgcHJvcGVydHlOYW1lIDogc3RyaW5nLCBvbGRWYWx1ZSA6IGFueSwgbmV3VmFsdWUgOiBhbnkpe1xyXG4gICAgICAgIG1zZyhgYWRkIFByb3BlcnR5IENoYW5nZSAke3Byb3BlcnR5TmFtZX0gJHtvbGRWYWx1ZX09PiR7bmV3VmFsdWV9YCk7XHJcbiAgICAgICAgdGhpcy5wcm9wZXJ0eUNoYW5nZXMucHVzaCggbmV3IFByb3BlcnR5Q2hhbmdlKHsgd2lkZ2V0LCBwcm9wZXJ0eU5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSB9KSApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRpbmcoKTogUmVhZGluZyB7XHJcbiAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgIH0gICBcclxuXHJcbiAgICBhc3luYyBhbmltYXRlKHNwZWVjaCA6IGkxOG5fdHMuQWJzdHJhY3RTcGVlY2gpe1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgd2hpbGUodHJ1ZSl7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICBsZXQgcmF0ZSA9IChlbmRUaW1lIC0gc3RhcnRUaW1lKSAvIDMwMDA7XHJcbiAgICAgICAgICAgIGlmKGdldFBsYXlNb2RlKCkgPT0gUGxheU1vZGUuZmFzdEZvcndhcmQpe1xyXG4gICAgICAgICAgICAgICAgcmF0ZSAqPSAzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKDEgPCByYXRlKXtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IoY29uc3QgcHJvcGVydHlfY2hhbmdlIG9mIHRoaXMucHJvcGVydHlDaGFuZ2VzKXtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihwcm9wZXJ0eV9jaGFuZ2Uud2lkZ2V0IGluc3RhbmNlb2YgUG9pbnQgJiYgcHJvcGVydHlfY2hhbmdlLnByb3BlcnR5TmFtZSA9PSBcInBvc2l0aW9uXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gcHJvcGVydHlfY2hhbmdlLndpZGdldDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWlkd2F5X3Bvc2l0aW9uID0gVmVjMi5pbnRlcnBvbGF0ZShwcm9wZXJ0eV9jaGFuZ2Uub2xkVmFsdWUsIHByb3BlcnR5X2NoYW5nZS5uZXdWYWx1ZSwgcmF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQuc2V0UG9zaXRpb24obWlkd2F5X3Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgVmlldy5jdXJyZW50LmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgVmlldy5jdXJyZW50LnVwZGF0ZVNoYXBlcygpO1xyXG4gICAgICAgICAgICBhd2FpdCBzbGVlcCgxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc3RvcmVQcm9wZXJ0eUNoYW5nZXMoKXtcclxuICAgICAgICB0aGlzLnByb3BlcnR5Q2hhbmdlcy5yZXZlcnNlKCkuZm9yRWFjaCh4ID0+IHgucmVzdG9yZSgpKTtcclxuICAgIH1cclxufVxyXG5cclxufVxyXG4iLCJuYW1lc3BhY2UgcGxhbmVfdHMge1xyXG4vL1xyXG5leHBvcnQgdHlwZSBHcmlkID0gbGF5b3V0X3RzLkdyaWQ7XHJcbmV4cG9ydCB0eXBlIFVJICAgPSBsYXlvdXRfdHMuVUk7XHJcblxyXG5leHBvcnQgdHlwZSAgUGxheU1vZGUgPSBpMThuX3RzLlBsYXlNb2RlO1xyXG5leHBvcnQgY29uc3QgUGxheU1vZGUgPSBpMThuX3RzLlBsYXlNb2RlO1xyXG5leHBvcnQgY29uc3Qgc2V0UGxheU1vZGUgPSBpMThuX3RzLnNldFBsYXlNb2RlO1xyXG5leHBvcnQgY29uc3QgZ2V0UGxheU1vZGUgPSBpMThuX3RzLmdldFBsYXlNb2RlO1xyXG5leHBvcnQgdHlwZSAgQWJzdHJhY3RTcGVlY2ggPSBpMThuX3RzLkFic3RyYWN0U3BlZWNoO1xyXG5leHBvcnQgY29uc3QgQWJzdHJhY3RTcGVlY2ggPSBpMThuX3RzLkFic3RyYWN0U3BlZWNoO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNsZWVwID0gaTE4bl90cy5zbGVlcDtcclxuZXhwb3J0IGNvbnN0IHN1bSAgPSBpMThuX3RzLnN1bTtcclxuZXhwb3J0IGNvbnN0IGxpc3QgID0gaTE4bl90cy5saXN0O1xyXG5leHBvcnQgY29uc3QgaW50ZXJzZWN0aW9uICA9IGkxOG5fdHMuaW50ZXJzZWN0aW9uO1xyXG5leHBvcnQgY29uc3QgcGVybXV0YXRpb24gID0gaTE4bl90cy5wZXJtdXRhdGlvbjtcclxuZXhwb3J0IGNvbnN0IGNpcmN1bGFyUGVybXV0YXRpb24gID0gaTE4bl90cy5jaXJjdWxhclBlcm11dGF0aW9uO1xyXG5leHBvcnQgY29uc3QgYXJlU2V0c0VxdWFsICA9IGkxOG5fdHMuYXJlU2V0c0VxdWFsO1xyXG5leHBvcnQgY29uc3QgaXNTdWJTZXQgID0gaTE4bl90cy5pc1N1YlNldDtcclxuZXhwb3J0IGNvbnN0IGNoZWNrID0gaTE4bl90cy5jaGVjaztcclxuZXhwb3J0IGNvbnN0IHJlbW92ZSAgPSBpMThuX3RzLnJlbW92ZTtcclxuZXhwb3J0IHR5cGUgIFNwZWVjaCA9IGkxOG5fdHMuU3BlZWNoO1xyXG5leHBvcnQgY29uc3QgU3BlZWNoID0gaTE4bl90cy5TcGVlY2g7XHJcblxyXG5leHBvcnQgY29uc3QgcmVuZGVyS2F0ZXhTdWIgPSBwYXJzZXJfdHMucmVuZGVyS2F0ZXhTdWI7XHJcbmV4cG9ydCBjb25zdCBvcGVyYXRvciA9IHBhcnNlcl90cy5vcGVyYXRvcjtcclxuXHJcbmNsYXNzIFQxIHsgXHJcbiAgICBzZXQgICA6IFNldDxhbnk+OyBcclxuICAgIHZhbHVlIDogYW55O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNldCA6IFNldDxhbnk+LCB2YWx1ZSA6IGFueSl7XHJcbiAgICAgICAgdGhpcy5zZXQgICA9IHNldDtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFQyIHsgXHJcbiAgICBhcnJheSA6IEFycmF5PGFueT47XHJcbiAgICB2YWx1ZSA6IGFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcnJheSA6IEFycmF5PGFueT4sIHZhbHVlICA6IGFueSl7XHJcbiAgICAgICAgdGhpcy5hcnJheSA9IGFycmF5O1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgVDMgeyBcclxuICAgIGFycmF5IDogQXJyYXk8YW55PjtcclxuICAgIHZhbHVlIDogYW55O1xyXG4gICAgaW5kZXggOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXJyYXkgOiBBcnJheTxhbnk+LCB2YWx1ZSA6IGFueSwgaW5kZXggOiBudW1iZXIpe1xyXG4gICAgICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBUNCB7IFxyXG4gICAgbWFwICAgOiBNYXA8YW55LGFueT47XHJcbiAgICBrZXkgICA6IGFueTtcclxuICAgIHZhbHVlIDogYW55O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1hcCA6IE1hcDxhbnksYW55Piwga2V5IDogYW55LCB2YWx1ZSA6IGFueSl7XHJcbiAgICAgICAgdGhpcy5tYXAgICA9IG1hcDtcclxuICAgICAgICB0aGlzLmtleSAgID0ga2V5O1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgUmVsYXRpb25Mb2cgPSBUMXxUMnxUM3xUNDtcclxuXHJcbmV4cG9ydCBjbGFzcyBVbmRvRGF0YSB7XHJcbiAgICBvcGVyYXRpb25zIDogT3BlcmF0aW9uW10gPSBbXTtcclxuICAgIHNoYXBlcyAgICAgOiBNYXRoRW50aXR5W10gPSBbXTtcclxuICAgIHJlbGF0aW9uTG9ncyA6IFJlbGF0aW9uTG9nW10gPSBbXTtcclxuICAgIGhpc3RvcnlVSXMgICA6IFVJW10gPSBbXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVuZG9SZWxhdGlvbnMocmVsYXRpb25Mb2dzIDogUmVsYXRpb25Mb2dbXSl7XHJcbiAgICBmb3IoY29uc3QgeCBvZiByZWxhdGlvbkxvZ3Muc2xpY2UoKS5yZXZlcnNlKCkpe1xyXG4gICAgICAgIGlmKHggaW5zdGFuY2VvZiBUMSl7XHJcbiAgICAgICAgICAgIGFzc2VydCh4LnNldC5oYXMoeC52YWx1ZSkpO1xyXG4gICAgICAgICAgICB4LnNldC5kZWxldGUoeC52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoeCBpbnN0YW5jZW9mIFQyKXtcclxuICAgICAgICAgICAgYXNzZXJ0KHguYXJyYXkuaW5jbHVkZXMoeC52YWx1ZSkpO1xyXG4gICAgICAgICAgICByZW1vdmUoeC5hcnJheSwgeC52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoeCBpbnN0YW5jZW9mIFQzKXtcclxuICAgICAgICAgICAgeC5hcnJheS5zcGxpY2UoeC5pbmRleCwgMCwgeC52YWx1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHggaW5zdGFuY2VvZiBUNCl7XHJcbiAgICAgICAgICAgIGFzc2VydCh4Lm1hcC5nZXQoeC5rZXkpID09IHgudmFsdWUpO1xyXG4gICAgICAgICAgICB4Lm1hcC5kZWxldGUoeC5rZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWRvUmVsYXRpb25zKHJlbGF0aW9uTG9ncyA6IFJlbGF0aW9uTG9nW10pe1xyXG4gICAgZm9yKGNvbnN0IHggb2YgcmVsYXRpb25Mb2dzKXtcclxuICAgICAgICBpZih4IGluc3RhbmNlb2YgVDEpe1xyXG4gICAgICAgICAgICBhc3NlcnQoIXguc2V0Lmhhcyh4LnZhbHVlKSk7XHJcbiAgICAgICAgICAgIHguc2V0LmFkZCh4LnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih4IGluc3RhbmNlb2YgVDIpe1xyXG4gICAgICAgICAgICBhc3NlcnQoIXguYXJyYXkuaW5jbHVkZXMoeC52YWx1ZSkpO1xyXG4gICAgICAgICAgICB4LmFycmF5LnB1c2goeC52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoeCBpbnN0YW5jZW9mIFQzKXtcclxuICAgICAgICAgICAgcmVtb3ZlKHguYXJyYXksIHgudmFsdWUpOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHggaW5zdGFuY2VvZiBUNCl7XHJcbiAgICAgICAgICAgIGFzc2VydCgheC5tYXAuaGFzKHgua2V5KSk7XHJcbiAgICAgICAgICAgIHgubWFwLnNldCh4LmtleSwgeC52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBWaWV3LmN1cnJlbnQucmVsYXRpb25Mb2dzLnB1c2goeCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBNeVNldDxUPiB7XHJcbiAgICBwcm90ZWN0ZWQgZGF0YTogU2V0PFQ+ID0gbmV3IFNldDxUPigpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGRhdGE6IFRbXSA9IFtdKXtcclxuICAgICAgICB0aGlzLmRhdGEgPSBuZXcgU2V0PFQ+KGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCl7XHJcbiAgICAgICAgdGhpcy5kYXRhLmNsZWFyKCk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBhZGQodmFsdWU6IFQpOiB2b2lkIHtcclxuICAgICAgICBpZighdGhpcy5kYXRhLmhhcyh2YWx1ZSkpe1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEuYWRkKHZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIFZpZXcuY3VycmVudC5yZWxhdGlvbkxvZ3MucHVzaChuZXcgVDEodGhpcy5kYXRhLCB2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICBcclxuICAgIGhhcyhpdGVtOiBUKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLmRhdGEuaGFzKGl0ZW0pO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbHVlcygpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEudmFsdWVzKCk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBmb3JFYWNoKGNhbGxiYWNrOiAodmFsdWU6IFQsIHZhbHVlMjogVCwgc2V0OiBTZXQ8VD4pID0+IHZvaWQsIHRoaXNBcmc/OiBhbnkpOiB2b2lkIHtcclxuICAgICAgdGhpcy5kYXRhLmZvckVhY2goY2FsbGJhY2ssIHRoaXNBcmcpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgdG9BcnJheSgpOiBUW10ge1xyXG4gICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIFtTeW1ib2wuaXRlcmF0b3JdKCk6IEl0ZXJhdG9yPFQ+e1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEudmFsdWVzKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBNeUFycmF5PFQ+IHtcclxuICAgIHByaXZhdGUgZGF0YTogVFtdID0gW107XHJcbiAgXHJcbiAgICBjb25zdHJ1Y3Rvcihpbml0aWFsRGF0YTogVFtdID0gW10pIHtcclxuICAgICAgdGhpcy5kYXRhID0gaW5pdGlhbERhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKXtcclxuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZmlsdGVyKGNhbGxiYWNrOiAoaXRlbTogVCwgaW5kZXg6IG51bWJlciwgYXJyYXk6IFRbXSkgPT4gYm9vbGVhbik6IE15QXJyYXk8VD4ge1xyXG4gICAgICBjb25zdCBmaWx0ZXJlZEFycmF5ID0gdGhpcy5kYXRhLmZpbHRlcihjYWxsYmFjayk7XHJcbiAgICAgIHJldHVybiBuZXcgTXlBcnJheTxUPihmaWx0ZXJlZEFycmF5KTtcclxuICAgIH1cclxuXHJcbiAgICB0b0FycmF5KCk6IFRbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBzb21lKGZuYyA6ICh4OlQpPT5ib29sZWFuKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnNvbWUoZm5jKTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kKGZuYyA6ICh4OlQpPT5ib29sZWFuKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmZpbmQoZm5jKTtcclxuICAgIH1cclxuXHJcbiAgICBwdXNoKHZhbHVlIDogVCl7XHJcbiAgICAgICAgdGhpcy5kYXRhLnB1c2godmFsdWUpO1xyXG5cclxuICAgICAgICBWaWV3LmN1cnJlbnQucmVsYXRpb25Mb2dzLnB1c2gobmV3IFQyKHRoaXMuZGF0YSwgdmFsdWUpKTtcclxuICAgIH1cclxuXHJcbiAgICBmbGF0KCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5mbGF0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgW1N5bWJvbC5pdGVyYXRvcl0oKTogSXRlcmF0b3I8VD4ge1xyXG4gICAgICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICAgICAgY29uc3QgYXJyYXkgPSB0aGlzLmRhdGE7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5leHQoKTogSXRlcmF0b3JSZXN1bHQ8VD4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgYXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IGFycmF5W2luZGV4KytdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUoeCA6IFQpe1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5kYXRhLmluZGV4T2YoeCk7XHJcbiAgICAgICAgaWYoaW5kZXggPT0gLTEpe1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEuc3BsaWNlKGluZGV4LCAxKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5kYXRhW2luZGV4XTtcclxuICAgICAgICAgICAgVmlldy5jdXJyZW50LnJlbGF0aW9uTG9ncy5wdXNoKG5ldyBUMyh0aGlzLmRhdGEsIHZhbHVlLCBpbmRleCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE15TWFwPEssIFY+IHtcclxuICAgIHByaXZhdGUgbWFwOiBNYXA8SywgVj4gPSBuZXcgTWFwPEssIFY+KCk7XHJcbiAgXHJcbiAgICBjb25zdHJ1Y3RvcigpIHt9XHJcbiAgXHJcbiAgICBzZXQoa2V5OiBLLCB2YWx1ZTogVik6IHZvaWQge1xyXG4gICAgICAgIGlmKCF0aGlzLm1hcC5oYXMoa2V5KSl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1hcC5zZXQoa2V5LCB2YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICBWaWV3LmN1cnJlbnQucmVsYXRpb25Mb2dzLnB1c2gobmV3IFQ0KHRoaXMubWFwLCBrZXksIHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gIFxyXG4gICAgZ2V0KGtleTogSyk6IFYgfCB1bmRlZmluZWQge1xyXG4gICAgICByZXR1cm4gdGhpcy5tYXAuZ2V0KGtleSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBjbGVhcigpe1xyXG4gICAgICAgIHRoaXMubWFwLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZW50cmllcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXAuZW50cmllcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGtleXMoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXAua2V5cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbHVlcygpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1hcC52YWx1ZXMoKTtcclxuICAgIH1cclxufVxyXG4gIFxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBNeWxpc3Q8VD4oc2V0IDogTXlTZXQ8VD4gfCB1bmRlZmluZWQpIDogVFtdIHtcclxuICAgIGlmKHNldCA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcblxyXG4gICAgICAgIHJldHVybiBzZXQudG9BcnJheSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIE15SW50ZXJzZWN0aW9uPFQ+KHNldDEgOiBNeVNldDxUPiB8IHVuZGVmaW5lZCwgc2V0MiA6IE15U2V0PFQ+IHwgdW5kZWZpbmVkKSA6IFRbXSB7XHJcbiAgICBpZihzZXQxID09IHVuZGVmaW5lZCB8fCBzZXQyID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBBcnJheS5mcm9tKHNldDEudmFsdWVzKCkpLmZpbHRlcih4ID0+IHNldDIuaGFzKHgpKTtcclxufVxyXG5cclxuXHJcbmNvbnN0ICRkaWMgPSBuZXcgTWFwPHN0cmluZywgSFRNTEVsZW1lbnQ+KCk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gJChpZCA6IHN0cmluZykgOiBIVE1MRWxlbWVudCB7XHJcbiAgICBsZXQgZWxlID0gJGRpYy5nZXQoaWQpO1xyXG4gICAgaWYoZWxlID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpITtcclxuICAgICAgICAkZGljLnNldChpZCwgZWxlKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZWxlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gJGRpdihpZCA6IHN0cmluZykgOiBIVE1MRGl2RWxlbWVudCB7XHJcbiAgICByZXR1cm4gJChpZCkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiAkaW5wKGlkIDogc3RyaW5nKSA6IEhUTUxJbnB1dEVsZW1lbnQge1xyXG4gICAgcmV0dXJuICQoaWQpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiAkZGxnKGlkIDogc3RyaW5nKSA6IEhUTUxEaWFsb2dFbGVtZW50IHtcclxuICAgIHJldHVybiAkKGlkKSBhcyBIVE1MRGlhbG9nRWxlbWVudDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uICRzZWwoaWQgOiBzdHJpbmcpIDogSFRNTFNlbGVjdEVsZW1lbnQge1xyXG4gICAgcmV0dXJuICQoaWQpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG59XHJcblxyXG4vLyBEZWZpbmUgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBQcm9taXNlXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3YWl0Rm9yQ2xpY2soZWxlbWVudDogSFRNTEVsZW1lbnQpOiBQcm9taXNlPG51bWJlcj4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPG51bWJlcj4oKHJlc29sdmUgOiAoaWQ6bnVtYmVyKT0+dm9pZCkgPT4ge1xyXG5cclxuICAgICAgICBjb25zdCBjbGlja0hhbmRsZXIgPSAoZXYgOiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0hhbmRsZXIpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXYudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0X3ZhbHVlID0gTmFOO1xyXG4gICAgICAgICAgICBpZih0YXJnZXQuY2xhc3NOYW1lID09IGVudW1TZWxlY3Rpb25DbGFzc05hbWUpe1xyXG5cclxuICAgICAgICAgICAgICAgIHJlc3VsdF92YWx1ZSA9IHBhcnNlSW50KHRhcmdldC5kYXRhc2V0Lm9wZXJhdGlvbl92YWx1ZSEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0X3ZhbHVlKTsgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tIYW5kbGVyKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNob3dNZW51KGRsZ1R5cGUgOiBtZW51RGlhbG9nVHlwZSl7XHJcbiAgICBjb25zdCBkbGcgPSBtZW51RGlhbG9ncy5nZXQoZGxnVHlwZSkhO1xyXG4gICAgYXNzZXJ0KGRsZyAhPSB1bmRlZmluZWQpO1xyXG4gICAgZGxnLnNob3dNb2RhbCgpO1xyXG4gICAgXHJcbiAgICBsZXQgdmFsdWUgOiBudW1iZXJcclxuXHJcbiAgICBpZihWaWV3LmlzUGxheUJhY2spe1xyXG4gICAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IHBsYXlCYWNrT3BlcmF0aW9ucy5uZXh0KCk7XHJcbiAgICAgICAgLy8gbXNnKGBzaG93IE1lbnU6JHtvcGVyYXRpb24uZHVtcCgpfWApO1xyXG4gICAgICAgIFZpZXcuY3VycmVudC5hZGRPcGVyYXRpb24ob3BlcmF0aW9uKTtcclxuICAgICAgICBpZihvcGVyYXRpb24gaW5zdGFuY2VvZiBFbnVtU2VsZWN0aW9uKXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbShkbGcuaHRtbCgpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZW51bVNlbGVjdGlvbkNsYXNzTmFtZSkpIGFzIEhUTUxFbGVtZW50W107XHJcblxyXG4gICAgICAgICAgICBjb25zdCBlbnVtX3ZhbHVlID0gYCR7b3BlcmF0aW9uLnZhbHVlfWA7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gID0gaXRlbXMuZmluZCh4ID0+IHguZGF0YXNldC5vcGVyYXRpb25fdmFsdWUgPT0gZW51bV92YWx1ZSkhO1xyXG4gICAgICAgICAgICBhc3NlcnQoaXRlbSAhPSB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICBhd2FpdCBtb3ZlUG9pbnRlckFuZEhpZ2hsaWdodChpdGVtKTtcclxuXHJcbiAgICAgICAgICAgIHZhbHVlID0gb3BlcmF0aW9uLnZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2V7XHJcblxyXG4gICAgICAgIHZhbHVlID0gYXdhaXQgd2FpdEZvckNsaWNrKGRsZy5odG1sKCkpO1xyXG5cclxuICAgICAgICBWaWV3LmN1cnJlbnQuYWRkT3BlcmF0aW9uKG5ldyBFbnVtU2VsZWN0aW9uKHZhbHVlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGxnLmNsb3NlKCk7XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlXHJcbn1cclxuICAgICAgICBcclxuZXhwb3J0IGNsYXNzIE15RXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0IDogc3RyaW5nID0gXCJcIil7XHJcbiAgICAgICAgc3VwZXIodGV4dCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnQoYiA6IGJvb2xlYW4sIG1zZyA6IHN0cmluZyA9IFwiXCIpe1xyXG4gICAgaWYoIWIpe1xyXG4gICAgICAgIHRocm93IG5ldyBNeUVycm9yKG1zZyk7XHJcbiAgICB9XHJcbn0gICAgXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbXNnKHR4dCA6IHN0cmluZyl7XHJcbiAgICBsYXlvdXRfdHMuTG9nLmxvZyh0eHQpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmFuZ2UobjogbnVtYmVyKSA6IG51bWJlcltde1xyXG4gICAgcmV0dXJuIFsuLi5BcnJheShuKS5rZXlzKCldO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbGFzdDxUPih2IDogQXJyYXk8VD4pIDogVCB7XHJcbiAgICByZXR1cm4gdlt2Lmxlbmd0aCAtIDFdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdW5pcXVlPFQ+KHYgOiBBcnJheTxUPikgOiBUW10ge1xyXG4gICAgbGV0IHNldCA9IG5ldyBTZXQ8VD4oKTtcclxuICAgIGNvbnN0IHJldCA6IFRbXSA9IFtdO1xyXG4gICAgZm9yKGNvbnN0IHggb2Ygdil7XHJcbiAgICAgICAgaWYoIXNldC5oYXMoeCkpe1xyXG4gICAgICAgICAgICBzZXQuYWRkKHgpO1xyXG4gICAgICAgICAgICByZXQucHVzaCh4KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXZlcmFnZSh2IDogbnVtYmVyW10pIDogbnVtYmVyIHtcclxuICAgIHJldHVybiBzdW0odikgLyB2Lmxlbmd0aDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoVGV4dChmaWxlVVJMOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZmlsZVVSTCk7XHJcbiAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UhLnRleHQoKTtcclxuXHJcbiAgICByZXR1cm4gdGV4dDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBzZXVkb0NvbG9yKG4gOiBudW1iZXIpIDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdIHtcclxuICAgIG4gPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBuKSk7XHJcblxyXG4gICAgbGV0IHI6bnVtYmVyLCBnOm51bWJlciwgYjpudW1iZXI7XHJcblxyXG4gICAgaWYobiA8IDAuMjUpe1xyXG4gICAgICAgIGIgPSAxO1xyXG4gICAgICAgIGcgPSBuICogNDtcclxuICAgICAgICByID0gMDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYobiA8IDAuNSl7XHJcbiAgICAgICAgYiA9ICgwLjUgLSBuKSAqIDQ7XHJcbiAgICAgICAgZyA9IDE7XHJcbiAgICAgICAgciA9IDA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKG4gPCAwLjc1KXtcclxuICAgICAgICBiID0gMDtcclxuICAgICAgICBnID0gMTtcclxuICAgICAgICByID0gKG4gLSAwLjUpICogNDtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgYiA9IDA7XHJcbiAgICAgICAgZyA9ICgxIC0gbikgKiA0O1xyXG4gICAgICAgIHIgPSAxO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBbciwgZywgYl07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0b1JhZGlhbihkZWdyZWUgOiBudW1iZXIpIDogbnVtYmVyIHtcclxuICAgIHJldHVybiBkZWdyZWUgKiBNYXRoLlBJIC8gMTgwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdG9EZWdyZWUocmFkaWFuIDogbnVtYmVyKSA6IG51bWJlciB7XHJcbiAgICByZXR1cm4gcmFkaWFuICogMTgwIC8gTWF0aC5QSTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluUmFuZ2Uoc3RhcnQgOiBudW1iZXIsIHRoZXRhIDogbnVtYmVyLCBlbmQgOiBudW1iZXIpIDogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBmID0gKHg6bnVtYmVyKT0+eyByZXR1cm4gMCA8PSB4ID8geCA6IDE4MCArIHggfTtcclxuXHJcbiAgICBbc3RhcnQgLCB0aGV0YSwgZW5kXSA9IFsgZihzdGFydCksIGYodGhldGEpLCBmKGVuZCldO1xyXG4gICAgWyB0aGV0YSwgZW5kIF0gPSBbIHRoZXRhIC0gc3RhcnQsIGVuZCAtIHN0YXJ0IF07XHJcblxyXG4gICAgY29uc3QgZyA9ICh4Om51bWJlcik9PnsgcmV0dXJuIDAgPD0geCA/IHggOiAzNjAgKyB4IH07XHJcbiAgICBbdGhldGEsIGVuZF0gPSBbIGcodGhldGEpLCBnKGVuZCldO1xyXG5cclxuICAgIGFzc2VydCgwIDw9IHRoZXRhICYmIDAgPD0gZW5kKTtcclxuICAgIHJldHVybiB0aGV0YSA8PSBlbmQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXIoc3JjX21pbiA6IG51bWJlciwgc3JjX3ZhbCA6IG51bWJlciwgc3JjX21heCA6IG51bWJlciwgZHN0X21pbiA6IG51bWJlciwgZHN0X21heCA6IG51bWJlcikgOiBudW1iZXIge1xyXG4gICAgY29uc3QgcmF0aW8gPSAoc3JjX3ZhbCAtIHNyY19taW4pIC8gKHNyY19tYXggLSBzcmNfbWluKTsgICAgXHJcbiAgICBjb25zdCBkc3RfdmFsID0gZHN0X21pbiArIHJhdGlvICogKGRzdF9tYXggLSBkc3RfbWluKTtcclxuXHJcbiAgICByZXR1cm4gZHN0X3ZhbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIE1pbk1heFhZKHAxIDogVmVjMiwgcDIgOiBWZWMyKSA6IFtudW1iZXIsbnVtYmVyLG51bWJlcixudW1iZXJdIHtcclxuICAgIGNvbnN0IG1pbl94ID0gTWF0aC5taW4ocDEueCwgcDIueCk7XHJcbiAgICBjb25zdCBtaW5feSA9IE1hdGgubWluKHAxLnksIHAyLnkpO1xyXG5cclxuICAgIGNvbnN0IG1heF94ID0gTWF0aC5tYXgocDEueCwgcDIueCk7XHJcbiAgICBjb25zdCBtYXhfeSA9IE1hdGgubWF4KHAxLnksIHAyLnkpO1xyXG5cclxuICAgIHJldHVybiBbIG1pbl94LCBtaW5feSwgbWF4X3gsIG1heF95IF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYWlyS2V5KGEgOiBXaWRnZXQsIGIgOiBXaWRnZXQpIDogc3RyaW5nIHtcclxuICAgIHJldHVybiBhLmlkIDw9IGIuaWQgPyBgJHthLmlkfToke2IuaWR9YCA6IGAke2IuaWR9OiR7YS5pZH1gO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2xlZXBJbkZhc3RGb3J3YXJkKG1pbGxpc2Vjb25kcyA6IG51bWJlcikgOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0sIG1pbGxpc2Vjb25kcyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbm9ybWFsaXplQW5nbGUodGhldGEgOiBudW1iZXIpIDogbnVtYmVyIHtcclxuICAgIHJldHVybiAwIDw9IHRoZXRhID8gdGhldGEgOiB0aGV0YSArIDIgKiBNYXRoLlBJO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNCZXR3ZWVuQW5nbGVzKHN0YXJ0IDogbnVtYmVyLCB0aGV0YSA6IG51bWJlciwgZW5kIDogbnVtYmVyICl7XHJcbiAgICB0aGV0YSAgPSBub3JtYWxpemVBbmdsZSh0aGV0YSAtIHN0YXJ0KTtcclxuICAgIGVuZCAgICA9IG5vcm1hbGl6ZUFuZ2xlKGVuZCAtIHN0YXJ0KTtcclxuXHJcbiAgICBhc3NlcnQoMCA8PSB0aGV0YSAmJiAwIDw9IGVuZCk7XHJcbiAgICByZXR1cm4gdGhldGEgPD0gZW5kO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTmFtZSgpe1xyXG4gICAgY29uc3QgcG9pbnRzID0gVmlldy5jdXJyZW50LmFsbFJlYWxTaGFwZXMoKS5maWx0ZXIoeCA9PiB4IGluc3RhbmNlb2YgUG9pbnQpLmNvbmNhdChQb2ludC50ZW1wUG9pbnRzKTtcclxuXHJcbiAgICBjb25zdCB1cHBlcl9sYXRpbl9sZXR0ZXJzID0gaTE4bl90cy51cHBlckxhdGluTGV0dGVycztcclxuICAgIGNvbnN0IGlkeGVzID0gcG9pbnRzLm1hcCh4ID0+IHVwcGVyX2xhdGluX2xldHRlcnMuaW5kZXhPZih4Lm5hbWUpKTtcclxuXHJcbiAgICBsZXQgbmFtZSA6IHN0cmluZztcclxuICAgIGlmKGlkeGVzLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICBuYW1lID0gdXBwZXJfbGF0aW5fbGV0dGVyc1swXTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgY29uc3QgbWF4X2lkeCA9IE1hdGgubWF4KC4uLmlkeGVzKTtcclxuICAgICAgICBpZihtYXhfaWR4ID09IC0xKXtcclxuICAgICAgICAgICAgbmFtZSA9IHVwcGVyX2xhdGluX2xldHRlcnNbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYobWF4X2lkeCArIDEgPCB1cHBlcl9sYXRpbl9sZXR0ZXJzLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIG5hbWUgPSB1cHBlcl9sYXRpbl9sZXR0ZXJzW21heF9pZHggKyAxXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzZXR0ZXJOYW1lKG5hbWUgOiBzdHJpbmcpIDogc3RyaW5nIHtcclxuICAgIHJldHVybiBcInNldFwiICsgbmFtZVswXS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zdWJzdHJpbmcoMSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRQcm9wZXJ0eShvYmogOiBhbnksIHByb3BlcnR5X25hbWUgOiBzdHJpbmcsIG5ld1ZhbHVlIDogYW55KXtcclxuICAgIGNvbnN0IHNldHRlcl9uYW1lID0gc2V0dGVyTmFtZShwcm9wZXJ0eV9uYW1lKTtcclxuICAgIGlmKG9ialtzZXR0ZXJfbmFtZV0gIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICBvYmpbc2V0dGVyX25hbWVdKG5ld1ZhbHVlKTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgb2JqW3Byb3BlcnR5X25hbWVdID0gbmV3VmFsdWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhbnlUb09iaihvYmogOiBhbnkpIDogYW55IHtcclxuICAgIGlmKEFycmF5LmlzQXJyYXkob2JqKSl7XHJcbiAgICAgICAgcmV0dXJuIG9iai5tYXAoeCA9PiBhbnlUb09iaih4KSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKG9iaiBpbnN0YW5jZW9mIFdpZGdldCl7XHJcbiAgICAgICAgcmV0dXJuIG9iai50b09iaigpO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzQ2xvY2t3aXNlKHBvaW50cyA6IFBvaW50W10pIDogYm9vbGVhbiB7XHJcbiAgICBhc3NlcnQocG9pbnRzLmxlbmd0aCA9PSAzKTtcclxuICAgIGNvbnN0IFtBLCBCLCBDXSA9IHBvaW50cy5tYXAoeCA9PiB4LnBvc2l0aW9uKTtcclxuICAgIGNvbnN0IEFCID0gQi5zdWIoQSk7XHJcbiAgICBjb25zdCBBQyA9IEMuc3ViKEEpO1xyXG4gICAgXHJcbiAgICBjb25zdCBjcm9zc19wcm9kdWN0ID0gQUIuY3Jvc3MoQUMpO1xyXG4gICAgYXNzZXJ0KGNyb3NzX3Byb2R1Y3QgIT0gMCk7XHJcblxyXG4gICAgcmV0dXJuIDAgPCBjcm9zc19wcm9kdWN0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdG9DbG9ja3dpc2VQb2ludHMocG9pbnRzIDogUG9pbnRbXSkgOiBQb2ludFtdIHtcclxuICAgIGlmKHBvaW50cy5sZW5ndGggPT0gMyl7XHJcblxyXG4gICAgICAgIGlmKGlzQ2xvY2t3aXNlKHBvaW50cykpe1xyXG4gICAgICAgICAgICByZXR1cm4gcG9pbnRzLnNsaWNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiBbMiwgMSwgMF0ubWFwKGkgPT4gcG9pbnRzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYocG9pbnRzLmxlbmd0aCAhPSA0KXtcclxuICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IFtwMSwgcDIsIHAzXSA9IHRvQ2xvY2t3aXNlUG9pbnRzKHBvaW50cy5zbGljZSgwLCAzKSk7XHJcbiAgICBjb25zdCBwNCA9IHBvaW50c1szXTtcclxuICAgIGlmKGlzQ2xvY2t3aXNlKFtwMSxwNCxwMl0pKXtcclxuICAgICAgICByZXR1cm4gW3AxLCBwNCwgcDIsIHAzXTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoaXNDbG9ja3dpc2UoW3AyLCBwNCwgcDNdKSl7XHJcbiAgICAgICAgcmV0dXJuIFtwMSwgcDIsIHA0LCBwMyBdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihpc0Nsb2Nrd2lzZShbcDMsIHA0LCBwMV0pKXtcclxuICAgICAgICByZXR1cm4gW3AzLCBwNCwgcDEsIHAyXTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcblxyXG4gICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmxldCByZWFzb25Nc2dNYXAgOiBNYXA8bnVtYmVyLCBzdHJpbmc+IHwgdW5kZWZpbmVkO1xyXG5cclxuZnVuY3Rpb24gbWFrZVJlYXNvbk1zZ01hcCgpe1xyXG4gICAgcmV0dXJuIG5ldyBNYXA8bnVtYmVyLCBzdHJpbmc+KFtcclxuICAgICAgICBbIFRyaWFuZ2xlQ29uZ3J1ZW5jZVJlYXNvbi5zaWRlX3NpZGVfc2lkZSwgVFQoXCJTaW5jZSB0aHJlZSBwYWlycyBvZiBzaWRlcyBvZiB0d28gdHJpYW5nbGVzIGFyZSBlcXVhbCxcIildLFxyXG4gICAgICAgIFsgVHJpYW5nbGVDb25ncnVlbmNlUmVhc29uLnNpZGVfYW5nbGVfc2lkZSwgVFQoXCJTaW5jZSB0d28gcGFpcnMgb2Ygc2lkZXMgb2YgdHdvIHRyaWFuZ2xlcyBhcmUgZXF1YWwsIGFuZCB0aGUgaW5jbHVkZWQgYW5nbGVzIGFyZSBlcXVhbCxcIildLFxyXG4gICAgICAgIFsgVHJpYW5nbGVDb25ncnVlbmNlUmVhc29uLmFuZ2xlX3NpZGVfYW5nbGUsIFRUKFwiU2luY2UgdHdvIHBhaXJzIG9mIGFuZ2xlcyBvZiB0d28gdHJpYW5nbGVzIGFyZSBlcXVhbCwgYW5kIHRoZSBpbmNsdWRlZCBzaWRlcyBhcmUgZXF1YWwsXCIpXSxcclxuXHJcbiAgICAgICAgWyBTaGFwZUVxdWF0aW9uUmVhc29uLnN1bV9vZl9hbmdsZXNfaXNfcGksIFRUKFwiU2luY2UgdGhlIHN1bSBvZiB0aGUgYW5nbGVzIGlzIM+ALFwiKV0sXHJcbiAgICAgICAgWyBTaGFwZUVxdWF0aW9uUmVhc29uLnN1bV9vZl9hbmdsZXNfaXNfZXF1YWwsIFRUKFwiU2luY2UgdGhlIHN1bSBvZiB0aGUgYW5nbGVzIGlzIGVxdWFsLFwiKV0sXHJcbiAgICAgICAgWyBTaGFwZUVxdWF0aW9uUmVhc29uLnN1bV9vZl9sZW5ndGhzX2lzX2VxdWFsLCBUVChcIlNpbmNlIHRoZSBzdW0gb2YgdGhlIGxlbmd0aHMgaXMgZXF1YWwsXCIpXSxcclxuICAgICAgICBbIFNoYXBlRXF1YXRpb25SZWFzb24uc3VtX29mX2ludGVyaW9yX2FuZ2xlc19vZl90cmlhbmdsZV9pc19waSwgVFQoXCJTaW5jZSB0aGUgc3VtIG9mIHRoZSBpbnRlcmlvciBhbmdsZXMgb2YgYSB0cmlhbmdsZSBpcyDPgCxcIildLFxyXG4gICAgICAgIFsgU2hhcGVFcXVhdGlvblJlYXNvbi5zdW1fb2ZfaW50ZXJpb3JfYW5nbGVzX29mX3F1YWRyaWxhdGVyYWxfaXNfMnBpLCBUVChcIlNpbmNlIHRoZSBzdW0gb2YgdGhlIGludGVyaW9yIGFuZ2xlcyBvZiBhIHF1YWRyaWxhdGVyYWwgaXMgMiDPgCxcIildLFxyXG4gICAgICAgIFsgU2hhcGVFcXVhdGlvblJlYXNvbi5leHRlcmlvcl9hbmdsZV90aGVvcmVtLCBUVChcIlNpbmNlIHRoZSBleHRlcmlvciBhbmdsZSBvZiBhIHRyaWFuZ2xlIGVxdWFscyB0aGUgc3VtIG9mIHR3byByZW1vdGUgaW50ZXJpb3IgYW5nbGVzLFwiKV0sXHJcblxyXG4gICAgICAgIFsgTGVuZ3RoRXF1YWxpdHlSZWFzb24ucmFkaWlfZXF1YWwsIFRUKFwiU2luY2UgdGhlIHR3byBjaXJjbGVzIGhhdmUgdGhlIHNhbWUgcmFkaXVzLFwiKV0sXHJcbiAgICAgICAgWyBMZW5ndGhFcXVhbGl0eVJlYXNvbi5jb21tb25fY2lyY2xlLCBUVChcIlNpbmNlIHR3byBsZW5ndGggc3ltYm9scyBhcmUgdGhlIHJhZGlpIG9mIHRoZSBzYW1lIGNpcmNsZSxcIildLFxyXG4gICAgICAgIFsgTGVuZ3RoRXF1YWxpdHlSZWFzb24ucGFyYWxsZWxfbGluZXNfZGlzdGFuY2UsIFRUKFwiU2luY2UgdGhlIGRpc3RhbmNlIGJldHdlZW4gdHdvIHBhcmFsbGVsIGxpbmVzIGlzIGNvbnN0YW50LFwiKV0sXHJcbiAgICAgICAgWyBMZW5ndGhFcXVhbGl0eVJlYXNvbi5ub3RfdXNlZCwgVFQoXCJTaW5jZSB0aGUgdHdvIGNpcmNsZXMgaGF2ZSB0aGUgc2FtZSByYWRpdXMsXCIpXSxcclxuICAgICAgICBbIExlbmd0aEVxdWFsaXR5UmVhc29uLmNvbmdydWVudF90cmlhbmdsZXMsIFRUKFwiU2luY2UgdGhlIHR3byB0cmlhbmdsZXMgYXJlIGNvbmdydWVudCxcIildLFxyXG4gICAgICAgIFsgTGVuZ3RoRXF1YWxpdHlSZWFzb24ucGFyYWxsZWxvZ3JhbV9vcHBvc2l0ZV9zaWRlcywgVFQoXCJTaW5jZSB0aGUgb3Bwb3NpdGUgc2lkZXMgb2YgYSBwYXJhbGxlbG9ncmFtIGFyZSBlcXVhbCBpbiBsZW5ndGgsXCIpXSxcclxuICAgICAgICBbIExlbmd0aEVxdWFsaXR5UmVhc29uLnBhcmFsbGVsb2dyYW1fZGlhZ29uYWxfYmlzZWN0aW9uLCBUVChcIlNpbmNlIHRoZSBkaWFnb25hbHMgb2YgYSBwYXJhbGxlbG9ncmFtIGludGVyc2VjdCBhdCB0aGUgbWlkcG9pbnQsXCIpXSxcclxuICAgICAgICBbIExlbmd0aEVxdWFsaXR5UmVhc29uLmVxdWl2YWxlbmNlX2NsYXNzLCBUVChcIlNpbmNlIHRoZXNlIHR3byBsZW5ndGggc3ltYm9scyBhcmUgZXF1YWwgdG8gYW5vdGhlciBsZW5ndGggc3ltYm9sLFwiKV0sXHJcbiAgICAgICAgWyBMZW5ndGhFcXVhbGl0eVJlYXNvbi5taWRwb2ludCwgVFQoXCJTaW5jZSB0aGUgbWlkcG9pbnQgYmlzZWN0cyB0aGUgbGluZSBzZWdtZW50LFwiKV0sXHJcblxyXG4gICAgICAgIFsgQW5nbGVFcXVhbGl0eVJlYXNvbi52ZXJ0aWNhbF9hbmdsZXMsIFRUKFwiU2luY2UgdmVydGljYWwgYW5nbGVzIGFyZSBlcXVhbCxcIildLFxyXG4gICAgICAgIFsgQW5nbGVFcXVhbGl0eVJlYXNvbi5wYXJhbGxlbF9saW5lX2FuZ2xlcywgVFQoXCJTaW5jZSB0aGUgY29ycmVzcG9uZGluZyBhbmdsZXMgb2YgcGFyYWxsZWwgbGluZXMgYXJlIGVxdWFsLFwiKV0sXHJcbiAgICAgICAgWyBBbmdsZUVxdWFsaXR5UmVhc29uLmFuZ2xlX2Jpc2VjdG9yLCBUVChcIlNpbmNlIHRoZXNlIGFuZ2xlcyBhcmUgZm9ybWVkIGJ5IHRoZSBhbmdsZSBiaXNlY3RvcnMsXCIpXSxcclxuICAgICAgICBbIEFuZ2xlRXF1YWxpdHlSZWFzb24uY29uZ3J1ZW50X3RyaWFuZ2xlcywgVFQoXCJTaW5jZSB0aGUgdHdvIHRyaWFuZ2xlcyBhcmUgY29uZ3J1ZW50LFwiKV0sXHJcbiAgICAgICAgWyBBbmdsZUVxdWFsaXR5UmVhc29uLnBhcmFsbGVsb2dyYW1fb3Bwb3NpdGVfYW5nbGVzLCBUVChcIlNpbmNlIHRoZSBkaWFnb25hbHMgb2YgYSBwYXJhbGxlbG9ncmFtIGFyZSBjb25ncnVlbnQsXCIpXSxcclxuICAgICAgICBbIEFuZ2xlRXF1YWxpdHlSZWFzb24uc2ltaWxhcl90cmlhbmdsZXMsIFRUKFwiU2luY2UgdGhlIHR3byB0cmlhbmdsZXMgYXJlIHNpbWlsYXIsXCIpIF0sXHJcbiAgICAgICAgWyBBbmdsZUVxdWFsaXR5UmVhc29uLmlzb3NjZWxlc190cmlhbmdsZV9iYXNlX2FuZ2xlcywgVFQoXCJTaW5jZSB0aGUgYmFzZSBhbmdsZXMgb2YgYW4gaXNvc2NlbGVzIHRyaWFuZ2xlIGFyZSBlcXVhbCxcIildLFxyXG5cclxuICAgICAgICBbIFBhcmFsbGVsb2dyYW1SZWFzb24uZWFjaF9vcHBvc2l0ZV9zaWRlc19hcmVfZXF1YWwsIFRUKFwiU2luY2UgZWFjaCBvcHBvc2l0ZSBzaWRlcyBhcmUgZXF1YWwsXCIpXSxcclxuICAgICAgICBbIFBhcmFsbGVsb2dyYW1SZWFzb24uZWFjaF9vcHBvc2l0ZV9zaWRlc19hcmVfcGFyYWxsZWwsIFRUKFwiU2luY2UgZWFjaCBvcHBvc2l0ZSBzaWRlcyBhcmUgcGFyYWxsZWwsXCIpXSxcclxuICAgICAgICBbIFBhcmFsbGVsb2dyYW1SZWFzb24uZWFjaF9vcHBvc2l0ZV9hbmdsZXNfYXJlX2VxdWFsLCBUVChcIlNpbmNlIGVhY2ggb3Bwb3NpdGUgYW5nbGVzIGFyZSBlcXVhbCxcIildLFxyXG4gICAgICAgIFsgUGFyYWxsZWxvZ3JhbVJlYXNvbi5vbmVfb3Bwb3NpdGVfc2lkZXNfYXJlX3BhcmFsbGVsX2FuZF9lcXVhbCwgVFQoXCJTaW5jZSBvbmUgb3Bwb3NpdGUgc2lkZXMgYXJlIHBhcmFsbGVsIGFuZCBlcXVhbCxcIildLFxyXG4gICAgICAgIFsgUGFyYWxsZWxvZ3JhbVJlYXNvbi5lYWNoX2RpYWdvbmFsX2Jpc2VjdGlvbnMsIFRUKFwiU2luY2UgdGhlIGRpYWdvbmFscyBpbnRlcnNlY3QgYXQgdGhlaXIgbWlkcG9pbnRzLFwiKV0sXHJcblxyXG4gICAgICAgIFsgUmhvbWJ1c1JlYXNvbi5hbGxfc2lkZXNfYXJlX2VxdWFsLCBUVChcIlNpbmNlIGFsbCBmb3VyIHNpZGVzIGFyZSBlcXVhbCBpbiBsZW5ndGgsXCIpXSxcclxuXHJcbiAgICAgICAgWyBJc29zY2VsZXNUcmlhbmdsZVJlYXNvbi50d29fc2lkZXNfYXJlX2VxdWFsLCBUVChcIlNpbmNlIHR3byBzaWRlcyBhcmUgZXF1YWwgaW4gbGVuZ3RoLFwiKV0sXHJcblxyXG4gICAgICAgIFsgUGFyYWxsZWxSZWFzb24ucGFyYWxsZWxvZ3JhbSwgVFQoXCJTaW5jZSB0aGUgb3Bwb3NpdGUgc2lkZXMgb2YgYSBwYXJhbGxlbG9ncmFtIGFyZSBwYXJhbGxlbCxcIikgXSxcclxuICAgICAgICBbIFBhcmFsbGVsUmVhc29uLmNvcnJlc3BvbmRpbmdfYW5nbGVzX29yX2FsdGVybmF0ZV9hbmdsZXNfYXJlX2VxdWFsLCBUVChcIlNpbmNlIGNvcnJlc3BvbmRpbmcgYW5nbGVzIG9yIGFsdGVybmF0ZSBhbmdsZXMgYXJlIGVxdWFsLFwiKV0sXHJcbiAgICAgICAgWyBQYXJhbGxlbFJlYXNvbi5zdXBwbGVtZW50YXJ5X2FuZ2xlcywgVFQoXCJTaW5jZSB0aGUgc3VtIG9mIHRoZSB0d28gaW50ZXJpb3IgYW5nbGVzIG9uIHRoZSBzYW1lIHNpZGUgaXMgz4AsXCIpXSxcclxuXHJcbiAgICAgICAgWyBUcmlhbmdsZVNpbWlsYXJpdHlSZWFzb24udHdvX2VxdWFsX2FuZ2xlX3BhaXJzLCBUVChcIlNpbmNlIGJvdGggcGFpcnMgb2YgYW5nbGVzIGluIHR3byB0cmlhbmdsZXMgYXJlIGVxdWFsLFwiKV0sXHJcblxyXG4gICAgICAgIFsgRXhwclRyYW5zZm9ybVJlYXNvbi50cmFuc3Bvc2l0aW9uLCBUVChcIlRyYW5zcG9zZSB0aGUgdGVybS5cIikgXSxcclxuICAgICAgICBbIEV4cHJUcmFuc2Zvcm1SZWFzb24uZXF1YWxpdHksIFRUKFwiRnJvbSB0aGUgYWJvdmUgZXF1YXRpb25zLFwiKSBdLFxyXG4gICAgICAgIFsgRXhwclRyYW5zZm9ybVJlYXNvbi5hZGRfZXF1YXRpb24sIFRUKFwiQWRkIHR3byBlcXVhdGlvbnMgdG9nZXRoZXIuXCIpIF0sXHJcbiAgICAgICAgWyBFeHByVHJhbnNmb3JtUmVhc29uLnN1YnN0aXR1dGlvbiwgVFQoXCJTdWJzdGl0dXRlIHRoZSB0ZXJtLlwiKSBdLFxyXG4gICAgICAgIFsgRXhwclRyYW5zZm9ybVJlYXNvbi5kaXZpZGluZ19lcXVhdGlvbiwgVFQoXCJEaXZpZGluZyBhbiBlcXVhdGlvbiBieSB0aGUgc2FtZSB0ZXJtLlwiKSBdLFxyXG4gICAgICAgIFsgRXhwclRyYW5zZm9ybVJlYXNvbi5hcmdfc2hpZnQsIFRUKFwiU2hpZnQgdGhlIGFyZ3VtZW50LlwiKV0sXHJcblxyXG4gICAgICAgIFswICwgVFQoXCJubyByZWFzb25cIildLFxyXG4gICAgXSk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVhc29uTXNnKHJlYXNvbiA6IG51bWJlcikgOiBzdHJpbmcge1xyXG4gICAgaWYocmVhc29uTXNnTWFwID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgcmVhc29uTXNnTWFwID0gbWFrZVJlYXNvbk1zZ01hcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRleHQgPSByZWFzb25Nc2dNYXAuZ2V0KHJlYXNvbik7XHJcbiAgICBpZih0ZXh0ICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgcmV0dXJuIHRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxufVxyXG5cclxuXHJcbn1cclxuIiwibmFtZXNwYWNlIHBsYW5lX3RzIHtcclxuLy9cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VUcmlhbmdsZUNvbmdydWVuY2UoQSA6IFRyaWFuZ2xlLCBCIDogVHJpYW5nbGUpIDogVHJpYW5nbGVDb25ncnVlbmNlIHwgdW5kZWZpbmVkIHtcclxuICAgIGNvbnN0IHNpZGVzQSA9IHJhbmdlKDMpLm1hcChpID0+IFsgQS5wb2ludHNbaV0sIEEucG9pbnRzWyhpKzEpICUgM11dKTtcclxuICAgIGNvbnN0IHNpZGVzQiA9IHJhbmdlKDMpLm1hcChpID0+IFsgQi5wb2ludHNbaV0sIEIucG9pbnRzWyhpKzEpICUgM11dKTtcclxuXHJcbiAgICBjb25zdCBhdXhpbGlhcnlTaGFwZXMgOiBTaGFwZVtdID0gW107XHJcbiAgICBjb25zdCBlcXVhbF9zaWRlID0gWyBmYWxzZSwgZmFsc2UsIGZhbHNlIF07XHJcbiAgICBmb3IoY29uc3QgaWR4IG9mIHJhbmdlKDMpKXtcclxuICAgICAgICBjb25zdCBzaWRlQSA9IHNpZGVzQVtpZHhdO1xyXG4gICAgICAgIGNvbnN0IHNpZGVCID0gc2lkZXNCW2lkeF07XHJcblxyXG4gICAgICAgIGNvbnN0IGtleUEgPSBwYWlyS2V5KHNpZGVBWzBdLCBzaWRlQVsxXSk7XHJcbiAgICAgICAgY29uc3Qga2V5QiA9IHBhaXJLZXkoc2lkZUJbMF0sIHNpZGVCWzFdKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGVuZ3RoU3ltYm9sQSA9IHBvaW50c1RvTGVuZ3RoU3ltYm9sLmdldChrZXlBKTtcclxuICAgICAgICBjb25zdCBsZW5ndGhTeW1ib2xCID0gcG9pbnRzVG9MZW5ndGhTeW1ib2wuZ2V0KGtleUIpO1xyXG5cclxuICAgICAgICBpZihsZW5ndGhTeW1ib2xBICE9IHVuZGVmaW5lZCAmJiBsZW5ndGhTeW1ib2xCICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGlmKGlzRXF1YWxMZW5ndGgobGVuZ3RoU3ltYm9sQSwgbGVuZ3RoU3ltYm9sQikpe1xyXG5cclxuICAgICAgICAgICAgICAgIGF1eGlsaWFyeVNoYXBlcy5wdXNoKGxlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEIpO1xyXG4gICAgICAgICAgICAgICAgZXF1YWxfc2lkZVtpZHhdID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBlcXVhbF9zaWRlX2NvdW50ID0gZXF1YWxfc2lkZS5maWx0ZXIoeCA9PiB4KS5sZW5ndGg7XHJcbiAgICAvLyBtc2coYGVxdWFsIHNpZGUgY291bnQ6JHtlcXVhbF9zaWRlX2NvdW50fWApO1xyXG5cclxuICAgIGlmKGVxdWFsX3NpZGVfY291bnQgPT0gMyl7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUcmlhbmdsZUNvbmdydWVuY2UoeyBzaGFwZXM6W0EsIEJdLCByZWFzb24gOiBUcmlhbmdsZUNvbmdydWVuY2VSZWFzb24uc2lkZV9zaWRlX3NpZGUsIGF1eGlsaWFyeVNoYXBlcyA6IGF1eGlsaWFyeVNoYXBlcyB9KVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZihlcXVhbF9zaWRlX2NvdW50ID09IDIpe1xyXG4gICAgICAgIGNvbnN0IGlkeCA9IGVxdWFsX3NpZGUuaW5kZXhPZihmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgYW5nbGVfcG9pbnRzQSA9IFtBLnBvaW50c1soaWR4ICsgMSkgJSAzXSwgQS5wb2ludHNbKGlkeCArIDIpICUgM10sIEEucG9pbnRzW2lkeF0gXTtcclxuICAgICAgICBjb25zdCBhbmdsZV9wb2ludHNCID0gW0IucG9pbnRzWyhpZHggKyAxKSAlIDNdLCBCLnBvaW50c1soaWR4ICsgMikgJSAzXSwgQi5wb2ludHNbaWR4XSBdO1xyXG5cclxuICAgICAgICBjb25zdCBhbmdsZUEgPSBmaW5kQW5nbGUoYW5nbGVfcG9pbnRzQSk7XHJcbiAgICAgICAgY29uc3QgYW5nbGVCID0gZmluZEFuZ2xlKGFuZ2xlX3BvaW50c0IpO1xyXG4gICAgXHJcbiAgICAgICAgaWYoYW5nbGVBICE9IHVuZGVmaW5lZCAmJiBhbmdsZUIgIT0gdW5kZWZpbmVkICYmIGlzRXF1YWxBbmdsZShhbmdsZUEsIGFuZ2xlQikpe1xyXG4gICAgICAgICAgICBhdXhpbGlhcnlTaGFwZXMucHVzaChhbmdsZUEsIGFuZ2xlQik7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHJpYW5nbGVDb25ncnVlbmNlKHsgc2hhcGVzIDogW0EsIEJdLCByZWFzb24gOiBUcmlhbmdsZUNvbmdydWVuY2VSZWFzb24uc2lkZV9hbmdsZV9zaWRlLCBhdXhpbGlhcnlTaGFwZXMgOiBhdXhpbGlhcnlTaGFwZXMgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZihlcXVhbF9zaWRlX2NvdW50ID09IDEpe1xyXG4gICAgICAgIGNvbnN0IGVxX2lkeCA9IGVxdWFsX3NpZGUuaW5kZXhPZih0cnVlKTtcclxuICAgICAgICBmb3IoY29uc3QgaWR4IG9mIFtlcV9pZHgsIChlcV9pZHggKyAyKSAlIDNdKXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlX3BvaW50c0EgPSBbIEEucG9pbnRzW2lkeF0sIEEucG9pbnRzWyhpZHggKyAxKSAlIDNdLCBBLnBvaW50c1soaWR4ICsgMikgJSAzXSBdO1xyXG4gICAgICAgICAgICBjb25zdCBhbmdsZV9wb2ludHNCID0gWyBCLnBvaW50c1tpZHhdLCBCLnBvaW50c1soaWR4ICsgMSkgJSAzXSwgQi5wb2ludHNbKGlkeCArIDIpICUgM10gXTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlQSA9IGZpbmRBbmdsZShhbmdsZV9wb2ludHNBKTtcclxuICAgICAgICAgICAgaWYoYW5nbGVBID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhbmdsZUIgPSBmaW5kQW5nbGUoYW5nbGVfcG9pbnRzQik7XHJcbiAgICAgICAgICAgIGlmKGFuZ2xlQiA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKGlzRXF1YWxBbmdsZShhbmdsZUEsIGFuZ2xlQikpe1xyXG4gICAgICAgICAgICAgICAgYXV4aWxpYXJ5U2hhcGVzLnB1c2goYW5nbGVBLCBhbmdsZUIpO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBUcmlhbmdsZUNvbmdydWVuY2UoeyBzaGFwZXMgOiBbQSwgQl0sIHJlYXNvbiA6IFRyaWFuZ2xlQ29uZ3J1ZW5jZVJlYXNvbi5hbmdsZV9zaWRlX2FuZ2xlLCBhdXhpbGlhcnlTaGFwZXMgOiBhdXhpbGlhcnlTaGFwZXMgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRyaWFuZ2xlQ29uZ3J1ZW5jZSBleHRlbmRzIFN0YXRlbWVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiB7IHJlYXNvbj8gOiBudW1iZXIsIHNoYXBlcyA6IE1hdGhFbnRpdHlbXSwgYXV4aWxpYXJ5U2hhcGVzPyA6IE1hdGhFbnRpdHlbXSB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRpbmcoKTogUmVhZGluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dFJlYWRpbmcoVFQoXCJ0aGUgdHdvIHRyaWFuZ2xlcyBhcmUgY29uZ3J1ZW50LlwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UmVsYXRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnNldFJlbGF0aW9ucygpO1xyXG4gICAgICAgIGNvbnN0IHRyaWFuZ2xlcyA9IHRoaXMuc2VsZWN0ZWRTaGFwZXMgYXMgVHJpYW5nbGVbXTtcclxuICAgICAgICBhZGRDb25ncnVlbnRUcmlhbmdsZXModHJpYW5nbGVzWzBdLCB0cmlhbmdsZXNbMV0pO1xyXG4gICAgfVxyXG59XHJcblxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwicGxhbmVfdXRpbC50c1wiIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cInN0YXRlbWVudC50c1wiIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cImRlZHVjdGlvbi90cmlhbmdsZV9jb25ncnVlbmNlLnRzXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBwbGFuZV90cyB7XHJcbi8vXHJcbmxldCBwZXJwZW5kaWN1bGFyUGFpcnMgPSBuZXcgTXlBcnJheTxbTXlTZXQ8QWJzdHJhY3RMaW5lPiwgTXlTZXQ8QWJzdHJhY3RMaW5lPl0+KCk7XHJcbmV4cG9ydCBsZXQgc3VwcGxlbWVudGFyeUFuZ2xlcyA9IG5ldyBNeUFycmF5PFtNeVNldDxBbmdsZT4sIE15U2V0PEFuZ2xlPl0+KCk7XHJcbmV4cG9ydCBjb25zdCByaWdodEFuZ2xlcyA9IG5ldyBNeVNldDxBbmdsZT4oKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb2ludHNUb0xlbmd0aFN5bWJvbCA9IG5ldyBNeU1hcDxzdHJpbmcsIExlbmd0aFN5bWJvbD4oKTtcclxuZXhwb3J0IGNvbnN0IGNlbnRlck9mQ2lyY2xlQXJjcyA9IG5ldyBNeU1hcDxQb2ludCxNeVNldDxDaXJjbGVBcmM+PigpO1xyXG5leHBvcnQgY29uc3QgcG9pbnRPbkNpcmNsZUFyY3MgPSBuZXcgTXlNYXA8UG9pbnQsTXlTZXQ8Q2lyY2xlQXJjPj4oKTtcclxuZXhwb3J0IGNvbnN0IHBvaW50T25MaW5lcyA9IG5ldyBNeU1hcDxQb2ludCxNeVNldDxBYnN0cmFjdExpbmU+PigpO1xyXG5leHBvcnQgY29uc3QgYW5nbGVNYXAgPSBuZXcgTXlNYXA8c3RyaW5nLEFuZ2xlPigpO1xyXG5cclxuZXhwb3J0IGxldCBwYXJhbGxlbG9ncmFtQ2xhc3NpZmllcnMgPSBuZXcgTXlTZXQ8UGFyYWxsZWxvZ3JhbUNsYXNzaWZpZXI+KCk7XHJcblxyXG5leHBvcnQgbGV0IGVxdWFsTGVuZ3RocyA9IG5ldyBNeUFycmF5PE15U2V0PExlbmd0aFN5bWJvbD4+KCk7XHJcbmV4cG9ydCBsZXQgZXF1YWxDaXJjbGVBcmNzID0gbmV3IE15QXJyYXk8TXlTZXQ8Q2lyY2xlQXJjPj4oKTtcclxuZXhwb3J0IGxldCBjb25ncnVlbnRUcmlhbmdsZXMgPSBuZXcgTXlBcnJheTxNeUFycmF5PFRyaWFuZ2xlPj4oKTtcclxuZXhwb3J0IGxldCBzaW1pbGFyVHJpYW5nbGVzID0gbmV3IE15QXJyYXk8TXlBcnJheTxUcmlhbmdsZT4+KCk7XHJcbmV4cG9ydCBsZXQgaXNvc2NlbGVzVHJpYW5nbGUgPSBuZXcgTXlBcnJheTxUcmlhbmdsZT4oKTtcclxuXHJcbmV4cG9ydCBsZXQgcHJvcG9zaXRpb25zID0gbmV3IE15QXJyYXk8UHJvcG9zaXRpb24+KCk7XHJcblxyXG5leHBvcnQgY29uc3QgcmVhc29uVG9Eb2MgPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPihbXHJcbiAgICBbIFNoYXBlRXF1YXRpb25SZWFzb24uc3VtX29mX2ludGVyaW9yX2FuZ2xlc19vZl90cmlhbmdsZV9pc19waSwgMTggXSxcclxuICAgIFsgU2hhcGVFcXVhdGlvblJlYXNvbi5zdW1fb2ZfaW50ZXJpb3JfYW5nbGVzX29mX3F1YWRyaWxhdGVyYWxfaXNfMnBpLCAyMSBdLFxyXG4gICAgWyBTaGFwZUVxdWF0aW9uUmVhc29uLnN1bV9vZl9pbnRlcmlvcl9hbmdsZXNfb2ZfcXVhZHJpbGF0ZXJhbF9pc18ycGksIDIzIF0sXHJcblxyXG4gICAgWyBBbmdsZUVxdWFsaXR5UmVhc29uLnZlcnRpY2FsX2FuZ2xlcywgMTcgXSxcclxuICAgIFsgQW5nbGVFcXVhbGl0eVJlYXNvbi5wYXJhbGxlbG9ncmFtX29wcG9zaXRlX2FuZ2xlcywgMTAgXSxcclxuICAgIFsgQW5nbGVFcXVhbGl0eVJlYXNvbi5hbmdsZV9iaXNlY3RvciwgMiBdLFxyXG4gICAgWyBBbmdsZUVxdWFsaXR5UmVhc29uLmlzb3NjZWxlc190cmlhbmdsZV9iYXNlX2FuZ2xlcywgMyBdLFxyXG5cclxuICAgIFsgTGVuZ3RoRXF1YWxpdHlSZWFzb24ucGFyYWxsZWxfbGluZXNfZGlzdGFuY2UsIDE2IF0sXHJcbiAgICBbIExlbmd0aEVxdWFsaXR5UmVhc29uLnBhcmFsbGVsb2dyYW1fb3Bwb3NpdGVfc2lkZXMsIDEwIF0sXHJcbiAgICBbIExlbmd0aEVxdWFsaXR5UmVhc29uLnBhcmFsbGVsb2dyYW1fZGlhZ29uYWxfYmlzZWN0aW9uLCAxMSBdLFxyXG5cclxuICAgIFsgUGFyYWxsZWxvZ3JhbVJlYXNvbi5lYWNoX29wcG9zaXRlX3NpZGVzX2FyZV9lcXVhbCwgMV0sXHJcbiAgICBbIFBhcmFsbGVsb2dyYW1SZWFzb24uZWFjaF9vcHBvc2l0ZV9hbmdsZXNfYXJlX2VxdWFsLCAyMl0sXHJcbiAgICBbIFBhcmFsbGVsb2dyYW1SZWFzb24ub25lX29wcG9zaXRlX3NpZGVzX2FyZV9wYXJhbGxlbF9hbmRfZXF1YWwsIDEyXSxcclxuICAgIFsgUGFyYWxsZWxvZ3JhbVJlYXNvbi5lYWNoX2RpYWdvbmFsX2Jpc2VjdGlvbnMsIDldLFxyXG5dKTtcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VkUmVhc29ucyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xyXG5cclxuZnVuY3Rpb24gYWRkTXlTZXRNYXA8VCwgVj4oYSA6IFQsIGIgOiBWLCBtYXA6TXlNYXA8VCwgTXlTZXQ8Vj4+KXtcclxuICAgIGxldCBzZXQgPSBtYXAuZ2V0KGEpO1xyXG4gICAgaWYoc2V0ID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgc2V0ID0gbmV3IE15U2V0PFY+KCk7XHJcbiAgICAgICAgbWFwLnNldChhLCBzZXQpO1xyXG4gICAgfVxyXG4gICAgc2V0LmFkZChiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkU2V0TWFwPFQsIFY+KGEgOiBULCBiIDogViwgbWFwOk1hcDxULCBNeVNldDxWPj4pe1xyXG4gICAgbGV0IHNldCA9IG1hcC5nZXQoYSk7XHJcbiAgICBpZihzZXQgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICBzZXQgPSBuZXcgTXlTZXQ8Vj4oKTtcclxuICAgICAgICBtYXAuc2V0KGEsIHNldCk7XHJcbiAgICB9XHJcbiAgICBzZXQuYWRkKGIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5pdFJlbGF0aW9ucygpe1xyXG4gICAgcGVycGVuZGljdWxhclBhaXJzLmNsZWFyKCk7XHJcbiAgICBzdXBwbGVtZW50YXJ5QW5nbGVzLmNsZWFyKCk7XHJcbiAgICByaWdodEFuZ2xlcy5jbGVhcigpO1xyXG5cclxuICAgIHBvaW50c1RvTGVuZ3RoU3ltYm9sLmNsZWFyKCk7XHJcbiAgICBjZW50ZXJPZkNpcmNsZUFyY3MuY2xlYXIoKTtcclxuICAgIHBvaW50T25DaXJjbGVBcmNzLmNsZWFyKCk7XHJcbiAgICBwb2ludE9uTGluZXMuY2xlYXIoKTtcclxuICAgIGFuZ2xlTWFwLmNsZWFyKCk7XHJcblxyXG4gICAgcGFyYWxsZWxvZ3JhbUNsYXNzaWZpZXJzLmNsZWFyKCk7XHJcblxyXG4gICAgZXF1YWxMZW5ndGhzLmNsZWFyKCk7XHJcbiAgICBlcXVhbENpcmNsZUFyY3MuY2xlYXIoKTtcclxuICAgIGNvbmdydWVudFRyaWFuZ2xlcy5jbGVhcigpO1xyXG4gICAgc2ltaWxhclRyaWFuZ2xlcy5jbGVhcigpO1xyXG4gICAgaXNvc2NlbGVzVHJpYW5nbGUuY2xlYXIoKTtcclxuXHJcbiAgICBwcm9wb3NpdGlvbnMuY2xlYXIoKTtcclxuXHJcbiAgICBWaWV3LmN1cnJlbnQucmVsYXRpb25Mb2dzID0gW107XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWNhbGNSZWxhdGlvbnModmlldyA6IFZpZXcpe1xyXG4gICAgaW5pdFJlbGF0aW9ucygpO1xyXG4gICAgdmlldy5zaGFwZXMuZm9yRWFjaCh4ID0+IHguc2V0UmVsYXRpb25zKCkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2VudGVyT2ZDaXJjbGVBcmNzKHBvaW50IDogUG9pbnQsIGNpcmNsZSA6IENpcmNsZUFyYyl7XHJcbiAgICBhZGRNeVNldE1hcDxQb2ludCxDaXJjbGVBcmM+KHBvaW50LCBjaXJjbGUsIGNlbnRlck9mQ2lyY2xlQXJjcyk7XHJcbiAgICBhc3NlcnQoY2VudGVyT2ZDaXJjbGVBcmNzLmdldChwb2ludCkgIT0gdW5kZWZpbmVkKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZFBvaW50T25DaXJjbGVBcmNzKHBvaW50IDogUG9pbnQsIGNpcmNsZSA6IENpcmNsZUFyYyl7XHJcbiAgICBhZGRNeVNldE1hcDxQb2ludCxDaXJjbGVBcmM+KHBvaW50LCBjaXJjbGUsIHBvaW50T25DaXJjbGVBcmNzKTtcclxuICAgIGFzc2VydChwb2ludE9uQ2lyY2xlQXJjcy5nZXQocG9pbnQpICE9IHVuZGVmaW5lZCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRQb2ludE9uTGluZXMocG9pbnQgOiBQb2ludCwgbGluZSA6IEFic3RyYWN0TGluZSl7XHJcbiAgICBhZGRNeVNldE1hcDxQb2ludCxBYnN0cmFjdExpbmU+KHBvaW50LCBsaW5lLCBwb2ludE9uTGluZXMpO1xyXG4gICAgLy8gbXNnKGBhZGQtUG9pbnQtT24tTGluZXMgcG9pbnQke3BvaW50LmlkfSBsaW5lOiR7bGluZS5pZH1gKTtcclxuICAgIGFzc2VydChwb2ludE9uTGluZXMuZ2V0KHBvaW50KSAhPSB1bmRlZmluZWQpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGluZXNCeVBvaW50KHBvaW50IDogUG9pbnQpIDogQWJzdHJhY3RMaW5lW10ge1xyXG4gICAgY29uc3QgbGluZXMgPSBwb2ludE9uTGluZXMuZ2V0KHBvaW50KTtcclxuICAgIGlmKGxpbmVzID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgICByZXR1cm4gbGluZXMudG9BcnJheSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2lyY2xlQXJjc0J5UG9pbnQocG9pbnQgOiBQb2ludCkgOiBDaXJjbGVBcmNbXSB7XHJcbiAgICBjb25zdCBjaXJjbGVzID0gcG9pbnRPbkNpcmNsZUFyY3MuZ2V0KHBvaW50KTtcclxuICAgIGlmKGNpcmNsZXMgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAgIHJldHVybiBjaXJjbGVzLnRvQXJyYXkoKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gcGVycGVuZGljdWxhciAvIHBhcmFsbGVsIGxpbmVzXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkUGVycGVuZGljdWxhclBhaXJzKGxpbmUxIDogQWJzdHJhY3RMaW5lLCBsaW5lMiA6IEFic3RyYWN0TGluZSl7XHJcbiAgICBpZihwZXJwZW5kaWN1bGFyUGFpcnMuc29tZSh4ID0+IHhbMF0uaGFzKGxpbmUxKSAmJiB4WzFdLmhhcyhsaW5lMikgfHwgeFswXS5oYXMobGluZTIpICYmIHhbMV0uaGFzKGxpbmUxKSkgKXtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBwYWlyID0gcGVycGVuZGljdWxhclBhaXJzLmZpbmQoeCA9PiB4WzBdLmhhcyhsaW5lMSkgfHwgeFswXS5oYXMobGluZTIpIHx8IHhbMV0uaGFzKGxpbmUxKSB8fCB4WzFdLmhhcyhsaW5lMikpO1xyXG4gICAgaWYocGFpciAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgIGNvbnN0IGxpbmVzID0gW2xpbmUxLCBsaW5lMl07XHJcbiAgICAgICAgZm9yKGNvbnN0IFtpLCBsaW5lX3NldF0gb2YgcGFpci5lbnRyaWVzKCkpe1xyXG4gICAgICAgICAgICBmb3IoY29uc3QgW2osIGxpbmVdIG9mIGxpbmVzLmVudHJpZXMoKSl7XHJcbiAgICAgICAgICAgICAgICBpZihsaW5lX3NldC5oYXMobGluZSkpe1xyXG4gICAgICAgICAgICAgICAgICAgIHBhaXJbMSAtIGldLmFkZCggbGluZXNbMSAtIGpdICk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBlcnBlbmRpY3VsYXJQYWlycy5wdXNoKFsgbmV3IE15U2V0PEFic3RyYWN0TGluZT4oW2xpbmUxXSksIG5ldyBNeVNldDxBYnN0cmFjdExpbmU+KFtsaW5lMl0pICBdKSAgICBcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZFBhcmFsbGVsTGluZXMobGluZTEgOiBBYnN0cmFjdExpbmUsIGxpbmUyIDogQWJzdHJhY3RMaW5lKXtcclxuICAgIGNvbnN0IGxpbmVfc2V0cyA9IHBlcnBlbmRpY3VsYXJQYWlycy5mbGF0KCkuZmlsdGVyKHggPT4geC5oYXMobGluZTEpIHx8IHguaGFzKGxpbmUyKSk7XHJcblxyXG4gICAgbGV0IGxpbmVfc2V0IDogTXlTZXQ8QWJzdHJhY3RMaW5lPjsgXHJcblxyXG4gICAgc3dpdGNoKGxpbmVfc2V0cy5sZW5ndGgpe1xyXG4gICAgY2FzZSAwIDogXHJcbiAgICAgICAgbGluZV9zZXQgPSBuZXcgTXlTZXQ8QWJzdHJhY3RMaW5lPigpOyBcclxuICAgICAgICBwZXJwZW5kaWN1bGFyUGFpcnMucHVzaChbbGluZV9zZXQsIG5ldyBNeVNldDxBYnN0cmFjdExpbmU+KCldKTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICBjYXNlIDEgOiBcclxuICAgICAgICBsaW5lX3NldCA9IGxpbmVfc2V0c1swXTsgXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0IDogXHJcbiAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgIH1cclxuXHJcbiAgICBsaW5lX3NldC5hZGQobGluZTEpO1xyXG4gICAgbGluZV9zZXQuYWRkKGxpbmUyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBlcnBlbmRpY3VsYXJMaW5lcyhsaW5lIDogQWJzdHJhY3RMaW5lKSA6IE15U2V0PEFic3RyYWN0TGluZT4gfCB1bmRlZmluZWQge1xyXG4gICAgZm9yKGNvbnN0IFtsaW5lczEsIGxpbmVzMl0gb2YgcGVycGVuZGljdWxhclBhaXJzKXtcclxuICAgICAgICBpZihsaW5lczEuaGFzKGxpbmUpKXtcclxuICAgICAgICAgICAgcmV0dXJuIGxpbmVzMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihsaW5lczIuaGFzKGxpbmUpKXtcclxuICAgICAgICAgICAgcmV0dXJuIGxpbmVzMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhcmFsbGVsTGluZXMobGluZSA6IEFic3RyYWN0TGluZSkgOiBNeVNldDxBYnN0cmFjdExpbmU+IHwgdW5kZWZpbmVkIHtcclxuICAgIHJldHVybiBwZXJwZW5kaWN1bGFyUGFpcnMuZmxhdCgpLmZpbmQoeCA9PiB4LmhhcyhsaW5lKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1BhcmFsbGVsKGxpbmVBIDogQWJzdHJhY3RMaW5lLCBsaW5lQiA6IEFic3RyYWN0TGluZSkgOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGxpbmVfc2V0ID0gZ2V0UGFyYWxsZWxMaW5lcyhsaW5lQSk7XHJcbiAgICByZXR1cm4gbGluZV9zZXQgIT0gdW5kZWZpbmVkICYmIGxpbmVfc2V0LmhhcyhsaW5lQik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1BlcnBlbmRpY3VsYXIobGluZUEgOiBBYnN0cmFjdExpbmUsIGxpbmVCIDogQWJzdHJhY3RMaW5lKSA6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgcGVycGVuZGljdWxhcl9saW5lcyA9IGdldFBlcnBlbmRpY3VsYXJMaW5lcyhsaW5lQSk7XHJcbiAgICBcclxuICAgIGlmKHBlcnBlbmRpY3VsYXJfbGluZXMgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAgIHJldHVybiBwZXJwZW5kaWN1bGFyX2xpbmVzLmhhcyhsaW5lQik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhcmVFcXVhbENpcmNsZUFyY3MoY2lyY2xlMSA6IENpcmNsZUFyYywgY2lyY2xlMiA6IENpcmNsZUFyYykgOiBib29sZWFuIHtcclxuICAgIGlmKGNpcmNsZTEgPT0gY2lyY2xlMil7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGNpcmNsZV9zZXQxID0gZXF1YWxDaXJjbGVBcmNzLmZpbmQoeCA9PiB4LmhhcyhjaXJjbGUxKSk7XHJcbiAgICBjb25zdCBjaXJjbGVfc2V0MiA9IGVxdWFsQ2lyY2xlQXJjcy5maW5kKHggPT4geC5oYXMoY2lyY2xlMikpO1xyXG5cclxuICAgIHJldHVybiBjaXJjbGVfc2V0MSAhPSB1bmRlZmluZWQgJiYgY2lyY2xlX3NldDEgPT0gY2lyY2xlX3NldDI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRFcXVhbENpcmNsZUFyY3MoY2lyY2xlMSA6IENpcmNsZUFyYywgY2lyY2xlMiA6IENpcmNsZUFyYyl7XHJcbiAgICBjb25zdCBjaXJjbGVfc2V0MSA9IGVxdWFsQ2lyY2xlQXJjcy5maW5kKHggPT4geC5oYXMoY2lyY2xlMSkpO1xyXG4gICAgY29uc3QgY2lyY2xlX3NldDIgPSBlcXVhbENpcmNsZUFyY3MuZmluZCh4ID0+IHguaGFzKGNpcmNsZTIpKTtcclxuXHJcbiAgICBpZihjaXJjbGVfc2V0MSAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgIGlmKGNpcmNsZV9zZXQyICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGlmKGNpcmNsZV9zZXQxICE9IGNpcmNsZV9zZXQyKXtcclxuXHJcbiAgICAgICAgICAgICAgICBNeWxpc3QoY2lyY2xlX3NldDIpLmZvckVhY2goeCA9PiBjaXJjbGVfc2V0MS5hZGQoeCkpO1xyXG4gICAgICAgICAgICAgICAgZXF1YWxDaXJjbGVBcmNzLnJlbW92ZShjaXJjbGVfc2V0Mik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgY2lyY2xlX3NldDEuYWRkKGNpcmNsZTIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgaWYoY2lyY2xlX3NldDIgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgY2lyY2xlX3NldDIuYWRkKGNpcmNsZTEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBjb25zdCBuZXdfc2V0ID0gbmV3IE15U2V0PENpcmNsZUFyYz4oWyBjaXJjbGUxLCBjaXJjbGUyIF0pO1xyXG4gICAgICAgICAgICBlcXVhbENpcmNsZUFyY3MucHVzaChuZXdfc2V0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21tb25MaW5lT2ZQb2ludHMocG9pbnRBIDogUG9pbnQsIHBvaW50QiA6IFBvaW50KSA6IEFic3RyYWN0TGluZSB8IHVuZGVmaW5lZCB7XHJcbiAgICBjb25zdCBsaW5lc0EgPSBwb2ludE9uTGluZXMuZ2V0KHBvaW50QSk7XHJcbiAgICBjb25zdCBsaW5lc0IgPSBwb2ludE9uTGluZXMuZ2V0KHBvaW50Qik7XHJcbiAgICBpZihsaW5lc0EgPT0gdW5kZWZpbmVkIHx8IGxpbmVzQiA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29tbW9uX2xpbmVzID0gTXlJbnRlcnNlY3Rpb248QWJzdHJhY3RMaW5lPihsaW5lc0EsIGxpbmVzQik7XHJcbiAgICBzd2l0Y2goY29tbW9uX2xpbmVzLmxlbmd0aCl7XHJcbiAgICBjYXNlIDA6IHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICBjYXNlIDE6IHJldHVybiBjb21tb25fbGluZXNbMF07XHJcbiAgICBkZWZhdWx0IDogdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBvaW50c0Zyb21MaW5lKGxpbmUgOiBBYnN0cmFjdExpbmUpIDogU2V0PFBvaW50PntcclxuICAgIGNvbnN0IHBvaW50cyA9IEFycmF5LmZyb20ocG9pbnRPbkxpbmVzLmVudHJpZXMoKSkuZmlsdGVyKHggPT4geFsxXS5oYXMobGluZSkpLm1hcCh4ID0+IHhbMF0pO1xyXG4gICAgcmV0dXJuIG5ldyBTZXQ8UG9pbnQ+KHBvaW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21tb25Qb2ludE9mTGluZXMobGluZUEgOiBBYnN0cmFjdExpbmUsIGxpbmVCIDogQWJzdHJhY3RMaW5lKSA6IFBvaW50IHwgdW5kZWZpbmVkIHtcclxuICAgIGNvbnN0IHBvaW50c0EgPSBnZXRQb2ludHNGcm9tTGluZShsaW5lQSk7XHJcbiAgICBjb25zdCBwb2ludHNCID0gZ2V0UG9pbnRzRnJvbUxpbmUobGluZUIpO1xyXG4gICAgY29uc3QgY29tbW9uX3BvaW50cyA9IGludGVyc2VjdGlvbjxQb2ludD4ocG9pbnRzQSwgcG9pbnRzQik7XHJcbiAgICBpZihjb21tb25fcG9pbnRzLmxlbmd0aCA9PSAxKXtcclxuICAgICAgICByZXR1cm4gY29tbW9uX3BvaW50c1swXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGluZUZyb21Qb2ludHMobGluZXMgOiBBYnN0cmFjdExpbmVbXSwgcG9pbnRBIDogUG9pbnQsIHBvaW50QiA6IFBvaW50KSA6IEFic3RyYWN0TGluZSB8IHVuZGVmaW5lZCB7XHJcbiAgICByZXR1cm4gbGluZXMuZmluZCh4ID0+IHguaW5jbHVkZXNQb2ludChwb2ludEEpICYmIHguaW5jbHVkZXNQb2ludChwb2ludEIpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbmdydWVudFNpbWlsYXJUcmlhbmdsZXMoaXNfY29uZ3J1ZW50IDogYm9vbGVhbiwgdHJpYW5nbGUxIDogVHJpYW5nbGUsIHRyaWFuZ2xlMiA6IFRyaWFuZ2xlKXtcclxuICAgIGlmKCEodHJpYW5nbGUxIGluc3RhbmNlb2YgVHJpYW5nbGUgJiYgdHJpYW5nbGUyIGluc3RhbmNlb2YgVHJpYW5nbGUpKXtcclxuICAgICAgICBtc2coXCJvbGQgQ29uZ3J1ZW50IFRyaWFuZ2xlc1wiKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0cmlhbmdsZXNfbGlzdCA9IGlzX2NvbmdydWVudCA/IGNvbmdydWVudFRyaWFuZ2xlcyA6IHNpbWlsYXJUcmlhbmdsZXM7XHJcblxyXG4gICAgZm9yKGNvbnN0IHRyaWFuZ2xlcyBvZiB0cmlhbmdsZXNfbGlzdCl7XHJcbiAgICAgICAgbGV0IGVxdWFsX3RyaWFuZ2xlMSA9IHRyaWFuZ2xlcy5maW5kKHggPT4geC5pc0VxdWFsKHRyaWFuZ2xlMSkpO1xyXG4gICAgICAgIGxldCBlcXVhbF90cmlhbmdsZTIgPSB0cmlhbmdsZXMuZmluZCh4ID0+IHguaXNFcXVhbCh0cmlhbmdsZTIpKTtcclxuXHJcbiAgICAgICAgbGV0IGluZGV4ZXMxIDogbnVtYmVyW10gfCB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IGluZGV4ZXMyIDogbnVtYmVyW10gfCB1bmRlZmluZWQ7XHJcbiAgICAgICAgaWYoZXF1YWxfdHJpYW5nbGUxICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGluZGV4ZXMxID0gdHJpYW5nbGUxLnBvaW50cy5tYXAocCA9PiBlcXVhbF90cmlhbmdsZTEucG9pbnRzLmluZGV4T2YocCkpIDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGVxdWFsX3RyaWFuZ2xlMiAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBpbmRleGVzMiA9IHRyaWFuZ2xlMi5wb2ludHMubWFwKHAgPT4gZXF1YWxfdHJpYW5nbGUyLnBvaW50cy5pbmRleE9mKHApKSA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihpbmRleGVzMSAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBpZihpbmRleGVzMiAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgaWYocmFuZ2UoMykuZXZlcnkoaSA9PiBpbmRleGVzMVtpXSA9PSBpbmRleGVzMltpXSkpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgaWYocmFuZ2UoMykuZXZlcnkoaSA9PiBpbmRleGVzMVtpXSA9PSBpKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2godHJpYW5nbGUyKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihpbmRleGVzMiAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBpZihyYW5nZSgzKS5ldmVyeShpID0+IGluZGV4ZXMyW2ldID09IGkpKXtcclxuICAgICAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKHRyaWFuZ2xlMSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRyaWFuZ2xlc19saXN0LnB1c2gobmV3IE15QXJyYXk8VHJpYW5nbGU+KFt0cmlhbmdsZTEsIHRyaWFuZ2xlMl0pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbmdydWVudFRyaWFuZ2xlcyh0cmlhbmdsZTEgOiBUcmlhbmdsZSwgdHJpYW5nbGUyIDogVHJpYW5nbGUpe1xyXG4gICAgcmV0dXJuIGFkZENvbmdydWVudFNpbWlsYXJUcmlhbmdsZXModHJ1ZSwgdHJpYW5nbGUxLCB0cmlhbmdsZTIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkU2ltaWxhclRyaWFuZ2xlcyh0cmlhbmdsZTEgOiBUcmlhbmdsZSwgdHJpYW5nbGUyIDogVHJpYW5nbGUpe1xyXG4gICAgcmV0dXJuIGFkZENvbmdydWVudFNpbWlsYXJUcmlhbmdsZXMoZmFsc2UsIHRyaWFuZ2xlMSwgdHJpYW5nbGUyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRFcXVhbExlbmd0aHNCeVBvaW50c1BhaXIoQXMgOiBbUG9pbnQsIFBvaW50XSwgQnMgOiBbUG9pbnQsIFBvaW50XSkgOiBbTGVuZ3RoU3ltYm9sLCBMZW5ndGhTeW1ib2xdIHwgdW5kZWZpbmVkIHtcclxuICAgIGZvcihjb25zdCBsZW5ndGhfc3ltYm9sX3NldCBvZiBlcXVhbExlbmd0aHMpe1xyXG4gICAgICAgIGNvbnN0IGxlbmd0aF9zeW1ib2xzID0gQXJyYXkuZnJvbShsZW5ndGhfc3ltYm9sX3NldCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGxlbmd0aF9zeW1ib2xBID0gbGVuZ3RoX3N5bWJvbHMuZmluZCh4ID0+IGFyZVNldHNFcXVhbDxQb2ludD4oW3gucG9pbnRBLCB4LnBvaW50Ql0sIFtBc1swXSwgQXNbMV1dKSk7XHJcbiAgICAgICAgaWYobGVuZ3RoX3N5bWJvbEEgIT0gdW5kZWZpbmVkKXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxlbmd0aF9zeW1ib2xCID0gbGVuZ3RoX3N5bWJvbHMuZmluZCh4ID0+IGFyZVNldHNFcXVhbDxQb2ludD4oW3gucG9pbnRBLCB4LnBvaW50Ql0sIFtCc1swXSwgQnNbMV1dKSk7XHJcbiAgICAgICAgICAgIGlmKGxlbmd0aF9zeW1ib2xCICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2xlbmd0aF9zeW1ib2xBLCBsZW5ndGhfc3ltYm9sQl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhcmFsbGVsb2dyYW1DbGFzc2lmaWVyKHBvaW50cyA6IFBvaW50W10pIDogUGFyYWxsZWxvZ3JhbUNsYXNzaWZpZXIgfCB1bmRlZmluZWQge1xyXG4gICAgcmV0dXJuIE15bGlzdChwYXJhbGxlbG9ncmFtQ2xhc3NpZmllcnMpLmZpbmQoeCA9PiBhcmVTZXRzRXF1YWwoeC5xdWFkcmlsYXRlcmFsKCkucG9pbnRzLCBwb2ludHMpICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXJhbGxlbG9ncmFtc0J5RGlhZ29uYWxMZW5ndGhTeW1ib2xzKGxlbmd0aFN5bWJvbEEgOiBMZW5ndGhTeW1ib2wsIGxlbmd0aFN5bWJvbEIgOiBMZW5ndGhTeW1ib2wpIDogUXVhZHJpbGF0ZXJhbFtde1xyXG4gICAgaWYobGVuZ3RoU3ltYm9sQS5saW5lID09IHVuZGVmaW5lZCB8fCBsZW5ndGhTeW1ib2xBLmxpbmUgIT0gbGVuZ3RoU3ltYm9sQi5saW5lKXtcclxuICAgICAgICBtc2coVFQoXCJsZW5ndGggc3ltYm9scyBhcmUgbm90IG9uIHRoZSBzYW1lIGxpbmUuXCIpKTtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29ubmVjdGlvbl9wb2ludCA9IGxlbmd0aFN5bWJvbEEucG9pbnRzKCkuZmluZCh4ID0+IGxlbmd0aFN5bWJvbEIucG9pbnRzKCkuaW5jbHVkZXMoeCkpO1xyXG4gICAgaWYoY29ubmVjdGlvbl9wb2ludCA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgIG1zZyhUVChcIm5vIGNvbm5lY3Rpb24gcG9pbnQgb2YgdHdvIGxlbmd0aCBzeW1ib2xzXCIpKTtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcG9pbnRBID0gbGVuZ3RoU3ltYm9sQS5wb2ludHMoKS5maW5kKHggPT4geCAhPSBjb25uZWN0aW9uX3BvaW50KTtcclxuICAgIGNvbnN0IHBvaW50QiA9IGxlbmd0aFN5bWJvbEIucG9pbnRzKCkuZmluZCh4ID0+IHggIT0gY29ubmVjdGlvbl9wb2ludCk7XHJcblxyXG4gICAgY29uc3QgcGFyYWxsZWxvZ3JhbXMgOiBRdWFkcmlsYXRlcmFsW10gPSBbXTtcclxuICAgIGZvcihjb25zdCBwYXJhbGxlbG9ncmFtQ2xhc3NpZmllciBvZiBwYXJhbGxlbG9ncmFtQ2xhc3NpZmllcnMpe1xyXG4gICAgICAgIGNvbnN0IHBhcmFsbGVsb2dyYW0gPSBwYXJhbGxlbG9ncmFtQ2xhc3NpZmllci5xdWFkcmlsYXRlcmFsKCk7XHJcbiAgICAgICAgY29uc3QgcG9pbnRzID0gcGFyYWxsZWxvZ3JhbS5wb2ludHM7XHJcbiAgICAgICAgaWYoYXJlU2V0c0VxdWFsKFtwb2ludHNbMF0sIHBvaW50c1syXV0sIFtwb2ludEEsIHBvaW50Ql0pIHx8IGFyZVNldHNFcXVhbChbcG9pbnRzWzFdLCBwb2ludHNbM11dLCBbcG9pbnRBLCBwb2ludEJdKSApe1xyXG4gICAgICAgICAgICBwYXJhbGxlbG9ncmFtcy5wdXNoKHBhcmFsbGVsb2dyYW0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcGFyYWxsZWxvZ3JhbXM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1BhcmFsbGVsb2dyYW1Qb2ludHMocG9pbnRzIDogUG9pbnRbXSkgOiBib29sZWFuIHtcclxuICAgIHJldHVybiBnZXRQYXJhbGxlbG9ncmFtQ2xhc3NpZmllcihwb2ludHMpICE9IHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRyaWFuZ2xlc0J5QW5nbGUoYW5nbGUgOiBBbmdsZSwgdHJpYW5nbGVzIDogTXlBcnJheTxUcmlhbmdsZT4pIDogVHJpYW5nbGVbXSB7XHJcbiAgICBjb25zdCB0cmlhbmdsZXNfd2l0aF9pbm5lcl9hbmdsZSA6IFRyaWFuZ2xlW10gPSBbXTtcclxuXHJcbiAgICBMQSA6IGZvcihjb25zdCB0cmlhbmdsZSBvZiB0cmlhbmdsZXMpe1xyXG4gICAgICAgIGNvbnN0IGFuZ2xlX3BvaW50cyA6IFBvaW50W10gPSBbIGFuZ2xlLmludGVyc2VjdGlvbiBdO1xyXG5cclxuICAgICAgICBmb3IoY29uc3QgbGluZSBvZiBbYW5nbGUubGluZUEsIGFuZ2xlLmxpbmVCXSl7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvaW50cyA9IHRyaWFuZ2xlLnBvaW50cy5maWx0ZXIocG9pbnQgPT4gbGluZS5pbmNsdWRlc1BvaW50KHBvaW50KSk7XHJcbiAgICAgICAgICAgIGlmKHBvaW50cy5sZW5ndGggIT0gMil7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZSBMQTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYocG9pbnRzWzBdID09IGFuZ2xlLmludGVyc2VjdGlvbil7XHJcbiAgICAgICAgICAgICAgICBhbmdsZV9wb2ludHMucHVzaChwb2ludHNbMV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYocG9pbnRzWzFdID09IGFuZ2xlLmludGVyc2VjdGlvbil7XHJcbiAgICAgICAgICAgICAgICBhbmdsZV9wb2ludHMucHVzaChwb2ludHNbMF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZSBMQTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBhc3NlcnQoYW5nbGVfcG9pbnRzLmxlbmd0aCA9PSAzKTtcclxuXHJcbiAgICAgICAgaWYoaXNDbG9ja3dpc2UoYW5nbGVfcG9pbnRzKSl7XHJcbiAgICAgICAgICAgIHRyaWFuZ2xlc193aXRoX2lubmVyX2FuZ2xlLnB1c2godHJpYW5nbGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJpYW5nbGVzX3dpdGhfaW5uZXJfYW5nbGU7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJpYW5nbGVzQnlMZW5ndGhTeW1ib2wobGVuZ3RoX3N5bWJvbCA6IExlbmd0aFN5bWJvbCwgdHJpYW5nbGVzIDogTXlBcnJheTxUcmlhbmdsZT4pIDogVHJpYW5nbGVbXSB7XHJcbiAgICBjb25zdCB0cmlhbmdsZXNfd2l0aF9sZW5ndGhfc3ltYm9sIDogVHJpYW5nbGVbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0IExlbmd0aF9zeW1ib2xfcG9pbnRzID0gWyBsZW5ndGhfc3ltYm9sLnBvaW50QSwgbGVuZ3RoX3N5bWJvbC5wb2ludEIgXTtcclxuXHJcbiAgICBmb3IoY29uc3QgdHJpYW5nbGUgb2YgdHJpYW5nbGVzKXtcclxuICAgICAgICBjb25zdCBwb2ludHMgPSB0cmlhbmdsZS5wb2ludHMuZmlsdGVyKHBvaW50ID0+IExlbmd0aF9zeW1ib2xfcG9pbnRzLmluY2x1ZGVzKHBvaW50KSApO1xyXG4gICAgICAgIGlmKHBvaW50cy5sZW5ndGggPT0gMil7XHJcbiAgICAgICAgICAgIHRyaWFuZ2xlc193aXRoX2xlbmd0aF9zeW1ib2wucHVzaCh0cmlhbmdsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cmlhbmdsZXNfd2l0aF9sZW5ndGhfc3ltYm9sO1xyXG59XHJcblxyXG5cclxuXHJcbn0iLCJuYW1lc3BhY2UgcGxhbmVfdHMge1xyXG4vL1xyXG5leHBvcnQgY2xhc3MgTWF0IHtcclxuICAgIGR0OiAobnVtYmVyW10pW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoZHQ6IChudW1iZXJbXSlbXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgdGhpcy5kdCA9IHRoaXMuemVyb0R0KCk7XHJcblxyXG4gICAgICAgIGlmKGR0ID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGR0Lmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGR0WzBdLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHRbaV1bal0gPSBkdFtpXVtqXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaW0oKXtcclxuICAgICAgICByZXR1cm4gWyBOYU4sIE5hTl07XHJcbiAgICB9XHJcblxyXG4gICAgemVyb0R0KCl7XHJcbiAgICAgICAgbGV0IFtucm93LCBuY29sXSA9IHRoaXMuZGltKCk7XHJcbiAgICAgICAgcmV0dXJuIHJhbmdlKG5yb3cpLm1hcCh4ID0+IHJhbmdlKG5jb2wpLm1hcCh5ID0+IDApICk7XHJcbiAgICB9XHJcblxyXG4gICAgemVyb3MoKSA6IE1hdCB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNYXQyKHRoaXMuemVyb0R0KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvcHkoKSA6IE1hdDJ7XHJcbiAgICAgICAgbGV0IFtucm93LCBuY29sXSA9IHRoaXMuZGltKCk7XHJcbiAgICAgICAgbGV0IG0gOiBNYXQyID0gbmV3IE1hdDIoKTtcclxuXHJcbiAgICAgICAgZm9yKGxldCByID0gMDsgciA8IG5yb3c7IHIrKyl7XHJcbiAgICAgICAgICAgIGZvcihsZXQgYyA9IDA7IGMgPCBuY29sOyBjKyspe1xyXG4gICAgICAgICAgICAgICAgbS5kdFtyXVtjXSA9IHRoaXMuZHRbcl1bY107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBtO1xyXG4gICAgfVxyXG5cclxuICAgIHByaW50KG5hbWU6c3RyaW5nID0gXCJcIil7XHJcbiAgICAgICAgaWYobmFtZSAhPSBcIlwiKXtcclxuICAgICAgICAgICAgbXNnKGAke25hbWV9ID0gW2ApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIG1zZyhcIltcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgW25yb3csIG5jb2xdID0gdGhpcy5kaW0oKTtcclxuICAgICAgICBmb3IobGV0IHIgPSAwOyByIDwgbnJvdzsgcisrKXtcclxuICAgICAgICAgICAgbGV0IHMgPSB0aGlzLmR0W3JdLm1hcCh4ID0+IHgudG9GaXhlZCg1KSkuam9pbihcIiwgXCIpO1xyXG4gICAgICAgICAgICBtc2coYFxcdFsgJHtzfSBdYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG11bCh4IDogTWF0IHwgbnVtYmVyKSA6IE1hdCB7XHJcbiAgICAgICAgbGV0IFtucm93LCBuY29sXSA9IHRoaXMuZGltKCk7XHJcblxyXG4gICAgICAgIGlmKHR5cGVvZih4KSA9PSBcIm51bWJlclwiKXtcclxuICAgICAgICAgICAgbGV0IG0gPSB0aGlzLmNvcHkoKTtcclxuICAgICAgICAgICAgZm9yKGxldCByID0gMDsgciA8IG5yb3c7IHIrKyl7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGMgPSAwOyBjIDwgbmNvbDsgYysrKXtcclxuICAgICAgICAgICAgICAgICAgICBtLmR0W3JdW2NdICo9IHg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gbTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgbGV0IG0gPSB0aGlzLnplcm9zKCk7XHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IHIgPSAwOyByIDwgbnJvdzsgcisrKXtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgYyA9IDA7IGMgPCBuY29sOyBjKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzdW0gPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGsgPSAwOyBrIDwgbmNvbDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IHRoaXMuZHRbcl1ba10gKiB4LmR0W2tdW2NdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbS5kdFtyXVtjXSA9IHN1bTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHJldHVybiBtO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE1hdDIgZXh0ZW5kcyBNYXQge1xyXG4gICAgZGltKCl7XHJcbiAgICAgICAgcmV0dXJuIFsyLDJdO1xyXG4gICAgfVxyXG5cclxuICAgIGRldCgpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmR0WzBdWzBdICogdGhpcy5kdFsxXVsxXSAtIHRoaXMuZHRbMF1bMV0gKiB0aGlzLmR0WzFdWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIGRvdCh2OlZlYzIpIDogVmVjMntcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIodGhpcy5kdFswXVswXSAqIHYueCArIHRoaXMuZHRbMF1bMV0gKiB2LnksIHRoaXMuZHRbMV1bMF0gKiB2LnggKyB0aGlzLmR0WzFdWzFdICogdi55KTtcclxuICAgIH1cclxuXHJcbiAgICBpbnYoKSA6IE1hdDIge1xyXG4gICAgICAgIGNvbnN0IGRldCA9IHRoaXMuZGV0KCk7XHJcbiAgICAgICAgY29uc29sZS5hc3NlcnQoZGV0ICE9IDApO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IE1hdDIoW1t0aGlzLmR0WzFdWzFdIC8gZGV0LCAtIHRoaXMuZHRbMF1bMV0gLyBkZXRdLCBbLSB0aGlzLmR0WzFdWzBdIC8gZGV0LCB0aGlzLmR0WzBdWzBdIC8gZGV0XV0pXHJcbiAgICB9XHJcbn1cclxuXHJcbn1cclxuIiwibmFtZXNwYWNlIHBsYW5lX3RzIHtcclxuLy9cclxuZXhwb3J0IGxldCBwbGF5QmFja09wZXJhdGlvbnMgOiBQbGF5QmFjaztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBPcGVyYXRpb24ge1xyXG4gICAgc3RhdGljIG1heElkIDogbnVtYmVyID0gMDtcclxuICAgIG9wZXJhdGlvbklkIDogbnVtYmVyO1xyXG4gICAgc2hhcGVzTGVuZ3RoID0gTmFOO1xyXG4gICAgcmVsYXRpb25Mb2dzTGVuZ3RoID0gTmFOO1xyXG5cclxuICAgIGFic3RyYWN0IHRvU3RyaW5nKCkgOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbklkID0gT3BlcmF0aW9uLm1heElkKys7XHJcbiAgICB9XHJcblxyXG4gICAgZHVtcCgpIDogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b1N0cmluZygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29udmVydE9wZXJhdGlvbnModmVyc2lvbiA6IG51bWJlciwgb3BlcmF0aW9ucyA6IE9wZXJhdGlvbltdKSA6IE9wZXJhdGlvbltdIHtcclxuICAgIGlmKHZlcnNpb24gPT0gMi4wKXtcclxuXHJcbiAgICAgICAgY29uc3QgbmV3X29wZXJhdGlvbnMgOiBPcGVyYXRpb25bXSA9IFtdO1xyXG4gICAgICAgIGxldCBpZHggPSAwO1xyXG4gICAgICAgIHdoaWxlKGlkeCA8IG9wZXJhdGlvbnMubGVuZ3RoKXtcclxuICAgICAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gb3BlcmF0aW9uc1tpZHhdO1xyXG4gICAgICAgICAgICBuZXdfb3BlcmF0aW9ucy5wdXNoKG9wZXJhdGlvbik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKG9wZXJhdGlvbiBpbnN0YW5jZW9mIFRvb2xTZWxlY3Rpb24gJiYgWyBcIkxlbmd0aEVxdWFsaXR5QnVpbGRlclwiLCBcIkFuZ2xlRXF1YWxpdHlCdWlsZGVyXCIsIFwiUGFyYWxsZWxEZXRlY3RvckJ1aWxkZXJcIl0uaW5jbHVkZXMob3BlcmF0aW9uLnRvb2xOYW1lKSl7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQob3BlcmF0aW9uc1tpZHggKyAzXSBpbnN0YW5jZW9mIEVudW1TZWxlY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIG5ld19vcGVyYXRpb25zLnB1c2gob3BlcmF0aW9uc1tpZHggKyAzXSk7XHJcbiAgICAgICAgICAgICAgICBuZXdfb3BlcmF0aW9ucy5wdXNoKG9wZXJhdGlvbnNbaWR4ICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgbmV3X29wZXJhdGlvbnMucHVzaChvcGVyYXRpb25zW2lkeCArIDJdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZHggKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKG9wZXJhdGlvbiBpbnN0YW5jZW9mIFRvb2xTZWxlY3Rpb24gJiYgb3BlcmF0aW9uLnRvb2xOYW1lID09ICBcIlF1YWRyaWxhdGVyYWxDbGFzc2lmaWVyQnVpbGRlclwiKXtcclxuICAgICAgICAgICAgICAgIGFzc2VydChvcGVyYXRpb25zW2lkeCArIDVdIGluc3RhbmNlb2YgRW51bVNlbGVjdGlvbiAmJiBvcGVyYXRpb25zW2lkeCArIDZdIGluc3RhbmNlb2YgRW51bVNlbGVjdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgbmV3X29wZXJhdGlvbnMucHVzaChvcGVyYXRpb25zW2lkeCArIDVdKTtcclxuICAgICAgICAgICAgICAgIG5ld19vcGVyYXRpb25zLnB1c2gob3BlcmF0aW9uc1tpZHggKyA2XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbmV3X29wZXJhdGlvbnMucHVzaChvcGVyYXRpb25zW2lkeCArIDFdKTtcclxuICAgICAgICAgICAgICAgIG5ld19vcGVyYXRpb25zLnB1c2gob3BlcmF0aW9uc1tpZHggKyAyXSk7XHJcbiAgICAgICAgICAgICAgICBuZXdfb3BlcmF0aW9ucy5wdXNoKG9wZXJhdGlvbnNbaWR4ICsgM10pO1xyXG4gICAgICAgICAgICAgICAgbmV3X29wZXJhdGlvbnMucHVzaChvcGVyYXRpb25zW2lkeCArIDRdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZHggKz0gNztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgaWR4Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld19vcGVyYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBvcGVyYXRpb25zO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZE9wZXJhdGlvbnNUZXh0KGRhdGEgOiBhbnkpIDogUHJvbWlzZTxPcGVyYXRpb25bXT4ge1xyXG4gICAgbGV0IGxpbmVzIDogc3RyaW5nW107XHJcblxyXG4gICAgaWYoMiA8PSBkYXRhW1widmVyc2lvblwiXSl7XHJcbiAgICAgICAgbGluZXMgPSBkYXRhW1wib3BlcmF0aW9uc1wiXTtcclxuICAgICAgICBhc3NlcnQoQXJyYXkuaXNBcnJheShsaW5lcykgJiYgKGxpbmVzLmxlbmd0aCA9PSAwIHx8IHR5cGVvZiBsaW5lc1sxXSA9PSBcInN0cmluZ1wiKSk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAgIG1zZyhgZGF0YSBpcyBlbXB0eS5gKTtcclxuICAgICAgICBsaW5lcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHZpZXcgPSBWaWV3LmN1cnJlbnQ7XHJcbiAgICB2aWV3LmNsZWFyVmlldygpO1xyXG5cclxuICAgIGxldCBvcGVyYXRpb25zIDogT3BlcmF0aW9uW10gPSBbXTtcclxuXHJcbiAgICBsZXQgcHJldl9saW5lIDogc3RyaW5nID0gXCJcIjtcclxuICAgIGZvcihsZXQgbGluZSBvZiBsaW5lcyl7XHJcbiAgICAgICAgbGluZSA9IGxpbmUudHJpbSgpLnJlcGxhY2VBbGwoL1xccysvZywgXCIgXCIpOyAgICAgICAgXHJcbiAgICAgICAgaWYobGluZSA9PSBcIlwiKXtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHByZXZfbGluZSA9PSBsaW5lICYmIGxpbmUuc3RhcnRzV2l0aChcInByb3BlcnR5XCIpKXtcclxuICAgICAgICAgICAgbXNnKGBkdXAgbGluZTpbJHtsaW5lfV1gKTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByZXZfbGluZSA9IGxpbmU7XHJcblxyXG4gICAgICAgIGxldCBvcGVyYXRpb24gOiBPcGVyYXRpb247XHJcblxyXG4gICAgICAgIC8vIG1zZyhgbG9hZDoke2xpbmV9YCk7XHJcbiAgICAgICAgY29uc3QgaXRlbXMgPSBsaW5lLnNwbGl0KFwiIFwiKTtcclxuICAgICAgICBzd2l0Y2goaXRlbXNbMF0pe1xyXG4gICAgICAgIGNhc2UgXCJjbGlja1wiOntcclxuICAgICAgICAgICAgICAgIGNvbnN0IHggPSBwYXJzZUZsb2F0KGl0ZW1zWzFdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBwYXJzZUZsb2F0KGl0ZW1zWzJdKTtcclxuICAgICAgICAgICAgICAgIGxldCBzaGFwZUlkID0gTmFOO1xyXG4gICAgICAgICAgICAgICAgaWYoNCA8PSBpdGVtcy5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlSWQgPSBwYXJzZUludChpdGVtc1szXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCEgaXNOYU4oc2hhcGVJZCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbiA9IG5ldyBDbGlja1NoYXBlKG5ldyBWZWMyKHgsIHkpLCBzaGFwZUlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBcInRlcm1cIjp7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0QmxvY2tfaWQgPSBwYXJzZUludChpdGVtc1sxXSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXhlcyA6IG51bWJlcltdO1xyXG4gICAgICAgICAgICAgICAgaWYoaXRlbXMubGVuZ3RoID09IDIpe1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhlcyA9IGl0ZW1zWzJdLnNwbGl0KFwiOlwiKS5tYXAoeCA9PiBwYXJzZUludCh4KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvcGVyYXRpb24gPSBuZXcgQ2xpY2tUZXJtKHRleHRCbG9ja19pZCwgaW5kZXhlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgXCJ0b29sXCI6XHJcbiAgICAgICAgICAgIG9wZXJhdGlvbiA9IG5ldyBUb29sU2VsZWN0aW9uKGl0ZW1zWzFdKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgXCJmaW5pc2hcIjpcclxuICAgICAgICAgICAgb3BlcmF0aW9uID0gbmV3IFRvb2xGaW5pc2goaXRlbXNbMV0pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgY2FzZSBcImVudW1cIjp7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbnVtX2lkID0gcGFyc2VJbnQoaXRlbXNbMV0pO1xyXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uID0gbmV3IEVudW1TZWxlY3Rpb24oZW51bV9pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgXCJ0ZXh0XCI6e1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVnZXggPSAvdGV4dFxccysnPyhbXiddKyknPy87XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gbGluZS5tYXRjaChyZWdleCk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQobWF0Y2hlcyAhPSBudWxsKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtczIgPSBBcnJheS5mcm9tKG1hdGNoZXMhKTtcclxuICAgICAgICAgICAgICAgIC8vIG1zZyhgdGV4dCBsZW46JHtpdGVtczIubGVuZ3RofSBbJHtpdGVtczJbMV19XWApO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBpdGVtczJbMV07XHJcbiAgICAgICAgICAgICAgICBvcGVyYXRpb24gPSBuZXcgVGV4dFByb21wdCh0ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBcInByb3BlcnR5XCI6e1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVnZXggPSAvcHJvcGVydHlcXHMrKFxcZCspXFxzKyhbMC05YS16QS1aX10rKVxccysnPyhbXiddKyknPy87XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gbGluZS5tYXRjaChyZWdleCk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQobWF0Y2hlcyAhPSBudWxsKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtczIgPSBBcnJheS5mcm9tKG1hdGNoZXMhKTtcclxuICAgICAgICAgICAgICAgIGFzc2VydChpdGVtczIubGVuZ3RoID09IDQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IFtpZCwgbmFtZSwgdmFsdWVfc3RyXSA9IGl0ZW1zMi5zbGljZSgxKTtcclxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA6IHN0cmluZyB8IG51bWJlcjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihsaW5lLmVuZHNXaXRoKFwiJ1wiKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZV9zdHI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZV9zdHIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uID0gbmV3IFByb3BlcnR5U2V0dGluZyhwYXJzZUludChpZCksIG5hbWUsIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9wZXJhdGlvbnMucHVzaChvcGVyYXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZXJhdGlvbnMgPSBwbGFuZV90cy5jb252ZXJ0T3BlcmF0aW9ucyhkYXRhW1widmVyc2lvblwiXSwgb3BlcmF0aW9ucyk7XHJcblxyXG4gICAgcmV0dXJuIG9wZXJhdGlvbnM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRPcGVyYXRpb25zVGV4dCgpe1xyXG4gICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgICB2ZXJzaW9uIDogMi4xLFxyXG4gICAgICAgIG9wZXJhdGlvbnMgOiBWaWV3LmN1cnJlbnQub3BlcmF0aW9ucy5tYXAoeCA9PiB4LnRvU3RyaW5nKCkpXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGRvY190ZXh0ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgNCk7XHJcbiAgICBtc2coYG9wZXJhdGlvbnMtdGV4dCA6IFxcbiR7ZG9jX3RleHR9XFxuYCk7XHJcbiAgICBcclxuICAgIHJldHVybiBkb2NfdGV4dDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENsaWNrU2hhcGUgZXh0ZW5kcyBPcGVyYXRpb24ge1xyXG4gICAgcG9zaXRpb24gOiBWZWMyO1xyXG4gICAgc2hhcGVJZCA6IG51bWJlcjtcclxuICAgIGNyZWF0ZWRQb2ludD8gOiBQb2ludDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwb3NpdGlvbiA6IFZlYzIsIHNoYXBlSWQgOiBudW1iZXIpe1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMuc2hhcGVJZCAgICA9IHNoYXBlSWQ7XHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKSA6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHNoYXBlX3N0ciA9IFwiXCI7XHJcblxyXG4gICAgICAgIGlmKCEgaXNOYU4odGhpcy5zaGFwZUlkKSl7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlID0gaWRNYXAuZ2V0KHRoaXMuc2hhcGVJZCkgYXMgU2hhcGU7XHJcbiAgICAgICAgICAgIGFzc2VydChzaGFwZSBpbnN0YW5jZW9mIFNoYXBlKTtcclxuICAgICAgICAgICAgc2hhcGVfc3RyID0gYCR7dGhpcy5zaGFwZUlkfSAke3NoYXBlLmNvbnN0cnVjdG9yLm5hbWV9YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZuYyA9IChuOm51bWJlcik9PigxMCA8IE1hdGguYWJzKG4pID8gbi50b0ZpeGVkKDEpIDogbi50b0ZpeGVkKDIpKTtcclxuXHJcbiAgICAgICAgY29uc3QgeCA9IGZuYyh0aGlzLnBvc2l0aW9uLngpO1xyXG4gICAgICAgIGNvbnN0IHkgPSBmbmModGhpcy5wb3NpdGlvbi55KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGBjbGljayAke3h9ICR7eX0gJHtzaGFwZV9zdHJ9YDtcclxuICAgIH1cclxuXHJcbiAgICBkdW1wKCkgOiBzdHJpbmcge1xyXG4gICAgICAgIGlmKHRoaXMuY3JlYXRlZFBvaW50ID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCkgKyBgcG9pbnQ6JHt0aGlzLmNyZWF0ZWRQb2ludC5pZH0gJHt0aGlzLmNyZWF0ZWRQb2ludC5wb3NpdGlvbn1gO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENsaWNrVGVybSBleHRlbmRzIE9wZXJhdGlvbiB7XHJcbiAgICB0ZXh0QmxvY2tfaWQgOiBudW1iZXI7XHJcbiAgICBpbmRleGVzIDogbnVtYmVyW107XHJcblxyXG4gICAgY29uc3RydWN0b3IodGV4dEJsb2NrX2lkIDogbnVtYmVyLCBpbmRleGVzIDogbnVtYmVyW10pe1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy50ZXh0QmxvY2tfaWQgPSB0ZXh0QmxvY2tfaWQ7XHJcbiAgICAgICAgdGhpcy5pbmRleGVzID0gaW5kZXhlcy5zbGljZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRleHRCbG9ja1Rlcm0oKSA6IFtUZXh0QmxvY2ssIFRlcm1dIHtcclxuICAgICAgICBsZXQgdGV4dEJsb2NrID0gVmlldy5jdXJyZW50LmFsbFNoYXBlcygpLmZpbmQoeCA9PiB4LmlkID09IHRoaXMudGV4dEJsb2NrX2lkKSBhcyBUZXh0QmxvY2s7XHJcbiAgICAgICAgaWYoISh0ZXh0QmxvY2sgaW5zdGFuY2VvZiBUZXh0QmxvY2spIHx8IHRleHRCbG9jay5nZXRFcXVhdGlvbigpID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGlmKHRleHRCbG9jayBpbnN0YW5jZW9mIFNoYXBlRXF1YXRpb24pe1xyXG4gICAgICAgICAgICAgICAgLy8gISEhISEhISEhISEhISEhISEhISEhISEhIOOCveODvOOCueS/ruato+OBruWJr+S9nOeUqOOBrue1jOmBjuaOque9riAhISEhISEhISEhISEhISEhISEhISEhISEhISEhXHJcbiAgICAgICAgICAgICAgICB0ZXh0QmxvY2sgPSB0ZXh0QmxvY2sudGV4dEJsb2NrO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KHRleHRCbG9jay5nZXRFcXVhdGlvbigpICE9IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGggPSBuZXcgcGFyc2VyX3RzLlBhdGgodGhpcy5pbmRleGVzKTtcclxuICAgICAgICBjb25zdCB0ZXJtICA9IHBhdGguZ2V0VGVybSh0ZXh0QmxvY2suZ2V0RXF1YXRpb24oKSEpO1xyXG5cclxuICAgICAgICByZXR1cm4gW3RleHRCbG9jaywgdGVybV07XHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKSA6IHN0cmluZyB7XHJcbiAgICAgICAgaWYodGhpcy5pbmRleGVzLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICAgICAgbXNnKGBubyBpbmRleGVzOnRlcm0gJHt0aGlzLnRleHRCbG9ja19pZH1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGB0ZXJtICR7dGhpcy50ZXh0QmxvY2tfaWR9ICAke3RoaXMuaW5kZXhlcy5qb2luKFwiOlwiKX1gO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVG9vbFNlbGVjdGlvbiBleHRlbmRzIE9wZXJhdGlvbiB7XHJcbiAgICB0b29sTmFtZSA6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0b29sX25hbWUgOiBzdHJpbmcpe1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy50b29sTmFtZSA9IHRvb2xfbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICB0b1N0cmluZygpIDogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYHRvb2wgICR7dGhpcy50b29sTmFtZX1gO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVG9vbEZpbmlzaCBleHRlbmRzIE9wZXJhdGlvbiB7XHJcbiAgICB0b29sTmFtZSA6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0b29sX25hbWUgOiBzdHJpbmcpe1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy50b29sTmFtZSA9IHRvb2xfbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICB0b1N0cmluZygpIDogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYGZpbmlzaCAgJHt0aGlzLnRvb2xOYW1lfWA7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFbnVtU2VsZWN0aW9uIGV4dGVuZHMgT3BlcmF0aW9uIHtcclxuICAgIHZhbHVlICAgICA6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSA6IG51bWJlcil7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKSA6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGBlbnVtICAke3RoaXMudmFsdWV9YDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlucHV0VGV4dFByb21wdChtZXNzYWdlIDogc3RyaW5nKSA6IHN0cmluZyB8IG51bGwge1xyXG4gICAgbGV0IHRleHQgOiBzdHJpbmcgfCBudWxsO1xyXG5cclxuICAgIGlmKFZpZXcuaXNQbGF5QmFjayl7XHJcblxyXG4gICAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IHBsYXlCYWNrT3BlcmF0aW9ucy5uZXh0KCk7XHJcbiAgICAgICAgVmlldy5jdXJyZW50LmFkZE9wZXJhdGlvbihvcGVyYXRpb24pO1xyXG4gICAgICAgIGlmKG9wZXJhdGlvbiBpbnN0YW5jZW9mIFRleHRQcm9tcHQpe1xyXG4gICAgICAgICAgICB0ZXh0ID0gb3BlcmF0aW9uLnRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuXHJcbiAgICAgICAgdGV4dCA9IHByb21wdChtZXNzYWdlKTtcclxuICAgICAgICBpZih0ZXh0ICE9IG51bGwpe1xyXG4gICAgICAgICAgICBWaWV3LmN1cnJlbnQuYWRkT3BlcmF0aW9uKG5ldyBUZXh0UHJvbXB0KHRleHQudHJpbSgpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gdGV4dDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRQcm9tcHQgZXh0ZW5kcyBPcGVyYXRpb24ge1xyXG4gICAgdGV4dCA6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0IDogc3RyaW5nKXtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKSA6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGB0ZXh0ICAnJHt0aGlzLnRleHR9J2A7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eVNldHRpbmcgZXh0ZW5kcyBPcGVyYXRpb24ge1xyXG4gICAgaWQgICAgOiBudW1iZXI7XHJcbiAgICBuYW1lICA6IHN0cmluZztcclxuICAgIHZhbHVlIDogc3RyaW5nIHwgbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGlkIDogbnVtYmVyLCBuYW1lIDogc3RyaW5nLCB2YWx1ZSA6IHN0cmluZyB8IG51bWJlcil7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmlkICAgID0gaWQ7XHJcbiAgICAgICAgdGhpcy5uYW1lICA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIC8vIG1zZyhgPT09PT09PT09PSBQcm9wZXJ0eS1TZXR0aW5nOiR7bmFtZX0gWyR7dmFsdWV9XSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PWApXHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKSA6IHN0cmluZyB7XHJcbiAgICAgICAgaWYodHlwZW9mIHRoaXMudmFsdWUgPT0gXCJzdHJpbmdcIil7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYHByb3BlcnR5ICR7dGhpcy5pZH0gJHt0aGlzLm5hbWV9ICcke3RoaXMudmFsdWV9J2A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYHByb3BlcnR5ICR7dGhpcy5pZH0gJHt0aGlzLm5hbWV9ICR7dGhpcy52YWx1ZX1gO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBsYXlCYWNrIHtcclxuICAgIHN0YXRpYyBzdGFydEluZGV4IDogbnVtYmVyID0gTmFOO1xyXG5cclxuICAgIHN0YXRpYyBzZXRTdGFydEluZGV4KHNoYXBlIDogTWF0aEVudGl0eSl7XHJcbiAgICAgICAgaWYocGxheUJhY2tPcGVyYXRpb25zICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGxheUJhY2tPcGVyYXRpb25zLnNoYXBlVG9JbmRleC5nZXQoc2hhcGUpO1xyXG4gICAgICAgICAgICBpZihpbmRleCAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgUGxheUJhY2suc3RhcnRJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgbXNnKGBwbGF5IHN0YXJ0OiR7UGxheUJhY2suc3RhcnRJbmRleH1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHZpZXcgOiBWaWV3O1xyXG4gICAgcHJpdmF0ZSBvcGVyYXRpb25zIDogT3BlcmF0aW9uW107XHJcbiAgICBwcml2YXRlIGluZGV4IDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzaGFwZVRvSW5kZXggPSBuZXcgTWFwPE1hdGhFbnRpdHksbnVtYmVyPigpO1xyXG4gICAgcHJpdmF0ZSB2aWV3U2hhcGVzTGVuZ3RoIDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHZpZXcgOiBWaWV3LCBvcGVyYXRpb25zIDogT3BlcmF0aW9uW10pe1xyXG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zID0gb3BlcmF0aW9ucy5zbGljZSgpO1xyXG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMudmlld1NoYXBlc0xlbmd0aCA9IHZpZXcuc2hhcGVzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBkb25lKCkgOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRpb25zLmxlbmd0aCA9PSB0aGlzLmluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIG5leHQoKSA6IE9wZXJhdGlvbiB7XHJcbiAgICAgICAgaWYodGhpcy5pbmRleCA9PSBQbGF5QmFjay5zdGFydEluZGV4ICYmIGdldFBsYXlNb2RlKCkgPT0gUGxheU1vZGUuZmFzdEZvcndhcmQpe1xyXG4gICAgICAgICAgICBQbGF5QmFjay5zdGFydEluZGV4ID0gTmFOO1xyXG4gICAgICAgICAgICBzZXRQbGF5TW9kZShQbGF5TW9kZS5ub3JtYWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2hhcGVzID0gdGhpcy52aWV3LnNoYXBlcy5zbGljZSh0aGlzLnZpZXdTaGFwZXNMZW5ndGgpO1xyXG4gICAgICAgIGZvcihjb25zdCBzaGFwZSBvZiBzaGFwZXMpe1xyXG4gICAgICAgICAgICB0aGlzLnNoYXBlVG9JbmRleC5zZXQoc2hhcGUsIHRoaXMuaW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy52aWV3U2hhcGVzTGVuZ3RoID0gdGhpcy52aWV3LnNoYXBlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLm9wZXJhdGlvbnNbdGhpcy5pbmRleCsrXTtcclxuICAgIH1cclxuXHJcbiAgICBwZWVrKCkgOiBPcGVyYXRpb24ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wZXJhdGlvbnNbdGhpcy5pbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcGxheSgpe1xyXG4gICAgICAgIFZpZXcuaXNQbGF5QmFjayA9IHRydWU7XHJcblxyXG4gICAgICAgIGNvbnN0IHZpZXcgOiBWaWV3ID0gVmlldy5jdXJyZW50O1xyXG4gICAgICAgIGxldCBzdGFydF9zaGFwZV9pZHggPSB2aWV3LnNoYXBlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIGNvbnN0IHNwZWVjaCA9IG5ldyBpMThuX3RzLlNwZWVjaCgpO1xyXG5cclxuICAgICAgICBsZXQgbmV3X3NoYXBlcyA6IE1hdGhFbnRpdHlbXSA9IHZpZXcuc2hhcGVzLnNsaWNlKCk7XHJcbiAgICAgICAgY29uc3QgbmFtZWRfYWxsX3NoYXBlX21hcCA9IG5ldyBNYXA8c3RyaW5nLCBwbGFuZV90cy5TaGFwZT4oKTtcclxuXHJcbiAgICAgICAgd2hpbGUoIXRoaXMuZG9uZSgpKXtcclxuICAgICAgICAgICAgaWYoZ2V0UGxheU1vZGUoKSA9PSBQbGF5TW9kZS5zdG9wKXtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gdmlldy5vcGVyYXRpb25zID0gb3BlcmF0aW9uc19jb3B5O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICB3aGlsZSh0aGlzLnBlZWsoKSBpbnN0YW5jZW9mIEVudW1TZWxlY3Rpb24pe1xyXG4gICAgICAgICAgICAgICAgbXNnKGB3YWl0IGZvciBzaG93IG1lbnVgKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNsZWVwKDEwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBjb25zdCBvcGVyYXRpb24gPSB0aGlzLm5leHQoKTtcclxuICAgICAgICAgICAgdmlldy5hZGRPcGVyYXRpb24ob3BlcmF0aW9uKTtcclxuICAgICAgICAgICAgaWYob3BlcmF0aW9uIGluc3RhbmNlb2YgQ2xpY2tTaGFwZSl7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBtb3ZlUG9pbnRlcihvcGVyYXRpb24ucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICBpZighIGlzTmFOKG9wZXJhdGlvbi5zaGFwZUlkKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcGUgPSBpZE1hcC5nZXQob3BlcmF0aW9uLnNoYXBlSWQpIGFzIFNoYXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHNoYXBlIGluc3RhbmNlb2YgVGV4dEJsb2NrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhcGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoc2hhcGUgaW5zdGFuY2VvZiBTaGFwZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZyhgbm8gc2hhcGU6ICR7b3BlcmF0aW9uLnNoYXBlSWR9YClcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWRzID0gQXJyYXkuZnJvbShpZE1hcC5rZXlzKCkpLnNvcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGNvbnN0IGlkIG9mIGlkcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2coYCAgJHtpZH0gJHtpZE1hcC5nZXQoaWQpIS5jb25zdHJ1Y3Rvci5uYW1lfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGF3YWl0IEJ1aWxkZXIudG9vbC5jbGljayh2aWV3LCBvcGVyYXRpb24ucG9zaXRpb24sIHNoYXBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKG9wZXJhdGlvbiBpbnN0YW5jZW9mIENsaWNrVGVybSl7XHJcbiAgICAgICAgICAgICAgICBpZihCdWlsZGVyLnRvb2wgaW5zdGFuY2VvZiBFeHByVHJhbnNmb3JtQnVpbGRlcil7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW3RleHRCbG9jaywgdGVybV0gPSBvcGVyYXRpb24uZ2V0VGV4dEJsb2NrVGVybSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IEJ1aWxkZXIudG9vbC50ZXJtQ2xpY2sodGVybSwgdGV4dEJsb2NrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKG9wZXJhdGlvbiBpbnN0YW5jZW9mIFRvb2xTZWxlY3Rpb24pe1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgbW92ZVRvb2xTZWxlY3Rpb25Qb2ludGVyKG9wZXJhdGlvbik7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBCdWlsZGVyLnNldFRvb2xCeU5hbWUob3BlcmF0aW9uLnRvb2xOYW1lLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihvcGVyYXRpb24gaW5zdGFuY2VvZiBUb29sRmluaXNoKXtcclxuICAgICAgICAgICAgICAgIGFzc2VydChCdWlsZGVyLnRvb2xOYW1lID09IG9wZXJhdGlvbi50b29sTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBCdWlsZGVyLnRvb2wuZmluaXNoKHZpZXcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYob3BlcmF0aW9uIGluc3RhbmNlb2YgUHJvcGVydHlTZXR0aW5nKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoYXBlID0gdmlldy5hbGxTaGFwZXMoKS5maW5kKHggPT4geC5pZCA9PSBvcGVyYXRpb24uaWQpITtcclxuICAgICAgICAgICAgICAgIGFzc2VydChzaGFwZSAhPSB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgaWYoWyBcIm5hbWVcIiwgXCJsaW5lS2luZFwiLCBcImFuZ2xlTWFya1wiIF0uaW5jbHVkZXMob3BlcmF0aW9uLm5hbWUpKXtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzaG93UHJvcGVydHlEbGcoc2hhcGUsIG9wZXJhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFByb3BlcnR5KHNoYXBlLCBvcGVyYXRpb24ubmFtZSwgb3BlcmF0aW9uLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGlmKEJ1aWxkZXIudG9vbC5kb25lKXtcclxuICAgICAgICAgICAgICAgIEJ1aWxkZXIudG9vbC5kb25lID0gZmFsc2U7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoYXBlcyA9IHZpZXcuc2hhcGVzLnNsaWNlKHN0YXJ0X3NoYXBlX2lkeCk7XHJcbiAgICAgICAgICAgICAgICBmb3IoY29uc3Qgc2hhcGUgb2Ygc2hhcGVzKXtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc3ViX3NoYXBlcyA6IFNoYXBlW10gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBzaGFwZS5nZXRBbGxTaGFwZXMoc3ViX3NoYXBlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViX3NoYXBlcyA9IHVuaXF1ZShzdWJfc2hhcGVzKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Yl9zaGFwZXMuZm9yRWFjaCh4ID0+IHguc2hvdygpKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdfc2hhcGVzID0gdW5pcXVlKG5ld19zaGFwZXMuY29uY2F0KHN1Yl9zaGFwZXMpKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVkX3N1Yl9zaGFwZXMgPSBzdWJfc2hhcGVzLmZpbHRlcih4ID0+IHggaW5zdGFuY2VvZiBTaGFwZSAmJiB4Lm5hbWUgIT0gXCJcIikgYXMgU2hhcGVbXTtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lZF9zdWJfc2hhcGVzLmZvckVhY2goeCA9PiBuYW1lZF9hbGxfc2hhcGVfbWFwLnNldCh4Lm5hbWUsIHgpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hhcGUuYWxsU2hhcGVzKCkuZm9yRWFjaCh4ID0+IHguc2hvdygpKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlLnNldFJlbGF0aW9ucygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZihzaGFwZS5tdXRlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGxheVNoYXBlKHNwZWVjaCwgbmV3X3NoYXBlcywgbmFtZWRfYWxsX3NoYXBlX21hcCwgc2hhcGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBzdGFydF9zaGFwZV9pZHggPSB2aWV3LnNoYXBlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzcGVlY2gud2FpdEVuZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgdmlldy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgbmV3X3NoYXBlcy5mb3JFYWNoKHggPT4ge3guc2hvdygpOyB4LnNldE1vZGUoTW9kZS5ub25lKTsgfSk7XHJcblxyXG4gICAgICAgIFZpZXcuaXNQbGF5QmFjayA9IGZhbHNlO1xyXG5cclxuICAgICAgICBzZXRQbGF5TW9kZShQbGF5TW9kZS5zdG9wKTtcclxuICAgICAgICBQbGF5QmFjay5zdGFydEluZGV4ID0gTmFOOyAgICBcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHR5cGVJbnRvSW5wdXQoZWxlbWVudDogSFRNTElucHV0RWxlbWVudCwgdGV4dDogc3RyaW5nLCBkZWxheSA9IDEwMCkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZWxlbWVudC52YWx1ZSArPSB0ZXh0W2ldO1xyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSkpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbW92ZVBvaW50ZXJBbmRIaWdobGlnaHQoaXRlbSA6IEhUTUxFbGVtZW50KXtcclxuICAgIGNvbnN0IGJvcmRlckNvbG9yID0gaXRlbS5zdHlsZS5ib3JkZXJDb2xvcjtcclxuXHJcbiAgICBhd2FpdCBtb3ZlUG9pbnRlclRvRWxlbWVudChpdGVtKTtcclxuICAgIGl0ZW0uc3R5bGUuYm9yZGVyQ29sb3IgPSBcIkRlZXBTa3lCbHVlXCI7XHJcbiAgICBhd2FpdCBzbGVlcEluRmFzdEZvcndhcmQoMTAwKTtcclxuICAgIGl0ZW0uc3R5bGUuYm9yZGVyQ29sb3IgPSBib3JkZXJDb2xvcjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNwZWFrQW5kSGlnaGxpZ2h0KHNoYXBlIDogTWF0aEVudGl0eSwgc3BlZWNoIDogaTE4bl90cy5BYnN0cmFjdFNwZWVjaCwgbGluZXMgOiBzdHJpbmdbXSl7XHJcbiAgICBhd2FpdCBzcGVlY2guc3BlYWsobGluZXMuc2hpZnQoKSEudHJpbSgpKTtcclxuXHJcbiAgICBmb3IoY29uc3QgZGVwIG9mIHNoYXBlLmRlcGVuZGVuY2llcygpKXtcclxuICAgICAgICBcclxuICAgICAgICBkZXAuc2V0TW9kZShNb2RlLmRlcGVuZCk7XHJcblxyXG4gICAgICAgIGF3YWl0IHNsZWVwKDAuNSAqIDEwMDAgKiBzaGFwZS5pbnRlcnZhbCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHNoYXBlLnNldE1vZGUoTW9kZS50YXJnZXQpO1xyXG5cclxuICAgIHdoaWxlKGxpbmVzLmxlbmd0aCAhPSAwKXtcclxuICAgICAgICBjb25zdCBsaW5lID0gbGluZXMuc2hpZnQoKSEudHJpbSgpO1xyXG4gICAgICAgIGlmKGxpbmUgIT0gXCJcIil7XHJcbiAgICAgICAgICAgIGF3YWl0IHNwZWVjaC53YWl0RW5kKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHNwZWVjaC5zcGVhayhsaW5lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgc2xlZXAoMTAwMCAqIHNoYXBlLmludGVydmFsKTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwbGF5QmFjayhwbGF5X21vZGUgOiBQbGF5TW9kZSl7XHJcbiAgICBjb25zdCB2aWV3IDogVmlldyA9IFZpZXcuY3VycmVudDtcclxuXHJcbiAgICBjb25zdCBvcGVyYXRpb25zX2NvcHkgPSB2aWV3Lm9wZXJhdGlvbnMuc2xpY2UoKTtcclxuICAgIHZpZXcucmVzdG9yZVZpZXcoKTtcclxuICAgIHZpZXcuY2xlYXJWaWV3KCk7XHJcblxyXG4gICAgaWYoIWlzTmFOKFBsYXlCYWNrLnN0YXJ0SW5kZXgpKXtcclxuICAgICAgICBwbGF5X21vZGUgPSBQbGF5TW9kZS5mYXN0Rm9yd2FyZDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgc2V0UGxheU1vZGUocGxheV9tb2RlKTtcclxuXHJcbiAgICBwbGF5QmFja09wZXJhdGlvbnMgPSBuZXcgUGxheUJhY2sodmlldywgb3BlcmF0aW9uc19jb3B5KTtcclxuXHJcbiAgICBhc3NlcnQodmlldy5zaGFwZXMubGVuZ3RoID09IDApO1xyXG5cclxuICAgIGF3YWl0IHBsYXlCYWNrT3BlcmF0aW9ucy5wbGF5KCk7XHJcblxyXG4gICAgdmlldy5yZXN0b3JlVmlldygpO1xyXG5cclxuICAgIHZpZXcuZGlydHkgPSB0cnVlO1xyXG4gICAgdmlldy51cGRhdGVTaGFwZXMoKTtcclxufVxyXG5cclxufSIsIm5hbWVzcGFjZSBwbGFuZV90cyB7XHJcbi8vXHJcbnR5cGUgQmxvY2sgPSBsYXlvdXRfdHMuQmxvY2s7XHJcblxyXG5leHBvcnQgbGV0IHVybE9yaWdpbiA6IHN0cmluZztcclxuXHJcbmV4cG9ydCBjbGFzcyBUZXh0QmxvY2tFdmVudCB7XHJcbiAgICBzdGFydFRlcm0gOiBUZXJtIHwgdW5kZWZpbmVkO1xyXG4gICAgdGVybSA6IFRlcm0gfCB1bmRlZmluZWQ7XHJcbiAgICB0ZXh0QmxvY2sgOiBUZXh0QmxvY2sgfCB1bmRlZmluZWQ7XHJcbiAgICBkb3duVGltZSA6IG51bWJlciA9IE5hTjtcclxuXHJcbiAgICBzZXRUZXh0QmxvY2tFdmVudCh0ZXh0QmxvY2sgOiBUZXh0QmxvY2spe1xyXG4gICAgICAgIHRleHRCbG9jay5kaXYuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIChldiA6IFBvaW50ZXJFdmVudCk9PntcclxuICAgICAgICAgICAgaWYodGhpcy50ZXh0QmxvY2sgIT0gdGV4dEJsb2NrKXtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRCbG9jayA9IHRleHRCbG9jaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYodGV4dEJsb2NrLmdldEVxdWF0aW9uKCkgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIG1zZyhgcG9pbnRlci1kb3duOm5vIGFwcGApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRlcm0gPSBnZXRUZXJtRnJvbVBvaW50ZXJFdmVudChldiwgdGV4dEJsb2NrLmdldEVxdWF0aW9uKCkhKTtcclxuICAgICAgICAgICAgaWYodGhpcy50ZXJtID09IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICAgICAgbXNnKGBwb2ludGVyLWRvd246IG5vIHRlcm1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZG93blRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICAgICAgbXNnKGBwb2ludGVyLWRvd246JHt0aGlzLnRlcm0uc3RyKCl9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGV4dEJsb2NrLmRpdi5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIChldiA6IFBvaW50ZXJFdmVudCk9PntcclxuICAgICAgICAgICAgaWYodGhpcy50ZXJtICE9IHVuZGVmaW5lZCAmJiB0aGlzLnRleHRCbG9jayA9PSB0ZXh0QmxvY2spe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWxhcHNlZF90aW1lID0gRGF0ZS5ub3coKSAtIHRoaXMuZG93blRpbWU7XHJcbiAgICAgICAgICAgICAgICBtc2coYHBvaW50ZXItdXA6JHtlbGFwc2VkX3RpbWV9ICR7dGhpcy50ZXJtLnN0cigpfWApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuc3RhcnRUZXJtID09IHRoaXMudGVybSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRlcm0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy50ZXJtLmNvbG9yTmFtZSA9IChlbGFwc2VkX3RpbWUgPCA1MDAgPyBcImJsdWVcIiA6IFwicmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMudGVybS5nZXRSb290KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoZWxhcHNlZF90aW1lIDwgNTAwKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zdGFydFRlcm0gIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5zdGFydFRlcm0ucGFyZW50IGFzIEFwcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFyZW50ICE9IG51bGwgJiYgdGhpcy50ZXJtLnBhcmVudCA9PSBwYXJlbnQgJiYgKHBhcmVudC5pc0FkZCgpIHx8IHBhcmVudC5pc011bCgpKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaWR4MSA9IHRoaXMuc3RhcnRUZXJtLmFyZ0lkeCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlkeDIgPSB0aGlzLnRlcm0uYXJnSWR4KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpZHgyIDwgaWR4MSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2lkeDEsIGlkeDJdID0gW2lkeDIsIGlkeDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBwYXJlbnQuYXJncy5zbGljZShpZHgxLCBpZHgyICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcHAgPSBuZXcgQXBwKG9wZXJhdG9yKHBhcmVudC5mbmNOYW1lKSwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAuY29sb3JOYW1lID0gXCJyZWRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5hcmdzLnNwbGljZShpZHgxLCAoaWR4MiArIDEgLSBpZHgxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuaW5zQXJnKGFwcCwgaWR4MSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXJtID0gYXBwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRlcm0gPSB0aGlzLnRlcm07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXJtID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJlbmRlckthdGV4U3ViKHRoaXMudGV4dEJsb2NrLmRpdiwgcm9vdC50ZXgoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGV4dEJsb2NrLmRpdi5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgKGV2IDogTW91c2VFdmVudCk9PntcclxuICAgICAgICAgICAgbXNnKFwidGV4dC1CbG9jay1jb250ZXh0LW1lbnVcIik7XHJcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGtleURvd24oZXYgOiBLZXlib2FyZEV2ZW50KXtcclxuICAgICAgICBpZih0aGlzLnRlcm0gPT0gdW5kZWZpbmVkIHx8IHRoaXMudGV4dEJsb2NrID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGl2ID0gdGhpcy50ZXh0QmxvY2suZGl2O1xyXG5cclxuICAgICAgICBpZiAoZXYua2V5ID09PSBcIkVzY2FwZVwiKXtcclxuICAgICAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMudGVybS5nZXRSb290KCk7XHJcbiAgICAgICAgICAgIHJvb3QuYWxsVGVybXMoKS5mb3JFYWNoKHggPT4geC5jb2xvck5hbWUgPSB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICByZW5kZXJLYXRleFN1YihkaXYsIHJvb3QudGV4KCkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGFydFRlcm0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMudGVybSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy50ZXh0QmxvY2sgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMudGVybS5wYXJlbnQ7XHJcbiAgICAgICAgaWYocGFyZW50ICE9IG51bGwgJiYgKHBhcmVudC5pc0FkZCgpIHx8IHBhcmVudC5pc011bCgpKSl7XHJcbiAgICAgICAgICAgIG1zZyhga2V5LWRvd246JHtldi5rZXl9YCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgZGlmZiA6IG51bWJlcjtcclxuICAgICAgICAgICAgaWYoZXYua2V5ID09IFwiQXJyb3dSaWdodFwiKXtcclxuICAgICAgICAgICAgICAgIGRpZmYgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYoZXYua2V5ID09IFwiQXJyb3dMZWZ0XCIpe1xyXG4gICAgICAgICAgICAgICAgZGlmZiA9IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld19pZHggPSB0aGlzLnRlcm0uYXJnSWR4KCkgKyBkaWZmO1xyXG4gICAgICAgICAgICBjb25zdCByb290ID0gdGhpcy50ZXJtLmdldFJvb3QoKTtcclxuICAgICAgICAgICAgaWYobmV3X2lkeCA9PSAtMSl7XHJcbiAgICAgICAgICAgICAgICBpZihwYXJlbnQuaXNBZGQoKSAmJiBwYXJlbnQucGFyZW50ICE9IG51bGwgJiYgcGFyZW50LnBhcmVudC5pc0VxKCkgJiYgMCA8IHBhcmVudC5hcmdJZHgoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYWxnZWJyYV90cy50cmFuc3Bvc2Uocm9vdCwgdGhpcy50ZXJtLCBkaXYsIG5ldyBTcGVlY2goKSwgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlckthdGV4U3ViKGRpdiwgcm9vdC50ZXgoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihuZXdfaWR4IDwgcGFyZW50LmFyZ3MubGVuZ3RoKXtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRlcm0uYXJnU2hpZnQoZGlmZik7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJLYXRleFN1YihkaXYsIHJvb3QudGV4KCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYobmV3X2lkeCA9PSBwYXJlbnQuYXJncy5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgaWYocGFyZW50LmlzQWRkKCkgJiYgcGFyZW50LnBhcmVudCAhPSBudWxsICYmIHBhcmVudC5wYXJlbnQuaXNFcSgpICYmIHBhcmVudC5hcmdJZHgoKSA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhbGdlYnJhX3RzLnRyYW5zcG9zZShyb290LCB0aGlzLnRlcm0sIGRpdiwgbmV3IFNwZWVjaCgpLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlckthdGV4U3ViKGRpdiwgcm9vdC50ZXgoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIG1zZyhcImNhbiBub3QgbW92ZS5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB0ZXh0QmxvY2tFdmVudCA9IG5ldyBUZXh0QmxvY2tFdmVudCgpO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRQbGFuZShwbGFuZSA6IFBsYW5lLCByb290IDogbGF5b3V0X3RzLkdyaWQpe1xyXG4gICAgaW5pdFBsYXkoKTtcclxuICAgIG1ha2VDc3NDbGFzcygpO1xyXG5cclxuICAgIHBsYW5lLnRvb2xfYmxvY2sub25DaGFuZ2UgPSBhc3luYyAodWkgOiBsYXlvdXRfdHMuVUkpPT57XHJcbiAgICAgICAgY29uc3QgYnV0dG9uID0gdWkgYXMgbGF5b3V0X3RzLlJhZGlvQnV0dG9uO1xyXG5cclxuICAgICAgICBjb25zdCB0b29sX25hbWUgPSBidXR0b24uYnV0dG9uLnZhbHVlO1xyXG4gICAgICAgIGF3YWl0IEJ1aWxkZXIuc2V0VG9vbEJ5TmFtZSh0b29sX25hbWUsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNhbnZhcyA9IG1ha2VDYW52YXMocGxhbmUuY2FudmFzX2Jsb2NrLmRpdik7XHJcblxyXG4gICAgY29uc3QgdmlldyA9IG5ldyBWaWV3KGNhbnZhcyk7XHJcblxyXG4gICAgdmlld0V2ZW50KHZpZXcpO1xyXG5cclxuICAgIGF3YWl0IEJ1aWxkZXIuc2V0VG9vbEJ5TmFtZShTZWxlY3Rpb25Ub29sLm5hbWUsIGZhbHNlKTtcclxuXHJcbiAgICBhd2FpdCBtYWtlU2VsZWN0aW9uRGxnKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB2aWV3RXZlbnQodmlldyA6IFZpZXcpe1xyXG4gICAgdmlldy5ib2FyZC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgdmlldy5wb2ludGVyZG93bi5iaW5kKHZpZXcpKTtcclxuICAgIHZpZXcuYm9hcmQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCB2aWV3LnBvaW50ZXJtb3ZlLmJpbmQodmlldykpO1xyXG4gICAgdmlldy5ib2FyZC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIgICwgdmlldy5wb2ludGVydXAuYmluZCh2aWV3KSk7ICAgXHJcbiAgICB2aWV3LmJvYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiICAgICAgLCBhc3luYyAoZXYgOiBNb3VzZUV2ZW50KT0+e1xyXG4gICAgICAgIGF3YWl0IHZpZXcuY2xpY2soZXYpO1xyXG4gICAgfSk7IFxyXG5cclxuICAgIHZpZXcuYm9hcmQuYWRkRXZlbnRMaXN0ZW5lcihcImRibGNsaWNrXCIgICAsIGFzeW5jIChldiA6IE1vdXNlRXZlbnQpPT57XHJcbiAgICAgICAgYXdhaXQgdmlldy5kYmxjbGljayhldik7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2aWV3LmJvYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCBhc3luYyAoZXYgOiBNb3VzZUV2ZW50KT0+e1xyXG4gICAgICAgIG1zZyhcImNvbnRleHRtZW51XCIpO1xyXG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdmlldy5ldmVudFBvc2l0aW9uKGV2KTtcclxuICAgICAgICBjb25zdCBzaGFwZSA9IHZpZXcuZ2V0U2hhcGUocG9zaXRpb24pO1xyXG4gICAgICAgIGlmKHNoYXBlICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGF3YWl0IHNob3dQcm9wZXJ0eURsZyhzaGFwZSwgdW5kZWZpbmVkKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBhc3luYyAoZXYgOiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYoVmlldy5pc1BsYXlCYWNrKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgdGV4dEJsb2NrRXZlbnQua2V5RG93bihldik7XHJcblxyXG4gICAgICAgIGlmIChldi5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgbXNnKFwiRXNjYXBlIGtleSBwcmVzc2VkIVwiKTtcclxuICAgICAgICAgICAgY29uc3QgY2xvc2VkID0gbGF5b3V0X3RzLmNsb3NlRGxnKCk7XHJcbiAgICAgICAgICAgIGlmKGNsb3NlZCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IEJ1aWxkZXIuYnVpbGRlclJlc2V0VG9vbCh2aWV3KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihldi5rZXkgPT0gXCJFbnRlclwiKXtcclxuICAgICAgICAgICAgaWYoQnVpbGRlci50b29sIGluc3RhbmNlb2YgU2hhcGVFcXVhdGlvbkJ1aWxkZXIgfHwgQnVpbGRlci50b29sIGluc3RhbmNlb2YgRXhwclRyYW5zZm9ybUJ1aWxkZXIpe1xyXG5cclxuICAgICAgICAgICAgICAgIHZpZXcuYWRkT3BlcmF0aW9uKG5ldyBUb29sRmluaXNoKEJ1aWxkZXIudG9vbE5hbWUpKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IEJ1aWxkZXIudG9vbC5maW5pc2godmlldyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTsgICAgXHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdmlldy5yZXNpemVWaWV3LmJpbmQodmlldykpO1xyXG5cclxuICAgIC8vIFBhc3NpdmUgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9FdmVudExpc3RlbmVyT3B0aW9ucy9ibG9iL2doLXBhZ2VzL2V4cGxhaW5lci5tZFxyXG4gICAgdmlldy5ib2FyZC5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiAgICAgICwgdmlldy53aGVlbC5iaW5kKHZpZXcpLCB7XCJwYXNzaXZlXCIgOiBmYWxzZSB9ICk7XHJcblxyXG4gICAgZHJvcEV2ZW50KHZpZXcpO1xyXG4gICAgXHJcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHZpZXcuZHJhd1NoYXBlcy5iaW5kKHZpZXcpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VGVybUZyb21Qb2ludGVyRXZlbnQoZXYgOiBQb2ludGVyRXZlbnQsIGFwcCA6IEFwcCkgOiBUZXJtIHwgdW5kZWZpbmVkIHtcclxuICAgIGNvbnN0IHRlcm1zID0gYXBwLmFsbFRlcm1zKCk7XHJcblxyXG4gICAgbGV0IGVsZSA6IEhUTUxFbGVtZW50IHwgbnVsbCA9IGV2LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgIGZvcig7IGVsZSAhPSBudWxsOyBlbGUgPSBlbGUucGFyZW50RWxlbWVudCl7XHJcbiAgICAgICAgaWYoZWxlLmlkLnN0YXJ0c1dpdGgoXCJ0ZXgtdGVybS1cIikpe1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaWRfb2Zmc2V0ID0gXCJ0ZXgtdGVybS1cIi5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQoZWxlLmlkLnN1YnN0cmluZyhpZF9vZmZzZXQpKTtcclxuICAgICAgICAgICAgY29uc3QgdGVybSA9IHRlcm1zLmZpbmQoeCA9PiB4LmlkID09IGlkKSE7XHJcbiAgICAgICAgICAgIGlmKHRlcm0gPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIG1zZyhgZ2V0LVRlcm0tRnJvbS1Qb2ludGVyLUV2ZW50Om5vIHRlcm0gaWQ6WyR7aWR9XWApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGVybTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJvcEV2ZW50KHZpZXcgOiBWaWV3KXtcclxuICAgIHZpZXcuYm9hcmQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBoYW5kbGVEcmFnT3ZlciwgZmFsc2UpO1xyXG4gICAgdmlldy5ib2FyZC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgaGFuZGxlRmlsZVNlbGVjdCwgZmFsc2UpO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldENhcHRpb25FdmVudChjYXB0aW9uIDogVGV4dEJsb2NrKXtcclxuICAgIGNhcHRpb24uZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCBjYXB0aW9uLmNhcHRpb25Qb2ludGVyZG93bi5iaW5kKGNhcHRpb24pKTtcclxuICAgIGNhcHRpb24uZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCBjYXB0aW9uLmNhcHRpb25Qb2ludGVybW92ZS5iaW5kKGNhcHRpb24pKTtcclxuICAgIGNhcHRpb24uZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgY2FwdGlvbi5jYXB0aW9uUG9pbnRlcnVwLmJpbmQoY2FwdGlvbikpO1xyXG4gICAgY2FwdGlvbi5kaXYuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldiA6IE1vdXNlRXZlbnQpPT57XHJcbiAgICAgICAgc2hvd1Byb3BlcnR5KGNhcHRpb24sIDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY2FwdGlvbi5kaXYuYWRkRXZlbnRMaXN0ZW5lcihcImRibGNsaWNrXCIsIChldiA6IE1vdXNlRXZlbnQpPT57XHJcbiAgICAgICAgY2FwdGlvbi5kaXYuY29udGVudEVkaXRhYmxlID0gXCJ0cnVlXCI7XHJcbiAgICAgICAgY2FwdGlvbi5kaXYuc3R5bGUuY3Vyc29yID0gXCJ0ZXh0XCI7XHJcbiAgICAgICAgY2FwdGlvbi5kaXYuZm9jdXMoKTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICBjYXB0aW9uLmRpdi5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCAoZXYgOiBGb2N1c0V2ZW50KT0+e1xyXG4gICAgICAgIGNhcHRpb24uZGl2LmNvbnRlbnRFZGl0YWJsZSA9IFwiZmFsc2VcIjtcclxuICAgICAgICBjYXB0aW9uLmRpdi5zdHlsZS5jdXJzb3IgPSBcIm1vdmVcIjtcclxuICAgICAgICBjYXB0aW9uLnRleHQgPSBjYXB0aW9uLmRpdi5pbm5lclRleHQ7XHJcblxyXG4gICAgICAgIGNvbnN0IHRleHRfYXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGV4dC1ibG9jay10ZXh0LWFyZWFcIikgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcclxuICAgICAgICBpZih0ZXh0X2FyZWEgIT0gbnVsbCl7XHJcbiAgICAgICAgICAgIHRleHRfYXJlYS52YWx1ZSA9IGNhcHRpb24udGV4dDtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVNoYXBlRXZlbnQoc2hhcGUgOiBNYXRoRW50aXR5LCBidXR0b24gOiBIVE1MQnV0dG9uRWxlbWVudCl7XHJcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldiA6IE1vdXNlRXZlbnQpPT57XHJcbiAgICAgICAgY29uc3Qgb2sgPSBjb25maXJtKFwiQXJlIHlvdSBzdXJlIHRvIGRlbGV0ZSB0aGlzIHNoYXBlP1wiKTtcclxuICAgICAgICBpZihvayl7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9IFZpZXcuY3VycmVudC5zaGFwZXMuaW5kZXhPZihzaGFwZSk7XHJcbiAgICAgICAgICAgIGlmKGlkeCA9PSAtMSl7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IFBsYW5lLm9uZS5zaGFwZXNfYmxvY2suY2hpbGRyZW5baWR4XTtcclxuICAgICAgICAgICAgUGxhbmUub25lLnNoYXBlc19ibG9jay5yZW1vdmVDaGlsZChidXR0b24pO1xyXG5cclxuICAgICAgICAgICAgcmVtb3ZlKFZpZXcuY3VycmVudC5zaGFwZXMsIHNoYXBlKTtcclxuICAgICAgICAgICAgc2hhcGUuZGVsZXRlKG5ldyBTZXQ8bnVtYmVyPigpKTtcclxuICAgICAgICAgICAgVmlldy5jdXJyZW50LmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbn1cclxuIiwibmFtZXNwYWNlIHBsYW5lX3RzIHtcclxuLy9cclxudHlwZSBCbG9jayA9IGxheW91dF90cy5CbG9jaztcclxuXHJcbmNvbnN0ICRmbGV4ID0gbGF5b3V0X3RzLiRmbGV4O1xyXG5jb25zdCAkZ3JpZCA9IGxheW91dF90cy4kZ3JpZDtcclxuY29uc3QgJGJsb2NrID0gbGF5b3V0X3RzLiRibG9jaztcclxuY29uc3QgJGJ1dHRvbiA9IGxheW91dF90cy4kYnV0dG9uO1xyXG5jb25zdCAkcG9wdXAgPSBsYXlvdXRfdHMuJHBvcHVwO1xyXG5jb25zdCAkdGV4dGFyZWEgPSBsYXlvdXRfdHMuJHRleHRhcmVhO1xyXG5jb25zdCAkbGFiZWwgPSBsYXlvdXRfdHMuJGxhYmVsO1xyXG5jb25zdCAkaW5wdXRfbnVtYmVyID0gbGF5b3V0X3RzLiRpbnB1dF9udW1iZXI7XHJcbnR5cGUgQ2hlY2tCb3ggPSBsYXlvdXRfdHMuQ2hlY2tCb3g7XHJcbmNvbnN0ICRjaGVja2JveCA9IGxheW91dF90cy4kY2hlY2tib3g7XHJcblxyXG5leHBvcnQgY2xhc3MgUGxhbmUge1xyXG4gICAgbWVudV9ibG9jayA6IEJsb2NrO1xyXG4gICAgdG9vbF9ibG9jayA6IEJsb2NrO1xyXG4gICAgdGV4dF9ibG9jayA6IEJsb2NrO1xyXG4gICAgY2FudmFzX2Jsb2NrIDogQmxvY2s7XHJcbiAgICBwcm9wZXJ0eV9ibG9jayA6IEdyaWQ7XHJcbiAgICBzaGFwZXNfYmxvY2sgOiBCbG9jaztcclxuICAgIG5hcnJhdGlvbl9ib3ggOiBsYXlvdXRfdHMuVGV4dEJveDtcclxuICAgIGVkaXRNb2RlIDogYm9vbGVhbjtcclxuXHJcbiAgICBzaG93X2F4aXMhIDogQ2hlY2tCb3g7XHJcbiAgICBzaG93X2dyaWQhIDogQ2hlY2tCb3g7XHJcbiAgICBzbmFwX3RvX2dyaWQhIDogQ2hlY2tCb3g7XHJcblxyXG4gICAgc3RhdGljIG9uZSA6IFBsYW5lO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgUGxhbmUub25lID0gdGhpcztcclxuICAgICAgICBcclxuICAgICAgICBsZXQgcGFyYW1zIDogTWFwPHN0cmluZywgc3RyaW5nPjtcclxuXHJcbiAgICAgICAgWyB1cmxPcmlnaW4sICwgcGFyYW1zXSA9IGkxOG5fdHMucGFyc2VVUkwoKTtcclxuICAgICAgICB0aGlzLmVkaXRNb2RlID0gKHBhcmFtcy5nZXQoXCJtb2RlXCIpID09IFwiZWRpdFwiKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB0b29sX2J1dHRvbnMgPSBtYWtlVG9vbEJ1dHRvbnMoKTtcclxuICAgICAgICBcclxuICAgICAgICBQbGFuZS5vbmUuc2hvd19heGlzID0gJGNoZWNrYm94KHtcclxuICAgICAgICAgICAgdGV4dCA6IFwiQXhpc1wiLFxyXG4gICAgICAgICAgICBjaGFuZ2UgOiBhc3luYyAoZXYgOiBFdmVudCk9PntcclxuICAgICAgICAgICAgICAgIFZpZXcuY3VycmVudC5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgUGxhbmUub25lLnNob3dfZ3JpZCA9ICRjaGVja2JveCh7XHJcbiAgICAgICAgICAgIHRleHQgOiBcIkdyaWRcIixcclxuICAgICAgICAgICAgY2hhbmdlIDogYXN5bmMgKGV2IDogRXZlbnQpPT57XHJcbiAgICAgICAgICAgICAgICBWaWV3LmN1cnJlbnQuZGlydHkgPSB0cnVlOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBQbGFuZS5vbmUuc25hcF90b19ncmlkID0gJGNoZWNrYm94KHtcclxuICAgICAgICAgICAgdGV4dCA6IFwiU25hcCB0byBHcmlkXCIsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNhdmVfYW5jaG9yID0gbGF5b3V0X3RzLiRhbmNob3Ioe1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubWVudV9ibG9jayA9ICRmbGV4KHtcclxuICAgICAgICAgICAgY2hpbGRyZW4gOiBbXHJcbiAgICAgICAgICAgICAgICBQbGFuZS5vbmUuc2hvd19heGlzXHJcbiAgICAgICAgICAgICAgICAsXHJcbiAgICAgICAgICAgICAgICBQbGFuZS5vbmUuc2hvd19ncmlkXHJcbiAgICAgICAgICAgICAgICAsXHJcbiAgICAgICAgICAgICAgICBQbGFuZS5vbmUuc25hcF90b19ncmlkXHJcbiAgICAgICAgICAgICAgICAsXHJcbiAgICAgICAgICAgICAgICAkYnV0dG9uKHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aCA6IFwiMjRweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA6IFwiMjRweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybCA6IGAke3VybE9yaWdpbn0vbGliL3BsYW5lL2ltZy91bmRvLnBuZ2AsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2sgOiBhc3luYyhldiA6IE1vdXNlRXZlbnQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFZpZXcuY3VycmVudC51bmRvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICxcclxuICAgICAgICAgICAgICAgICRidXR0b24oe1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoIDogXCIyNHB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0IDogXCIyNHB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsIDogYCR7dXJsT3JpZ2lufS9saWIvcGxhbmUvaW1nL3JlZG8ucG5nYCxcclxuICAgICAgICAgICAgICAgICAgICBjbGljayA6IGFzeW5jKGV2IDogTW91c2VFdmVudCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgVmlldy5jdXJyZW50LnJlZG8oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLFxyXG4gICAgICAgICAgICAgICAgJGJ1dHRvbih7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dCA6IFwiU2F2ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrIDogYXN5bmMoZXYgOiBNb3VzZUV2ZW50KT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlSnNvbihzYXZlX2FuY2hvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICxcclxuICAgICAgICAgICAgICAgIHNhdmVfYW5jaG9yXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICB0aGlzLnRvb2xfYmxvY2sgPSAkZ3JpZCh7XHJcbiAgICAgICAgICAgIGlkIDogXCJ0b29sLWJsb2NrXCIsXHJcbiAgICAgICAgICAgIGNvbHVtbnMgIDogXCIzNnB4IDM2cHhcIixcclxuICAgICAgICAgICAgY2hpbGRyZW4gOiB0b29sX2J1dHRvbnMsXHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICB0aGlzLnRleHRfYmxvY2sgPSAkZmxleCh7XHJcbiAgICAgICAgICAgIGlkIDogXCJ0ZXh0LWJsb2NrXCIsXHJcbiAgICAgICAgICAgIGNoaWxkcmVuIDogW10sXHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICB0aGlzLmNhbnZhc19ibG9jayA9ICRibG9jayh7XHJcbiAgICAgICAgICAgIGNoaWxkcmVuIDogW10sXHJcbiAgICAgICAgICAgIGNvbG9yIDogZmdDb2xvcixcclxuICAgICAgICAgICAgLy8gYmFja2dyb3VuZENvbG9yIDogXCJjb3Juc2lsa1wiXHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICB0aGlzLnByb3BlcnR5X2Jsb2NrID0gJGdyaWQoe1xyXG4gICAgICAgICAgICBpZCA6IFwicHJvcGVydHktZGl2XCIsXHJcbiAgICAgICAgICAgIGNvbHVtbnMgIDogXCI1MCUgNTAlXCIsXHJcbiAgICAgICAgICAgIGNoaWxkcmVuIDogW10sXHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICB0aGlzLnNoYXBlc19ibG9jayA9ICRmbGV4KHtcclxuICAgICAgICAgICAgaWQgOiBcInNoYXBlcy1ibG9ja1wiLFxyXG4gICAgICAgICAgICBkaXJlY3Rpb24gOiBcImNvbHVtblwiLFxyXG4gICAgICAgICAgICBjaGlsZHJlbiA6IFtdLFxyXG4gICAgICAgIH0pOyAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLm5hcnJhdGlvbl9ib3ggPSBsYXlvdXRfdHMuJHRleHRib3goe1xyXG4gICAgICAgICAgICBpZCA6IFwibmFycmF0aW9uLWJveFwiLFxyXG4gICAgICAgICAgICB0ZXh0IDogXCJcIixcclxuICAgICAgICAgICAgY29sb3IgOiBmZ0NvbG9yLFxyXG4gICAgICAgICAgICBwYWRkaW5nIDogMjAsXHJcbiAgICAgICAgICAgIHRleHRBbGlnbiA6IFwiY2VudGVyXCIsXHJcbiAgICAgICAgICAgIGZvbnRTaXplIDogXCI0OHB4XCIsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGkxOG5fdHMub25TcGVhayA9ICh0ZXh0IDogc3RyaW5nKT0+e1xyXG4gICAgICAgICAgICB0aGlzLm5hcnJhdGlvbl9ib3guc2V0VGV4dCh0ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJQbGFuZSgpe1xyXG4gICAgICAgIC8vIGZvcihjb25zdCBjbGFzc19uYW1lIG9mIFtcInRleF9kaXZcIl0pe1xyXG4gICAgICAgIC8vICAgICBjb25zdCB0ZXhfZGl2cyA9IEFycmF5LmZyb20odGhpcy5jYW52YXNfYmxvY2suZGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NfbmFtZSkpIGFzIEhUTUxEaXZFbGVtZW50W107XHJcbiAgICAgICAgLy8gICAgIHRleF9kaXZzLmZvckVhY2goeCA9PiB4LnJlbW92ZSgpKTtcclxuICAgICAgICAvLyB9XHJcbiAgICBcclxuICAgICAgICB0aGlzLnRleHRfYmxvY2suZGl2LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5uYXJyYXRpb25fYm94LmRpdi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZUNhbnZhcyhkaXYgOiBIVE1MRWxlbWVudCkgOiBIVE1MQ2FudmFzRWxlbWVudCB7XHJcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgY2FudmFzLmlkID0gXCJtYWluLWNhbnZhc1wiO1xyXG4gICAgY2FudmFzLnN0eWxlLndpZHRoICA9IFwiMTAwJVwiO1xyXG4gICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG5cclxuICAgIGRpdi5hcHBlbmQoY2FudmFzKTtcclxuXHJcbiAgICByZXR1cm4gY2FudmFzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZUNzc0NsYXNzKCl7XHJcbiAgICBjb25zdCBzdHlsZXMgPSBbXHJcbmAudGV4X2RpdiB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuICAgIGN1cnNvcjogbW92ZTtcclxuICAgIHVzZXItc2VsZWN0OiBub25lO1xyXG59YFxyXG4gICAgLFxyXG5gLnNlbGVjdGFibGVfdGV4IHtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbn1gXHJcbiAgICBdO1xyXG5cclxuICAgIGZvcihjb25zdCBzdHlsZSBvZiBzdHlsZXMpe1xyXG4gICAgICAgIGNvbnN0IHRleF9zdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcbiAgICAgICAgdGV4X3N0eWxlLmlubmVySFRNTCA9IHN0eWxlO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmFwcGVuZENoaWxkKHRleF9zdHlsZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmcm9tWFBpeFNjYWxlKHBpeCA6IG51bWJlcikgOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIFZpZXcuY3VycmVudC5mcm9tWFBpeFNjYWxlKHBpeCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmcm9tWVBpeFNjYWxlKHBpeCA6IG51bWJlcikgOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIFZpZXcuY3VycmVudC5mcm9tWVBpeFNjYWxlKHBpeCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0b1hQaXgobiA6IG51bWJlcikgOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIFZpZXcuY3VycmVudC50b1hQaXgobik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0b1lQaXgobiA6IG51bWJlcikgOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIFZpZXcuY3VycmVudC50b1lQaXgobik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0b1hQaXhTY2FsZShuIDogbnVtYmVyKSA6IG51bWJlciB7XHJcbiAgICByZXR1cm4gVmlldy5jdXJyZW50LnRvWFBpeFNjYWxlKG4pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdG9ZUGl4U2NhbGUobiA6IG51bWJlcikgOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIFZpZXcuY3VycmVudC50b1lQaXhTY2FsZShuKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdMaW5lKHNoYXBlIDogU2hhcGUsIHAxIDogVmVjMiwgcDIgOiBWZWMyKXtcclxuICAgIFZpZXcuY3VycmVudC5jYW52YXMuZHJhd0xpbmUoc2hhcGUsIHAxLCBwMik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlR3JpZChwbGFuZSA6IFBsYW5lKXtcclxuICAgIGNvbnN0IHJvb3QgPSAkZ3JpZCh7XHJcbiAgICAgICAgcm93cyAgICAgOiBcIjI1cHggMTAwJSAyNXB4IDgwcHhcIixcclxuICAgICAgICBjaGlsZHJlbjpbXHJcbiAgICAgICAgICAgICRncmlkKHtcclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgcGxhbmUubWVudV9ibG9ja1xyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAsXHJcbiAgICAgICAgICAgICRncmlkKHtcclxuICAgICAgICAgICAgICAgIGNvbHVtbnMgIDogXCI1MHB4IDUwJSA1MCUgMzAwcHhcIixcclxuXHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbiA6IFtcclxuICAgICAgICAgICAgICAgICAgICBwbGFuZS50b29sX2Jsb2NrXHJcbiAgICAgICAgICAgICAgICAgICAgLFxyXG4gICAgICAgICAgICAgICAgICAgIHBsYW5lLnRleHRfYmxvY2tcclxuICAgICAgICAgICAgICAgICAgICAsXHJcbiAgICAgICAgICAgICAgICAgICAgcGxhbmUuY2FudmFzX2Jsb2NrXHJcbiAgICAgICAgICAgICAgICAgICAgLFxyXG4gICAgICAgICAgICAgICAgICAgIHBsYW5lLnByb3BlcnR5X2Jsb2NrXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICxcclxuICAgICAgICAgICAgcGxhbmUuc2hhcGVzX2Jsb2NrXHJcbiAgICAgICAgICAgICxcclxuICAgICAgICAgICAgcGxhbmUubmFycmF0aW9uX2JveFxyXG4gICAgICAgIF1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiByb290OyAgICBcclxufVxyXG5cclxuXHJcbn0iLCJuYW1lc3BhY2UgcGxhbmVfdHMge1xyXG4vL1xyXG5leHBvcnQgY2xhc3MgVmVjMiB7XHJcbiAgICBzdGF0aWMgbmFuKCkgOiBWZWMyIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIoTmFOLCBOYU4pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB6ZXJvKCkgOiBWZWMyIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIoMCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgdHlwZU5hbWU6IHN0cmluZyA9IFwiVmVjMlwiO1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHg6bnVtYmVyLCB5OiBudW1iZXIpe1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQcm9wZXJ0aWVzKCl7XHJcbiAgICAgICAgcmV0dXJuIFsgXCJ4XCIsIFwieVwiIF07XHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKSA6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGAoJHt0aGlzLngudG9GaXhlZCgxKX0sICR7dGhpcy55LnRvRml4ZWQoMSl9KWA7XHJcbiAgICB9XHJcblxyXG4vKisrK1xyXG4gICAgYXBwKCkgOiBBcHAge1xyXG4gICAgICAgIHJldHVybiBuZXcgQXBwKG9wZXJhdG9yKFwidmVjXCIpLCBbbmV3IENvbnN0TnVtKHRoaXMueCksIG5ldyBDb25zdE51bSh0aGlzLnkpXSk7XHJcbiAgICB9XHJcbiovXHJcblxyXG4gICAgY29weSgpe1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLngsIHRoaXMueSk7XHJcbiAgICB9XHJcblxyXG4gICAgZXF1YWxzKHB0OiBWZWMyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMueCA9PSBwdC54ICYmIHRoaXMueSA9PSBwdC55O1xyXG4gICAgfVxyXG5cclxuICAgIGFkZChwdDogVmVjMikgOiBWZWMye1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLnggKyBwdC54LCB0aGlzLnkgKyBwdC55KTtcclxuICAgIH1cclxuXHJcbiAgICBzdWIocHQ6IFZlYzIpIDogVmVjMntcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIodGhpcy54IC0gcHQueCwgdGhpcy55IC0gcHQueSk7XHJcbiAgICB9XHJcblxyXG4gICAgbXVsKGN4OiBudW1iZXIsIGN5IDogbnVtYmVyIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkKSA6IFZlYzIge1xyXG4gICAgICAgIGlmKGN5ID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGN5ID0gY3g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIoY3ggKiB0aGlzLngsIGN5ICogdGhpcy55KTtcclxuICAgIH1cclxuXHJcbiAgICBsZW4yKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueTtcclxuICAgIH1cclxuXHJcbiAgICBsZW4oKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5oeXBvdCh0aGlzLngsIHRoaXMueSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzdGFuY2UocHQ6VmVjMikgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmh5cG90KCBwdC54IC0gdGhpcy54LCBwdC55IC0gdGhpcy55ICk7XHJcbiAgICB9XHJcblxyXG4gICAgZG90KHB0OlZlYzIpIDogbnVtYmVye1xyXG4gICAgICAgIHJldHVybiB0aGlzLnggKiBwdC54ICsgdGhpcy55ICogcHQueTtcclxuICAgIH1cclxuXHJcbiAgICB1bml0KCkgOiBWZWMye1xyXG4gICAgICAgIGNvbnN0IGQgPSB0aGlzLmxlbigpO1xyXG5cclxuICAgICAgICBpZihkID09IDApe1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMyKDAsIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHRoaXMueCAvIGQsIHRoaXMueSAvIGQpO1xyXG4gICAgfVxyXG5cclxuICAgIGRpdmlkZSh0OiBudW1iZXIsIHB0OiBWZWMyKSA6IFZlYzIge1xyXG4gICAgICAgIGNvbnN0IHggPSAoMSAtIHQpICogdGhpcy54ICsgdCAqIHB0Lng7XHJcbiAgICAgICAgY29uc3QgeSA9ICgxIC0gdCkgKiB0aGlzLnkgKyB0ICogcHQueTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHgsIHkpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyb3NzKGEgOiBWZWMyKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMueCAqIGEueSAtIHRoaXMueSAqIGEueDtcclxuICAgIH1cclxuXHJcbiAgICBwcm9qZWN0KGEgOiBWZWMyKSA6IFZlYzIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm11bCh0aGlzLmRvdChhKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcm90KHRoIDogbnVtYmVyKSA6IFZlYzIge1xyXG4gICAgICAgIGNvbnN0IGNzID0gTWF0aC5jb3ModGgpO1xyXG4gICAgICAgIGNvbnN0IHNuID0gTWF0aC5zaW4odGgpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIodGhpcy54ICogY3MgLSB0aGlzLnkgKiBzbiwgdGhpcy54ICogc24gKyB0aGlzLnkgKiBjcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcm90OTAoKSA6IFZlYzIge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMigtIHRoaXMueSwgdGhpcy54KTtcclxuICAgIH1cclxuXHJcbiAgICByb3Q0NSgpIDogVmVjMiB7XHJcbiAgICAgICAgY29uc3QgY3MgPSBNYXRoLmNvcyhNYXRoLlBJIC8gNCk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMihjcyAqICh0aGlzLnggLSB0aGlzLnkpLCBjcyAqICh0aGlzLnggKyB0aGlzLnkpKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgaW50ZXJwb2xhdGUocDEgOiBWZWMyLCBwMiA6IFZlYzIsIHJhdGUgOiBudW1iZXIpe1xyXG4gICAgICAgIGFzc2VydCgwIDw9IHJhdGUgJiYgcmF0ZSA8PSAxKTtcclxuICAgICAgICBjb25zdCB4ID0gKDEgLSByYXRlKSAqIHAxLnggKyByYXRlICogcDIueDtcclxuICAgICAgICBjb25zdCB5ID0gKDEgLSByYXRlKSAqIHAxLnkgKyByYXRlICogcDIueTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHgsIHkpO1xyXG4gICAgfVxyXG59XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwidmVjdG9yLnRzXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBwbGFuZV90cyB7XHJcbi8vXHJcbmxldCBwb2ludGVyTW92ZSA6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcbmxldCBwb2ludGVyIDogSFRNTEltYWdlRWxlbWVudDtcclxubGV0IHBvaW50ZXJQaXggOiBWZWMyID0gVmVjMi56ZXJvKCk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5pdFBsYXkoKXtcclxuICAgIHBvaW50ZXJNb3ZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb2ludGVyX21vdmVfaW1nXCIpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICBwb2ludGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb2ludGVyX2ltZ1wiKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbW92ZVBvaW50ZXJQaXgocGl4IDogVmVjMil7XHJcbiAgICBpZihnZXRQbGF5TW9kZSgpICE9IFBsYXlNb2RlLmZhc3RGb3J3YXJkKXtcclxuICAgICAgICBwb2ludGVyTW92ZS5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XHJcblxyXG4gICAgICAgIGNvbnN0IHN0ZXAgPSAyMDtcclxuICAgICAgICBmb3IoY29uc3QgaSBvZiByYW5nZShzdGVwKSl7XHJcbiAgICAgICAgICAgIGNvbnN0IHggPSBsaW5lYXIoMCwgaSwgc3RlcCAtIDEsIHBvaW50ZXJQaXgueCwgcGl4LngpO1xyXG4gICAgICAgICAgICBjb25zdCB5ID0gbGluZWFyKDAsIGksIHN0ZXAgLSAxLCBwb2ludGVyUGl4LnksIHBpeC55KTtcclxuICAgIFxyXG4gICAgICAgICAgICBwb2ludGVyTW92ZS5zdHlsZS5sZWZ0ID0gYCR7eH1weGA7XHJcbiAgICAgICAgICAgIHBvaW50ZXJNb3ZlLnN0eWxlLnRvcCAgPSBgJHt5fXB4YDtcclxuICAgICAgICAgICAgYXdhaXQgc2xlZXAoMTApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcG9pbnRlck1vdmUuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHBvaW50ZXIuc3R5bGUubGVmdCA9IGAke3BpeC54fXB4YDtcclxuICAgIHBvaW50ZXIuc3R5bGUudG9wICA9IGAke3BpeC55fXB4YDtcclxuICAgIHBvaW50ZXIuc3R5bGUudmlzaWJpbGl0eSAgICAgPSBcInZpc2libGVcIjtcclxuICAgIGF3YWl0IHNsZWVwKDUwMCk7XHJcbiAgICBwb2ludGVyLnN0eWxlLnZpc2liaWxpdHkgICAgID0gXCJoaWRkZW5cIjtcclxuXHJcbiAgICBwb2ludGVyUGl4ID0gcGl4O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbW92ZVBvaW50ZXIocG9zIDogVmVjMil7XHJcbiAgICBjb25zdCBwaXggPSBWaWV3LmN1cnJlbnQudG9QaXhQb3NpdGlvbihwb3MpO1xyXG4gICAgY29uc3QgcmVjdCA9IFZpZXcuY3VycmVudC5ib2FyZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGNvbnN0IG5ld19waXggPSBuZXcgVmVjMihyZWN0LnggKyBwaXgueCwgcmVjdC55ICsgcGl4LnkpO1xyXG5cclxuICAgIGF3YWl0IG1vdmVQb2ludGVyUGl4KG5ld19waXgpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbW92ZVBvaW50ZXJUb0VsZW1lbnQoZWxlIDogSFRNTEVsZW1lbnQpe1xyXG4gICAgY29uc3QgcmVjdCA9IGVsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGNvbnN0IHggPSByZWN0LnggKyAwLjUgKiByZWN0LndpZHRoO1xyXG4gICAgY29uc3QgeSA9IHJlY3QueSArIDAuNSAqIHJlY3QuaGVpZ2h0O1xyXG5cclxuICAgIGF3YWl0IG1vdmVQb2ludGVyUGl4KG5ldyBWZWMyKHgsIHkpKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1vdmVUb29sU2VsZWN0aW9uUG9pbnRlcihvcGVyYXRpb24gOiBUb29sU2VsZWN0aW9uKXtcclxuICAgIGNvbnN0IGlkID0gYCR7b3BlcmF0aW9uLnRvb2xOYW1lfS1yYWRpb2A7XHJcbiAgICBjb25zdCByYWRpbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSE7XHJcbiAgICBhc3NlcnQocmFkaW8gIT0gbnVsbCk7XHJcblxyXG4gICAgYXdhaXQgbW92ZVBvaW50ZXJUb0VsZW1lbnQocmFkaW8pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRGl2KCl7XHJcbiAgICBmb3IoY29uc3QgY2xhc3NfbmFtZSBvZiBbIFwidGV4X2RpdlwiLCBcInNlbGVjdGFibGVfdGV4XCIgXSl7XHJcbiAgICAgICAgY29uc3QgdGV4X2RpdnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc19uYW1lKSkgYXMgSFRNTERpdkVsZW1lbnRbXTtcclxuICAgICAgICB0ZXhfZGl2cy5mb3JFYWNoKHggPT4geC5yZW1vdmUoKSk7ICAgIFxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGxheVNoYXBlKHNwZWVjaCA6IGkxOG5fdHMuQWJzdHJhY3RTcGVlY2gsIGFsbF9zaGFwZXMgOiBNYXRoRW50aXR5W10sIG5hbWVkX2FsbF9zaGFwZV9tYXAgOiBNYXA8c3RyaW5nLCBwbGFuZV90cy5TaGFwZT4sIHNoYXBlIDogTWF0aEVudGl0eSl7XHJcbiAgICBwbGFuZV90cy5zaG93UHJvcGVydHkoc2hhcGUsIDApO1xyXG5cclxuICAgIGxldCBoaWdobGlnaHRlZCA9IG5ldyBTZXQ8UmVhZGluZz4oKTtcclxuXHJcbiAgICBpZihzaGFwZSBpbnN0YW5jZW9mIHBsYW5lX3RzLkV4cHJUcmFuc2Zvcm0pe1xyXG4gICAgICAgIGF3YWl0IHNoYXBlLnNwZWFrRXhwclRyYW5zZm9ybShzcGVlY2gpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihzaGFwZSBpbnN0YW5jZW9mIFNoYXBlRXF1YXRpb24pe1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihzaGFwZSBpbnN0YW5jZW9mIFN0YXRlbWVudCl7XHJcbiAgICAgICAgYXdhaXQgc2hhcGUuc2hvd1JlYXNvbkFuZFN0YXRlbWVudChzcGVlY2gpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihzaGFwZSBpbnN0YW5jZW9mIE1vdGlvbil7XHJcbiAgICAgICAgYXdhaXQgc2hhcGUuYW5pbWF0ZShzcGVlY2gpO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuXHJcbiAgICAgICAgY29uc3Qgcm9vdF9yZWFkaW5nID0gc2hhcGUucmVhZGluZygpO1xyXG4gICAgICAgIGlmKHJvb3RfcmVhZGluZy50ZXh0ID09IFwiXCIpe1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihyb290X3JlYWRpbmcuYXJncy5sZW5ndGggPT0gMCl7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCBzcGVha0FuZEhpZ2hsaWdodChzaGFwZSwgc3BlZWNoLCBbcm9vdF9yZWFkaW5nLnRleHRdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSByb290X3JlYWRpbmcucHJlcGFyZVJlYWRpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlYWRpbmdzID0gcm9vdF9yZWFkaW5nLmdldEFsbFJlYWRpbmdzKCk7XHJcblxyXG4gICAgICAgICAgICBtc2coYHJlYWRpbmc6JHtzaGFwZS5jb25zdHJ1Y3Rvci5uYW1lfSAke3RleHR9YCk7XHJcbiAgICAgICAgICAgIG1zZyhcIiAgICBcIiArIHJlYWRpbmdzLm1hcCh4ID0+IGBbJHt4LnN0YXJ0fS0+JHt4LmVuZH06JHt4LnRleHR9XWApLmpvaW4oXCIgXCIpKTtcclxuXHJcbiAgICAgICAgICAgIHNwZWVjaC5jYWxsYmFjayA9IChpZHggOiBudW1iZXIpPT57XHJcbiAgICAgICAgICAgICAgICBmb3IoY29uc3QgcmVhZGluZyBvZiByZWFkaW5ncyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVhZGluZy5zdGFydCA8PSBpZHgpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWhpZ2hsaWdodGVkLmhhcyhyZWFkaW5nKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2coYGhpbGlnaHQ6IHN0YXJ0OiR7cmVhZGluZy5zdGFydH0gJHtyZWFkaW5nLnRleHR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkaW5nLnJlYWRhYmxlLmhpZ2hsaWdodCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodGVkLmFkZChyZWFkaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYodGV4dCAhPSBcIlwiKXtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHNwZWVjaC5zcGVhayhUVCh0ZXh0KSk7XHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IHNwZWVjaC53YWl0RW5kKCk7XHJcblxyXG4gICAgQXJyYXkuZnJvbShoaWdobGlnaHRlZC52YWx1ZXMoKSkuZm9yRWFjaCh4ID0+IHgucmVhZGFibGUuaGlnaGxpZ2h0KGZhbHNlKSk7XHJcbiAgICBzcGVlY2guY2FsbGJhY2sgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgaWYoc2hhcGUgaW5zdGFuY2VvZiBTaGFwZUVxdWF0aW9uIHx8IHNoYXBlIGluc3RhbmNlb2YgRXhwclRyYW5zZm9ybSl7XHJcbiAgICAgICAgY29uc3QgW25vZGUsIHRleHRdID0gcGFyc2VyX3RzLm1ha2VOb2RlVGV4dEJ5QXBwKHNoYXBlLmVxdWF0aW9uKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGl2X2NoaWxkID0gc2hhcGUudGV4dEJsb2NrLmRpdi5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgICAgY29uc3QgaWQgPSBzZXRJbnRlcnZhbCgoKT0+e1xyXG4gICAgICAgICAgICAgICAgc3BlZWNoLnByZXZDaGFySW5kZXgrKztcclxuICAgICAgICAgICAgICAgIGlmKHRleHQubGVuZ3RoIDwgc3BlZWNoLnByZXZDaGFySW5kZXgpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICovXHJcbiAgICAgICAgaWYoaTE4bl90cy5pc0VkZ2Upe1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgcGFyc2VyX3RzLnNob3dGbG93KHNwZWVjaCwgc2hhcGUuZXF1YXRpb24sIHNoYXBlLnRleHRCbG9jay5kaXYsIG5hbWVkX2FsbF9zaGFwZV9tYXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgZGl2X2NoaWxkLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiYmx1ZVwiO1xyXG4gICAgICAgICAgICBhd2FpdCBzcGVlY2guc3BlYWsodGV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCBzcGVlY2gud2FpdEVuZCgpOyAgICAgICAgICAgICAgICBcclxuICAgICAgICBkaXZfY2hpbGQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJcIjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoc2hhcGUgaW5zdGFuY2VvZiBUZXh0QmxvY2sgJiYgc2hhcGUuaXNUZXgpe1xyXG4gICAgICAgIGNvbnN0IHRlcm0gPSBwYXJzZXJfdHMucGFyc2VNYXRoKHNoYXBlLnRleHQpO1xyXG5cclxuICAgICAgICBhd2FpdCBwYXJzZXJfdHMuc2hvd0Zsb3coc3BlZWNoLCB0ZXJtLCBzaGFwZS5kaXYsIG5hbWVkX2FsbF9zaGFwZV9tYXApO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihzaGFwZSBpbnN0YW5jZW9mIFN0YXRlbWVudCAmJiBzaGFwZS5tYXRoVGV4dCAhPSBcIlwiKXtcclxuICAgICAgICBjb25zdCB0ZXJtID0gcGFyc2VyX3RzLnBhcnNlTWF0aChzaGFwZS5tYXRoVGV4dCk7XHJcblxyXG4gICAgICAgIGlmKHNoYXBlLmxhdGV4Qm94ID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHNoYXBlLmxhdGV4Qm94ID0gc2hhcGUubWFrZVRleFVJKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCBwYXJzZXJfdHMuc2hvd0Zsb3coc3BlZWNoLCB0ZXJtLCBzaGFwZS5sYXRleEJveC5kaXYsIG5hbWVkX2FsbF9zaGFwZV9tYXApO1xyXG4gICAgfVxyXG5cclxuICAgIGFsbF9zaGFwZXMuZm9yRWFjaCh4ID0+IHt4LnNldE1vZGUoTW9kZS5ub25lKTsgfSk7XHJcbn1cclxufSIsIm5hbWVzcGFjZSBwbGFuZV90cyB7XHJcbi8vXHJcbnR5cGUgQmxvY2sgPSBsYXlvdXRfdHMuQmxvY2s7XHJcbnR5cGUgQ2hlY2tCb3ggPSBsYXlvdXRfdHMuQ2hlY2tCb3g7XHJcbnR5cGUgSW5wdXROdW1iZXIgPSBsYXlvdXRfdHMuSW5wdXROdW1iZXI7XHJcbnR5cGUgSW5wdXRUZXh0ID0gbGF5b3V0X3RzLklucHV0VGV4dDtcclxudHlwZSBJbnB1dENvbG9yID0gbGF5b3V0X3RzLklucHV0Q29sb3I7XHJcbnR5cGUgVGV4dEFyZWEgPSBsYXlvdXRfdHMuVGV4dEFyZWE7XHJcblxyXG5jb25zdCAkZmxleCA9IGxheW91dF90cy4kZmxleDtcclxuY29uc3QgJGdyaWQgPSBsYXlvdXRfdHMuJGdyaWQ7XHJcbmNvbnN0ICRibG9jayA9IGxheW91dF90cy4kYmxvY2s7XHJcbmNvbnN0ICRidXR0b24gPSBsYXlvdXRfdHMuJGJ1dHRvbjtcclxuY29uc3QgJHBvcHVwID0gbGF5b3V0X3RzLiRwb3B1cDtcclxuY29uc3QgJHRleHRhcmVhID0gbGF5b3V0X3RzLiR0ZXh0YXJlYTtcclxuY29uc3QgJGxhYmVsID0gbGF5b3V0X3RzLiRsYWJlbDtcclxuY29uc3QgJGlucHV0X251bWJlciA9IGxheW91dF90cy4kaW5wdXRfbnVtYmVyO1xyXG5jb25zdCAkY2hlY2tib3ggPSBsYXlvdXRfdHMuJGNoZWNrYm94O1xyXG5jb25zdCAkaW5wdXRfdGV4dCA9IGxheW91dF90cy4kaW5wdXRfdGV4dDtcclxuY29uc3QgJGlucHV0X2NvbG9yID0gbGF5b3V0X3RzLiRpbnB1dF9jb2xvcjtcclxuXHJcbmNvbnN0IGxpbmVLaW5kSW1nTmFtZXMgPSBbIFwibGluZVwiLCBcImhhbGZfbGluZV8xXCIsIFwiaGFsZl9saW5lXzJcIiwgXCJsaW5lX3NlZ21lbnRcIiBdO1xyXG5jb25zdCBwcm9wZXJ0eVNldHRpbmdUZXh0ID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oW1xyXG4gICAgWyBcImFuZ2xlTWFya1wiLCBUVChcIlNldCB0aGUgYW5nbGUgbWFyay5cIildLFxyXG4gICAgWyBcImxpbmVLaW5kXCIgLCBUVChcIlNldCB0aGUgbGluZSBraW5kLlwiKV0sXHJcbiAgICBbIFwibmFtZVwiICAgICAsIFRUKFwiU2V0IHRoZSBuYW1lLlwiKV0sXHJcbl0pXHJcblxyXG5sZXQgdXNlZF9wcm9wZXJ0eV9uYW1lcyA6IFNldDxzdHJpbmc+O1xyXG5cclxuZnVuY3Rpb24gYXBwZW5kUm93KGdyaWQgOiBHcmlkLCBuZXN0IDogbnVtYmVyLCBuYW1lIDogc3RyaW5nLCB2YWx1ZSA6IFVJKXtcclxuICAgIGNvbnN0IGxhYmVsID0gJGxhYmVsKHsgXHJcbiAgICAgICAgdGV4dCA6IG5hbWUsXHJcbiAgICAgICAgcGFkZGluZ0xlZnQgOiBgJHtuZXN0ICogMTB9cHhgLFxyXG4gICAgfSk7XHJcblxyXG4gICAgZ3JpZC5hZGRDaGlsZChsYWJlbCk7XHJcbiAgICBncmlkLmFkZENoaWxkKHZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFByb3BlcnR5IHtcclxuICAgIHdpZGdldHMgOiBXaWRnZXRbXTtcclxuICAgIG5hbWUgICA6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih3aWRnZXRzIDogV2lkZ2V0W10sIG5hbWUgOiBzdHJpbmcpe1xyXG4gICAgICAgIHRoaXMud2lkZ2V0cyA9IHdpZGdldHM7XHJcbiAgICAgICAgdGhpcy5uYW1lICAgPSBuYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFZhbHVlKG5ld1ZhbHVlIDogYW55KXtcclxuICAgICAgICBtc2coYHNldCB2YWx1ZToke3RoaXMubmFtZX0gJHtuZXdWYWx1ZX1gKTtcclxuXHJcbiAgICAgICAgZm9yKGNvbnN0IHdpZGdldCBvZiB0aGlzLndpZGdldHMpe1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgb2JqID0gd2lkZ2V0IGFzIGFueTtcclxuICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBvYmpbdGhpcy5uYW1lXTtcclxuICAgICAgICAgICAgc2V0UHJvcGVydHkod2lkZ2V0LCB0aGlzLm5hbWUsIG5ld1ZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIGlmKEJ1aWxkZXIudG9vbCBpbnN0YW5jZW9mIE1vdGlvbkJ1aWxkZXIgJiYgISh3aWRnZXQgaW5zdGFuY2VvZiBNb3Rpb24pKXtcclxuICAgICAgICAgICAgICAgIEJ1aWxkZXIudG9vbC5hbmltYXRpb24uYWRkUHJvcGVydHlDaGFuZ2Uod2lkZ2V0LCB0aGlzLm5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFZpZXcuY3VycmVudC5kaXJ0eSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgYWJzdHJhY3QgdWkoKSA6IFVJO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGV4dEFyZWFQcm9wZXJ0eSBleHRlbmRzIFByb3BlcnR5IHtcclxuICAgIHRleHRBcmVhIDogVGV4dEFyZWE7XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkZ2V0cyA6IFdpZGdldFtdLCBuYW1lIDogc3RyaW5nLCB2YWx1ZSA6IHN0cmluZyl7XHJcbiAgICAgICAgc3VwZXIod2lkZ2V0cywgbmFtZSk7XHJcbiAgICAgICAgdGhpcy50ZXh0QXJlYSA9ICR0ZXh0YXJlYSh7XHJcbiAgICAgICAgICAgIGlkICAgOiBcInRleHQtYmxvY2stdGV4dC1hcmVhXCIsXHJcbiAgICAgICAgICAgIGNvbHMgOiAyMCxcclxuICAgICAgICAgICAgcm93cyA6IG5hbWUgPT0gXCJtYXRoVGV4dFwiID8gNiA6IDEwLFxyXG4gICAgICAgICAgICB2YWx1ZSA6IHZhbHVlLFxyXG4gICAgICAgICAgICBjaGFuZ2UgOiBhc3luYyAoZXYgOiBFdmVudCk9PntcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy50ZXh0QXJlYS5nZXRWYWx1ZSgpKTtcclxuICAgICAgICAgICAgICAgIGZvcihjb25zdCB3aWRnZXQgb2YgdGhpcy53aWRnZXRzKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYod2lkZ2V0IGluc3RhbmNlb2YgVGV4dEJsb2NrICYmICF3aWRnZXQuaXNUZXgpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0LmRpdi5pbm5lclRleHQgPSB0aGlzLnRleHRBcmVhLmdldFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdWkoKSA6IFVJIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZXh0QXJlYTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIElucHV0UHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eSB7XHJcbiAgICBhYnN0cmFjdCBnZXRJbnB1dCgpICA6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkZ2V0cyA6IFdpZGdldFtdLCBuYW1lIDogc3RyaW5nLCBpbnB1dF90eXBlIDogc3RyaW5nKXtcclxuICAgICAgICBzdXBlcih3aWRnZXRzLCBuYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICB2YWx1ZUNoYW5nZWQod2lkZ2V0X2lkIDogbnVtYmVyLCBuYW1lIDogc3RyaW5nLCBuZXdfdmFsdWUgOiBzdHJpbmcgfCBudW1iZXIpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXRWYWx1ZShuZXdfdmFsdWUpO1xyXG5cclxuICAgICAgICBjb25zdCBvcGVyYXRpb24gPSBWaWV3LmN1cnJlbnQub3BlcmF0aW9ucy5maW5kKHggPT4geCBpbnN0YW5jZW9mIFByb3BlcnR5U2V0dGluZyAmJiB4LmlkID09IHdpZGdldF9pZCAmJiB4Lm5hbWUgPT0gbmFtZSkgYXMgUHJvcGVydHlTZXR0aW5nO1xyXG4gICAgICAgIGlmKG9wZXJhdGlvbiAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBvcGVyYXRpb24udmFsdWUgPSBuZXdfdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIFZpZXcuY3VycmVudC5hZGRPcGVyYXRpb24oIG5ldyBQcm9wZXJ0eVNldHRpbmcod2lkZ2V0X2lkLCBuYW1lLCBuZXdfdmFsdWUpICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBTdHJpbmdQcm9wZXJ0eSBleHRlbmRzIElucHV0UHJvcGVydHkge1xyXG4gICAgaW5wdXQgOiBJbnB1dFRleHQ7XHJcbiAgICB2YWx1ZSA6IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkZ2V0cyA6IFdpZGdldFtdLCBuYW1lIDogc3RyaW5nLCB2YWx1ZSA6IHN0cmluZyl7XHJcbiAgICAgICAgc3VwZXIod2lkZ2V0cywgbmFtZSwgXCJ0ZXh0XCIpO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLmlucHV0ID0gJGlucHV0X3RleHQoe1xyXG4gICAgICAgICAgICB0ZXh0IDogdmFsdWUsXHJcbiAgICAgICAgICAgIGNoYW5nZSA6IGFzeW5jIChldiA6IEV2ZW50KT0+e1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3X3ZhbHVlID0gdGhpcy5pbnB1dC5pbnB1dC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIG1zZyhgY2hhbmdlOiR7dGhpcy52YWx1ZX09PiR7bmV3X3ZhbHVlfWApXHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZWQod2lkZ2V0c1swXS5pZCwgbmFtZSwgbmV3X3ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldElucHV0KCkgIDogSFRNTElucHV0RWxlbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXQuaW5wdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgdWkoKSA6IFVJIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnB1dDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgTnVtYmVyUHJvcGVydHkgZXh0ZW5kcyBJbnB1dFByb3BlcnR5IHtcclxuICAgIGlucHV0IDogSW5wdXROdW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkZ2V0cyA6IFdpZGdldFtdLCBuYW1lIDogc3RyaW5nLCB2YWx1ZSA6IG51bWJlciwgc3RlcCA6IG51bWJlciwgbWluIDogbnVtYmVyLCBtYXggOiBudW1iZXIpe1xyXG4gICAgICAgIHN1cGVyKHdpZGdldHMsIG5hbWUsIFwibnVtYmVyXCIpO1xyXG4gICAgICAgIHRoaXMuaW5wdXQgPSAkaW5wdXRfbnVtYmVyKHtcclxuICAgICAgICAgICAgc3RlcCA6IHN0ZXAsXHJcbiAgICAgICAgICAgIHZhbHVlIDogdmFsdWUsXHJcbiAgICAgICAgICAgIG1pbiA6IG1pbixcclxuICAgICAgICAgICAgbWF4IDogbWF4LFxyXG4gICAgICAgICAgICBjaGFuZ2UgOiBhc3luYyAoZXYgOiBFdmVudCk9PntcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld192YWx1ZSA9IHRoaXMuaW5wdXQuZ2V0VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVDaGFuZ2VkKHdpZGdldHNbMF0uaWQsIG5hbWUsIG5ld192YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGdldElucHV0KCkgIDogSFRNTElucHV0RWxlbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXQuaW5wdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgdWkoKSA6IFVJIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnB1dDtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmNsYXNzIFNlbGVjdFByb3BlcnR5IGV4dGVuZHMgUHJvcGVydHkge1xyXG4gICAgc2VsZWN0IDogSFRNTFNlbGVjdEVsZW1lbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkZ2V0cyA6IFdpZGdldFtdLCBuYW1lIDogc3RyaW5nLCB2YWx1ZSA6IG51bWJlciwgb3B0aW9uX3RleHRzOnN0cmluZ1tdKXtcclxuICAgICAgICBzdXBlcih3aWRnZXRzLCBuYW1lKTtcclxuICAgICAgICB0aGlzLnNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Quc3R5bGUuY29sb3IgPSBmZ0NvbG9yO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGJnQ29sb3I7XHJcblxyXG4gICAgICAgIGZvcihjb25zdCB0ZXh0IG9mIG9wdGlvbl90ZXh0cyl7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICAgICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSB0ZXh0O1xyXG4gICAgICAgICAgICBvcHRpb24uc3R5bGUuY29sb3IgPSBmZ0NvbG9yO1xyXG4gICAgICAgICAgICBvcHRpb24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYmdDb2xvcjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0LmFwcGVuZChvcHRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXNzZXJ0KDAgPD0gdmFsdWUgJiYgdmFsdWUgPCBvcHRpb25fdGV4dHMubGVuZ3RoKTtcclxuICAgICAgICB0aGlzLnNlbGVjdC5zZWxlY3RlZEluZGV4ID0gdmFsdWU7XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGV2IDogRXZlbnQpPT57XHJcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9IHRoaXMuc2VsZWN0LnNlbGVjdGVkSW5kZXg7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUoaWR4KTtcclxuICAgICAgICAgICAgbXNnKGBzZWxlY3QgJHtpZHh9ICR7b3B0aW9uX3RleHRzW2lkeF19YCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdWkoKSA6IFVJIHtcclxuICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuY2xhc3MgQm9vbGVhblByb3BlcnR5IGV4dGVuZHMgSW5wdXRQcm9wZXJ0eSB7XHJcbiAgICBpbnB1dCA6IENoZWNrQm94O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHdpZGdldHMgOiBXaWRnZXRbXSwgbmFtZSA6IHN0cmluZywgdmFsdWUgOiBib29sZWFuKXtcclxuICAgICAgICBzdXBlcih3aWRnZXRzLCBuYW1lLCBcImNoZWNrYm94XCIpO1xyXG4gICAgICAgIHRoaXMuaW5wdXQgPSAkY2hlY2tib3goe1xyXG4gICAgICAgICAgICB0ZXh0IDogbmFtZSxcclxuICAgICAgICAgICAgY2hhbmdlIDogYXN5bmMgKGV2IDogRXZlbnQpPT57XHJcbiAgICAgICAgICAgICAgICB0aGlzLkJvb2xlYW5WYWx1ZUNoYW5nZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmlucHV0LmlucHV0LmNoZWNrZWQgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbnB1dCgpICA6IEhUTUxJbnB1dEVsZW1lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlucHV0LmlucHV0O1xyXG4gICAgfVxyXG5cclxuICAgIEJvb2xlYW5WYWx1ZUNoYW5nZWQoKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5pbnB1dC5pbnB1dC5jaGVja2VkKTtcclxuICAgIH1cclxuXHJcbiAgICB1aSgpIDogVUkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlucHV0O1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBDb2xvclByb3BlcnR5IGV4dGVuZHMgSW5wdXRQcm9wZXJ0eSB7XHJcbiAgICBpbnB1dCA6IElucHV0Q29sb3I7XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkZ2V0cyA6IFdpZGdldFtdLCBuYW1lIDogc3RyaW5nLCB2YWx1ZSA6IHN0cmluZyl7XHJcbiAgICAgICAgc3VwZXIod2lkZ2V0cywgbmFtZSwgXCJjb2xvclwiKTtcclxuICAgICAgICB0aGlzLmlucHV0ID0gJGlucHV0X2NvbG9yKHtcclxuICAgICAgICAgICAgdGV4dCA6IHZhbHVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5wdXQoKSAgOiBIVE1MSW5wdXRFbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnB1dC5pbnB1dDtcclxuICAgIH1cclxuXHJcbiAgICB1aSgpIDogVUkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlucHV0O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSW1nU2VsZWN0aW9uUHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eSB7XHJcbiAgICBzZWxlY3Rpb25MaXN0IDogbGF5b3V0X3RzLlNlbGVjdGlvbkxpc3Q7XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkZ2V0cyA6IFdpZGdldFtdLCBuYW1lIDogc3RyaW5nLCB2YWx1ZSA6IG51bWJlciwgaW1nX25hbWVzIDogc3RyaW5nW10pe1xyXG4gICAgICAgIHN1cGVyKHdpZGdldHMsIG5hbWUpO1xyXG5cclxuICAgICAgICBjb25zdCBpbWdfdXJscyA9IGltZ19uYW1lcy5tYXAoeCA9PiBgJHt1cmxPcmlnaW59L2xpYi9wbGFuZS9pbWcvJHt4fS5wbmdgKSBhcyBzdHJpbmdbXTtcclxuICAgICAgICBjb25zdCBidXR0b25zIDogbGF5b3V0X3RzLlJhZGlvQnV0dG9uW10gPSBbXTtcclxuICAgICAgICBmb3IoY29uc3QgW2lkeCwgdXJsXSBvZiBpbWdfdXJscy5lbnRyaWVzKCkpe1xyXG4gICAgICAgICAgICBjb25zdCByYWRpbyA9IGxheW91dF90cy4kcmFkaW8oe1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgOiBgJHtpZHh9YCxcclxuICAgICAgICAgICAgICAgIHVybCxcclxuICAgICAgICAgICAgICAgIHdpZHRoICA6IFwiMzZweFwiLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0IDogXCIzNnB4XCIsICAgIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmFkaW8uaHRtbCgpLmRhdGFzZXQub3BlcmF0aW9uX3ZhbHVlID0gYCR7aWR4fWA7XHJcbiAgICAgICAgICAgIHJhZGlvLmh0bWwoKS5kYXRhc2V0LnByb3BlcnR5X25hbWUgICA9IG5hbWU7XHJcblxyXG4gICAgICAgICAgICBidXR0b25zLnB1c2gocmFkaW8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25MaXN0ID0gbGF5b3V0X3RzLiRzZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICBjaGlsZHJlbiA6IGJ1dHRvbnMsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkSW5kZXggOiB2YWx1ZSxcclxuICAgICAgICAgICAgc2VsZWN0aW9uQ2hhbmdlZCA6IChpbmRleCA6IG51bWJlcik9PntcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUoaW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdWkoKSA6IFVJIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25MaXN0O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2hhcGVzUHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eSB7XHJcbiAgICBzdGF0aWMgb25lIDogU2hhcGVzUHJvcGVydHk7XHJcblxyXG4gICAgYnV0dG9uc1VJIDogVUk7XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkZ2V0cyA6IFdpZGdldFtdLCBuYW1lIDogc3RyaW5nLCB2YWx1ZSA6IE1hdGhFbnRpdHlbXSl7XHJcbiAgICAgICAgc3VwZXIod2lkZ2V0cywgbmFtZSk7XHJcblxyXG4gICAgICAgIGlmKG5hbWUgPT0gXCJzZWxlY3RlZFNoYXBlc1wiKXtcclxuXHJcbiAgICAgICAgICAgIFNoYXBlc1Byb3BlcnR5Lm9uZSA9IHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBidXR0b25zID0gdmFsdWUubWFwKHggPT4gbWFrZVNoYXBlQnV0dG9uKHgsIGZhbHNlKSk7XHJcbiAgICAgICAgZm9yKGNvbnN0IGJ1dHRvbiBvZiBidXR0b25zKXtcclxuICAgICAgICAgICAgYnV0dG9uLmJ1dHRvbi5zdHlsZS5wb3NpdGlvbiA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihidXR0b25zLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICAgICAgdGhpcy5idXR0b25zVUkgPSAkbGFiZWwoeyB0ZXh0IDogXCJcIiB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5idXR0b25zVUkgPSAkZ3JpZCh7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5zIDogYnV0dG9ucy5tYXAoeCA9PiBcImF1dG9cIikuam9pbihcIiBcIiksXHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbiA6IGJ1dHRvbnNcclxuICAgICAgICAgICAgfSk7ICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1aSgpIDogVUkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJ1dHRvbnNVSTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUNvbnN0YW50UHJvcGVydHkoZ3JpZCA6IEdyaWQsIG5lc3QgOiBudW1iZXIsIG5hbWUgOiBzdHJpbmcsIHRleHQgOiBzdHJpbmcpe1xyXG4gICAgZ3JpZC5hZGRDaGlsZCgkbGFiZWwoeyB0ZXh0IDogbmFtZSB9KSk7XHJcbiAgICBncmlkLmFkZENoaWxkKCRsYWJlbCh7IHRleHQgOiB0ZXh0IH0pKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVRleFByb3BlcnR5KGdyaWQgOiBHcmlkLCBuZXN0IDogbnVtYmVyLCBuYW1lIDogc3RyaW5nLCB0ZXh0IDogc3RyaW5nKXtcclxuICAgIGdyaWQuYWRkQ2hpbGQoJGxhYmVsKHsgdGV4dCA6IG5hbWUgfSkpO1xyXG4gICAgZ3JpZC5hZGRDaGlsZChsYXlvdXRfdHMuJGxhdGV4KHsgdGV4dCA6IHRleHQgfSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhcHBlbmRUaXRsZShncmlkIDogR3JpZCwgbmVzdCA6IG51bWJlciwgdGl0bGUgOiBzdHJpbmcpe1xyXG4gICAgY29uc3QgbGFiZWwgPSAkbGFiZWwoe1xyXG4gICAgICAgIHRleHQgOiB0aXRsZSxcclxuICAgICAgICBwYWRkaW5nTGVmdCA6IGAke25lc3QgKiAxMH1weGAsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBmaWxsZXIgPSAkbGFiZWwoe1xyXG4gICAgICAgIHRleHQgOiBcIlwiXHJcbiAgICB9KTtcclxuXHJcbiAgICBncmlkLmFkZENoaWxkKGxhYmVsKTtcclxuICAgIGdyaWQuYWRkQ2hpbGQoZmlsbGVyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYXBwZW5kRGVsZXRlKHRibCA6IEhUTUxUYWJsZUVsZW1lbnQsIHNoYXBlIDogTWF0aEVudGl0eSl7XHJcbiAgICBjb25zdCBhbGxfZGVwZW5kZW5jaWVzID0gVmlldy5jdXJyZW50LmFsbFNoYXBlcygpLm1hcCh4ID0+IHguZGVwZW5kZW5jaWVzKCkpLmZsYXQoKTtcclxuXHJcbiAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XHJcbiAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgY2VsbC5jb2xTcGFuID0gMjtcclxuXHJcbiAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgYnV0dG9uLmlubmVyVGV4dCA9IFwiZGVsZXRlXCI7XHJcbiAgICBidXR0b24uc3R5bGUuY29sb3IgPSBmZ0NvbG9yO1xyXG4gICAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGJnQ29sb3I7XHJcblxyXG4gICAgaWYoYWxsX2RlcGVuZGVuY2llcy5pbmNsdWRlcyhzaGFwZSBhcyBTaGFwZSkpe1xyXG4gICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG5cclxuICAgICAgICBkZWxldGVTaGFwZUV2ZW50KHNoYXBlLCBidXR0b24pO1xyXG4gICAgfVxyXG5cclxuICAgIGNlbGwuYXBwZW5kKGJ1dHRvbik7XHJcbiAgICByb3cuYXBwZW5kKGNlbGwpOyAgICBcclxuXHJcbiAgICB0YmwuYXBwZW5kKHJvdyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG93UHJvcGVydHkod2lkZ2V0IDogV2lkZ2V0IHwgV2lkZ2V0W10sIG5lc3QgOiBudW1iZXIpeyAgICBcclxuICAgIGlmKG5lc3QgPT0gMCl7XHJcbiAgICAgICAgdXNlZF9wcm9wZXJ0eV9uYW1lcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB3aWRnZXRzIDogV2lkZ2V0W107XHJcbiAgICBpZih3aWRnZXQgaW5zdGFuY2VvZiBXaWRnZXQpe1xyXG4gICAgICAgIHdpZGdldHMgPSBbd2lkZ2V0XTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgd2lkZ2V0cyA9IHdpZGdldDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcHJvcGVydGllcyA6IHN0cmluZ1tdID0gW107XHJcbiAgICBmb3IoY29uc3QgW2lkeCwgd10gb2Ygd2lkZ2V0cy5lbnRyaWVzKCkgKXtcclxuICAgICAgICBjb25zdCBuYW1lcyA9IHcuZ2V0UHJvcGVydGllcygpO1xyXG4gICAgICAgIGlmKGlkeCA9PSAwKXtcclxuICAgICAgICAgICAgcHJvcGVydGllcyA9IG5hbWVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBwcm9wZXJ0aWVzID0gcHJvcGVydGllcy5maWx0ZXIoeCA9PiBuYW1lcy5pbmNsdWRlcyh4KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGdyaWQgPSBQbGFuZS5vbmUucHJvcGVydHlfYmxvY2s7XHJcbiAgICBpZihuZXN0ID09IDApe1xyXG4gICAgICAgIGdyaWQuY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb25zdHJ1Y3Rvcl9uYW1lcyA9IHVuaXF1ZSh3aWRnZXRzLm1hcCh4ID0+IHguY29uc3RydWN0b3IubmFtZSkpO1xyXG4gICAgZm9yKGNvbnN0IGNvbnN0cnVjdG9yX25hbWUgb2YgY29uc3RydWN0b3JfbmFtZXMpe1xyXG4gICAgICAgIGFwcGVuZFRpdGxlKGdyaWQsIG5lc3QsIGNvbnN0cnVjdG9yX25hbWUpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmb3IoY29uc3QgcHJvcGVydHlfbmFtZSBvZiBwcm9wZXJ0aWVzKXtcclxuICAgICAgICBhc3NlcnQodHlwZW9mIHByb3BlcnR5X25hbWUgPT0gXCJzdHJpbmdcIik7XHJcblxyXG4gICAgICAgIGlmKHVzZWRfcHJvcGVydHlfbmFtZXMuaGFzKHByb3BlcnR5X25hbWUpKXtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihpMThuX3RzLmFwcE1vZGUgPT0gaTE4bl90cy5BcHBNb2RlLnBsYXkpe1xyXG4gICAgICAgICAgICBpZighWyBcIm5hbWVcIiwgXCJyZWFzb25cIiwgXCJzZWxlY3RlZFNoYXBlc1wiLCBcImF1eGlsaWFyeVNoYXBlc1wiIF0uaW5jbHVkZXMocHJvcGVydHlfbmFtZSkpe1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5hbWUgPSBwcm9wZXJ0eV9uYW1lO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gKHdpZGdldHNbMF0gYXMgYW55KVtuYW1lXTtcclxuICAgICAgICBpZih2YWx1ZSA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBwcm9wZXJ0eSA6IElucHV0UHJvcGVydHkgfCBUZXh0QXJlYVByb3BlcnR5IHwgU2VsZWN0UHJvcGVydHkgfCBJbWdTZWxlY3Rpb25Qcm9wZXJ0eSB8IFNoYXBlc1Byb3BlcnR5O1xyXG5cclxuICAgICAgICBpZihuYW1lID09IFwibWF0aFRleHRcIiB8fCBuYW1lID09IFwidGV4dFwiICYmIHdpZGdldCBpbnN0YW5jZW9mIFRleHRCbG9jayl7XHJcblxyXG4gICAgICAgICAgICBwcm9wZXJ0eSA9IG5ldyBUZXh0QXJlYVByb3BlcnR5KHdpZGdldHMsIG5hbWUsIHZhbHVlIGFzIHN0cmluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYobmFtZSA9PSBcImFuZ2xlTWFya1wiKXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlcyA9IHdpZGdldHMuZmlsdGVyKHggPT4geCBpbnN0YW5jZW9mIEFuZ2xlKSBhcyBBbmdsZVtdO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaW1nX25hbWVzID0gcmFuZ2UoQW5nbGUubnVtTWFya3MpLm1hcChpID0+IGBhbmdsZV8ke2l9YCk7XHJcblxyXG4gICAgICAgICAgICBwcm9wZXJ0eSA9IG5ldyBJbWdTZWxlY3Rpb25Qcm9wZXJ0eShhbmdsZXMsIG5hbWUsIHZhbHVlLCBpbWdfbmFtZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKG5hbWUgPT0gXCJyZWFzb25cIil7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gcmVhc29uTXNnKHZhbHVlKTtcclxuICAgICAgICAgICAgbWFrZUNvbnN0YW50UHJvcGVydHkoZ3JpZCwgbmVzdCArIDEsIG5hbWUsIHRleHQpO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihuYW1lID09IFwiZXF1YXRpb25cIil7XHJcbiAgICAgICAgICAgIGFzc2VydCh2YWx1ZSBpbnN0YW5jZW9mIEFwcCk7XHJcbiAgICAgICAgICAgIG1ha2VUZXhQcm9wZXJ0eShncmlkLCBuZXN0ICsgMSwgbmFtZSwgKHZhbHVlIGFzIEFwcCkudGV4KCkpO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihuYW1lID09IFwidGVybXNcIil7XHJcbiAgICAgICAgICAgIGFzc2VydChBcnJheS5pc0FycmF5KHZhbHVlKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlcm1zID0gdmFsdWUgYXMgVGVybVtdO1xyXG4gICAgICAgICAgICBhc3NlcnQodGVybXMuZXZlcnkoeCA9PiB4IGluc3RhbmNlb2YgVGVybSkpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdGV4dCA9IHRlcm1zLm1hcCh4ID0+IHgudGV4KCkpLmpvaW4oXCJcXFxccXVhZCAsIFxcXFxxdWFkXCIpO1xyXG4gICAgICAgICAgICBtYWtlVGV4UHJvcGVydHkoZ3JpZCwgbmVzdCArIDEsIG5hbWUsIHRleHQpO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihuYW1lID09IFwic2VsZWN0ZWRTaGFwZXNcIiB8fCBuYW1lID09IFwiYXV4aWxpYXJ5U2hhcGVzXCIpe1xyXG5cclxuICAgICAgICAgICAgcHJvcGVydHkgPSBuZXcgU2hhcGVzUHJvcGVydHkod2lkZ2V0cywgbmFtZSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKG5hbWUgPT0gXCJsaW5lXCIpe1xyXG5cclxuICAgICAgICAgICAgcHJvcGVydHkgPSBuZXcgU2hhcGVzUHJvcGVydHkod2lkZ2V0cywgbmFtZSwgW3ZhbHVlXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHN3aXRjaCh0eXBlb2YgdmFsdWUpe1xyXG4gICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XHJcbiAgICAgICAgICAgICAgICBpZihuYW1lID09IFwiY29sb3JcIil7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5ID0gbmV3IENvbG9yUHJvcGVydHkod2lkZ2V0cywgbmFtZSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkod2lkZ2V0cywgbmFtZSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgY2FzZSBcIm51bWJlclwiOlxyXG4gICAgICAgICAgICAgICAgaWYobmFtZSA9PSBcImludGVydmFsXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5ID0gbmV3IE51bWJlclByb3BlcnR5KHdpZGdldHMsIG5hbWUsIHZhbHVlLCAwLjEsIDAsIDEwMDAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYobmFtZSA9PSBcImxpbmVLaW5kXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5ID0gbmV3IEltZ1NlbGVjdGlvblByb3BlcnR5KHdpZGdldHMsIG5hbWUsIHZhbHVlLCBsaW5lS2luZEltZ05hbWVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYobmFtZSA9PSBcImxlbmd0aEtpbmRcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgPSBuZXcgTnVtYmVyUHJvcGVydHkod2lkZ2V0cywgbmFtZSwgdmFsdWUsIDEsIDAsIDMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZihuYW1lID09IFwiaWRcIiB8fCBuYW1lID09IFwib3JkZXJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZUNvbnN0YW50UHJvcGVydHkoZ3JpZCwgbmVzdCArIDEsIG5hbWUsIGAke3ZhbHVlfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSA9IG5ldyBOdW1iZXJQcm9wZXJ0eSh3aWRnZXRzLCBuYW1lLCB2YWx1ZSwgMC4xLCAtMTAwLCAxMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcclxuICAgICAgICAgICAgICAgIHByb3BlcnR5ID0gbmV3IEJvb2xlYW5Qcm9wZXJ0eSh3aWRnZXRzLCBuYW1lLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XHJcbiAgICAgICAgICAgICAgICBpZih2YWx1ZSBpbnN0YW5jZW9mIFdpZGdldCl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1Byb3BlcnR5KHZhbHVlLCBuZXN0ICsgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKHZhbHVlIGluc3RhbmNlb2YgVmVjMil7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGB4OiR7dmFsdWUueC50b0ZpeGVkKDEpfSB5OiR7dmFsdWUueS50b0ZpeGVkKDEpfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZUNvbnN0YW50UHJvcGVydHkoZ3JpZCwgbmVzdCArIDEsIG5hbWUsIHRleHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBtc2coYHVua25vd24gcHJvcGVydHk6JHt2YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeXtcclxuICAgICAgICAgICAgY29uc3QgdWkgPSBwcm9wZXJ0eS51aSgpO1xyXG4gICAgICAgICAgICBhcHBlbmRSb3coZ3JpZCwgbmVzdCArIDEsIHByb3BlcnR5Lm5hbWUsIHVpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2goZSl7XHJcbiAgICAgICAgICAgIG1zZyhgbm8gcHJvcGVydHk6JHtwcm9wZXJ0eS5uYW1lfWApO1xyXG4gICAgICAgIH0gICAgICAgIFxyXG5cclxuICAgICAgICB1c2VkX3Byb3BlcnR5X25hbWVzLmFkZChwcm9wZXJ0eV9uYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBpZihpMThuX3RzLmFwcE1vZGUgPT0gaTE4bl90cy5BcHBNb2RlLnBsYXkpe1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZihuZXN0ID09IDAgJiYgd2lkZ2V0IGluc3RhbmNlb2YgTWF0aEVudGl0eSl7XHJcbi8vKysrKysrKysrKyAgICAgICAgYXBwZW5kRGVsZXRlKHRibCwgd2lkZ2V0KTtcclxuICAgIH1cclxuXHJcbiAgICBsYXlvdXRfdHMuTGF5b3V0LnJvb3QudXBkYXRlUm9vdExheW91dCgpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2hvd1Byb3BlcnR5RGxnKHdpZGdldCA6IFdpZGdldCwgb3BlcmF0aW9uIDpQcm9wZXJ0eVNldHRpbmcgfCB1bmRlZmluZWQpe1xyXG4gICAgY29uc3QgYmFzaWNfbmFtZXMgPSBbIFwibmFtZVwiLCBcImxpbmVLaW5kXCIsIFwiYW5nbGVNYXJrXCIgIF1cclxuICAgIGNvbnN0IG5hbWVzID0gd2lkZ2V0LmdldFByb3BlcnRpZXMoKS5maWx0ZXIoeCA9PiBiYXNpY19uYW1lcy5pbmNsdWRlcyh4KSk7XHJcblxyXG4gICAgY29uc3QgZ3JpZCA9ICRncmlkKHtcclxuICAgICAgICBjb2x1bW5zICA6IFwiNTAlIDUwJVwiLFxyXG4gICAgICAgIGNoaWxkcmVuIDogW10sXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBwcm9wZXJ0eU1hcCA9IG5ldyBNYXA8c3RyaW5nLCBQcm9wZXJ0eT4oKTtcclxuXHJcbiAgICBmb3IoY29uc3QgbmFtZSBvZiBuYW1lcyl7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSAod2lkZ2V0IGFzIGFueSlbbmFtZV07XHJcbiAgICAgICAgaWYodmFsdWUgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcHJvcGVydHkgOiBJbnB1dFByb3BlcnR5IHwgVGV4dEFyZWFQcm9wZXJ0eSB8IFNlbGVjdFByb3BlcnR5IHwgSW1nU2VsZWN0aW9uUHJvcGVydHkgfCBTaGFwZXNQcm9wZXJ0eTtcclxuXHJcbiAgICAgICAgc3dpdGNoKG5hbWUpe1xyXG4gICAgICAgIGNhc2UgXCJuYW1lXCI6XHJcbiAgICAgICAgICAgIHByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KFt3aWRnZXRdLCBuYW1lLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwibGluZUtpbmRcIjpcclxuICAgICAgICAgICAgcHJvcGVydHkgPSBuZXcgSW1nU2VsZWN0aW9uUHJvcGVydHkoW3dpZGdldF0sIG5hbWUsIHZhbHVlLCBsaW5lS2luZEltZ05hbWVzKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgXCJhbmdsZU1hcmtcIjp7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbWdfbmFtZXMgPSByYW5nZShBbmdsZS5udW1NYXJrcykubWFwKGkgPT4gYGFuZ2xlXyR7aX1gKTtcclxuICAgICAgICAgICAgICAgIHByb3BlcnR5ID0gbmV3IEltZ1NlbGVjdGlvblByb3BlcnR5KFt3aWRnZXRdLCBuYW1lLCB2YWx1ZSwgaW1nX25hbWVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm9wZXJ0eU1hcC5zZXQobmFtZSwgcHJvcGVydHkpO1xyXG5cclxuICAgICAgICBjb25zdCB1aSA9IHByb3BlcnR5LnVpKCk7XHJcbiAgICAgICAgYXBwZW5kUm93KGdyaWQsIDEsIHByb3BlcnR5Lm5hbWUsIHVpKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkbGcgPSBsYXlvdXRfdHMuJGRpYWxvZyh7XHJcbiAgICAgICAgY29udGVudCA6IGdyaWRcclxuICAgIH0pO1xyXG5cclxuICAgIGRsZy5zaG93TW9kYWwoKTtcclxuXHJcbiAgICBpZihWaWV3LmlzUGxheUJhY2spe1xyXG4gICAgICAgIGlmKG9wZXJhdGlvbiBpbnN0YW5jZW9mIFByb3BlcnR5U2V0dGluZyl7XHJcbiAgICAgICAgICAgIC8vIFZpZXcuY3VycmVudC5hZGRPcGVyYXRpb24ob3BlcmF0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSBwcm9wZXJ0eVNldHRpbmdUZXh0LmdldChvcGVyYXRpb24ubmFtZSkhO1xyXG4gICAgICAgICAgICBhc3NlcnQodGV4dCAhPSB1bmRlZmluZWQpO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3BlZWNoID0gaTE4bl90cy5BYnN0cmFjdFNwZWVjaC5vbmU7XHJcbiAgICAgICAgICAgIGF3YWl0IHNwZWVjaC5zcGVhayh0ZXh0KTtcclxuICAgICAgICAgICAgLy8gbXNnKGBvcHIgJHtvcGVyYXRpb24uaWR9ICR7b3BlcmF0aW9uLnRvU3RyaW5nKCl9YCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IHByb3BlcnR5TWFwLmdldChvcGVyYXRpb24ubmFtZSkhO1xyXG4gICAgICAgICAgICBhc3NlcnQocHJvcGVydHkgIT0gdW5kZWZpbmVkKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBpdGVtIDogSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHN3aXRjaChvcGVyYXRpb24ubmFtZSl7XHJcbiAgICAgICAgICAgIGNhc2UgXCJhbmdsZU1hcmtcIjpcclxuICAgICAgICAgICAgY2FzZSBcImxpbmVLaW5kXCI6e1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gb3BlcmF0aW9uLnZhbHVlIGFzIG51bWJlcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsX2J1dHRvbnMgPSBBcnJheS5mcm9tKGRsZy5odG1sKCkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJidXR0b25cIikpIGFzIEhUTUxCdXR0b25FbGVtZW50W107XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IGFsbF9idXR0b25zLmZpbHRlcih4ID0+IHguZGF0YXNldC5wcm9wZXJ0eV9uYW1lID09IG9wZXJhdGlvbi5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtICA9IGJ1dHRvbnMuZmluZCh4ID0+IHguZGF0YXNldC5vcGVyYXRpb25fdmFsdWUgPT0gYCR7b3BlcmF0aW9uLnZhbHVlfWApITtcclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQoaXRlbSAhPSB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG1vdmVQb2ludGVyQW5kSGlnaGxpZ2h0KGl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihvcGVyYXRpb24ubmFtZSA9PSBcImFuZ2xlTWFya1wiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHdpZGdldCBhcyBBbmdsZSkuc2V0QW5nbGVNYXJrKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHdpZGdldCBhcyBBYnN0cmFjdExpbmUpLmxpbmVLaW5kID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjp7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXQgPSAocHJvcGVydHkgYXMgU3RyaW5nUHJvcGVydHkpLmlucHV0Lmh0bWwoKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBtb3ZlUG9pbnRlclRvRWxlbWVudChpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdHlwZUludG9JbnB1dChpbnB1dCwgb3BlcmF0aW9uLnZhbHVlIGFzIHN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgKHdpZGdldCBhcyBTaGFwZSkuc2V0TmFtZShvcGVyYXRpb24udmFsdWUgYXMgc3RyaW5nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHNwZWVjaC53YWl0RW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuXHJcbiAgICAgICAgYXdhaXQgd2FpdEZvckNsaWNrKGRsZy5odG1sKCkpO1xyXG5cclxuICAgICAgICAvLyBWaWV3LmN1cnJlbnQuYWRkT3BlcmF0aW9uKG5ldyBFbnVtU2VsZWN0aW9uKHZhbHVlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGxnLmNsb3NlKCk7XHJcbn1cclxufSIsIm5hbWVzcGFjZSBwbGFuZV90cyB7XHJcbi8vXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRFcXVhbExlbmd0aHMobGVuZ3RoU3ltYm9sQSA6IExlbmd0aFN5bWJvbCwgbGVuZ3RoU3ltYm9sQiA6IExlbmd0aFN5bWJvbCl7XHJcbiAgICBsZXQgc2V0ID0gZXF1YWxMZW5ndGhzLmZpbmQoeCA9PiB4LmhhcyhsZW5ndGhTeW1ib2xBKSB8fCB4LmhhcyhsZW5ndGhTeW1ib2xCKSk7XHJcbiAgICBpZihzZXQgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICBzZXQgPSBuZXcgTXlTZXQ8TGVuZ3RoU3ltYm9sPihbIGxlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEIgXSk7XHJcbiAgICAgICAgZXF1YWxMZW5ndGhzLnB1c2goc2V0KTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgc2V0LmFkZChsZW5ndGhTeW1ib2xBKTtcclxuICAgICAgICBzZXQuYWRkKGxlbmd0aFN5bWJvbEIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDb21tb25Qb2ludChsZW5ndGhTeW1ib2xBIDogTGVuZ3RoU3ltYm9sLCBsZW5ndGhTeW1ib2xCIDogTGVuZ3RoU3ltYm9sKSA6IFtQb2ludCwgUG9pbnQsIFBvaW50XSB8IHVuZGVmaW5lZCB7XHJcbiAgICBjb25zdCBbQUEsIEFCXSA9IFsgbGVuZ3RoU3ltYm9sQS5wb2ludEEsIGxlbmd0aFN5bWJvbEEucG9pbnRCIF07XHJcbiAgICBjb25zdCBbQkEsIEJCXSA9IFsgbGVuZ3RoU3ltYm9sQi5wb2ludEEsIGxlbmd0aFN5bWJvbEIucG9pbnRCIF07XHJcblxyXG4gICAgaWYoQUEgPT0gQkEpe1xyXG4gICAgICAgIHJldHVybiBbIEFBLCBBQiwgQkIgXTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoQUEgPT0gQkIpe1xyXG4gICAgICAgIHJldHVybiBbIEFBLCBBQiwgQkEgXTsgICAgICAgIFxyXG4gICAgfVxyXG4gICAgZWxzZSBpZihBQiA9PSBCQSl7XHJcbiAgICAgICAgcmV0dXJuIFsgQUIsIEFBLCBCQiBdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihBQiA9PSBCQil7XHJcbiAgICAgICAgcmV0dXJuIFsgQUIsIEFBLCBCQSBdOyAgICAgICAgXHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXJhbGxlbExpbmVzQnlQb2ludHNQYWlyKEFzIDogW1BvaW50LCBQb2ludF0sIEJzIDogW1BvaW50LCBQb2ludF0pIDogW0Fic3RyYWN0TGluZSwgQWJzdHJhY3RMaW5lXSB8IHVuZGVmaW5lZCB7XHJcbiAgICBjb25zdCBsaW5lQSA9IGdldENvbW1vbkxpbmVPZlBvaW50cyhBc1swXSwgQXNbMV0pO1xyXG4gICAgY29uc3QgbGluZUIgPSBnZXRDb21tb25MaW5lT2ZQb2ludHMoQnNbMF0sIEJzWzFdKTtcclxuICAgIGlmKGxpbmVBID09IHVuZGVmaW5lZCB8fCBsaW5lQiA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoaXNQYXJhbGxlbChsaW5lQSwgbGluZUIpKXtcclxuICAgICAgICByZXR1cm4gW2xpbmVBLCBsaW5lQl07XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbmRQYXJhbGxlbExpbmVzT2ZMZW5ndGhTeW1ib2xzKGxlbmd0aFN5bWJvbEEgOiBMZW5ndGhTeW1ib2wsIGxlbmd0aFN5bWJvbEIgOiBMZW5ndGhTeW1ib2wpIDogW0Fic3RyYWN0TGluZSwgQWJzdHJhY3RMaW5lXSB8IHVuZGVmaW5lZHtcclxuICAgIGNvbnN0IEFzIDogW1BvaW50LCBQb2ludF0gPSBbbGVuZ3RoU3ltYm9sQS5wb2ludEEsIGxlbmd0aFN5bWJvbEEucG9pbnRCXTtcclxuICAgIGNvbnN0IEJzIDogW1BvaW50LCBQb2ludF0gPSBbbGVuZ3RoU3ltYm9sQi5wb2ludEEsIGxlbmd0aFN5bWJvbEIucG9pbnRCXTtcclxuXHJcbiAgICBjb25zdCBsaW5lX3BhaXIxID0gZ2V0UGFyYWxsZWxMaW5lc0J5UG9pbnRzUGFpcihBcywgQnMpO1xyXG4gICAgaWYobGluZV9wYWlyMSA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZvcihjb25zdCBpZHggb2YgWzAsIDFdKXsgICAgICAgIFxyXG4gICAgICAgIGxldCBDcyA6IFtQb2ludCwgUG9pbnRdO1xyXG4gICAgICAgIGxldCBEcyA6IFtQb2ludCwgUG9pbnRdO1xyXG5cclxuICAgICAgICBpZihpZHggPT0gMCl7XHJcbiAgICAgICAgICAgIENzID0gW0FzWzBdLCBCc1swXV07XHJcbiAgICAgICAgICAgIERzID0gW0FzWzFdLCBCc1sxXV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIENzID0gW0FzWzBdLCBCc1sxXV07XHJcbiAgICAgICAgICAgIERzID0gW0FzWzFdLCBCc1swXV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBsaW5lX3BhaXIyID0gZ2V0UGFyYWxsZWxMaW5lc0J5UG9pbnRzUGFpcihDcywgRHMpO1xyXG4gICAgICAgIGlmKGxpbmVfcGFpcjIgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgcmV0dXJuIGxpbmVfcGFpcjI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbmRUcmlhbmdsZVBhaXJCeUxlbmd0aFN5bWJvbHMobGVuZ3RoU3ltYm9sQSA6IExlbmd0aFN5bWJvbCwgbGVuZ3RoU3ltYm9sQiA6IExlbmd0aFN5bWJvbCwgdHJpYW5nbGVzX2xpc3QgOiBNeUFycmF5PE15QXJyYXk8VHJpYW5nbGU+PikgOiBbVHJpYW5nbGUsIFRyaWFuZ2xlXSB8IHVuZGVmaW5lZCB7XHJcbiAgICBmb3IoY29uc3QgdHJpYW5nbGVzIG9mIHRyaWFuZ2xlc19saXN0KXtcclxuICAgICAgICBjb25zdCB0cmlhbmdsZXNBID0gZ2V0VHJpYW5nbGVzQnlMZW5ndGhTeW1ib2wobGVuZ3RoU3ltYm9sQSwgdHJpYW5nbGVzKTtcclxuICAgICAgICBpZih0cmlhbmdsZXNBLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0cmlhbmdsZXNCID0gZ2V0VHJpYW5nbGVzQnlMZW5ndGhTeW1ib2wobGVuZ3RoU3ltYm9sQiwgdHJpYW5nbGVzKTtcclxuICAgICAgICBpZih0cmlhbmdsZXNCLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IoY29uc3QgdHJpYW5nbGVBIG9mIHRyaWFuZ2xlc0Epe1xyXG4gICAgICAgICAgICBjb25zdCBpZHhBID0gdHJpYW5nbGVBLmxpbmVzLmluZGV4T2YobGVuZ3RoU3ltYm9sQS5saW5lISk7XHJcbiAgICAgICAgICAgIGFzc2VydChpZHhBICE9IC0xKTtcclxuXHJcbiAgICAgICAgICAgIGZvcihjb25zdCB0cmlhbmdsZUIgb2YgdHJpYW5nbGVzQil7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZHhCID0gdHJpYW5nbGVCLmxpbmVzLmluZGV4T2YobGVuZ3RoU3ltYm9sQi5saW5lISk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoaWR4QiAhPSAtMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoaWR4QSA9PSBpZHhCKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt0cmlhbmdsZUEsIHRyaWFuZ2xlQl07XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBtc2coYG1ha2UgQW5nbGUgRXF1YWxpdHkgQnkgQ29uZ3J1ZW50IFRyaWFuZ2xlcyA6IGlkeC1BOiR7aWR4QX0gIT0gaWR4LUI6JHtpZHhCfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VFcXVhbExlbmd0aEJ5Q29uZ3J1ZW50VHJpYW5nbGVzKGxlbmd0aFN5bWJvbEEgOiBMZW5ndGhTeW1ib2wsIGxlbmd0aFN5bWJvbEIgOiBMZW5ndGhTeW1ib2wpIDogTGVuZ3RoRXF1YWxpdHkgfCB1bmRlZmluZWQge1xyXG4gICAgY29uc3QgdHJpYW5nbGVBQiA9IGZpbmRUcmlhbmdsZVBhaXJCeUxlbmd0aFN5bWJvbHMobGVuZ3RoU3ltYm9sQSwgbGVuZ3RoU3ltYm9sQiwgY29uZ3J1ZW50VHJpYW5nbGVzKTtcclxuICAgIGlmKHRyaWFuZ2xlQUIgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICBjb25zdCBbdHJpYW5nbGVBLCB0cmlhbmdsZUJdID0gdHJpYW5nbGVBQjtcclxuXHJcbiAgICAgICAgLy8gbXNnKGBlcXVhbCBsZW5ndGg6Y29uZ3J1ZW50IHRyaWFuZ2xlc2ApO1xyXG4gICAgICAgIHJldHVybiBuZXcgTGVuZ3RoRXF1YWxpdHkoe1xyXG4gICAgICAgICAgICByZWFzb24gICAgICAgICAgOiBMZW5ndGhFcXVhbGl0eVJlYXNvbi5jb25ncnVlbnRfdHJpYW5nbGVzLFxyXG4gICAgICAgICAgICBhdXhpbGlhcnlTaGFwZXMgOiBbIHRyaWFuZ2xlQSwgdHJpYW5nbGVCIF0sXHJcbiAgICAgICAgICAgIHNoYXBlcyAgICAgICAgICA6IFsgbGVuZ3RoU3ltYm9sQSwgbGVuZ3RoU3ltYm9sQiBdXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG5cclxuICAgICAgICBtc2coYGNhbiBub3QgZmluZCBjb25ncnVlbnQgdHJpYW5nbGVzYCk7XHJcblxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlRXF1YWxMZW5ndGhCeVJhZGlpRXF1YWwobGVuZ3RoU3ltYm9sQSA6IExlbmd0aFN5bWJvbCwgbGVuZ3RoU3ltYm9sQiA6IExlbmd0aFN5bWJvbCkgOiBMZW5ndGhFcXVhbGl0eSB8IHVuZGVmaW5lZCB7XHJcbiAgICBpZihsZW5ndGhTeW1ib2xBLmNpcmNsZSAhPSB1bmRlZmluZWQgJiYgbGVuZ3RoU3ltYm9sQi5jaXJjbGUgIT0gdW5kZWZpbmVkICYmIGFyZUVxdWFsQ2lyY2xlQXJjcyhsZW5ndGhTeW1ib2xBLmNpcmNsZSwgbGVuZ3RoU3ltYm9sQi5jaXJjbGUpKXtcclxuICAgICAgICAvLyBtc2coYHJhZGlpLWVxdWFsYCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMZW5ndGhFcXVhbGl0eSh7XHJcbiAgICAgICAgICAgIHJlYXNvbiA6IExlbmd0aEVxdWFsaXR5UmVhc29uLnJhZGlpX2VxdWFsLFxyXG4gICAgICAgICAgICBhdXhpbGlhcnlTaGFwZXMgOiBbIGxlbmd0aFN5bWJvbEEuY2lyY2xlLCBsZW5ndGhTeW1ib2xCLmNpcmNsZSBdLFxyXG4gICAgICAgICAgICBzaGFwZXMgOiBbIGxlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEIgXSAgICAgICAgICAgICAgICBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZUVxdWFsTGVuZ3RoQnlDb21tb25DaXJjbGUobGVuZ3RoU3ltYm9sQSA6IExlbmd0aFN5bWJvbCwgbGVuZ3RoU3ltYm9sQiA6IExlbmd0aFN5bWJvbCwgY2lyY2xlIDogQ2lyY2xlQXJjKSA6IExlbmd0aEVxdWFsaXR5IHwgdW5kZWZpbmVkIHtcclxuICAgIGNvbnN0IEFCQyA9IGdldENvbW1vblBvaW50KGxlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEIpO1xyXG4gICAgaWYoQUJDICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgY29uc3QgW0EsIEIsIENdID0gQUJDO1xyXG5cclxuICAgICAgICBpZihjaXJjbGUuY2VudGVyID09IEEgJiYgY2lyY2xlLmluY2x1ZGVzUG9pbnQoQikgJiYgY2lyY2xlLmluY2x1ZGVzUG9pbnQoQykpe1xyXG5cclxuICAgICAgICAgICAgLy8gbXNnKGBjb21tb24tY2lyY2xlYCk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTGVuZ3RoRXF1YWxpdHkoe1xyXG4gICAgICAgICAgICAgICAgcmVhc29uIDogTGVuZ3RoRXF1YWxpdHlSZWFzb24uY29tbW9uX2NpcmNsZSxcclxuICAgICAgICAgICAgICAgIGF1eGlsaWFyeVNoYXBlcyA6IFsgY2lyY2xlIF0sXHJcbiAgICAgICAgICAgICAgICBzaGFwZXMgOiBbIGxlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEIgXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VFcXVhbExlbmd0aEJ5UGFyYWxsZWxMaW5lcyhsZW5ndGhTeW1ib2xBIDogTGVuZ3RoU3ltYm9sLCBsZW5ndGhTeW1ib2xCIDogTGVuZ3RoU3ltYm9sLCBwYXJhbGxlbF9saW5lcyA6IEFic3RyYWN0TGluZVtdKSA6IExlbmd0aEVxdWFsaXR5IHwgdW5kZWZpbmVkIHtcclxuICAgIGlmKCFpc1BhcmFsbGVsKHBhcmFsbGVsX2xpbmVzWzBdLCBwYXJhbGxlbF9saW5lc1sxXSkpe1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgaWYobGVuZ3RoU3ltYm9sQS5saW5lICE9IHVuZGVmaW5lZCAmJiBsZW5ndGhTeW1ib2xCLmxpbmUgIT0gdW5kZWZpbmVkICYmIGlzUGFyYWxsZWwobGVuZ3RoU3ltYm9sQS5saW5lLCBsZW5ndGhTeW1ib2xCLmxpbmUpKXtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBbbGluZTEsIGxpbmUyXSA9IHBhcmFsbGVsX2xpbmVzO1xyXG4gICAgZm9yKGNvbnN0IGxlbmd0aFN5bWJvbCBvZiBbbGVuZ3RoU3ltYm9sQSwgbGVuZ3RoU3ltYm9sQl0gKXtcclxuICAgICAgICBjb25zdCBbQSwgQl0gPSBbIGxlbmd0aFN5bWJvbC5wb2ludEEsIGxlbmd0aFN5bWJvbC5wb2ludEIgXTtcclxuICAgICAgICBpZihsaW5lMS5pbmNsdWRlc1BvaW50KEEpICYmIGxpbmUyLmluY2x1ZGVzUG9pbnQoQikgfHwgbGluZTEuaW5jbHVkZXNQb2ludChCKSAmJiBsaW5lMi5pbmNsdWRlc1BvaW50KEEpKXsgICAgICAgIFxyXG4gICAgICAgICAgICBjb250aW51ZTsgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIG1zZyhgcGFyYWxsZWwtbGluZXNgKTtcclxuICAgIHJldHVybiBuZXcgTGVuZ3RoRXF1YWxpdHkoe1xyXG4gICAgICAgIHJlYXNvbiA6IExlbmd0aEVxdWFsaXR5UmVhc29uLnBhcmFsbGVsX2xpbmVzX2Rpc3RhbmNlLFxyXG4gICAgICAgIGF1eGlsaWFyeVNoYXBlcyA6IHBhcmFsbGVsX2xpbmVzLFxyXG4gICAgICAgIHNoYXBlcyA6IFsgbGVuZ3RoU3ltYm9sQSwgbGVuZ3RoU3ltYm9sQiBdICAgICAgICAgICAgXHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VFcXVhbExlbmd0aEJ5UGFyYWxsZWxMaW5lc0F1dG8obGVuZ3RoU3ltYm9sQSA6IExlbmd0aFN5bWJvbCwgbGVuZ3RoU3ltYm9sQiA6IExlbmd0aFN5bWJvbCkgOiBMZW5ndGhFcXVhbGl0eSB8IHVuZGVmaW5lZCB7XHJcbiAgICBjb25zdCBwYXJhbGxlbF9saW5lcyA9IGZpbmRQYXJhbGxlbExpbmVzT2ZMZW5ndGhTeW1ib2xzKGxlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEIpO1xyXG4gICAgaWYocGFyYWxsZWxfbGluZXMgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICBtc2coYHBhcmFsbGVsLWxpbmVzYCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMZW5ndGhFcXVhbGl0eSh7XHJcbiAgICAgICAgICAgIHJlYXNvbiA6IExlbmd0aEVxdWFsaXR5UmVhc29uLnBhcmFsbGVsX2xpbmVzX2Rpc3RhbmNlLFxyXG4gICAgICAgICAgICBhdXhpbGlhcnlTaGFwZXMgOiBwYXJhbGxlbF9saW5lcyxcclxuICAgICAgICAgICAgc2hhcGVzIDogWyBsZW5ndGhTeW1ib2xBLCBsZW5ndGhTeW1ib2xCIF0gICAgICAgICAgICBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZUVxdWFsTGVuZ3RoQnlQYXJhbGxlbG9ncmFtT3Bwb3NpdGVTaWRlcyhsZW5ndGhTeW1ib2xBIDogTGVuZ3RoU3ltYm9sLCBsZW5ndGhTeW1ib2xCIDogTGVuZ3RoU3ltYm9sKSA6IExlbmd0aEVxdWFsaXR5IHwgdW5kZWZpbmVkIHtcclxuICAgIGxldCBwb2ludHMgPSBbIGxlbmd0aFN5bWJvbEEucG9pbnRBLCBsZW5ndGhTeW1ib2xBLnBvaW50QiwgbGVuZ3RoU3ltYm9sQi5wb2ludEEsIGxlbmd0aFN5bWJvbEIucG9pbnRCXTtcclxuICAgIHBvaW50cyA9IHRvQ2xvY2t3aXNlUG9pbnRzKHBvaW50cyk7XHJcblxyXG4gICAgY29uc3QgcGFyYWxsZWxvZ3JhbUNsYXNzaWZpZXIgPSAgZ2V0UGFyYWxsZWxvZ3JhbUNsYXNzaWZpZXIocG9pbnRzKTtcclxuICAgIGlmKHBhcmFsbGVsb2dyYW1DbGFzc2lmaWVyID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgbXNnKGBubyBwYXJhbGxlbG9ncmFtYCk7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwYXJhbGxlbG9ncmFtID0gbmV3IFF1YWRyaWxhdGVyYWwoe1xyXG4gICAgICAgIHBvaW50cyxcclxuICAgICAgICBsaW5lcyA6IFtdXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBtc2coYHBhcmFsbGVsb2dyYW0tc2lkZXNgKTtcclxuICAgIHJldHVybiBuZXcgTGVuZ3RoRXF1YWxpdHkoe1xyXG4gICAgICAgIHJlYXNvbiA6IExlbmd0aEVxdWFsaXR5UmVhc29uLnBhcmFsbGVsb2dyYW1fb3Bwb3NpdGVfc2lkZXMsXHJcbiAgICAgICAgYXV4aWxpYXJ5U2hhcGVzIDogW3BhcmFsbGVsb2dyYW1dLFxyXG4gICAgICAgIHNoYXBlcyA6IFsgbGVuZ3RoU3ltYm9sQSwgbGVuZ3RoU3ltYm9sQiBdICAgICAgICAgICAgXHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VFcXVhbExlbmd0aEJ5UGFyYWxsZWxvZ3JhbURpYWdvbmFsQmlzZWN0aW9uKGxlbmd0aFN5bWJvbEEgOiBMZW5ndGhTeW1ib2wsIGxlbmd0aFN5bWJvbEIgOiBMZW5ndGhTeW1ib2wpIDogTGVuZ3RoRXF1YWxpdHkgfCB1bmRlZmluZWQge1xyXG4gICAgY29uc3QgcGFyYWxsZWxvZ3JhbXMgPSBnZXRQYXJhbGxlbG9ncmFtc0J5RGlhZ29uYWxMZW5ndGhTeW1ib2xzKGxlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEIpO1xyXG4gICAgZm9yKGNvbnN0IHBhcmFsbGVsb2dyYW0gb2YgcGFyYWxsZWxvZ3JhbXMpe1xyXG4gICAgICAgIGNvbnN0IGRpYWdvbmFsX2ludGVyc2VjdGlvbiA9IHBhcmFsbGVsb2dyYW0uZGlhZ29uYWxJbnRlcnNlY3Rpb24oKTtcclxuICAgICAgICBpZihkaWFnb25hbF9pbnRlcnNlY3Rpb24gIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgbGV0IGxlbmd0aFN5bWJvbF9wb2ludHNfcGFpciA9IFtsZW5ndGhTeW1ib2xBLnBvaW50cygpLCBsZW5ndGhTeW1ib2xCLnBvaW50cygpXTtcclxuICAgICAgICAgICAgaWYobGVuZ3RoU3ltYm9sX3BvaW50c19wYWlyLmV2ZXJ5KHggPT4geC5pbmNsdWRlcyhkaWFnb25hbF9pbnRlcnNlY3Rpb24pKSl7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGxlbmd0aFN5bWJvbF92ZXJ0aWNlcyA9IGxlbmd0aFN5bWJvbF9wb2ludHNfcGFpci5tYXAoeD0+IHhbMF0gPT0gZGlhZ29uYWxfaW50ZXJzZWN0aW9uID8geFsxXSA6IHhbMF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKGFyZVNldHNFcXVhbChsZW5ndGhTeW1ib2xfdmVydGljZXMsIFtwYXJhbGxlbG9ncmFtLnBvaW50c1swXSwgcGFyYWxsZWxvZ3JhbS5wb2ludHNbMl1dKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgYXJlU2V0c0VxdWFsKGxlbmd0aFN5bWJvbF92ZXJ0aWNlcywgW3BhcmFsbGVsb2dyYW0ucG9pbnRzWzFdLCBwYXJhbGxlbG9ncmFtLnBvaW50c1szXV0pICl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1zZyhgcGFyYWxsZWxvZ3JhbS1kaWFnb25hbC1iaXNlY3Rpb25gKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExlbmd0aEVxdWFsaXR5KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uIDogTGVuZ3RoRXF1YWxpdHlSZWFzb24ucGFyYWxsZWxvZ3JhbV9kaWFnb25hbF9iaXNlY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1eGlsaWFyeVNoYXBlcyA6IFtwYXJhbGxlbG9ncmFtXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhcGVzIDogWyBsZW5ndGhTeW1ib2xBLCBsZW5ndGhTeW1ib2xCIF0gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZUVxdWFsTGVuZ3RoQnlFcXVpdmFsZW5jZUNsYXNzKGxlbmd0aFN5bWJvbEEgOiBMZW5ndGhTeW1ib2wsIGxlbmd0aFN5bWJvbEIgOiBMZW5ndGhTeW1ib2wpIDogTGVuZ3RoRXF1YWxpdHkgfCB1bmRlZmluZWQge1xyXG4gICAgaWYobGVuZ3RoU3ltYm9sQS5pc0VxdWFsKGxlbmd0aFN5bWJvbEIpKXtcclxuICAgICAgICByZXR1cm4gbmV3IExlbmd0aEVxdWFsaXR5KHtcclxuICAgICAgICAgICAgcmVhc29uIDogTGVuZ3RoRXF1YWxpdHlSZWFzb24uZXF1aXZhbGVuY2VfY2xhc3MsXHJcbiAgICAgICAgICAgIHNoYXBlcyA6IFsgbGVuZ3RoU3ltYm9sQSwgbGVuZ3RoU3ltYm9sQiBdICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hvd1Byb21wdCh0ZXh0IDogc3RyaW5nKXtcclxuICAgIGNvbnN0IGRsZyA9ICRkbGcoXCJoZWxwLWRsZ1wiKTtcclxuICAgICQoXCJoZWxwLW1zZ1wiKS5pbm5lclRleHQgPSB0ZXh0O1xyXG5cclxuICAgIC8vIGRsZy5yZW1vdmUoKTtcclxuICAgIC8vIGRvY3VtZW50LmJvZHkuYXBwZW5kKGRsZyk7XHJcblxyXG4gICAgZGxnLnNob3coKTtcclxuICAgIGNvbnN0IHRpbWVvdXQgPSAoZ2V0UGxheU1vZGUoKSA9PSBQbGF5TW9kZS5mYXN0Rm9yd2FyZCA/IDUwIDogMzAwMCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgZGxnLmNsb3NlKCk7XHJcbiAgICB9LCB0aW1lb3V0KTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExlbmd0aEVxdWFsaXR5IGV4dGVuZHMgU3RhdGVtZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgcmVhc29uPyA6IG51bWJlciwgYXV4aWxpYXJ5U2hhcGVzPyA6IE1hdGhFbnRpdHlbXSwgc2hhcGVzIDogTWF0aEVudGl0eVtdLCBtYXRoVGV4dD8gOiBzdHJpbmcgfSl7XHJcbiAgICAgICAgc3VwZXIob2JqKTtcclxuXHJcbiAgICAgICAgTGVuZ3RoU3ltYm9sLnNldEVxdWFsTGVuZ3RoS2luZHModGhpcy5zZWxlY3RlZFNoYXBlcyBhcyBMZW5ndGhTeW1ib2xbXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZGluZygpOiBSZWFkaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZXh0UmVhZGluZyhUVChcInRoZSB0d28gbGVuZ3RoIHN5bWJvbHMgYXJlIG9mIGVxdWFsIGxlbmd0aC5cIikpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFJlbGF0aW9ucygpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5zZXRSZWxhdGlvbnMoKTtcclxuXHJcbiAgICAgICAgY29uc3QgWyBsZW5ndGhTeW1ib2xBLCBsZW5ndGhTeW1ib2xCIF0gPSB0aGlzLnNlbGVjdGVkU2hhcGVzIGFzIExlbmd0aFN5bWJvbFtdO1xyXG4gICAgICAgIGFkZEVxdWFsTGVuZ3RocyhsZW5ndGhTeW1ib2xBLCBsZW5ndGhTeW1ib2xCKTtcclxuICAgIH1cclxuXHJcbiAgICB2ZXJpZnkoKSA6IExlbmd0aEVxdWFsaXR5IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgbGVuZ3RoRXF1YWxpdHkgOiBMZW5ndGhFcXVhbGl0eSB8IHVuZGVmaW5lZDtcclxuICAgICAgICBzd2l0Y2godGhpcy5yZWFzb24pe1xyXG4gICAgICAgIGNhc2UgTGVuZ3RoRXF1YWxpdHlSZWFzb24ucmFkaWlfZXF1YWw6e1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW2xlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEJdID0gdGhpcy5zZWxlY3RlZFNoYXBlcyBhcyBMZW5ndGhTeW1ib2xbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZW5ndGhFcXVhbGl0eSA9IG1ha2VFcXVhbExlbmd0aEJ5UmFkaWlFcXVhbChsZW5ndGhTeW1ib2xBLCBsZW5ndGhTeW1ib2xCKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBMZW5ndGhFcXVhbGl0eVJlYXNvbi5jb21tb25fY2lyY2xlOntcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNpcmNsZSA9IHRoaXMuYXV4aWxpYXJ5U2hhcGVzWzBdIGFzIENpcmNsZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFtsZW5ndGhTeW1ib2xBLCBsZW5ndGhTeW1ib2xCXSA9IHRoaXMuc2VsZWN0ZWRTaGFwZXMgYXMgTGVuZ3RoU3ltYm9sW107XHJcbiAgICAgICAgICAgICAgICBsZW5ndGhFcXVhbGl0eSA9IG1ha2VFcXVhbExlbmd0aEJ5Q29tbW9uQ2lyY2xlKGxlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEIsIGNpcmNsZSk7XHJcbiAgICAgICAgICAgICAgICBpZihsZW5ndGhFcXVhbGl0eSA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aEVxdWFsaXR5ID0gbWFrZUVxdWFsTGVuZ3RoQnlDb21tb25DaXJjbGUobGVuZ3RoU3ltYm9sQSwgbGVuZ3RoU3ltYm9sQiwgY2lyY2xlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBMZW5ndGhFcXVhbGl0eVJlYXNvbi5wYXJhbGxlbF9saW5lc19kaXN0YW5jZTp7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbGxlbF9saW5lcyA9IHRoaXMuYXV4aWxpYXJ5U2hhcGVzIGFzIEFic3RyYWN0TGluZVtdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW2xlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEJdID0gdGhpcy5zZWxlY3RlZFNoYXBlcyBhcyBMZW5ndGhTeW1ib2xbXTtcclxuICAgICAgICAgICAgICAgIGxlbmd0aEVxdWFsaXR5ID0gbWFrZUVxdWFsTGVuZ3RoQnlQYXJhbGxlbExpbmVzKGxlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEIsIHBhcmFsbGVsX2xpbmVzKTtcclxuICAgICAgICAgICAgICAgIGxpbmVzU2VsZWN0b3JfMi5jbGVhcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIExlbmd0aEVxdWFsaXR5UmVhc29uLmNvbmdydWVudF90cmlhbmdsZXM6e1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW2xlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEJdID0gdGhpcy5zZWxlY3RlZFNoYXBlcyBhcyBMZW5ndGhTeW1ib2xbXTtcclxuICAgICAgICAgICAgICAgIGxlbmd0aEVxdWFsaXR5ID0gbWFrZUVxdWFsTGVuZ3RoQnlDb25ncnVlbnRUcmlhbmdsZXMobGVuZ3RoU3ltYm9sQSwgbGVuZ3RoU3ltYm9sQik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgTGVuZ3RoRXF1YWxpdHlSZWFzb24ucGFyYWxsZWxvZ3JhbV9vcHBvc2l0ZV9zaWRlczp7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbbGVuZ3RoU3ltYm9sQSwgbGVuZ3RoU3ltYm9sQl0gPSB0aGlzLnNlbGVjdGVkU2hhcGVzIGFzIExlbmd0aFN5bWJvbFtdO1xyXG4gICAgICAgICAgICAgICAgbGVuZ3RoRXF1YWxpdHkgPSBtYWtlRXF1YWxMZW5ndGhCeVBhcmFsbGVsb2dyYW1PcHBvc2l0ZVNpZGVzKGxlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIExlbmd0aEVxdWFsaXR5UmVhc29uLnBhcmFsbGVsb2dyYW1fZGlhZ29uYWxfYmlzZWN0aW9uOntcclxuICAgICAgICAgICAgICAgIGNvbnN0IFtsZW5ndGhTeW1ib2xBLCBsZW5ndGhTeW1ib2xCXSA9IHRoaXMuc2VsZWN0ZWRTaGFwZXMgYXMgTGVuZ3RoU3ltYm9sW107XHJcbiAgICAgICAgICAgICAgICBsZW5ndGhFcXVhbGl0eSA9IG1ha2VFcXVhbExlbmd0aEJ5UGFyYWxsZWxvZ3JhbURpYWdvbmFsQmlzZWN0aW9uKGxlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIExlbmd0aEVxdWFsaXR5UmVhc29uLmVxdWl2YWxlbmNlX2NsYXNzOntcclxuICAgICAgICAgICAgICAgIGNvbnN0IFtsZW5ndGhTeW1ib2xBLCBsZW5ndGhTeW1ib2xCXSA9IHRoaXMuc2VsZWN0ZWRTaGFwZXMgYXMgTGVuZ3RoU3ltYm9sW107XHJcbiAgICAgICAgICAgICAgICBsZW5ndGhFcXVhbGl0eSA9IG1ha2VFcXVhbExlbmd0aEJ5RXF1aXZhbGVuY2VDbGFzcyhsZW5ndGhTeW1ib2xBLCBsZW5ndGhTeW1ib2xCKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBMZW5ndGhFcXVhbGl0eVJlYXNvbi5taWRwb2ludDpcclxuXHJcbiAgICAgICAgY2FzZSBMZW5ndGhFcXVhbGl0eVJlYXNvbi5ub3RfdXNlZDpcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVhc29uX3N0ciA9IHJlYXNvbk1zZyh0aGlzLnJlYXNvbik7XHJcbiAgICAgICAgaWYobGVuZ3RoRXF1YWxpdHkgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoYGNhbiBub3QgbWFrZSBMZW5ndGgtRXF1YWxpdHk6ICR7cmVhc29uX3N0cn1gKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgbXNnKGBtYWtlIExlbmd0aC1FcXVhbGl0eSBPSzogJHtyZWFzb25fc3RyfWApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbGVuZ3RoRXF1YWxpdHk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWFsTGVuZ3RoKGxlbmd0aFN5bWJvbEEgOiBMZW5ndGhTeW1ib2wsIGxlbmd0aFN5bWJvbEIgOiBMZW5ndGhTeW1ib2wpIDogYm9vbGVhbiB7XHJcbiAgICBpZihsZW5ndGhTeW1ib2xBID09IGxlbmd0aFN5bWJvbEIpe1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBlcXVhbExlbmd0aHMuZmluZCh4ID0+IHguaGFzKGxlbmd0aFN5bWJvbEEpICYmIHguaGFzKGxlbmd0aFN5bWJvbEIpKSAhPSB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbn0iLCJuYW1lc3BhY2UgcGxhbmVfdHMge1xyXG4vL1xyXG5leHBvcnQgZnVuY3Rpb24gYW5nbGVLZXkobGluZUEgOiBBYnN0cmFjdExpbmUsIGRpcmVjdGlvbkEgOiBudW1iZXIsIGxpbmVCIDogQWJzdHJhY3RMaW5lLCBkaXJlY3Rpb25CIDogbnVtYmVyLCBpbnRlcnNlY3Rpb24gOiBQb2ludCkgOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGAke2xpbmVBLmlkfToke2RpcmVjdGlvbkF9OiR7bGluZUIuaWR9OiR7ZGlyZWN0aW9uQn06JHtpbnRlcnNlY3Rpb24uaWR9YDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFuZ2xlTWF0Y2hlczNwb2ludHMoYW5nbGUgOiBBbmdsZSwgcG9pbnRzIDogUG9pbnRbXSkgOiBib29sZWFuIHtcclxuICAgIGlmKGFuZ2xlLmludGVyc2VjdGlvbiA9PSBwb2ludHNbMV0gJiYgYW5nbGUubGluZUEuaW5jbHVkZXNQb2ludChwb2ludHNbMl0pICYmIGFuZ2xlLmxpbmVCLmluY2x1ZGVzUG9pbnQocG9pbnRzWzBdKSl7XHJcblxyXG4gICAgICAgIGNvbnN0IHZCID0gcG9pbnRzWzBdLnN1Yihwb2ludHNbMV0pOyAgIC8vIGEgdmVjdG9yIGZvcm0gcG9pbnQxIHRvIHBvaW50MFxyXG4gICAgICAgIGNvbnN0IHZBID0gcG9pbnRzWzJdLnN1Yihwb2ludHNbMV0pOyAgIC8vIGEgdmVjdG9yIGZvcm0gcG9pbnQxIHRvIHBvaW50MlxyXG5cclxuICAgICAgICBpZigwIDwgdkIuZG90KGFuZ2xlLmVCKSAmJiAwIDwgdkEuZG90KGFuZ2xlLmVBKSl7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmaW5kQW5nbGVCeTNwb2ludHMoYW5nbGVzIDogQW5nbGVbXSwgcG9pbnRzIDogUG9pbnRbXSkgOiBBbmdsZSB8IHVuZGVmaW5lZCB7XHJcbiAgICBjb25zdCBtYXRjaGVkX2FuZ2xlcyA9IGFuZ2xlcy5maWx0ZXIoeCA9PiBhbmdsZU1hdGNoZXMzcG9pbnRzKHgsIHBvaW50cykpO1xyXG4gICAgaWYobWF0Y2hlZF9hbmdsZXMubGVuZ3RoID09IDApe1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBhc3NlcnQobWF0Y2hlZF9hbmdsZXMubGVuZ3RoID09IDEpO1xyXG4gICAgcmV0dXJuIG1hdGNoZWRfYW5nbGVzWzBdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmluZEVxdWFsQW5nbGVzQnkzcG9pbnRzUGFpcihwb2ludHMxIDogUG9pbnRbXSwgcG9pbnRzMiA6IFBvaW50W10pIDogW0FuZ2xlLCBBbmdsZV0gfCB1bmRlZmluZWQge1xyXG4gICAgYXNzZXJ0KGlzQ2xvY2t3aXNlKHBvaW50czEpKTtcclxuICAgIGFzc2VydChpc0Nsb2Nrd2lzZShwb2ludHMyKSk7XHJcblxyXG4gICAgY29uc3QgYW5nbGVzX2xpc3QgPSBzdXBwbGVtZW50YXJ5QW5nbGVzLmZsYXQoKTtcclxuICAgIGFuZ2xlc19saXN0LnB1c2gocmlnaHRBbmdsZXMpO1xyXG4gICAgXHJcbiAgICBmb3IoY29uc3QgYW5nbGVfc2V0IG9mIGFuZ2xlc19saXN0KXtcclxuICAgICAgICBjb25zdCBhbmdsZXMgPSBhbmdsZV9zZXQudG9BcnJheSgpO1xyXG4gICAgICAgIGNvbnN0IGFuZ2xlMSA9IGZpbmRBbmdsZUJ5M3BvaW50cyhhbmdsZXMsIHBvaW50czEpO1xyXG4gICAgICAgIGlmKGFuZ2xlMSAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBjb25zdCBhbmdsZTIgPSBmaW5kQW5nbGVCeTNwb2ludHMoYW5nbGVzLCBwb2ludHMyKTtcclxuICAgICAgICAgICAgaWYoYW5nbGUyICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2FuZ2xlMSwgYW5nbGUyXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmluZEFuZ2xlc0luUG9seWdvbihwb2ludHNfYXJnOiBQb2ludFtdKSA6IEFuZ2xlW10ge1xyXG4gICAgY29uc3QgYWxsX2FuZ2xlcyA9IEFycmF5LmZyb20oYW5nbGVNYXAudmFsdWVzKCkpO1xyXG4gICAgY29uc3QgcG9pbnRzID0gdG9DbG9ja3dpc2VQb2ludHMocG9pbnRzX2FyZyk7XHJcbiAgICBjb25zdCBhbmdsZXMgOiBBbmdsZVtdID0gW107XHJcblxyXG4gICAgZm9yKGNvbnN0IGlkeCBvZiByYW5nZShwb2ludHMubGVuZ3RoKSl7XHJcbiAgICAgICAgY29uc3QgcHRzID0gWzAsIDEsIDJdLm1hcChpID0+IHBvaW50c1soaWR4ICsgaSkgJSBwb2ludHMubGVuZ3RoXSk7XHJcbiAgICAgICAgY29uc3QgYW5nbGUgPSBmaW5kQW5nbGVCeTNwb2ludHMoYWxsX2FuZ2xlcywgcHRzKSE7XHJcbiAgICAgICAgYXNzZXJ0KGFuZ2xlICE9IHVuZGVmaW5lZCk7XHJcblxyXG4gICAgICAgIGFuZ2xlcy5wdXNoKGFuZ2xlKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYW5nbGVzO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRBbmdsZShhbmdsZV9wb2ludHNfYXJnIDogUG9pbnRbXSkgOiBBbmdsZSB8IHVuZGVmaW5lZCB7XHJcbiAgICBsZXQgYW5nbGVfcG9pbnRzID1hbmdsZV9wb2ludHNfYXJnLnNsaWNlKCk7XHJcbiAgICBpZighIGlzQ2xvY2t3aXNlKGFuZ2xlX3BvaW50cykpe1xyXG4gICAgICAgIGFuZ2xlX3BvaW50cyA9IFsyLCAxLCAwXS5tYXAoaSA9PiBhbmdsZV9wb2ludHNfYXJnW2ldKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBbQiwgQywgQV0gPSBhbmdsZV9wb2ludHM7XHJcbiAgICBjb25zdCBsaW5lQSA9IGdldENvbW1vbkxpbmVPZlBvaW50cyhDLCBBKTtcclxuICAgIGNvbnN0IGxpbmVCID0gZ2V0Q29tbW9uTGluZU9mUG9pbnRzKEMsIEIpO1xyXG4gICAgaWYobGluZUEgPT0gdW5kZWZpbmVkIHx8IGxpbmVCID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGNvbnN0IENBID0gQS5zdWIoQyk7XHJcbiAgICBjb25zdCBDQiA9IEIuc3ViKEMpO1xyXG4gICAgY29uc3QgZGlyZWN0aW9uQSA9IE1hdGguc2lnbihDQS5kb3QobGluZUEuZSkpO1xyXG4gICAgY29uc3QgZGlyZWN0aW9uQiA9IE1hdGguc2lnbihDQi5kb3QobGluZUIuZSkpO1xyXG5cclxuICAgIGNvbnN0IGtleSA9IGFuZ2xlS2V5KGxpbmVBLCBkaXJlY3Rpb25BLCBsaW5lQiwgZGlyZWN0aW9uQiwgQyk7XHJcbiAgICBjb25zdCBhbmdsZSA9IGFuZ2xlTWFwLmdldChrZXkpO1xyXG4gICAgaWYoYW5nbGUgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICBjb25zdCBwb2ludF9pZHMgPSBhbmdsZV9wb2ludHMubWFwKHggPT4gYCR7eC5pZH1gKS5qb2luKFwiLCBcIik7XHJcbiAgICAgICAgLy8gbXNnKGBwb2ludCBpZHM6JHtwb2ludF9pZHN9ICBrZXk6JHtrZXl9YCk7XHJcbiAgICAgICAgZm9yKGNvbnN0IG1hcF9rZXkgb2YgYW5nbGVNYXAua2V5cygpKXtcclxuICAgICAgICAgICAgLy8gbXNnKGBtYXAga2V5OiR7bWFwX2tleX1gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFuZ2xlO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZFN1cHBsZW1lbnRhcnlBbmdsZXMoYW5nbGUxIDogQW5nbGUsIGFuZ2xlMiA6IEFuZ2xlKXtcclxuICAgIGlmKHN1cHBsZW1lbnRhcnlBbmdsZXMuc29tZSh4ID0+IHhbMF0uaGFzKGFuZ2xlMSkgJiYgeFsxXS5oYXMoYW5nbGUyKSB8fCB4WzBdLmhhcyhhbmdsZTIpICYmIHhbMV0uaGFzKGFuZ2xlMSkpICl7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGFpciA9IHN1cHBsZW1lbnRhcnlBbmdsZXMuZmluZCh4ID0+IHhbMF0uaGFzKGFuZ2xlMSkgfHwgeFswXS5oYXMoYW5nbGUyKSB8fCB4WzFdLmhhcyhhbmdsZTEpIHx8IHhbMV0uaGFzKGFuZ2xlMikpO1xyXG4gICAgaWYocGFpciAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgIGNvbnN0IGFuZ2xlcyA9IFthbmdsZTEsIGFuZ2xlMl07XHJcbiAgICAgICAgZm9yKGNvbnN0IFtpLCBhbmdsZV9zZXRdIG9mIHBhaXIuZW50cmllcygpKXtcclxuICAgICAgICAgICAgZm9yKGNvbnN0IFtqLCBhbmdsZV0gb2YgYW5nbGVzLmVudHJpZXMoKSl7XHJcbiAgICAgICAgICAgICAgICBpZihhbmdsZV9zZXQuaGFzKGFuZ2xlKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFpclsxIC0gaV0uYWRkKCBhbmdsZXNbMSAtIGpdICk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN1cHBsZW1lbnRhcnlBbmdsZXMucHVzaChbIG5ldyBNeVNldDxBbmdsZT4oW2FuZ2xlMV0pLCBuZXcgTXlTZXQ8QW5nbGU+KFthbmdsZTJdKSAgXSkgICAgXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja1N1cHBsZW1lbnRhcnlBbmdsZXMocm9vdCA6IEFwcCl7XHJcbiAgICBpZihyb290LmlzUm9vdEVxKCkpe1xyXG4gICAgICAgIGZvcihjb25zdCBbc2lkZTEsIHNpZGUyXSBvZiBwZXJtdXRhdGlvbihyb290LmFyZ3MpKXtcclxuICAgICAgICAgICAgaWYoc2lkZTEgaW5zdGFuY2VvZiBSZWZWYXIgJiYgc2lkZTEubmFtZSA9PSBcInBpXCIpe1xyXG4gICAgICAgICAgICAgICAgaWYoc2lkZTIuaXNBZGQoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkID0gc2lkZTIgYXMgQXBwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGFkZC5hcmdzLmxlbmd0aCA9PSAyICYmIGFkZC5hcmdzLmV2ZXJ5KHggPT4geCBpbnN0YW5jZW9mIFJlZlZhcikpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxfYW5nbGVzID0gVmlldy5jdXJyZW50LmFsbFJlYWxTaGFwZXMoKS5maWx0ZXIoeCA9PiB4IGluc3RhbmNlb2YgQW5nbGUpIGFzIEFuZ2xlW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZnMgPSBhZGQuYXJncyBhcyBSZWZWYXJbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuZ2xlcyA9IHJlZnMubWFwKHggPT4gYWxsX2FuZ2xlcy5maW5kKHkgPT4geS5uYW1lID09IHgubmFtZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmdsZXMuZXZlcnkoeCA9PiB4ICE9IHVuZGVmaW5lZCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbXNnKGBjaGVjay1TdXBwbGVtZW50YXJ5LUFuZ2xlcyAke2FuZ2xlc1swXS5uYW1lfSAke2FuZ2xlc1sxXS5uYW1lfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkU3VwcGxlbWVudGFyeUFuZ2xlcyhhbmdsZXNbMF0sIGFuZ2xlc1sxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRFcXVhbEFuZ2xlcyhhbmdsZTEgOiBBbmdsZSwgYW5nbGUyIDogQW5nbGUpe1xyXG4gICAgY29uc3QgYW5nbGVfc2V0cyA9IHN1cHBsZW1lbnRhcnlBbmdsZXMuZmxhdCgpLmZpbHRlcih4ID0+IHguaGFzKGFuZ2xlMSkgfHwgeC5oYXMoYW5nbGUyKSk7XHJcblxyXG4gICAgbGV0IGFuZ2xlX3NldCA6IE15U2V0PEFuZ2xlPjsgXHJcblxyXG4gICAgc3dpdGNoKGFuZ2xlX3NldHMubGVuZ3RoKXtcclxuICAgIGNhc2UgMCA6IFxyXG4gICAgICAgIGFuZ2xlX3NldCA9IG5ldyBNeVNldDxBbmdsZT4oKTsgXHJcbiAgICAgICAgc3VwcGxlbWVudGFyeUFuZ2xlcy5wdXNoKFthbmdsZV9zZXQsIG5ldyBNeVNldDxBbmdsZT4oKV0pO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgIGNhc2UgMSA6IFxyXG4gICAgICAgIGFuZ2xlX3NldCA9IGFuZ2xlX3NldHNbMF07IFxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdCA6IFxyXG4gICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYW5nbGVfc2V0LmFkZChhbmdsZTEpO1xyXG4gICAgYW5nbGVfc2V0LmFkZChhbmdsZTIpO1xyXG5cclxuICAgIGNvbnN0IGFuZ2xlX2VxdWFsaXR5X3Byb3Bvc2l0aW9ucyA9IHByb3Bvc2l0aW9ucy5maWx0ZXIoeCA9PiB4IGluc3RhbmNlb2YgU2hhcGVQcm9wb3NpdGlvbiAmJiB4LnJlYXNvbiA9PSBQcm9wb3NpdGlvblJlYXNvbi5hbmdsZV9lcXVhbGl0eSkudG9BcnJheSgpIGFzIFNoYXBlUHJvcG9zaXRpb25bXTtcclxuICAgIGNvbnN0IHByb3Zlbl9wcm9wb3NpdGlvbiA9IGFuZ2xlX2VxdWFsaXR5X3Byb3Bvc2l0aW9ucy5maW5kKHggPT4gYXJlU2V0c0VxdWFsKHguc2VsZWN0ZWRTaGFwZXMsIFthbmdsZTEsIGFuZ2xlMl0pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzRXF1YWxBbmdsZShhbmdsZUEgOiBBbmdsZSwgYW5nbGVCIDogQW5nbGUpIDogYm9vbGVhbiB7XHJcbiAgICBpZihhbmdsZUEuaXNSaWdodEFuZ2xlKCkgJiYgYW5nbGVCLmlzUmlnaHRBbmdsZSgpKXtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IoY29uc3QgYW5nbGVfc2V0IG9mIHN1cHBsZW1lbnRhcnlBbmdsZXMuZmxhdCgpKXtcclxuICAgICAgICBpZihhbmdsZV9zZXQuaGFzKGFuZ2xlQSkpe1xyXG4gICAgICAgICAgICByZXR1cm4gYW5nbGVfc2V0LmhhcyhhbmdsZUIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWFsQW5nbGVQb2ludHMoYW5nbGVfcG9pbnRzQSA6IFBvaW50W10sIGFuZ2xlX3BvaW50c0IgOiBQb2ludFtdKSA6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgYW5nbGVBID0gZmluZEFuZ2xlKGFuZ2xlX3BvaW50c0EpO1xyXG4gICAgY29uc3QgYW5nbGVCID0gZmluZEFuZ2xlKGFuZ2xlX3BvaW50c0IpO1xyXG5cclxuICAgIGlmKGFuZ2xlQSAhPSB1bmRlZmluZWQgJiYgYW5nbGVCICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgcmV0dXJuIGlzRXF1YWxBbmdsZShhbmdsZUEsIGFuZ2xlQik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaW5kVHJpYW5nbGVQYWlyQnlBbmdsZXMoYW5nbGVBIDogQW5nbGUsIGFuZ2xlQiA6IEFuZ2xlLCB0cmlhbmdsZXNfbGlzdCA6IE15QXJyYXk8TXlBcnJheTxUcmlhbmdsZT4+KSA6IFtUcmlhbmdsZSwgVHJpYW5nbGVdIHwgdW5kZWZpbmVkIHtcclxuICAgIGZvcihjb25zdCB0cmlhbmdsZXMgb2YgdHJpYW5nbGVzX2xpc3Qpe1xyXG4gICAgICAgIGNvbnN0IHRyaWFuZ2xlc0EgPSBnZXRUcmlhbmdsZXNCeUFuZ2xlKGFuZ2xlQSwgdHJpYW5nbGVzKTtcclxuICAgICAgICBpZih0cmlhbmdsZXNBLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0cmlhbmdsZXNCID0gZ2V0VHJpYW5nbGVzQnlBbmdsZShhbmdsZUIsIHRyaWFuZ2xlcyk7XHJcbiAgICAgICAgaWYodHJpYW5nbGVzQi5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yKGNvbnN0IHRyaWFuZ2xlQSBvZiB0cmlhbmdsZXNBKXtcclxuICAgICAgICAgICAgY29uc3QgaWR4QSA9IHRyaWFuZ2xlQS5wb2ludHMuaW5kZXhPZihhbmdsZUEuaW50ZXJzZWN0aW9uKTtcclxuICAgICAgICAgICAgYXNzZXJ0KGlkeEEgIT0gLTEpO1xyXG5cclxuICAgICAgICAgICAgZm9yKGNvbnN0IHRyaWFuZ2xlQiBvZiB0cmlhbmdsZXNCKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkeEIgPSB0cmlhbmdsZUIucG9pbnRzLmluZGV4T2YoYW5nbGVCLmludGVyc2VjdGlvbik7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoaWR4QiAhPSAtMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoaWR4QSA9PSBpZHhCKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt0cmlhbmdsZUEsIHRyaWFuZ2xlQl07XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBtc2coYG1ha2UgQW5nbGUgRXF1YWxpdHkgQnkgQ29uZ3J1ZW50IFRyaWFuZ2xlcyA6IGlkeC1BOiR7aWR4QX0gIT0gaWR4LUI6JHtpZHhCfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VBbmdsZUVxdWFsaXR5QnlDb25ncnVlbnRUcmlhbmdsZXMoYW5nbGVBIDogQW5nbGUsIGFuZ2xlQiA6IEFuZ2xlKSA6IEFuZ2xlRXF1YWxpdHkgfCB1bmRlZmluZWQge1xyXG4gICAgY29uc3QgdHJpYW5nbGVBQiA9IGZpbmRUcmlhbmdsZVBhaXJCeUFuZ2xlcyhhbmdsZUEsIGFuZ2xlQiwgY29uZ3J1ZW50VHJpYW5nbGVzKTtcclxuICAgIGlmKHRyaWFuZ2xlQUIgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICBjb25zdCBbdHJpYW5nbGVBLCB0cmlhbmdsZUJdID0gdHJpYW5nbGVBQjtcclxuXHJcbiAgICAgICAgLy8gbXNnKGBlcXVhbCBhbmdsZTpjb25ncnVlbnQgdHJpYW5nbGVzYCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBbmdsZUVxdWFsaXR5KHtcclxuICAgICAgICAgICAgcmVhc29uIDogQW5nbGVFcXVhbGl0eVJlYXNvbi5jb25ncnVlbnRfdHJpYW5nbGVzLFxyXG4gICAgICAgICAgICBhdXhpbGlhcnlTaGFwZXMgOiBbXHJcbiAgICAgICAgICAgICAgICB0cmlhbmdsZUEsIHRyaWFuZ2xlQlxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBzaGFwZXMgOiBbXHJcbiAgICAgICAgICAgICAgICBhbmdsZUEsIGFuZ2xlQlxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7ICAgICAgICBcclxuICAgIH1cclxuICAgIGVsc2V7XHJcblxyXG4gICAgICAgIG1zZyhgY2FuIG5vdCBmaW5kIGNvbmdydWVudCB0cmlhbmdsZXNgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VBbmdsZUVxdWFsaXR5QnlTaW1pbGFyVHJpYW5nbGVzKGFuZ2xlQSA6IEFuZ2xlLCBhbmdsZUIgOiBBbmdsZSkgOiBBbmdsZUVxdWFsaXR5IHwgdW5kZWZpbmVkIHtcclxuICAgIGNvbnN0IHRyaWFuZ2xlQUIgPSBmaW5kVHJpYW5nbGVQYWlyQnlBbmdsZXMoYW5nbGVBLCBhbmdsZUIsIHNpbWlsYXJUcmlhbmdsZXMpO1xyXG4gICAgaWYodHJpYW5nbGVBQiAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgIGNvbnN0IFt0cmlhbmdsZUEsIHRyaWFuZ2xlQl0gPSB0cmlhbmdsZUFCO1xyXG4gICAgICAgIHJldHVybiBuZXcgQW5nbGVFcXVhbGl0eSh7XHJcbiAgICAgICAgICAgIHJlYXNvbiA6IEFuZ2xlRXF1YWxpdHlSZWFzb24uc2ltaWxhcl90cmlhbmdsZXMsXHJcbiAgICAgICAgICAgIGF1eGlsaWFyeVNoYXBlcyA6IFsgdHJpYW5nbGVBLCB0cmlhbmdsZUIgXSxcclxuICAgICAgICAgICAgc2hhcGVzIDogWyBhbmdsZUEsIGFuZ2xlQiBdXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG5cclxuICAgICAgICBtc2coYGNhbiBub3QgZmluZCBzaW1pbGFyIHRyaWFuZ2xlc2ApO1xyXG5cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZUFuZ2xlRXF1YWxpdHlCeUlzb3NjZWxlc1RyaWFuZ2xlQmFzZUFuZ2xlcyhhbmdsZUEgOiBBbmdsZSwgYW5nbGVCIDogQW5nbGUpIDogQW5nbGVFcXVhbGl0eSB8IHVuZGVmaW5lZCB7XHJcbiAgICBmb3IoY29uc3QgW2FuZ2xlMSwgYW5nbGUyXSBvZiBwZXJtdXRhdGlvbihbYW5nbGVBLCBhbmdsZUJdKSl7XHJcbiAgICAgICAgaWYoYW5nbGUxLmxpbmVBID09IGFuZ2xlMi5saW5lQiAmJiBhbmdsZTEuZGlyZWN0aW9uQSA9PSAtIGFuZ2xlMi5kaXJlY3Rpb25CKXtcclxuICAgICAgICAgICAgY29uc3QgdHJpYW5nbGUgPSBpc29zY2VsZXNUcmlhbmdsZS5maW5kKHggPT4geC5wb2ludHNbMV0gPT0gYW5nbGUxLmludGVyc2VjdGlvbiAmJiB4LnBvaW50c1syXSA9PSBhbmdsZTIuaW50ZXJzZWN0aW9uKTtcclxuICAgICAgICAgICAgaWYodHJpYW5nbGUgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHZlcnRleCA9IGdldENvbW1vblBvaW50T2ZMaW5lcyhhbmdsZTEubGluZUIsIGFuZ2xlMi5saW5lQSk7XHJcbiAgICAgICAgICAgIGlmKHZlcnRleCAhPSB0cmlhbmdsZS5wb2ludHNbMF0pe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBbmdsZUVxdWFsaXR5KHtcclxuICAgICAgICAgICAgICAgIHJlYXNvbiA6IEFuZ2xlRXF1YWxpdHlSZWFzb24uaXNvc2NlbGVzX3RyaWFuZ2xlX2Jhc2VfYW5nbGVzLFxyXG4gICAgICAgICAgICAgICAgYXV4aWxpYXJ5U2hhcGVzIDogWyB0cmlhbmdsZSBdLFxyXG4gICAgICAgICAgICAgICAgc2hhcGVzIDogWyBhbmdsZUEsIGFuZ2xlQiBdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRBbmdsZVVuaXRWZWN0b3JzKGFuZ2xlQSA6IEFuZ2xlLCBhbmdsZUIgOiBBbmdsZSkgOiBbVmVjMiwgVmVjMiwgVmVjMiwgVmVjMl17XHJcbiAgICBjb25zdCBlX0FBID0gYW5nbGVBLmxpbmVBLmUubXVsKGFuZ2xlQS5kaXJlY3Rpb25BKTtcclxuICAgIGNvbnN0IGVfQUIgPSBhbmdsZUEubGluZUIuZS5tdWwoYW5nbGVBLmRpcmVjdGlvbkIpO1xyXG4gICAgY29uc3QgZV9CQSA9IGFuZ2xlQi5saW5lQS5lLm11bChhbmdsZUIuZGlyZWN0aW9uQSk7XHJcbiAgICBjb25zdCBlX0JCID0gYW5nbGVCLmxpbmVCLmUubXVsKGFuZ2xlQi5kaXJlY3Rpb25CKTtcclxuXHJcbiAgICByZXR1cm4gWyBlX0FBLCBlX0FCLCBlX0JBLCBlX0JCIF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlQW5nbGVFcXVhbGl0eUJ5VmVydGljYWxfYW5nbGVzKGFuZ2xlQSA6IEFuZ2xlLCBhbmdsZUIgOiBBbmdsZSkgOiBBbmdsZUVxdWFsaXR5IHwgdW5kZWZpbmVkIHtcclxuICAgIGlmKGFuZ2xlQS5pbnRlcnNlY3Rpb24gPT0gYW5nbGVCLmludGVyc2VjdGlvbil7XHJcbiAgICAgICAgLy8gbXNnKFwiaW50ZXJzZWN0aW9uQSA9PSBpbnRlcnNlY3Rpb25CXCIpO1xyXG4gICAgICAgIGlmKGFuZ2xlQS5saW5lQSA9PSBhbmdsZUIubGluZUEgJiYgYW5nbGVBLmxpbmVCID09IGFuZ2xlQi5saW5lQil7XHJcbiAgICAgICAgICAgIC8vIG1zZyhcImxpbmVBQSA9PSBsaW5lQkIgJiBsaW5lQUIgPT0gbGluZUJCXCIpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgWyBlX0FBLCBlX0FCLCBlX0JBLCBlX0JCIF0gPSBnZXRBbmdsZVVuaXRWZWN0b3JzKGFuZ2xlQSwgYW5nbGVCKTtcclxuICAgICAgICAgICAgaWYoTWF0aC5zaWduKGVfQUEuZG90KGVfQkEpKSA9PSAtMSAmJiBNYXRoLnNpZ24oZV9BQi5kb3QoZV9CQikpID09IC0xKXtcclxuICAgICAgICAgICAgICAgIC8vIG1zZyhgZXF1YWwgYW5nbGU6dmVydGljYWwgYW5nbGVgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQW5nbGVFcXVhbGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uIDogQW5nbGVFcXVhbGl0eVJlYXNvbi52ZXJ0aWNhbF9hbmdsZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgYXV4aWxpYXJ5U2hhcGVzIDogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmdsZUEubGluZUEsIGFuZ2xlQS5saW5lQlxyXG4gICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVzIDogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmdsZUEsIGFuZ2xlQlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBtc2coYEFBLkJBID0gJHsoZV9BQS5kb3QoZV9CQSkpLnRvRml4ZWQoMSl9IDogQUIuQkIgPSAkeyhlX0FCLmRvdChlX0JCKSkudG9GaXhlZCgxKX1gKSAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlQW5nbGVFcXVhbGl0eUJ5UGFyYWxsZWxMaW5lcyhhbmdsZUEgOiBBbmdsZSwgYW5nbGVCIDogQW5nbGUpIDogQW5nbGVFcXVhbGl0eSB8IHVuZGVmaW5lZCB7XHJcblxyXG4gICAgbGV0IGFuZ2xlX2xpbmVzID0gdW5pcXVlKFsgYW5nbGVBLmxpbmVBLCBhbmdsZUEubGluZUIsIGFuZ2xlQi5saW5lQSwgYW5nbGVCLmxpbmVCICBdKTtcclxuICAgIGlmKGFuZ2xlX2xpbmVzLmxlbmd0aCAhPSAzKXtcclxuICAgICAgICBtc2coXCJubyBjcm9zcyBsaW5lLlwiKTtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNyb3NzX2xpbmUgPSBhbmdsZV9saW5lcy5maW5kKHggPT4gWyBhbmdsZUEubGluZUEsIGFuZ2xlQS5saW5lQiBdLmluY2x1ZGVzKHgpICYmIFthbmdsZUIubGluZUEsIGFuZ2xlQi5saW5lQl0uaW5jbHVkZXMoeCkpO1xyXG4gICAgYXNzZXJ0KGNyb3NzX2xpbmUgIT0gdW5kZWZpbmVkKTtcclxuXHJcbiAgICBjb25zdCBwYXJhbGxlbF9saW5lcyA9IGFuZ2xlX2xpbmVzLmZpbHRlcih4ID0+IHggIT0gY3Jvc3NfbGluZSk7XHJcbiAgICBhc3NlcnQocGFyYWxsZWxfbGluZXMubGVuZ3RoID09IDIpO1xyXG5cclxuICAgIGlmKCEgaXNQYXJhbGxlbChwYXJhbGxlbF9saW5lc1swXSwgcGFyYWxsZWxfbGluZXNbMV0pKXtcclxuICAgICAgICBtc2coXCJub3QgcGFyYWxsZWxcIik7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgY3Jvc3Nfc2lnbiA6IG51bWJlcjtcclxuICAgIGxldCBwYXJhbGxlbF9zaWduIDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0IFsgZV9BQSwgZV9BQiwgZV9CQSwgZV9CQiBdID0gZ2V0QW5nbGVVbml0VmVjdG9ycyhhbmdsZUEsIGFuZ2xlQik7XHJcblxyXG4gICAgaWYoYW5nbGVBLmxpbmVBID09IGFuZ2xlQi5saW5lQSAmJiBhbmdsZUEubGluZUEgPT0gY3Jvc3NfbGluZSAmJiBhcmVTZXRzRXF1YWwocGFyYWxsZWxfbGluZXMsIFthbmdsZUEubGluZUIsIGFuZ2xlQi5saW5lQl0pKXtcclxuICAgICAgICAvLyBtc2coXCJsaW5lQSA9PSBsaW5lQVwiKTtcclxuICAgIFxyXG4gICAgICAgIGNyb3NzX3NpZ24gICAgPSBNYXRoLnNpZ24oZV9BQS5kb3QoZV9CQSkpO1xyXG4gICAgICAgIHBhcmFsbGVsX3NpZ24gPSBNYXRoLnNpZ24oZV9BQi5kb3QoZV9CQikpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihhbmdsZUEubGluZUIgPT0gYW5nbGVCLmxpbmVCICYmIGFuZ2xlQS5saW5lQiA9PSBjcm9zc19saW5lICYmIGFyZVNldHNFcXVhbChwYXJhbGxlbF9saW5lcywgW2FuZ2xlQS5saW5lQSwgYW5nbGVCLmxpbmVBXSkpe1xyXG4gICAgICAgIC8vIG1zZyhcImxpbmVCID09IGxpbmVCXCIpO1xyXG5cclxuICAgICAgICBjcm9zc19zaWduICAgID0gTWF0aC5zaWduKGVfQUIuZG90KGVfQkIpKTtcclxuICAgICAgICBwYXJhbGxlbF9zaWduID0gTWF0aC5zaWduKGVfQUEuZG90KGVfQkEpKTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgbXNnKFwiaWxsZWdhbCBhbmdsZVwiKTtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKGNyb3NzX3NpZ24gKiBwYXJhbGxlbF9zaWduID09IDEpe1xyXG4gICAgICAgIC8vIG1zZyhgZXF1YWwgYW5nbGU6cGFyYWxsZWwgbGluZXNgKTtcclxuICAgICAgICByZXR1cm4gbmV3IEFuZ2xlRXF1YWxpdHkoe1xyXG4gICAgICAgICAgICByZWFzb24gOiBBbmdsZUVxdWFsaXR5UmVhc29uLnBhcmFsbGVsX2xpbmVfYW5nbGVzLFxyXG4gICAgICAgICAgICBhdXhpbGlhcnlTaGFwZXMgOiBwYXJhbGxlbF9saW5lcy5jb25jYXQoY3Jvc3NfbGluZSksXHJcbiAgICAgICAgICAgIHNoYXBlcyA6IFtcclxuICAgICAgICAgICAgICAgIGFuZ2xlQSwgYW5nbGVCXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgbXNnKFwibWFrZS1FcXVhbC1BbmdsZTpjcm9zc19zaWduICogcGFyYWxsZWxfc2lnbiAhPSAxXCIpO1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlQW5nbGVFcXVhbGl0eUJ5QW5nbGVCaXNlY3RvcihhbmdsZUEgOiBBbmdsZSwgYW5nbGVCIDogQW5nbGUsIGFuZ2xlX2Jpc2VjdG9yIDogQW5nbGVCaXNlY3RvcikgOiBBbmdsZUVxdWFsaXR5IHtcclxuICAgIGNvbnN0IFsgbGluZUEsIGxpbmVCIF0gPSBbIGFuZ2xlQS5saW5lQSwgYW5nbGVCLmxpbmVCIF07XHJcblxyXG4gICAgcmV0dXJuIG5ldyBBbmdsZUVxdWFsaXR5KHtcclxuICAgICAgICByZWFzb24gICAgICAgICAgOiBBbmdsZUVxdWFsaXR5UmVhc29uLmFuZ2xlX2Jpc2VjdG9yLFxyXG4gICAgICAgIGF1eGlsaWFyeVNoYXBlcyA6IFsgbGluZUEsIGxpbmVCLCBhbmdsZV9iaXNlY3RvciBdLFxyXG4gICAgICAgIHNoYXBlcyAgICAgICAgICA6IFsgYW5nbGVBLCBhbmdsZUIgXVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlQW5nbGVFcXVhbGl0eUJ5UGFyYWxsZWxvZ3JhbU9wcG9zaXRlQW5nbGVzKGFuZ2xlQSA6IEFuZ2xlLCBhbmdsZUIgOiBBbmdsZSwgcGFyYWxsZWxvZ3JhbSA6IFF1YWRyaWxhdGVyYWwpIDogQW5nbGVFcXVhbGl0eSB8IHVuZGVmaW5lZCB7XHJcbiAgICBpZighIHBhcmFsbGVsb2dyYW0uaXNQYXJhbGxlbG9ncmFtKCkpe1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaW50ZXJzZWN0aW9ucyA9IFthbmdsZUEuaW50ZXJzZWN0aW9uLCBhbmdsZUIuaW50ZXJzZWN0aW9uXTtcclxuICAgIGNvbnN0IFtwdDAsIHB0MSwgcHQyLCBwdDNdID0gcGFyYWxsZWxvZ3JhbS5wb2ludHM7XHJcblxyXG4gICAgaWYoIGFyZVNldHNFcXVhbChbcHQwLCBwdDJdLCBpbnRlcnNlY3Rpb25zKSB8fCBhcmVTZXRzRXF1YWwoW3B0MSwgcHQzXSwgaW50ZXJzZWN0aW9ucyApICl7XHJcblxyXG4gICAgICAgIGNvbnN0IHBvaW50cyA9IHRvQ2xvY2t3aXNlUG9pbnRzKHBhcmFsbGVsb2dyYW0ucG9pbnRzKTtcclxuICAgICAgICBsZXQgdHJpYWRfcGFpciA6IFBvaW50W11bXTtcclxuICAgICAgICBpZihpbnRlcnNlY3Rpb25zLmluY2x1ZGVzKHBvaW50c1swXSkpe1xyXG4gICAgICAgICAgICB0cmlhZF9wYWlyID0gW1twb2ludHNbM10sIHBvaW50c1swXSwgcG9pbnRzWzFdXSwgW3BvaW50c1sxXSwgcG9pbnRzWzJdLCBwb2ludHNbM11dXVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0cmlhZF9wYWlyID0gW1twb2ludHNbMF0sIHBvaW50c1sxXSwgcG9pbnRzWzJdXSwgW3BvaW50c1syXSwgcG9pbnRzWzNdLCBwb2ludHNbMF1dXVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYW5nbGVzID0gW2FuZ2xlQSwgYW5nbGVCXTtcclxuICAgICAgICBpZih0cmlhZF9wYWlyWzBdWzFdID09IGFuZ2xlQi5pbnRlcnNlY3Rpb24pe1xyXG4gICAgICAgICAgICB0cmlhZF9wYWlyLnJldmVyc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yKGNvbnN0IFtpZHgsIHRyaWFkXSBvZiB0cmlhZF9wYWlyLmVudHJpZXMoKSl7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gYW5nbGVzW2lkeF07XHJcbiAgICAgICAgICAgIGFzc2VydCh0cmlhZFsxXSA9PSBhbmdsZS5pbnRlcnNlY3Rpb24pO1xyXG4gICAgICAgICAgICBpZihhbmdsZS5saW5lQS5pbmNsdWRlc1BvaW50KHRyaWFkWzJdKSAmJiBhbmdsZS5saW5lQi5pbmNsdWRlc1BvaW50KHRyaWFkWzBdKSl7XHJcbiAgICAgICAgICAgICAgICAvLyBtc2coYGVxdWFsIGFuZ2xlOnBhcmFsbGVsb2dyYW1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQW5nbGVFcXVhbGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uIDogQW5nbGVFcXVhbGl0eVJlYXNvbi5wYXJhbGxlbG9ncmFtX29wcG9zaXRlX2FuZ2xlcyxcclxuICAgICAgICAgICAgICAgICAgICBhdXhpbGlhcnlTaGFwZXMgOiBbcGFyYWxsZWxvZ3JhbV0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVzIDogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmdsZUEsIGFuZ2xlQlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0pOyAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFuZ2xlRXF1YWxpdHkgZXh0ZW5kcyBTdGF0ZW1lbnQge1xyXG4gICAgY29uc3RydWN0b3Iob2JqIDogeyByZWFzb24/IDogbnVtYmVyLCBhdXhpbGlhcnlTaGFwZXM/IDogTWF0aEVudGl0eVtdLCBzaGFwZXMgOiBNYXRoRW50aXR5W10sIG1hdGhUZXh0PyA6IHN0cmluZyB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG5cclxuICAgICAgICBjb25zdCBhbmdsZXMgPSB0aGlzLnNlbGVjdGVkU2hhcGVzIGFzIEFuZ2xlW107XHJcbiAgICAgICAgQW5nbGUuc2V0RXF1YWxBbmdsZU1hcmtzKGFuZ2xlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZGluZygpOiBSZWFkaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZXh0UmVhZGluZyhUVChcInRoZSB0d28gYW5nbGVzIGFyZSBlcXVhbC5cIikpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFJlbGF0aW9ucygpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5zZXRSZWxhdGlvbnMoKTtcclxuXHJcbiAgICAgICAgY29uc3QgW2FuZ2xlQSwgYW5nbGVCXSA9IHRoaXMuc2VsZWN0ZWRTaGFwZXMgYXMgQW5nbGVbXTtcclxuICAgICAgICBhZGRFcXVhbEFuZ2xlcyhhbmdsZUEsIGFuZ2xlQik7XHJcbiAgICB9XHJcblxyXG4gICAgdmVyaWZ5KCkgOiBBbmdsZUVxdWFsaXR5IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBsZXQgYW5nbGVFcXVhbGl0eSA6IEFuZ2xlRXF1YWxpdHkgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGNvbnN0IFthbmdsZUEsIGFuZ2xlQl0gPSB0aGlzLnNlbGVjdGVkU2hhcGVzIGFzIEFuZ2xlW107XHJcblxyXG4gICAgICAgIGNvbnN0IHJlYXNvbl9zdHIgPSByZWFzb25Nc2codGhpcy5yZWFzb24pO1xyXG4gICAgICAgIHN3aXRjaCh0aGlzLnJlYXNvbil7XHJcbiAgICAgICAgY2FzZSBBbmdsZUVxdWFsaXR5UmVhc29uLnZlcnRpY2FsX2FuZ2xlczpcclxuICAgICAgICAgICAgYW5nbGVFcXVhbGl0eSA9IG1ha2VBbmdsZUVxdWFsaXR5QnlWZXJ0aWNhbF9hbmdsZXMoYW5nbGVBLCBhbmdsZUIpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBBbmdsZUVxdWFsaXR5UmVhc29uLnBhcmFsbGVsX2xpbmVfYW5nbGVzOntcclxuICAgICAgICAgICAgICAgIGFuZ2xlRXF1YWxpdHkgPSBtYWtlQW5nbGVFcXVhbGl0eUJ5UGFyYWxsZWxMaW5lcyhhbmdsZUEsIGFuZ2xlQik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIGNhc2UgQW5nbGVFcXVhbGl0eVJlYXNvbi5hbmdsZV9iaXNlY3Rvcjp7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYW5nbGVfYmlzZWN0b3IgPSB0aGlzLmF1eGlsaWFyeVNoYXBlc1syXSBhcyBBbmdsZUJpc2VjdG9yO1xyXG4gICAgICAgICAgICAgICAgYW5nbGVFcXVhbGl0eSA9IG1ha2VBbmdsZUVxdWFsaXR5QnlBbmdsZUJpc2VjdG9yKGFuZ2xlQSwgYW5nbGVCLCBhbmdsZV9iaXNlY3Rvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgQW5nbGVFcXVhbGl0eVJlYXNvbi5jb25ncnVlbnRfdHJpYW5nbGVzOlxyXG4gICAgICAgICAgICBhbmdsZUVxdWFsaXR5ID0gbWFrZUFuZ2xlRXF1YWxpdHlCeUNvbmdydWVudFRyaWFuZ2xlcyhhbmdsZUEsIGFuZ2xlQik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIEFuZ2xlRXF1YWxpdHlSZWFzb24ucGFyYWxsZWxvZ3JhbV9vcHBvc2l0ZV9hbmdsZXM6e1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyYWxsZWxvZ3JhbSA9IHRoaXMuYXV4aWxpYXJ5U2hhcGVzWzBdIGFzIFF1YWRyaWxhdGVyYWw7XHJcbiAgICAgICAgICAgICAgICBhbmdsZUVxdWFsaXR5ID0gbWFrZUFuZ2xlRXF1YWxpdHlCeVBhcmFsbGVsb2dyYW1PcHBvc2l0ZUFuZ2xlcyhhbmdsZUEsIGFuZ2xlQiwgcGFyYWxsZWxvZ3JhbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgQW5nbGVFcXVhbGl0eVJlYXNvbi5zaW1pbGFyX3RyaWFuZ2xlczpcclxuICAgICAgICAgICAgYW5nbGVFcXVhbGl0eSA9IG1ha2VBbmdsZUVxdWFsaXR5QnlTaW1pbGFyVHJpYW5nbGVzKGFuZ2xlQSwgYW5nbGVCKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKGB1bmtub3duIEFuZ2xlLUVxdWFsaXR5IHJlYXNvbjogJHt0aGlzLnJlYXNvbn0gJHtyZWFzb25fc3RyfWApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoYW5nbGVFcXVhbGl0eSA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcihgY2FuIG5vdCBtYWtlIEFuZ2xlLUVxdWFsaXR5OiAke3JlYXNvbl9zdHJ9YClcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgIG1zZyhgbWFrZSBBbmdsZS1FcXVhbGl0eSBPSzogJHtyZWFzb25fc3RyfWApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYW5nbGVFcXVhbGl0eTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbn0iLCJuYW1lc3BhY2UgcGxhbmVfdHMge1xyXG4vL1xyXG5leHBvcnQgZnVuY3Rpb24gbWFrZVF1YWRyaWxhdGVyYWxDbGFzc2lmaWVyKHBvaW50cyA6IFBvaW50W10sIHJlYXNvbiA6IFBhcmFsbGVsb2dyYW1SZWFzb24gfCBSaG9tYnVzUmVhc29uICkgOiBQYXJhbGxlbG9ncmFtQ2xhc3NpZmllciB8IFJob21idXNDbGFzc2lmaWVyIHwgdW5kZWZpbmVke1xyXG4gICAgbGV0IGVxdWFsU2lkZUxlbmd0aFN5bWJvbHNBIDogTGVuZ3RoU3ltYm9sW10gfCB1bmRlZmluZWQ7XHJcbiAgICBsZXQgZXF1YWxTaWRlTGVuZ3RoU3ltYm9sc0IgOiBMZW5ndGhTeW1ib2xbXSB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBsZXQgcGFyYWxsZWxMaW5lc0EgOiBBYnN0cmFjdExpbmVbXSB8IHVuZGVmaW5lZDtcclxuICAgIGxldCBwYXJhbGxlbExpbmVzQiA6IEFic3RyYWN0TGluZVtdIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIGxldCBlcXVhbEFuZ2xlc0EgOiBBbmdsZVtdIHwgdW5kZWZpbmVkO1xyXG4gICAgbGV0IGVxdWFsQW5nbGVzQiA6IEFuZ2xlW10gfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgbGV0IGRpYWdvbmFsQmlzZWN0aW9uTGVuZ3RoU3ltYm9sc0EgOiBMZW5ndGhTeW1ib2xbXSB8IHVuZGVmaW5lZDtcclxuICAgIGxldCBkaWFnb25hbEJpc2VjdGlvbkxlbmd0aFN5bWJvbHNCIDogTGVuZ3RoU3ltYm9sW10gfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgZXF1YWxTaWRlTGVuZ3RoU3ltYm9sc0EgPSBmaW5kRXF1YWxMZW5ndGhzQnlQb2ludHNQYWlyKFtwb2ludHNbMF0sIHBvaW50c1sxXV0sIFtwb2ludHNbMl0sIHBvaW50c1szXV0pO1xyXG4gICAgZXF1YWxTaWRlTGVuZ3RoU3ltYm9sc0IgPSBmaW5kRXF1YWxMZW5ndGhzQnlQb2ludHNQYWlyKFtwb2ludHNbMV0sIHBvaW50c1syXV0sIFtwb2ludHNbM10sIHBvaW50c1swXV0pO1xyXG5cclxuICAgIHBhcmFsbGVsTGluZXNBID0gZ2V0UGFyYWxsZWxMaW5lc0J5UG9pbnRzUGFpcihbcG9pbnRzWzBdLCBwb2ludHNbMV1dLCBbcG9pbnRzWzJdLCBwb2ludHNbM11dKTtcclxuICAgIHBhcmFsbGVsTGluZXNCID0gZ2V0UGFyYWxsZWxMaW5lc0J5UG9pbnRzUGFpcihbcG9pbnRzWzFdLCBwb2ludHNbMl1dLCBbcG9pbnRzWzNdLCBwb2ludHNbMF1dKTtcclxuXHJcbiAgICBlcXVhbEFuZ2xlc0EgPSBmaW5kRXF1YWxBbmdsZXNCeTNwb2ludHNQYWlyKFtwb2ludHNbMF0sIHBvaW50c1sxXSwgcG9pbnRzWzJdXSwgW3BvaW50c1syXSwgcG9pbnRzWzNdLCBwb2ludHNbMF1dKTtcclxuICAgIGVxdWFsQW5nbGVzQiA9IGZpbmRFcXVhbEFuZ2xlc0J5M3BvaW50c1BhaXIoW3BvaW50c1sxXSwgcG9pbnRzWzJdLCBwb2ludHNbM11dLCBbcG9pbnRzWzNdLCBwb2ludHNbMF0sIHBvaW50c1sxXV0pO1xyXG5cclxuICAgIGRpYWdvbmFsQmlzZWN0aW9uTGVuZ3RoU3ltYm9sc0EgPSB1bmRlZmluZWQ7XHJcbiAgICBkaWFnb25hbEJpc2VjdGlvbkxlbmd0aFN5bWJvbHNCID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIGNvbnN0IGRpYWdvbmFsQSA9IGdldENvbW1vbkxpbmVPZlBvaW50cyhwb2ludHNbMF0sIHBvaW50c1syXSk7XHJcbiAgICBjb25zdCBkaWFnb25hbEIgPSBnZXRDb21tb25MaW5lT2ZQb2ludHMocG9pbnRzWzFdLCBwb2ludHNbM10pO1xyXG4gICAgaWYoZGlhZ29uYWxBICE9IHVuZGVmaW5lZCAmJiBkaWFnb25hbEIgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb24gPSBnZXRDb21tb25Qb2ludE9mTGluZXMoZGlhZ29uYWxBLCBkaWFnb25hbEIpO1xyXG4gICAgICAgIGlmKGludGVyc2VjdGlvbiAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBkaWFnb25hbEJpc2VjdGlvbkxlbmd0aFN5bWJvbHNBID0gZmluZEVxdWFsTGVuZ3Roc0J5UG9pbnRzUGFpcihbcG9pbnRzWzBdLCBpbnRlcnNlY3Rpb25dLCBbcG9pbnRzWzJdLCBpbnRlcnNlY3Rpb25dKTtcclxuICAgICAgICAgICAgZGlhZ29uYWxCaXNlY3Rpb25MZW5ndGhTeW1ib2xzQiA9IGZpbmRFcXVhbExlbmd0aHNCeVBvaW50c1BhaXIoW3BvaW50c1sxXSwgaW50ZXJzZWN0aW9uXSwgW3BvaW50c1szXSwgaW50ZXJzZWN0aW9uXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGxpbmVzID0gcmFuZ2UoNCkubWFwKGkgPT4gZ2V0Q29tbW9uTGluZU9mUG9pbnRzKHBvaW50c1tpXSwgcG9pbnRzWyhpICsgMSkgJSA0XSkpIGFzIEFic3RyYWN0TGluZVtdO1xyXG4gICAgaWYobGluZXMuc29tZSh4ID0+IHggPT0gdW5kZWZpbmVkKSl7XHJcbiAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBxdWFkcmlsYXRlcmFsID0gbmV3IFF1YWRyaWxhdGVyYWwoe3BvaW50cywgbGluZXN9KTtcclxuXHJcbiAgICBzd2l0Y2gocmVhc29uKXtcclxuICAgIGNhc2UgUGFyYWxsZWxvZ3JhbVJlYXNvbi5lYWNoX29wcG9zaXRlX3NpZGVzX2FyZV9lcXVhbDpcclxuICAgICAgICBpZihlcXVhbFNpZGVMZW5ndGhTeW1ib2xzQSAhPSB1bmRlZmluZWQgJiYgZXF1YWxTaWRlTGVuZ3RoU3ltYm9sc0IgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJhbGxlbG9ncmFtQ2xhc3NpZmllcih7XHJcbiAgICAgICAgICAgICAgICByZWFzb24gOiByZWFzb24sXHJcbiAgICAgICAgICAgICAgICBhdXhpbGlhcnlTaGFwZXMgOiBlcXVhbFNpZGVMZW5ndGhTeW1ib2xzQS5jb25jYXQoZXF1YWxTaWRlTGVuZ3RoU3ltYm9sc0IpLFxyXG4gICAgICAgICAgICAgICAgc2hhcGVzIDogWyBxdWFkcmlsYXRlcmFsIF1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgIGNhc2UgUGFyYWxsZWxvZ3JhbVJlYXNvbi5lYWNoX29wcG9zaXRlX3NpZGVzX2FyZV9wYXJhbGxlbDpcclxuICAgICAgICBpZihwYXJhbGxlbExpbmVzQSAhPSB1bmRlZmluZWQgJiYgcGFyYWxsZWxMaW5lc0IgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJhbGxlbG9ncmFtQ2xhc3NpZmllcih7XHJcbiAgICAgICAgICAgICAgICByZWFzb24gOiByZWFzb24sXHJcbiAgICAgICAgICAgICAgICBhdXhpbGlhcnlTaGFwZXMgOiBwYXJhbGxlbExpbmVzQS5jb25jYXQocGFyYWxsZWxMaW5lc0IpLFxyXG4gICAgICAgICAgICAgICAgc2hhcGVzIDogWyBxdWFkcmlsYXRlcmFsIF1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgIGNhc2UgUGFyYWxsZWxvZ3JhbVJlYXNvbi5lYWNoX29wcG9zaXRlX2FuZ2xlc19hcmVfZXF1YWw6XHJcbiAgICAgICAgaWYoZXF1YWxBbmdsZXNBICE9IHVuZGVmaW5lZCAmJiBlcXVhbEFuZ2xlc0IgIT0gdW5kZWZpbmVkKXtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYWxsZWxvZ3JhbUNsYXNzaWZpZXIoe1xyXG4gICAgICAgICAgICAgICAgcmVhc29uIDogcmVhc29uLFxyXG4gICAgICAgICAgICAgICAgYXV4aWxpYXJ5U2hhcGVzIDogZXF1YWxBbmdsZXNBLmNvbmNhdChlcXVhbEFuZ2xlc0IpLFxyXG4gICAgICAgICAgICAgICAgc2hhcGVzIDogWyBxdWFkcmlsYXRlcmFsIF1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIGNhc2UgUGFyYWxsZWxvZ3JhbVJlYXNvbi5vbmVfb3Bwb3NpdGVfc2lkZXNfYXJlX3BhcmFsbGVsX2FuZF9lcXVhbDp7XHJcbiAgICAgICAgICAgIGxldCBhdXhpbGlhcnlTaGFwZXMgOiBNYXRoRW50aXR5W107XHJcblxyXG4gICAgICAgICAgICBpZihwYXJhbGxlbExpbmVzQSAhPSB1bmRlZmluZWQgJiYgZXF1YWxTaWRlTGVuZ3RoU3ltYm9sc0EgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIGFzc2VydChyYW5nZSgyKS5ldmVyeShpID0+IHBhcmFsbGVsTGluZXNBW2ldID09IGVxdWFsU2lkZUxlbmd0aFN5bWJvbHNBW2ldLmxpbmUpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBhdXhpbGlhcnlTaGFwZXMgPSBlcXVhbFNpZGVMZW5ndGhTeW1ib2xzQTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKHBhcmFsbGVsTGluZXNCICE9IHVuZGVmaW5lZCAmJiBlcXVhbFNpZGVMZW5ndGhTeW1ib2xzQiAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KHJhbmdlKDIpLmV2ZXJ5KGkgPT4gcGFyYWxsZWxMaW5lc0JbaV0gPT0gZXF1YWxTaWRlTGVuZ3RoU3ltYm9sc0JbaV0ubGluZSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGF1eGlsaWFyeVNoYXBlcyA9IGVxdWFsU2lkZUxlbmd0aFN5bWJvbHNCO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBhcmFsbGVsb2dyYW1DbGFzc2lmaWVyKHtcclxuICAgICAgICAgICAgICAgIHJlYXNvbixcclxuICAgICAgICAgICAgICAgIGF1eGlsaWFyeVNoYXBlcyxcclxuICAgICAgICAgICAgICAgIHNoYXBlcyA6IFsgcXVhZHJpbGF0ZXJhbCBdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICBjYXNlIFBhcmFsbGVsb2dyYW1SZWFzb24uZWFjaF9kaWFnb25hbF9iaXNlY3Rpb25zOlxyXG4gICAgICAgIGlmKGRpYWdvbmFsQmlzZWN0aW9uTGVuZ3RoU3ltYm9sc0EgIT0gdW5kZWZpbmVkICYmIGRpYWdvbmFsQmlzZWN0aW9uTGVuZ3RoU3ltYm9sc0IgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJhbGxlbG9ncmFtQ2xhc3NpZmllcih7XHJcbiAgICAgICAgICAgICAgICByZWFzb24sXHJcbiAgICAgICAgICAgICAgICBhdXhpbGlhcnlTaGFwZXMgOiBkaWFnb25hbEJpc2VjdGlvbkxlbmd0aFN5bWJvbHNBLmNvbmNhdChkaWFnb25hbEJpc2VjdGlvbkxlbmd0aFN5bWJvbHNCKSxcclxuICAgICAgICAgICAgICAgIHNoYXBlcyA6IFsgcXVhZHJpbGF0ZXJhbCBdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgY2FzZSBSaG9tYnVzUmVhc29uLmFsbF9zaWRlc19hcmVfZXF1YWw6XHJcbiAgICAgICAgaWYoZXF1YWxTaWRlTGVuZ3RoU3ltYm9sc0EgIT0gdW5kZWZpbmVkICYmIGVxdWFsU2lkZUxlbmd0aFN5bWJvbHNCICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGlmKGlzRXF1YWxMZW5ndGgoZXF1YWxTaWRlTGVuZ3RoU3ltYm9sc0FbMF0sIGVxdWFsU2lkZUxlbmd0aFN5bWJvbHNCWzBdKSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJob21idXNDbGFzc2lmaWVyKHtcclxuICAgICAgICAgICAgICAgICAgICByZWFzb24gOiByZWFzb24sXHJcbiAgICAgICAgICAgICAgICAgICAgYXV4aWxpYXJ5U2hhcGVzIDogZXF1YWxTaWRlTGVuZ3RoU3ltYm9sc0EuY29uY2F0KGVxdWFsU2lkZUxlbmd0aFN5bWJvbHNCKSxcclxuICAgICAgICAgICAgICAgICAgICBzaGFwZXMgOiBbIHF1YWRyaWxhdGVyYWwgXVxyXG4gICAgICAgICAgICAgICAgfSk7ICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFRyaWFuZ2xlUXVhZHJpbGF0ZXJhbERldGVjdG9yIGV4dGVuZHMgU3RhdGVtZW50IHtcclxuICAgIHNoYXBlQ2xhc3MhIDogVHJpYW5nbGVRdWFkcmlsYXRlcmFsQ2xhc3M7XHJcbn1cclxuXHJcbmFic3RyYWN0IGNsYXNzIFF1YWRyaWxhdGVyYWxDbGFzc2lmaWVyIGV4dGVuZHMgVHJpYW5nbGVRdWFkcmlsYXRlcmFsRGV0ZWN0b3Ige1xyXG4gICAgcXVhZHJpbGF0ZXJhbCgpIDogUXVhZHJpbGF0ZXJhbCB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc2VsZWN0ZWRTaGFwZXMubGVuZ3RoID09IDEgJiYgdGhpcy5zZWxlY3RlZFNoYXBlc1swXSBpbnN0YW5jZW9mIFF1YWRyaWxhdGVyYWwpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkU2hhcGVzWzBdIGFzIFF1YWRyaWxhdGVyYWw7XHJcbiAgICB9XHJcblxyXG4gICAgaXNQYXJhbGxlbG9ncmFtKCkgOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaGFwZUNsYXNzID09IFRyaWFuZ2xlUXVhZHJpbGF0ZXJhbENsYXNzLnBhcmFsbGVsb2dyYW0gfHwgdGhpcy5zaGFwZUNsYXNzID09IFRyaWFuZ2xlUXVhZHJpbGF0ZXJhbENsYXNzLnJob21idXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UmVsYXRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnNldFJlbGF0aW9ucygpO1xyXG5cclxuICAgICAgICBwYXJhbGxlbG9ncmFtQ2xhc3NpZmllcnMuYWRkKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoKSA6IHZvaWQge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnNlbGVjdGVkU2hhcGVzLmxlbmd0aCA9PSAxICYmIHRoaXMuc2VsZWN0ZWRTaGFwZXNbMF0gaW5zdGFuY2VvZiBRdWFkcmlsYXRlcmFsKTtcclxuICAgICAgICBjb25zdCBxdWFkcmlsYXRlcmFsID0gdGhpcy5zZWxlY3RlZFNoYXBlc1swXSBhcyBRdWFkcmlsYXRlcmFsO1xyXG5cclxuICAgICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLmF1eGlsaWFyeVNoYXBlcy5maWx0ZXIoeCA9PiB4Lm1vZGUgIT0gTW9kZS5ub25lKSBhcyBTaGFwZVtdO1xyXG4gICAgICAgIGZvcihjb25zdCBzaGFwZSBvZiBzaGFwZXMpe1xyXG4gICAgICAgICAgICBsZXQgcDEgOiBQb2ludDtcclxuICAgICAgICAgICAgbGV0IHAyIDogUG9pbnQ7XHJcblxyXG4gICAgICAgICAgICBpZihzaGFwZSBpbnN0YW5jZW9mIExlbmd0aFN5bWJvbCl7XHJcblxyXG4gICAgICAgICAgICAgICAgW3AxLCBwMl0gPSBbIHNoYXBlLnBvaW50QSwgc2hhcGUucG9pbnRCIF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihzaGFwZSBpbnN0YW5jZW9mIEFic3RyYWN0TGluZSl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gc2hhcGU7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaWR4ID0gcXVhZHJpbGF0ZXJhbC5saW5lcy5pbmRleE9mKGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgaWYoaWR4ID09IC0xKXtcclxuICAgICAgICAgICAgICAgICAgICBtc2coYFF1YWRyaWxhdGVyYWwtQ2xhc3NpZmllciBlcnJvcjoke3RoaXMuaWR9IHNoYXBlOiR7c2hhcGUuaWR9OiR7c2hhcGUuY29uc3RydWN0b3IubmFtZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFzc2VydChpZHggIT0gLTEpO1xyXG4gICAgICAgICAgICAgICAgW3AxLCBwMl0gPSBbcXVhZHJpbGF0ZXJhbC5wb2ludHNbaWR4XSwgcXVhZHJpbGF0ZXJhbC5wb2ludHNbKGlkeCArIDEpICUgcXVhZHJpbGF0ZXJhbC5wb2ludHMubGVuZ3RoXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHNoYXBlLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IHNoYXBlLm1vZGVDb2xvcigpO1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lX3dpZHRoID0gc2hhcGUubW9kZUxpbmVXaWR0aCgpO1xyXG4gICAgICAgICAgICBWaWV3LmN1cnJlbnQuY2FudmFzLmRyYXdMaW5lUmF3KHAxLnBvc2l0aW9uLCBwMi5wb3NpdGlvbiwgY29sb3IsIGxpbmVfd2lkdGgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBhcmFsbGVsb2dyYW1DbGFzc2lmaWVyIGV4dGVuZHMgUXVhZHJpbGF0ZXJhbENsYXNzaWZpZXIgeyAgIFxyXG4gICAgcmVhZGluZygpOiBSZWFkaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZXh0UmVhZGluZyhUVChcInRoaXMgaXMgYSBwYXJhbGxlbG9ncmFtLlwiKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSaG9tYnVzQ2xhc3NpZmllciBleHRlbmRzIFBhcmFsbGVsb2dyYW1DbGFzc2lmaWVyIHsgICAgXHJcbiAgICByZWFkaW5nKCk6IFJlYWRpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRleHRSZWFkaW5nKFRUKFwidGhpcyBpcyBhIHJob21idXMuXCIpKTtcclxuICAgIH1cclxufVxyXG5cclxufSIsIm5hbWVzcGFjZSBwbGFuZV90cyB7XHJcbi8vXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGFyYWxsZWxEZXRlY3RvckJ5UGFyYWxsZWxvZ3JhbShsaW5lQSA6IEFic3RyYWN0TGluZSwgbGluZUIgOiBBYnN0cmFjdExpbmUpIDogUGFyYWxsZWxEZXRlY3RvciB8IHVuZGVmaW5lZCB7XHJcbiAgICBjb25zdCBsaW5lcyA9IFtsaW5lQSwgbGluZUJdO1xyXG5cclxuICAgIGZvcihjb25zdCBjbGFzc2lmaWVyIG9mIHBhcmFsbGVsb2dyYW1DbGFzc2lmaWVycyl7XHJcbiAgICAgICAgY29uc3QgcGFyYWxsZWxvZ3JhbSA9IGNsYXNzaWZpZXIucXVhZHJpbGF0ZXJhbCgpO1xyXG4gICAgICAgIGlmKGlzU3ViU2V0KGxpbmVzLCBwYXJhbGxlbG9ncmFtLmxpbmVzKSl7XHJcblxyXG4gICAgICAgICAgICAvLyBtc2coYFBhcmFsbGVsLURldGVjdG9yLUJ5LVBhcmFsbGVsb2dyYW1gKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJhbGxlbERldGVjdG9yKHtcclxuICAgICAgICAgICAgICAgIHJlYXNvbiA6IFBhcmFsbGVsUmVhc29uLnBhcmFsbGVsb2dyYW0sXHJcbiAgICAgICAgICAgICAgICBhdXhpbGlhcnlTaGFwZXMgOiBbcGFyYWxsZWxvZ3JhbV0sXHJcbiAgICAgICAgICAgICAgICBzaGFwZXMgOiBbbGluZUEsIGxpbmVCXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQYXJhbGxlbERldGVjdG9yQnlDb3JyZXNwb25kaW5nQWx0ZXJuYXRlQW5nbGVzRXF1YWwoYW5nbGVBIDogQW5nbGUsIGFuZ2xlQiA6IEFuZ2xlKSA6IFBhcmFsbGVsRGV0ZWN0b3IgfCB1bmRlZmluZWQge1xyXG4gICAgaWYoYW5nbGVBLmludGVyc2VjdGlvbiAhPSBhbmdsZUIuaW50ZXJzZWN0aW9uICYmIGlzRXF1YWxBbmdsZShhbmdsZUEsIGFuZ2xlQikpe1xyXG4gICAgICAgIGxldCBsaW5lQSA6IEFic3RyYWN0TGluZTtcclxuICAgICAgICBsZXQgbGluZUIgOiBBYnN0cmFjdExpbmU7XHJcblxyXG4gICAgICAgIGlmKGFuZ2xlQS5saW5lQSA9PSBhbmdsZUIubGluZUEpe1xyXG4gICAgICAgICAgICBsaW5lQSA9IGFuZ2xlQS5saW5lQjtcclxuICAgICAgICAgICAgbGluZUIgPSBhbmdsZUIubGluZUI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoYW5nbGVBLmxpbmVCID09IGFuZ2xlQi5saW5lQil7XHJcbiAgICAgICAgICAgIGxpbmVBID0gYW5nbGVBLmxpbmVBO1xyXG4gICAgICAgICAgICBsaW5lQiA9IGFuZ2xlQi5saW5lQTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG1zZyhgUGFyYWxsZWwtRGV0ZWN0b3ItQnktQ29ycmVzcG9uZGluZy1BbHRlcm5hdGUtQW5nbGVzLUVxdWFsYCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJhbGxlbERldGVjdG9yKHtcclxuICAgICAgICAgICAgcmVhc29uIDogUGFyYWxsZWxSZWFzb24uY29ycmVzcG9uZGluZ19hbmdsZXNfb3JfYWx0ZXJuYXRlX2FuZ2xlc19hcmVfZXF1YWwsXHJcbiAgICAgICAgICAgIGF1eGlsaWFyeVNoYXBlcyA6IFthbmdsZUEsIGFuZ2xlQl0sXHJcbiAgICAgICAgICAgIHNoYXBlcyA6IFtsaW5lQSwgbGluZUJdXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQYXJhbGxlbERldGVjdG9yQnlTdXBwbGVtZW50YXJ5QW5nbGVzKGFuZ2xlQSA6IEFuZ2xlLCBhbmdsZUIgOiBBbmdsZSkgOiBQYXJhbGxlbERldGVjdG9yIHwgdW5kZWZpbmVkIHtcclxuICAgIGZvcihjb25zdCBbYW5nbGUxLCBhbmdsZTJdIG9mIHBlcm11dGF0aW9uKFthbmdsZUEsIGFuZ2xlQl0pKXtcclxuICAgICAgICBpZihhbmdsZTEubGluZUIgPT0gYW5nbGUyLmxpbmVBICYmIGFuZ2xlMS5kaXJlY3Rpb25CID09IC0gYW5nbGUyLmRpcmVjdGlvbkEpe1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lcyA9IFthbmdsZTEubGluZUEsIGFuZ2xlMi5saW5lQl07XHJcblxyXG4gICAgICAgICAgICAvLyBtc2coYFBhcmFsbGVsLURldGVjdG9yLUJ5LVN1cHBsZW1lbnRhcnktQW5nbGVzYCk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYWxsZWxEZXRlY3Rvcih7XHJcbiAgICAgICAgICAgICAgICByZWFzb24gOiBQYXJhbGxlbFJlYXNvbi5zdXBwbGVtZW50YXJ5X2FuZ2xlcyxcclxuICAgICAgICAgICAgICAgIGF1eGlsaWFyeVNoYXBlcyA6IFthbmdsZTEsIGFuZ2xlMl0sXHJcbiAgICAgICAgICAgICAgICBzaGFwZXMgOiBsaW5lc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9ICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQYXJhbGxlbERldGVjdG9yIGV4dGVuZHMgU3RhdGVtZW50IHtcclxuICAgIHJlYWRpbmcoKTogUmVhZGluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dFJlYWRpbmcoVFQoXCJ0aGVzZSB0d28gbGluZXMgYXJlIHBhcmFsbGVsLlwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UmVsYXRpb25zKCl7XHJcbiAgICAgICAgc3VwZXIuc2V0UmVsYXRpb25zKCk7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc2VsZWN0ZWRTaGFwZXMubGVuZ3RoID09IDIgJiYgdGhpcy5zZWxlY3RlZFNoYXBlcy5ldmVyeSh4ID0+IHggaW5zdGFuY2VvZiBBYnN0cmFjdExpbmUpKTtcclxuICAgICAgICBjb25zdCBbIGxpbmVBLCBsaW5lQiBdID0gdGhpcy5zZWxlY3RlZFNoYXBlcyBhcyBBYnN0cmFjdExpbmVbXTtcclxuICAgICAgICBhZGRQYXJhbGxlbExpbmVzKGxpbmVBLCBsaW5lQik7XHJcbiAgICB9XHJcbn1cclxufSIsIm5hbWVzcGFjZSBwbGFuZV90cyB7XHJcbi8vXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlVHJpYW5nbGVTaW1pbGFyaXR5KEEgOiBUcmlhbmdsZSwgQiA6IFRyaWFuZ2xlKSA6IFRyaWFuZ2xlU2ltaWxhcml0eSB8IHVuZGVmaW5lZCB7XHJcblxyXG4gICAgY29uc3QgZXF1YWxfYW5nbGVfcGFpcnMgOiBBbmdsZVtdID0gW107XHJcblxyXG4gICAgZm9yKGNvbnN0IGlkeCBvZiByYW5nZSgzKSl7XHJcblxyXG4gICAgICAgIGNvbnN0IGFuZ2xlX3BvaW50c0EgPSBbIEEucG9pbnRzW2lkeF0sIEEucG9pbnRzWyhpZHggKyAxKSAlIDNdLCBBLnBvaW50c1soaWR4ICsgMikgJSAzXSBdO1xyXG4gICAgICAgIGNvbnN0IGFuZ2xlX3BvaW50c0IgPSBbIEIucG9pbnRzW2lkeF0sIEIucG9pbnRzWyhpZHggKyAxKSAlIDNdLCBCLnBvaW50c1soaWR4ICsgMikgJSAzXSBdO1xyXG5cclxuICAgICAgICBjb25zdCBhbmdsZUEgPSBmaW5kQW5nbGUoYW5nbGVfcG9pbnRzQSk7XHJcbiAgICAgICAgaWYoYW5nbGVBICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlQiA9IGZpbmRBbmdsZShhbmdsZV9wb2ludHNCKTtcclxuICAgICAgICAgICAgaWYoYW5nbGVCICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihpc0VxdWFsQW5nbGUoYW5nbGVBLCBhbmdsZUIpKXtcclxuICAgICAgICAgICAgICAgICAgICBlcXVhbF9hbmdsZV9wYWlycy5wdXNoKGFuZ2xlQSwgYW5nbGVCKTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYoZXF1YWxfYW5nbGVfcGFpcnMubGVuZ3RoID09IDQpe1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFRyaWFuZ2xlU2ltaWxhcml0eSh7XHJcbiAgICAgICAgICAgIHJlYXNvbiA6IFRyaWFuZ2xlU2ltaWxhcml0eVJlYXNvbi50d29fZXF1YWxfYW5nbGVfcGFpcnMsXHJcbiAgICAgICAgICAgIHNoYXBlcyA6IFtBLCBCXSwgXHJcbiAgICAgICAgICAgIGF1eGlsaWFyeVNoYXBlcyA6IGVxdWFsX2FuZ2xlX3BhaXJzXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVHJpYW5nbGVTaW1pbGFyaXR5IGV4dGVuZHMgU3RhdGVtZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgcmVhc29uPyA6IG51bWJlciwgc2hhcGVzIDogTWF0aEVudGl0eVtdLCBhdXhpbGlhcnlTaGFwZXM/IDogTWF0aEVudGl0eVtdIH0pe1xyXG4gICAgICAgIHN1cGVyKG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZGluZygpOiBSZWFkaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZXh0UmVhZGluZyhUVChcInRoZSB0d28gdHJpYW5nbGVzIGFyZSBzaW1pbGFyLlwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UmVsYXRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLnNldFJlbGF0aW9ucygpO1xyXG4gICAgICAgIGNvbnN0IHRyaWFuZ2xlcyA9IHRoaXMuc2VsZWN0ZWRTaGFwZXMgYXMgVHJpYW5nbGVbXTtcclxuICAgICAgICBhZGRTaW1pbGFyVHJpYW5nbGVzKHRyaWFuZ2xlc1swXSwgdHJpYW5nbGVzWzFdKTtcclxuICAgIH1cclxufVxyXG5cclxufSIsIm5hbWVzcGFjZSBwbGFuZV90cyB7XHJcbi8vXHJcblxyXG5leHBvcnQgY2xhc3MgVHJpYW5nbGVEZXRlY3RvciBleHRlbmRzIFRyaWFuZ2xlUXVhZHJpbGF0ZXJhbERldGVjdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgcmVhc29uPyA6IG51bWJlciwgc2hhcGVzIDogTWF0aEVudGl0eVtdLCBhdXhpbGlhcnlTaGFwZXM/IDogTWF0aEVudGl0eVtdLCBtYXRoVGV4dD8gOiBzdHJpbmcgfSl7XHJcbiAgICAgICAgc3VwZXIob2JqKTtcclxuICAgICAgICBjb25zdCB0cmlhbmdsZSA9IHRoaXMuc2VsZWN0ZWRTaGFwZXNbMF0gYXMgVHJpYW5nbGU7XHJcbiAgICAgICAgYXNzZXJ0KHRyaWFuZ2xlIGluc3RhbmNlb2YgVHJpYW5nbGUpO1xyXG4gICAgICAgIGlmKHRoaXMucmVhc29uID09IElzb3NjZWxlc1RyaWFuZ2xlUmVhc29uLnR3b19zaWRlc19hcmVfZXF1YWwpe1xyXG4gICAgICAgICAgICBpc29zY2VsZXNUcmlhbmdsZS5wdXNoKHRyaWFuZ2xlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZGluZygpOiBSZWFkaW5nIHtcclxuICAgICAgICBzd2l0Y2godGhpcy5yZWFzb24pe1xyXG4gICAgICAgIGNhc2UgSXNvc2NlbGVzVHJpYW5nbGVSZWFzb24udHdvX3NpZGVzX2FyZV9lcXVhbDpcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGV4dFJlYWRpbmcoVFQoXCJUaGUgdHJpYW5nbGUgaXMgYW4gaXNvc2NlbGVzIHRyaWFuZ2xlLlwiKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VJc29zY2VsZXNUcmlhbmdsZURldGVjdG9yKHBvaW50cyA6IFBvaW50W10sIHJlYXNvbiA6IElzb3NjZWxlc1RyaWFuZ2xlUmVhc29uICkgOiBUcmlhbmdsZURldGVjdG9yIHwgdW5kZWZpbmVkIHtcclxuICAgIHN3aXRjaChyZWFzb24pe1xyXG4gICAgY2FzZSBJc29zY2VsZXNUcmlhbmdsZVJlYXNvbi50d29fc2lkZXNfYXJlX2VxdWFsOlxyXG4gICAgICAgIGZvcihjb25zdCBsZW5ndGhfc3ltYm9sX3NldCBvZiBlcXVhbExlbmd0aHMpe1xyXG4gICAgICAgICAgICBjb25zdCBsZW5ndGhfc3ltYm9scyA9IEFycmF5LmZyb20obGVuZ3RoX3N5bWJvbF9zZXQpLmZpbHRlcih4ID0+IHBvaW50cy5pbmNsdWRlcyh4LnBvaW50QSkgJiYgcG9pbnRzLmluY2x1ZGVzKHgucG9pbnRCKSk7XHJcbiAgICAgICAgICAgIGlmKGxlbmd0aF9zeW1ib2xzLmxlbmd0aCA9PSAzKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyaWFuZ2xlID0gVHJpYW5nbGUuZnJvbVBvaW50cyhwb2ludHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVHJpYW5nbGVEZXRlY3Rvcih7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uIDogcmVhc29uLFxyXG4gICAgICAgICAgICAgICAgICAgIGF1eGlsaWFyeVNoYXBlcyA6IGxlbmd0aF9zeW1ib2xzLFxyXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlcyA6IFsgdHJpYW5nbGUgXVxyXG4gICAgICAgICAgICAgICAgfSk7ICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYobGVuZ3RoX3N5bWJvbHMubGVuZ3RoID09IDIpe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9pbnRzX2xpc3QgPSBsZW5ndGhfc3ltYm9scy5tYXAoeCA9PiBbeC5wb2ludEEsIHgucG9pbnRCXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgdmVydGV4X2lkeCA9IHJhbmdlKDMpLmZpbmQoaSA9PiBwb2ludHNfbGlzdC5ldmVyeShwdHMgPT4gcHRzLmluY2x1ZGVzKHBvaW50c1tpXSkpKSE7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQodmVydGV4X2lkeCAhPSB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9pbnRzMiA9IFtwb2ludHNbdmVydGV4X2lkeF0sIHBvaW50c1sodmVydGV4X2lkeCArIDEpICUgM10sIHBvaW50c1sodmVydGV4X2lkeCArIDIpICUgM11dXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmlhbmdsZSA9IFRyaWFuZ2xlLmZyb21Qb2ludHMocG9pbnRzMik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUcmlhbmdsZURldGVjdG9yKHtcclxuICAgICAgICAgICAgICAgICAgICByZWFzb24gOiByZWFzb24sXHJcbiAgICAgICAgICAgICAgICAgICAgYXV4aWxpYXJ5U2hhcGVzIDogbGVuZ3RoX3N5bWJvbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVzIDogWyB0cmlhbmdsZSBdXHJcbiAgICAgICAgICAgICAgICB9KTsgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICAgIFxyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG5cclxuXHJcbn0iLCJuYW1lc3BhY2UgcGxhbmVfdHMge1xyXG4vL1xyXG5cclxuZXhwb3J0IHR5cGUgVGVybSA9IHBhcnNlcl90cy5UZXJtO1xyXG5leHBvcnQgY29uc3QgVGVybSA9IHBhcnNlcl90cy5UZXJtO1xyXG5cclxuZXhwb3J0IHR5cGUgIFJlZlZhciA9IHBhcnNlcl90cy5SZWZWYXI7XHJcbmV4cG9ydCBjb25zdCBSZWZWYXIgPSBwYXJzZXJfdHMuUmVmVmFyO1xyXG5cclxuZXhwb3J0IHR5cGUgQXBwID0gcGFyc2VyX3RzLkFwcDtcclxuZXhwb3J0IGNvbnN0IEFwcCA9IHBhcnNlcl90cy5BcHA7XHJcblxyXG5leHBvcnQgdHlwZSBFcXVhdGlvblRleHRCbG9ja0NsYXNzID0gQW5nbGVFcXVhbGl0eUNvbnN0cmFpbnQgfCBBc3N1bXB0aW9uIHwgRXhwclRyYW5zZm9ybSB8IFNoYXBlRXF1YXRpb247XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNFcXVhdGlvblRleHRCbG9jayh4IDogTWF0aEVudGl0eSB8IHVuZGVmaW5lZCl7XHJcbiAgICBpZih4ID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNsYXNzZXMgPSBbQW5nbGVFcXVhbGl0eUNvbnN0cmFpbnQgLCBBc3N1bXB0aW9uICwgRXhwclRyYW5zZm9ybSAsIFNoYXBlRXF1YXRpb25dO1xyXG4gICAgcmV0dXJuIGNsYXNzZXMuc29tZShjID0+IHggaW5zdGFuY2VvZiBjKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VFcXVhdGlvblRleHRCbG9jayhwYXJlbnQgOiBFcXVhdGlvblRleHRCbG9ja0NsYXNzLCBlcXVhdGlvbiA6IEFwcCkgOiBUZXh0QmxvY2sge1xyXG4gICAgY29uc3QgdmlldyA9IFZpZXcuY3VycmVudDtcclxuXHJcbiAgICBjb25zdCB0ZXh0X2Jsb2NrID0gbmV3IFRleHRCbG9jaygge1xyXG4gICAgICAgIHBhcmVudCxcclxuICAgICAgICB0ZXh0IDogZXF1YXRpb24udGV4KCksXHJcbiAgICAgICAgaXNUZXggOiB0cnVlLFxyXG4gICAgICAgIG9mZnNldCA6IFZlYzIuemVybygpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGV4dF9ibG9jay5zZXRUZXh0UG9zaXRpb24odmlldy50ZXh0QmFzZS54LCB2aWV3LnRleHRCYXNlLnkpO1xyXG4gICAgdGV4dF9ibG9jay51cGRhdGVUZXh0RGl2KCk7XHJcblxyXG4gICAgY29uc3QgcmVjdCA9IHRleHRfYmxvY2suZGl2LmNoaWxkcmVuWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgdmlldy50ZXh0QmFzZS55IC09IHZpZXcuZnJvbVlQaXhTY2FsZShyZWN0LmhlaWdodCArIDEwKTtcclxuXHJcbiAgICByZXR1cm4gdGV4dF9ibG9jaztcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gbWFrZVNoYXBlRXF1YXRpb25CeUVxdWF0aW9uVGV4dChyZWFzb24gOiBTaGFwZUVxdWF0aW9uUmVhc29uLCBhdXhpbGlhcnlTaGFwZXMgOiBNYXRoRW50aXR5W10sIHRleHQgOiBzdHJpbmcpIDogUHJvbWlzZTxTaGFwZUVxdWF0aW9uIHwgdW5kZWZpbmVkPiB7XHJcbiAgICAvLyBtc2coYGFuZ2xlcyBlcTogJHt0ZXh0fWApO1xyXG5cclxuICAgIGNvbnN0IGVxdWF0aW9uID0gcGFyc2VyX3RzLnBhcnNlTWF0aCh0ZXh0KSBhcyBBcHA7XHJcbiAgICBpZighIGVxdWF0aW9uLmlzRXEoKSl7XHJcbiAgICAgICAgbXNnKGBjYW4gbm90IG1ha2UgYW4gZXF1YXRpb246ICR7dGV4dH1gKTtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKFZpZXcuaXNQbGF5QmFjayl7XHJcbiAgICAgICAgY29uc3Qgc3BlZWNoID0gQWJzdHJhY3RTcGVlY2gub25lO1xyXG4gICAgICAgIGF3YWl0IHNwZWFrUmVhc29uKHNwZWVjaCwgcmVhc29uKTtcclxuICAgICAgICBhd2FpdCBzaG93QXV4aWxpYXJ5U2hhcGVzKHJlYXNvbiwgYXV4aWxpYXJ5U2hhcGVzKTtcclxuICAgICAgICBhd2FpdCBzcGVlY2gud2FpdEVuZCgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gbmV3IFNoYXBlRXF1YXRpb24oe1xyXG4gICAgICAgIHJlYXNvbixcclxuICAgICAgICBhdXhpbGlhcnlTaGFwZXMsXHJcbiAgICAgICAgc2hhcGVzIDogW10sXHJcbiAgICAgICAgZXF1YXRpb25cclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1ha2VTdW1PZkFuZ2xlc0lzUGkoYW5nbGVzX2FyZzogQW5nbGVbXSkgOiBQcm9taXNlPFNoYXBlRXF1YXRpb24gfCB1bmRlZmluZWQ+ICB7XHJcbiAgICBjb25zdCBhbmdsZXNfbGlzdCA9IHBlcm11dGF0aW9uKGFuZ2xlc19hcmcpO1xyXG4gICAgZm9yKGNvbnN0IGFuZ2xlcyBvZiBhbmdsZXNfbGlzdCl7XHJcbiAgICAgICAgaWYoIHJhbmdlKGFuZ2xlcy5sZW5ndGggLSAxKS5ldmVyeSggaSA9PiBhbmdsZXNbaV0uY29tbW9uTGluZUJBKGFuZ2xlc1tpICsgMV0pICkgKXtcclxuICAgICAgICAgICAgY29uc3QgW2ZpcnN0X2FuZ2xlLCBsYXN0X2FuZ2xlXSA9IFsgYW5nbGVzWzBdLCBsYXN0KGFuZ2xlcykgXTtcclxuICAgICAgICAgICAgaWYoZmlyc3RfYW5nbGUubGluZUEgPT0gbGFzdF9hbmdsZS5saW5lQiAmJiBmaXJzdF9hbmdsZS5kaXJlY3Rpb25BID09IC0gbGFzdF9hbmdsZS5kaXJlY3Rpb25CKXtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYW5nbGVzLm1hcCh4ID0+IHgubmFtZSkuam9pbihcIiArIFwiKSArIFwiID0gcGlcIjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBtYWtlU2hhcGVFcXVhdGlvbkJ5RXF1YXRpb25UZXh0KFNoYXBlRXF1YXRpb25SZWFzb24uc3VtX29mX2FuZ2xlc19pc19waSwgYW5nbGVzLCB0ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1ha2VTdW1PZkFuZ2xlc0lzRXF1YWwoYW5nbGVzX2FyZzogQW5nbGVbXSkgOiBQcm9taXNlPFNoYXBlRXF1YXRpb24gfCB1bmRlZmluZWQ+ICB7XHJcbiAgICBjaGVjaygzIDw9IGFuZ2xlc19hcmcubGVuZ3RoKTtcclxuICAgIGNvbnN0IGFuZ2xlc19saXN0ID0gcGVybXV0YXRpb24oYW5nbGVzX2FyZyk7XHJcbiAgICBmb3IoY29uc3QgYW5nbGVzIG9mIGFuZ2xlc19saXN0KXtcclxuICAgICAgICBjb25zdCBvdXRlcl9hbmdsZSA9IGFuZ2xlc1swXTtcclxuICAgICAgICBjb25zdCBpbm5lcl9hbmdsZXMgPSBhbmdsZXMuc2xpY2UoMSk7XHJcbiAgICAgICAgaWYob3V0ZXJfYW5nbGUuY29tbW9uTGluZUFBKGlubmVyX2FuZ2xlc1swXSkgJiYgb3V0ZXJfYW5nbGUuY29tbW9uTGluZUJCKGxhc3QoaW5uZXJfYW5nbGVzKSkpe1xyXG4gICAgICAgICAgICBpZihyYW5nZShpbm5lcl9hbmdsZXMubGVuZ3RoIC0gMSkuZXZlcnkoaSA9PiBpbm5lcl9hbmdsZXNbaV0uY29tbW9uTGluZUJBKGlubmVyX2FuZ2xlc1tpICsgMV0pKSl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYCR7b3V0ZXJfYW5nbGUubmFtZX0gPSBgICsgaW5uZXJfYW5nbGVzLm1hcCh4ID0+IHgubmFtZSkuam9pbihcIiArIFwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBtYWtlU2hhcGVFcXVhdGlvbkJ5RXF1YXRpb25UZXh0KFNoYXBlRXF1YXRpb25SZWFzb24uc3VtX29mX2FuZ2xlc19pc19lcXVhbCwgYW5nbGVzLCB0ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFrZVNoYXBlRXF1YXRpb25CeUV4dGVyaW9yQW5nbGVUaGVvcmVtKGFuZ2xlczogQW5nbGVbXSkgOiBQcm9taXNlPFNoYXBlRXF1YXRpb24gfCB1bmRlZmluZWQ+ICB7XHJcbiAgICBmb3IoY29uc3QgW2FuZ2xlMSwgYW5nbGUyLCBhbmdsZTNdIG9mIHBlcm11dGF0aW9uKGFuZ2xlcykpe1xyXG4gICAgICAgIGlmKGFuZ2xlMS5saW5lQSA9PSBhbmdsZTIubGluZUIgJiYgYW5nbGUxLmRpcmVjdGlvbkEgPT0gLSBhbmdsZTIuZGlyZWN0aW9uQil7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVyc2VjdGlvbiA9IGdldENvbW1vblBvaW50T2ZMaW5lcyhhbmdsZTEubGluZUIsIGFuZ2xlMi5saW5lQSk7XHJcbiAgICAgICAgICAgIGlmKGFuZ2xlMy5pbnRlcnNlY3Rpb24gPT0gaW50ZXJzZWN0aW9uKXtcclxuICAgICAgICAgICAgICAgIGlmKGFyZVNldHNFcXVhbChbYW5nbGUxLmxpbmVCLCBhbmdsZTIubGluZUFdLCBbYW5nbGUzLmxpbmVBLCBhbmdsZTMubGluZUJdKSl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBgJHthbmdsZTEubmFtZX0gKyAke2FuZ2xlMi5uYW1lfSA9ICR7YW5nbGUzLm5hbWV9YDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgbWFrZVNoYXBlRXF1YXRpb25CeUVxdWF0aW9uVGV4dChTaGFwZUVxdWF0aW9uUmVhc29uLmV4dGVyaW9yX2FuZ2xlX3RoZW9yZW0sIGFuZ2xlcywgdGV4dCk7ICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYWtlU3VtT2ZUcmlhbmdsZVF1YWRyaWxhdGVyYWxBbmdsZXMoYW5nbGVzOiBBbmdsZVtdLCByZWFzb24gOiBTaGFwZUVxdWF0aW9uUmVhc29uKSA6IFByb21pc2U8U2hhcGVFcXVhdGlvbiB8IHVuZGVmaW5lZD4gIHtcclxuICAgIGxldCBudW1fdmVydGljZXMgOiBudW1iZXI7XHJcbiAgICBsZXQgc3VtX2FuZ2xlcyA6IHN0cmluZztcclxuICAgIGlmKHJlYXNvbiA9PSBTaGFwZUVxdWF0aW9uUmVhc29uLnN1bV9vZl9pbnRlcmlvcl9hbmdsZXNfb2ZfdHJpYW5nbGVfaXNfcGkpe1xyXG4gICAgICAgIG51bV92ZXJ0aWNlcyA9IDM7XHJcbiAgICAgICAgc3VtX2FuZ2xlcyAgID0gXCJwaVwiO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgICBudW1fdmVydGljZXMgPSA0O1xyXG4gICAgICAgIHN1bV9hbmdsZXMgICA9IFwiMiAqIHBpXCI7XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2soYW5nbGVzLmxlbmd0aCA9PSBudW1fdmVydGljZXMpO1xyXG4gICAgY2hlY2soYW5nbGVzLmV2ZXJ5KHggPT4geC5uYW1lICE9IFwiXCIpKTtcclxuXHJcbiAgICBjb25zdCB0ZXh0ID0gYW5nbGVzLm1hcCh4ID0+IHgubmFtZSkuam9pbihcIiArIFwiKSArIFwiID0gXCIgKyBzdW1fYW5nbGVzO1xyXG4gICAgcmV0dXJuIGF3YWl0IG1ha2VTaGFwZUVxdWF0aW9uQnlFcXVhdGlvblRleHQocmVhc29uLCBhbmdsZXMsIHRleHQpO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1ha2VTaGFwZUVxdWF0aW9uKHJlYXNvbiA6IFNoYXBlRXF1YXRpb25SZWFzb24sIHNoYXBlczogU2hhcGVbXSkgOiBQcm9taXNlPFNoYXBlRXF1YXRpb24gfCB1bmRlZmluZWQ+ICB7XHJcbiAgICBzd2l0Y2gocmVhc29uKXtcclxuICAgIGNhc2UgU2hhcGVFcXVhdGlvblJlYXNvbi5zdW1fb2ZfYW5nbGVzX2lzX3BpOlxyXG4gICAgY2FzZSBTaGFwZUVxdWF0aW9uUmVhc29uLnN1bV9vZl9hbmdsZXNfaXNfZXF1YWw6XHJcbiAgICBjYXNlIFNoYXBlRXF1YXRpb25SZWFzb24uZXh0ZXJpb3JfYW5nbGVfdGhlb3JlbTp7XHJcbiAgICAgICAgY2hlY2soc2hhcGVzLmV2ZXJ5KHggPT4geCBpbnN0YW5jZW9mIEFuZ2xlICYmIHgubmFtZSAhPSBcIlwiKSwgVFQoXCJUaGUgc2VsZWN0ZWQgc2hhcGVzIGFyZSBub3QgbmFtZWQgYW5nbGVzLlwiKSk7XHJcbiAgICAgICAgY29uc3QgYW5nbGVzID0gc2hhcGVzIGFzIEFuZ2xlW107XHJcblxyXG4gICAgICAgIGlmKHJlYXNvbiA9PSBTaGFwZUVxdWF0aW9uUmVhc29uLmV4dGVyaW9yX2FuZ2xlX3RoZW9yZW0pe1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgbWFrZVNoYXBlRXF1YXRpb25CeUV4dGVyaW9yQW5nbGVUaGVvcmVtKGFuZ2xlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb25zID0gdW5pcXVlKGFuZ2xlcy5tYXAoeCA9PiBpbnRlcnNlY3Rpb24pKTtcclxuICAgICAgICBpZihpbnRlcnNlY3Rpb25zLmxlbmd0aCAhPSAxKXtcclxuICAgICAgICAgICAgbXNnKFRUKFwiVGhlIHZlcnRpY2VzIG9mIHRoZSBhbmdsZXMgZG8gbm90IG1hdGNoLlwiKSk7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihyZWFzb24gPT0gU2hhcGVFcXVhdGlvblJlYXNvbi5zdW1fb2ZfYW5nbGVzX2lzX3BpKXtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBtYWtlU3VtT2ZBbmdsZXNJc1BpKGFuZ2xlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgbWFrZVN1bU9mQW5nbGVzSXNFcXVhbChhbmdsZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFNoYXBlRXF1YXRpb25SZWFzb24uc3VtX29mX2ludGVyaW9yX2FuZ2xlc19vZl90cmlhbmdsZV9pc19waTpcclxuICAgIGNhc2UgU2hhcGVFcXVhdGlvblJlYXNvbi5zdW1fb2ZfaW50ZXJpb3JfYW5nbGVzX29mX3F1YWRyaWxhdGVyYWxfaXNfMnBpOntcclxuXHJcbiAgICAgICAgYXNzZXJ0KHNoYXBlcy5ldmVyeSh4ID0+IHggaW5zdGFuY2VvZiBQb2ludCkpO1xyXG4gICAgICAgIGNvbnN0IGFuZ2xlcyA9IGZpbmRBbmdsZXNJblBvbHlnb24oc2hhcGVzIGFzIFBvaW50W10pO1xyXG5cclxuICAgICAgICByZXR1cm4gYXdhaXQgbWFrZVN1bU9mVHJpYW5nbGVRdWFkcmlsYXRlcmFsQW5nbGVzKGFuZ2xlcywgcmVhc29uKTtcclxuICAgIH1cclxuXHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRXF1YXRpb25UZXh0QmxvY2sge1xyXG4gICAgZXF1YXRpb24gIDogQXBwO1xyXG4gICAgdGV4dEJsb2NrIDogVGV4dEJsb2NrO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2hhcGVFcXVhdGlvbiBleHRlbmRzIFN0YXRlbWVudCBpbXBsZW1lbnRzIEVxdWF0aW9uVGV4dEJsb2NrIHtcclxuICAgIGVxdWF0aW9uIDogQXBwO1xyXG4gICAgdGV4dEJsb2NrIDogVGV4dEJsb2NrO1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiB7IHJlYXNvbj8gOiBudW1iZXIsIGF1eGlsaWFyeVNoYXBlcz8gOiBNYXRoRW50aXR5W10sIHNoYXBlcyA6IE1hdGhFbnRpdHlbXSwgZXF1YXRpb24gOiBBcHAgfSl7XHJcbiAgICAgICAgc3VwZXIob2JqKTtcclxuICAgICAgICB0aGlzLmVxdWF0aW9uID0gb2JqLmVxdWF0aW9uO1xyXG5cclxuICAgICAgICB0aGlzLnRleHRCbG9jayA9IG1ha2VFcXVhdGlvblRleHRCbG9jayh0aGlzLCB0aGlzLmVxdWF0aW9uKTtcclxuXHJcbiAgICAgICAgaWYodGhpcy5yZWFzb24gPT0gU2hhcGVFcXVhdGlvblJlYXNvbi5zdW1fb2ZfYW5nbGVzX2lzX3BpICYmIHRoaXMuYXV4aWxpYXJ5U2hhcGVzLmxlbmd0aCA9PSAyKXtcclxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMuYXV4aWxpYXJ5U2hhcGVzLmV2ZXJ5KHggPT4geCBpbnN0YW5jZW9mIEFuZ2xlKSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBbYW5nbGUxLCBhbmdsZTJdID0gdGhpcy5hdXhpbGlhcnlTaGFwZXMgYXMgQW5nbGVbXTtcclxuICAgICAgICAgICAgYWRkU3VwcGxlbWVudGFyeUFuZ2xlcyhhbmdsZTEsIGFuZ2xlMik7XHJcbiAgICAgICAgICAgIC8vIG1zZyhgYWRkLVN1cHBsZW1lbnRhcnktQW5nbGVzICR7YW5nbGUxLm5hbWV9ICR7YW5nbGUyLm5hbWV9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZWFkaW5nKCk6IFJlYWRpbmcge1xyXG4gICAgICAgIC8vIG1zZyhgZW1wdHkgcmVhZGluZzoke3RoaXMuY29uc3RydWN0b3IubmFtZX1gKTtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZXh0UmVhZGluZyhUVChcIlwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvdygpeyAgICAgICAgXHJcbiAgICAgICAgdGhpcy50ZXh0QmxvY2suc2hvdygpO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGUoKXsgICAgICAgIFxyXG4gICAgICAgIHRoaXMudGV4dEJsb2NrLmhpZGUoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpbXBsaWZ5RXF1YXRpb25UZXh0QmxvY2soZXFUZXh0IDogRXF1YXRpb25UZXh0QmxvY2spe1xyXG4gICAgY29uc3QgdGV4dEJsb2NrID0gZXFUZXh0LnRleHRCbG9jaztcclxuICAgIGNvbnN0IHNwZWVjaCA9IG5ldyBTcGVlY2goKVxyXG4gICAgZXFUZXh0LmVxdWF0aW9uID0gYXdhaXQgYWxnZWJyYV90cy5zaW1wbGlmeShzcGVlY2gsIHRleHRCbG9jay5kaXYsIGVxVGV4dC5lcXVhdGlvbikgYXMgQXBwO1xyXG5cclxuICAgIHRleHRCbG9jay50ZXh0ID0gZXFUZXh0LmVxdWF0aW9uLnRleCgpO1xyXG4gICAgdGV4dEJsb2NrLnVwZGF0ZVRleHREaXYoKTtcclxuXHJcbiAgICBjaGVja1N1cHBsZW1lbnRhcnlBbmdsZXMoZXFUZXh0LmVxdWF0aW9uKTtcclxuXHJcbn1cclxuXHJcbn0iLCJuYW1lc3BhY2UgcGxhbmVfdHMge1xyXG4vL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFrZUV4cHJUcmFuc2Zvcm1CeVRyYW5zcG9zaXRpb24odGVybSA6IFRlcm0sIHRleHRCbG9jayA6IFRleHRCbG9jaywgc3BlZWNoIDogU3BlZWNoKXtcclxuICAgIGNvbnN0IFtlcXVhdGlvbiwgdGVybV9jcF0gPSB0ZXJtLmNsb25lUm9vdCgpO1xyXG4gICAgYXdhaXQgYWxnZWJyYV90cy50cmFuc3Bvc2UoZXF1YXRpb24sIHRlcm1fY3AsIHRleHRCbG9jay5kaXYsIHNwZWVjaCk7XHJcblxyXG4gICAgY29uc3QgZXhwclRyYW5zZm9ybSA9IG5ldyBFeHByVHJhbnNmb3JtKHtcclxuICAgICAgICByZWFzb24gICA6IEV4cHJUcmFuc2Zvcm1SZWFzb24udHJhbnNwb3NpdGlvbixcclxuICAgICAgICBlcXVhdGlvbiA6IGVxdWF0aW9uLCBcclxuICAgICAgICB0ZXJtcyA6IFt0ZXJtX2NwXVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGV4cHJUcmFuc2Zvcm07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEVxdWFsU2hhcGVzKHJlZnZhcnMgOiBSZWZWYXJbXSl7XHJcbiAgICBjb25zdCBtYXAgPSBuZXcgTWFwPHN0cmluZywgU2hhcGU+KCk7XHJcbiAgICBWaWV3LmN1cnJlbnQuYWxsUmVhbFNoYXBlcygpLmZpbHRlcih4ID0+IHgubmFtZSAhPSBcIlwiKS5mb3JFYWNoKHggPT4gbWFwLnNldCh4Lm5hbWUsIHgpKTtcclxuICAgIGNvbnN0IHJlZl9zaGFwZXMgPSByZWZ2YXJzLm1hcCh4ID0+IG1hcC5nZXQoeC5uYW1lKSkuZmlsdGVyKHggPT4geCAhPSB1bmRlZmluZWQpO1xyXG4gICAgaWYocmVmX3NoYXBlcy5ldmVyeSh4ID0+IHggaW5zdGFuY2VvZiBBbmdsZSkpe1xyXG4gICAgICAgIC8vIG1zZyhgZXEgYW5nbGVzOiR7cmVmX3NoYXBlcy5tYXAoeCA9PiB4Lm5hbWUpLmpvaW4oXCIgPSBcIil9YCk7XHJcbiAgICAgICAgZm9yKGNvbnN0IGkgb2YgcmFuZ2UocmVmX3NoYXBlcy5sZW5ndGggLSAxKSl7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlQSA9IHJlZl9zaGFwZXNbaV0gYXMgQW5nbGU7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlQiA9IHJlZl9zaGFwZXNbaSsxXSBhcyBBbmdsZTtcclxuICAgICAgICAgICAgYWRkRXF1YWxBbmdsZXMoYW5nbGVBLCBhbmdsZUIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLypcclxuICAgIGEgPSBlICwgYiA9IGUg4oeSIGEgPSBiXHJcbiovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYWtlRXhwclRyYW5zZm9ybUJ5RXF1YWxpdHkodGVybXMgOiBUZXJtW10sIHRleHRCbG9ja3MgOiBUZXh0QmxvY2tbXSwgc3BlZWNoIDogU3BlZWNoKSA6IFByb21pc2U8RXhwclRyYW5zZm9ybSB8IHVuZGVmaW5lZD4ge1xyXG4gICAgY29uc3QgcmVmdmFycyA6IFJlZlZhcltdID0gW107XHJcbiAgICBsZXQgICBlcV9leHByIDogVGVybSB8IHVuZGVmaW5lZDsgICAgXHJcbiAgICBsZXQgICByb290cyA6IEFwcFtdID0gW107XHJcblxyXG4gICAgZm9yKGNvbnN0IHRlcm0gb2YgdGVybXMpe1xyXG4gICAgICAgIGNvbnN0IFtlcXVhdGlvbiwgdGVybV9jcF0gPSB0ZXJtLmNsb25lUm9vdCgpO1xyXG4gICAgICAgIGlmKCEodGVybV9jcCBpbnN0YW5jZW9mIFJlZlZhcikpe1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoIWVxdWF0aW9uLmlzRXEoKSB8fCBlcXVhdGlvbi5hcmdzLmxlbmd0aCAhPSAyKXtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRlcm1faWR4ID0gZXF1YXRpb24uYXJncy5pbmRleE9mKHRlcm1fY3ApO1xyXG4gICAgICAgIGlmKHRlcm1faWR4ID09IC0xKXtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGV4cHIgPSBlcXVhdGlvbi5hcmdzWzEgLSB0ZXJtX2lkeF07XHJcbiAgICAgICAgaWYoZXFfZXhwciA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBlcV9leHByID0gZXhwcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgaWYoIWVxX2V4cHIuZXF1YWwoZXhwcikpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVmdmFycy5wdXNoKHRlcm1fY3ApO1xyXG4gICAgICAgIHJvb3RzLnB1c2godGVybS5nZXRSb290KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvcihjb25zdCBbaWR4LCB0ZXJtXSBvZiB0ZXJtcy5lbnRyaWVzKCkpe1xyXG4gICAgICAgIHRlcm0uY29sb3JOYW1lID0gXCJibHVlXCI7XHJcbiAgICAgICAgcmVuZGVyS2F0ZXhTdWIodGV4dEJsb2Nrc1tpZHhdLmRpdiwgcm9vdHNbaWR4XS50ZXgoKSk7XHJcbiAgICB9XHJcbiAgICBhd2FpdCBzbGVlcCgxMDAwKTtcclxuICAgIHJlZnZhcnMuZm9yRWFjaCh4ID0+IHguY29sb3JOYW1lID0gdW5kZWZpbmVkKTtcclxuXHJcbiAgICBjb25zdCB0ZXh0ID0gcmVmdmFycy5tYXAoeCA9PiB4Lm5hbWUpLmpvaW4oXCIgPSBcIik7XHJcbiAgICBjb25zdCBlcXVhdGlvbiA9IHBhcnNlcl90cy5wYXJzZU1hdGgodGV4dCkgYXMgQXBwO1xyXG5cclxuICAgIHNldEVxdWFsU2hhcGVzKHJlZnZhcnMpO1xyXG5cclxuICAgIGNvbnN0IGV4cHJUcmFuc2Zvcm0gPSBuZXcgRXhwclRyYW5zZm9ybSh7XHJcbiAgICAgICAgcmVhc29uICAgOiBFeHByVHJhbnNmb3JtUmVhc29uLmVxdWFsaXR5LFxyXG4gICAgICAgIGVxdWF0aW9uIDogZXF1YXRpb24sIFxyXG4gICAgICAgIHRlcm1zIDogcmVmdmFyc1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGV4cHJUcmFuc2Zvcm07XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYWtlRXhwclRyYW5zZm9ybUJ5QWRkRXF1YXRpb24odGVybXMgOiBUZXJtW10sIHRleHRCbG9ja3MgOiBUZXh0QmxvY2tbXSwgc3BlZWNoIDogU3BlZWNoKSA6IFByb21pc2U8RXhwclRyYW5zZm9ybSB8IHVuZGVmaW5lZD4ge1xyXG4gICAgY29uc3QgZGl2cyA9IHRleHRCbG9ja3MubWFwKHggPT4geC5kaXYpO1xyXG4gICAgY29uc3QgZXF1YXRpb24gPSBhd2FpdCBhbGdlYnJhX3RzLmFkZEVxdWF0aW9ucyh0ZXJtcywgZGl2cywgc3BlZWNoKTtcclxuXHJcbiAgICBjb25zdCBleHByVHJhbnNmb3JtID0gbmV3IEV4cHJUcmFuc2Zvcm0oe1xyXG4gICAgICAgIHJlYXNvbiAgIDogRXhwclRyYW5zZm9ybVJlYXNvbi5hZGRfZXF1YXRpb24sXHJcbiAgICAgICAgZXF1YXRpb24gOiBlcXVhdGlvbiwgXHJcbiAgICAgICAgdGVybXNcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBleHByVHJhbnNmb3JtO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFrZUV4cHJUcmFuc2Zvcm1CeVN1YnN0aXR1dGlvbih0ZXJtcyA6IFRlcm1bXSwgdGV4dEJsb2NrcyA6IFRleHRCbG9ja1tdLCBzcGVlY2ggOiBTcGVlY2gpIDogUHJvbWlzZTxFeHByVHJhbnNmb3JtIHwgdW5kZWZpbmVkPiB7XHJcbiAgICBjb25zdCBlcXVhdGlvbiA9IGF3YWl0IGFsZ2VicmFfdHMuc3Vic3RpdHV0ZSh0ZXJtc1swXSwgdGVybXNbMV0sIHRleHRCbG9ja3NbMF0uZGl2LCB0ZXh0QmxvY2tzWzFdLmRpdiwgc3BlZWNoKTtcclxuXHJcbiAgICBjb25zdCBleHByVHJhbnNmb3JtID0gbmV3IEV4cHJUcmFuc2Zvcm0oe1xyXG4gICAgICAgIHJlYXNvbiAgIDogRXhwclRyYW5zZm9ybVJlYXNvbi5zdWJzdGl0dXRpb24sXHJcbiAgICAgICAgZXF1YXRpb24gOiBlcXVhdGlvbiwgXHJcbiAgICAgICAgdGVybXNcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBleHByVHJhbnNmb3JtO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFrZUV4cHJUcmFuc2Zvcm1CeURpdmlkaW5nRXF1YXRpb24ocm9vdCA6IEFwcCwgbWF0aFRleHQgOiBzdHJpbmcsIHRleHRCbG9jayA6IFRleHRCbG9jaywgc3BlZWNoIDogU3BlZWNoKSA6IFByb21pc2U8RXhwclRyYW5zZm9ybSB8IHVuZGVmaW5lZD4ge1xyXG4gICAgY29uc3QgdGVybSA9IHBhcnNlcl90cy5wYXJzZU1hdGgobWF0aFRleHQpO1xyXG4gICAgY29uc3QgZXF1YXRpb24gPSBhd2FpdCBhbGdlYnJhX3RzLmRpdmlkZUVxdWF0aW9uKHJvb3QsIHRlcm0sIHRleHRCbG9jay5kaXYsIHNwZWVjaCk7XHJcblxyXG4gICAgY29uc3QgZXhwclRyYW5zZm9ybSA9IG5ldyBFeHByVHJhbnNmb3JtKHtcclxuICAgICAgICByZWFzb24gICA6IEV4cHJUcmFuc2Zvcm1SZWFzb24uZGl2aWRpbmdfZXF1YXRpb24sXHJcbiAgICAgICAgZXF1YXRpb24sIFxyXG4gICAgICAgIHRlcm1zICAgIDogW3Jvb3QsIHRlcm1dXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZXhwclRyYW5zZm9ybTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYWtlRXhwclRyYW5zZm9ybUJ5QXJnU2hpZnQodGVybSA6IFRlcm0sIHNoaWZ0IDogbnVtYmVyLCB0ZXh0QmxvY2sgOiBUZXh0QmxvY2ssIHNwZWVjaCA6IFNwZWVjaCkgOiBQcm9taXNlPEV4cHJUcmFuc2Zvcm0gfCB1bmRlZmluZWQ+IHtcclxuICAgIGNvbnN0IGVxdWF0aW9uID0gdGVybS5nZXRSb290KCk7XHJcblxyXG4gICAgY29uc3QgZXhwclRyYW5zZm9ybSA9IG5ldyBFeHByVHJhbnNmb3JtKHtcclxuICAgICAgICByZWFzb24gICA6IEV4cHJUcmFuc2Zvcm1SZWFzb24uYXJnX3NoaWZ0LFxyXG4gICAgICAgIGVxdWF0aW9uIDogZXF1YXRpb24sIFxyXG4gICAgICAgIHRlcm1zICAgIDogW3Rlcm1dXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZXhwclRyYW5zZm9ybTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBFeHByVHJhbnNmb3JtIGV4dGVuZHMgTWF0aEVudGl0eSBpbXBsZW1lbnRzIEVxdWF0aW9uVGV4dEJsb2NrIHtcclxuICAgIHJlYXNvbiA6IEV4cHJUcmFuc2Zvcm1SZWFzb247XHJcbiAgICBlcXVhdGlvbiA6IEFwcDtcclxuICAgIHRlcm1zIDogVGVybVtdO1xyXG4gICAgdGV4dEJsb2NrIDogVGV4dEJsb2NrO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9iaiA6IHsgcmVhc29uIDogRXhwclRyYW5zZm9ybVJlYXNvbiwgZXF1YXRpb24gOiBBcHAsIHRlcm1zIDogVGVybVtdfSApe1xyXG4gICAgICAgIHN1cGVyKG9iaik7XHJcbiAgICAgICAgdGhpcy5yZWFzb24gICA9IG9iai5yZWFzb247XHJcbiAgICAgICAgdGhpcy5lcXVhdGlvbiA9IG9iai5lcXVhdGlvbjtcclxuICAgICAgICB0aGlzLnRlcm1zICAgID0gb2JqLnRlcm1zO1xyXG4gICAgICAgIHRoaXMudGV4dEJsb2NrID0gbWFrZUVxdWF0aW9uVGV4dEJsb2NrKHRoaXMsIHRoaXMuZXF1YXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFByb3BlcnRpZXMoKXtcclxuICAgICAgICByZXR1cm4gc3VwZXIuZ2V0UHJvcGVydGllcygpLmNvbmNhdChbXHJcbiAgICAgICAgICAgIFwicmVhc29uXCIsIFwiZXF1YXRpb25cIiwgXCJ0ZXJtc1wiXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsU2hhcGVzKHNoYXBlcyA6IE1hdGhFbnRpdHlbXSl7XHJcbiAgICAgICAgc3VwZXIuZ2V0QWxsU2hhcGVzKHNoYXBlcyk7XHJcbiAgICAgICAgc2hhcGVzLnB1c2godGhpcy50ZXh0QmxvY2spO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRpbmcoKSA6IFJlYWRpbmcge1xyXG4gICAgICAgIC8vIG1zZyhgZW1wdHkgcmVhZGluZzoke3RoaXMuY29uc3RydWN0b3IubmFtZX1gKTtcclxuICAgICAgICByZXR1cm4gbmV3IFJlYWRpbmcodGhpcywgXCJcIiwgW10pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNwZWFrRXhwclRyYW5zZm9ybShzcGVlY2ggOiBpMThuX3RzLkFic3RyYWN0U3BlZWNoKXtcclxuICAgICAgICBjb25zdCB0ZXh0ID0gcmVhc29uTXNnKHRoaXMucmVhc29uKTtcclxuXHJcbiAgICAgICAgYXdhaXQgc3BlZWNoLnNwZWFrKHRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKXsgICAgICAgIFxyXG4gICAgICAgIHRoaXMudGV4dEJsb2NrLnNob3coKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlKCl7ICAgICAgICBcclxuICAgICAgICB0aGlzLnRleHRCbG9jay5oaWRlKCk7XHJcbiAgICB9XHJcbn1cclxufSIsIm5hbWVzcGFjZSBwbGFuZV90cyB7XHJcbi8vXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBQcm9wb3NpdGlvbiBleHRlbmRzIFN0YXRlbWVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvYmogOiB7IHJlYXNvbj8gOiBudW1iZXIsIGF1eGlsaWFyeVNoYXBlcz8gOiBNYXRoRW50aXR5W10sIHNoYXBlcyA6IE1hdGhFbnRpdHlbXSB9KXtcclxuICAgICAgICBzdXBlcihvYmopO1xyXG5cclxuICAgICAgICBwcm9wb3NpdGlvbnMucHVzaCh0aGlzKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNoYXBlUHJvcG9zaXRpb24gZXh0ZW5kcyBTdGF0ZW1lbnQge1xyXG4gICAgY29uc3RydWN0b3Iob2JqIDogeyByZWFzb24/IDogbnVtYmVyLCBhdXhpbGlhcnlTaGFwZXM/IDogTWF0aEVudGl0eVtdLCBzaGFwZXMgOiBNYXRoRW50aXR5W10gfSl7XHJcbiAgICAgICAgc3VwZXIob2JqKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVxdWF0aW9uUHJvcG9zaXRpb24gZXh0ZW5kcyBTdGF0ZW1lbnQgaW1wbGVtZW50cyBFcXVhdGlvblRleHRCbG9jayB7XHJcbiAgICBlcXVhdGlvbiAgOiBBcHA7XHJcbiAgICB0ZXh0QmxvY2sgOiBUZXh0QmxvY2s7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob2JqIDogeyByZWFzb24/IDogbnVtYmVyLCBhdXhpbGlhcnlTaGFwZXM/IDogTWF0aEVudGl0eVtdLCBzaGFwZXMgOiBNYXRoRW50aXR5W10sIGVxdWF0aW9uIDogQXBwIH0pe1xyXG4gICAgICAgIHN1cGVyKG9iaik7XHJcblxyXG4gICAgICAgIHRoaXMuZXF1YXRpb24gPSBvYmouZXF1YXRpb247XHJcblxyXG4gICAgICAgIGFzc2VydCh0aGlzLnNlbGVjdGVkU2hhcGVzLmxlbmd0aCA9PSAxICYmIHRoaXMuc2VsZWN0ZWRTaGFwZXNbMF0gaW5zdGFuY2VvZiBUZXh0QmxvY2spO1xyXG4gICAgICAgIHRoaXMudGV4dEJsb2NrID0gdGhpcy5zZWxlY3RlZFNoYXBlc1swXSBhcyBUZXh0QmxvY2s7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlU2hhcGVQcm9wb3NpdGlvbihyZWFzb24gOiBQcm9wb3NpdGlvblJlYXNvbiwgc2hhcGVzOiAoQW5nbGUgfCBMZW5ndGhTeW1ib2wpW10pIDogU2hhcGVQcm9wb3NpdGlvbiB7XHJcbiAgICByZXR1cm4gbmV3IFNoYXBlUHJvcG9zaXRpb24oe1xyXG4gICAgICAgIHJlYXNvbixcclxuICAgICAgICBhdXhpbGlhcnlTaGFwZXMgOiBbXSxcclxuICAgICAgICBzaGFwZXMsXHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlRXF1YXRpb25Qcm9wb3NpdGlvbihyZWFzb24gOiBQcm9wb3NpdGlvblJlYXNvbiwgbWF0aFRleHQgOiBzdHJpbmcpIDogRXF1YXRpb25Qcm9wb3NpdGlvbiB8IHVuZGVmaW5lZCB7XHJcbiAgICBjb25zdCBlcXVhdGlvbiA9IHBhcnNlcl90cy5wYXJzZU1hdGgobWF0aFRleHQpIGFzIEFwcDtcclxuICAgIGFzc2VydChlcXVhdGlvbi5pc1Jvb3RFcSgpKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IEVxdWF0aW9uUHJvcG9zaXRpb24oe1xyXG4gICAgICAgIHJlYXNvbixcclxuICAgICAgICBhdXhpbGlhcnlTaGFwZXMgOiBbXSxcclxuICAgICAgICBzaGFwZXMgOiBbXSxcclxuICAgICAgICBlcXVhdGlvblxyXG4gICAgfSk7XHJcbn1cclxuXHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCJpbmZlcmVuY2UudHNcIiAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9XCJkZWR1Y3Rpb24vbGVuZ3RoX2VxdWFsaXR5LnRzXCIgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiZGVkdWN0aW9uL2FuZ2xlX2VxdWFsaXR5LnRzXCIgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiZGVkdWN0aW9uL3F1YWRyaWxhdGVyYWwudHNcIiAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9XCJkZWR1Y3Rpb24vcGFyYWxsZWxfZGV0ZWN0b3IudHNcIiAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9XCJkZWR1Y3Rpb24vdHJpYW5nbGVfc2ltaWxhcml0eS50c1wiIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cImRlZHVjdGlvbi90cmlhbmdsZV9kZXRlY3Rvci50c1wiIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cImRlZHVjdGlvbi9zaGFwZV9lcXVhdGlvbi50c1wiIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cImRlZHVjdGlvbi9leHByX3RyYW5zZm9ybS50c1wiIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cImRlZHVjdGlvbi9wcm9wb3NpdGlvbi50c1wiIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cImNvbnN0cmFpbnQudHNcIiAvPlxyXG5cclxubmFtZXNwYWNlIHBsYW5lX3RzIHtcclxuLy9cclxuXHJcbmZ1bmN0aW9uIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcgOiBWaWV3LCBzaGFwZSA6IE1hdGhFbnRpdHkpe1xyXG4gICAgdmlldy5hZGRTaGFwZShzaGFwZSk7XHJcbiAgICBzaGFwZS5zZXRSZWxhdGlvbnMoKTtcclxufVxyXG5cclxuYWJzdHJhY3QgY2xhc3Mgc2hhcGVzU2VsZWN0b3J7XHJcbiAgICBudW1TaGFwZXMgOiBudW1iZXI7XHJcbiAgICBzaGFwZXMgICAgIDogU2hhcGVbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG51bVNoYXBlcyA6IG51bWJlcil7XHJcbiAgICAgICAgdGhpcy5udW1TaGFwZXMgPSBudW1TaGFwZXM7XHJcbiAgICB9XHJcblxyXG4gICAgYWJzdHJhY3QgaXNJbnN0YW5jZW9mKHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpIDogYm9vbGVhbjtcclxuXHJcbiAgICBjbGVhcigpe1xyXG4gICAgICAgIHRoaXMuc2hhcGVzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY2xpY2sodmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgaWYodGhpcy5pc0luc3RhbmNlb2Yoc2hhcGUpKXtcclxuICAgICAgICAgICAgdGhpcy5zaGFwZXMucHVzaChzaGFwZSBhcyBTaGFwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdUb29sKHZpZXcgOiBWaWV3KXsgIFxyXG4gICAgICAgIHRoaXMuc2hhcGVzLmZvckVhY2goeCA9PiB4LmRyYXcoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZG9uZSgpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhcGVzLmxlbmd0aCA9PSB0aGlzLm51bVNoYXBlcztcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgTGluZXNTZWxlY3RvciBleHRlbmRzIHNoYXBlc1NlbGVjdG9yIHtcclxuICAgIGlzSW5zdGFuY2VvZihzaGFwZSA6IFNoYXBlIHwgdW5kZWZpbmVkKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBzaGFwZSBpbnN0YW5jZW9mIEFic3RyYWN0TGluZTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQ2lyY2xlQXJjc1NlbGVjdG9yIGV4dGVuZHMgc2hhcGVzU2VsZWN0b3Ige1xyXG4gICAgaXNJbnN0YW5jZW9mKHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHNoYXBlIGluc3RhbmNlb2YgQ2lyY2xlQXJjO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQb2x5Z29uc1NlbGVjdG9yIHtcclxuICAgIG51bVZlcnRpY2VzIDogbnVtYmVyO1xyXG4gICAgcG9pbnRzICA6IFBvaW50W10gPSBbXTtcclxuICAgIHBvbHlnb24/IDogUG9seWdvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihudW1WZXJ0aWNlcyA6IG51bWJlcil7XHJcbiAgICAgICAgdGhpcy5udW1WZXJ0aWNlcyA9IG51bVZlcnRpY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCl7XHJcbiAgICAgICAgdGhpcy5wb2ludHMgICAgPSBbXTtcclxuICAgICAgICB0aGlzLnBvbHlnb24gID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIGlmKHNoYXBlIGluc3RhbmNlb2YgUG9pbnQpe1xyXG4gICAgICAgICAgICBzaGFwZS5zZXRNb2RlKE1vZGUuZGVwZW5kKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucG9pbnRzLnB1c2goc2hhcGUpO1xyXG4gICAgICAgICAgICBpZih0aGlzLnBvaW50cy5sZW5ndGggPT0gdGhpcy5udW1WZXJ0aWNlcyl7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5udW1WZXJ0aWNlcyA9PSAzKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2x5Z29uID0gbmV3IFRyaWFuZ2xlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzIDogdGhpcy5wb2ludHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzIDogW11cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYodGhpcy5udW1WZXJ0aWNlcyA9PSA0KXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvbHlnb24gPSBuZXcgUXVhZHJpbGF0ZXJhbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cyA6IHRoaXMucG9pbnRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lcyA6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1Rvb2wodmlldyA6IFZpZXcpeyAgXHJcbiAgICAgICAgVmlldy5jdXJyZW50LmNhbnZhcy5kcmF3UGFydGlhbFBvbHlnb24odGhpcy5wb2ludHMsIE1vZGUuZGVwZW5kKTtcclxuICAgIH1cclxuXHJcbiAgICBkb25lKCkgOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb2x5Z29uICE9IHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgVHJpYW5nbGVQYWlyU2VsZWN0b3Ige1xyXG4gICAgc2VsZWN0b3IgPSBuZXcgUG9seWdvbnNTZWxlY3RvcigzKTtcclxuICAgIHRyaWFuZ2xlQT8gOiBUcmlhbmdsZTtcclxuICAgIHRyaWFuZ2xlQj8gOiBUcmlhbmdsZTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHRoaXMuc2VsZWN0b3JcclxuICAgIH1cclxuXHJcbiAgICB0cmlhbmdsZXMoKSA6IFtUcmlhbmdsZSwgVHJpYW5nbGVdIHtcclxuICAgICAgICByZXR1cm4gWyB0aGlzLnRyaWFuZ2xlQSEsIHRoaXMudHJpYW5nbGVCISBdO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCl7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rvci5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMudHJpYW5nbGVBID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMudHJpYW5nbGVCID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIHRoaXMuc2VsZWN0b3IuY2xpY2sodmlldywgcG9zaXRpb24sIHNoYXBlKTtcclxuICAgICAgICBpZih0aGlzLnNlbGVjdG9yLmRvbmUoKSl7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0b3IucG9seWdvbiEuc2V0TW9kZShNb2RlLmRlcGVuZCk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMudHJpYW5nbGVBID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWFuZ2xlQSA9IHRoaXMuc2VsZWN0b3IucG9seWdvbiBhcyBUcmlhbmdsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMudHJpYW5nbGVCID0gdGhpcy5zZWxlY3Rvci5wb2x5Z29uIGFzIFRyaWFuZ2xlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdG9yLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSAgICBcclxuXHJcbiAgICBkb25lKCkgOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50cmlhbmdsZUEgIT0gdW5kZWZpbmVkICYmIHRoaXMudHJpYW5nbGVCICE9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3VG9vbCh2aWV3IDogVmlldyl7ICBcclxuICAgICAgICB0aGlzLnNlbGVjdG9yLmRyYXdUb29sKHZpZXcpO1xyXG4gICAgICAgIFt0aGlzLnRyaWFuZ2xlQSwgdGhpcy50cmlhbmdsZUJdLmZpbHRlcih4ID0+IHggIT0gdW5kZWZpbmVkKS5mb3JFYWNoKHggPT4geC5kcmF3KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFyZUNvbmdydWVudFRyaWFuZ2xlcygpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYodGhpcy50cmlhbmdsZUEgIT0gdW5kZWZpbmVkICYmIHRoaXMudHJpYW5nbGVCICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyaWFuZ2xlQS5pc0NvbmdydWVudCh0aGlzLnRyaWFuZ2xlQik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBRdWFkcmlsYXRlcmFsU2VsZWN0b3IgZXh0ZW5kcyBQb2x5Z29uc1NlbGVjdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgc3VwZXIoNCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBsZXQgbGluZXNTZWxlY3Rvcl8yID0gbmV3IExpbmVzU2VsZWN0b3IoMik7XHJcbmV4cG9ydCBsZXQgY2lyY2xlQXJjc1NlbGVjdG9yID0gbmV3IENpcmNsZUFyY3NTZWxlY3RvcigyKTtcclxuZXhwb3J0IGxldCBxdWFkcmlsYXRlcmFsU2VsZWN0b3IgPSBuZXcgUXVhZHJpbGF0ZXJhbFNlbGVjdG9yKCk7XHJcblxyXG5leHBvcnQgY2xhc3MgQnVpbGRlciB7XHJcbiAgICBzdGF0aWMgdG9vbE5hbWUgOiBzdHJpbmc7XHJcbiAgICBzdGF0aWMgdG9vbCA6IEJ1aWxkZXI7XHJcblxyXG4gICAgZG9uZSA6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgc2V0VG9vbEJ5TmFtZSh0b29sX25hbWUgOiBzdHJpbmcsIHJlY29yZF9vcGVyYXRpb24gOiBib29sZWFuKXtcclxuICAgICAgICBCdWlsZGVyLnRvb2xOYW1lID0gdG9vbF9uYW1lO1xyXG4gICAgICAgIEJ1aWxkZXIudG9vbCA9IG1ha2VUb29sQnlUeXBlKHRvb2xfbmFtZSk7XHJcblxyXG4gICAgICAgIGlmKHJlY29yZF9vcGVyYXRpb24pe1xyXG4gICAgICAgICAgICBpZih0b29sX25hbWUgIT0gXCJTZWxlY3Rpb25Ub29sXCIgJiYgdG9vbF9uYW1lICE9IFwiUmFuZ2VUb29sXCIpe1xyXG4gICAgICAgICAgICAgICAgVmlldy5jdXJyZW50LmFkZE9wZXJhdGlvbihuZXcgVG9vbFNlbGVjdGlvbih0b29sX25hbWUpKVxyXG4gICAgICAgICAgICB9ICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgQnVpbGRlci50b29sLmluaXQoKTtcclxuICAgICAgICBpZih0b29sX25hbWUgPT0gXCJSYW5nZVRvb2xcIil7XHJcbiAgICAgICAgICAgIG1zZyhgZHVtcDpcXG4ke1ZpZXcuY3VycmVudC5vcGVyYXRpb25zLm1hcCh4ID0+IHguZHVtcCgpKS5qb2luKFwiXFxuXCIpfWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc2V0VG9vbEJ5U2hhcGUoc2hhcGUgOiBTdGF0ZW1lbnQpe1xyXG4gICAgICAgIGlmKHNoYXBlIGluc3RhbmNlb2YgVHJpYW5nbGVDb25ncnVlbmNlKXtcclxuXHJcbiAgICAgICAgICAgIG1zZyhcInNldCBUcmlhbmdsZSBDb25ncnVlbmNlIEJ1aWxkZXJcIik7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIudG9vbCA9IG5ldyBUcmlhbmdsZUNvbmdydWVuY2VCdWlsZGVyKHNoYXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihzaGFwZSBpbnN0YW5jZW9mIExlbmd0aEVxdWFsaXR5KXtcclxuXHJcbiAgICAgICAgICAgIG1zZyhcInNldCBFcXVhbCBMZW5ndGggQnVpbGRlclwiKTtcclxuICAgICAgICAgICAgQnVpbGRlci50b29sID0gbmV3IExlbmd0aEVxdWFsaXR5QnVpbGRlcihzaGFwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICBtc2coXCJzZXQgU3RhdGVtZW50IEJ1aWxkZXJcIik7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIudG9vbCA9IG5ldyBTdGF0ZW1lbnRCdWlsZGVyKHNoYXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFzeW5jIGJ1aWxkZXJSZXNldFRvb2wodmlldyA6IFZpZXcpe1xyXG4gICAgICAgIHdoaWxlKHZpZXcub3BlcmF0aW9ucy5sZW5ndGggIT0gMCl7XHJcbiAgICAgICAgICAgIGlmKGxhc3Qodmlldy5vcGVyYXRpb25zKSBpbnN0YW5jZW9mIFRvb2xTZWxlY3Rpb24pe1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmlldy5vcGVyYXRpb25zLnBvcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2aWV3Lm9wZXJhdGlvbnMuZm9yRWFjaCh4ID0+IG1zZyh4LmR1bXAoKSkpO1xyXG5cclxuICAgICAgICBCdWlsZGVyLnRvb2wucmVzZXRUb29sKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYXdhaXQgQnVpbGRlci5zZXRUb29sQnlOYW1lKEJ1aWxkZXIudG9vbE5hbWUsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY2FuY2VsVG9vbCgpe1xyXG4gICAgICAgIGNvbnN0IHZpZXcgPSBWaWV3LmN1cnJlbnQ7XHJcbiAgICAgICAgd2hpbGUodmlldy5vcGVyYXRpb25zLmxlbmd0aCAhPSAwKXtcclxuICAgICAgICAgICAgY29uc3QgbGFzdF9vcGVyYXRpb24gPSBsYXN0KHZpZXcub3BlcmF0aW9ucyk7XHJcbiAgICAgICAgICAgIGlmKGxhc3Rfb3BlcmF0aW9uIGluc3RhbmNlb2YgVG9vbFNlbGVjdGlvbil7XHJcbiAgICAgICAgICAgICAgICBtc2coYGNhbmNlbCB0b29sOiR7bGFzdF9vcGVyYXRpb24udG9vbE5hbWV9YCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2aWV3Lm9wZXJhdGlvbnMucG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGluaXQoKXsgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpeyAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZmluaXNoKHZpZXcgOiBWaWV3KXtcclxuICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHBvaW50ZXJkb3duKGV2ZW50IDogUG9pbnRlckV2ZW50LCB2aWV3IDogVmlldywgcG9zaXRpb24gOiBWZWMyLCBzaGFwZSA6IFNoYXBlIHwgdW5kZWZpbmVkKXtcclxuICAgIH1cclxuXHJcbiAgICBwb2ludGVybW92ZShldmVudCA6IFBvaW50ZXJFdmVudCwgdmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7XHJcbiAgICB9XHJcblxyXG4gICAgcG9pbnRlcnVwKGV2ZW50IDogUG9pbnRlckV2ZW50LCB2aWV3IDogVmlldywgcG9zaXRpb24gOiBWZWMyLCBzaGFwZSA6IFNoYXBlIHwgdW5kZWZpbmVkKXtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQb3NpdGlvbihwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpIDogVmVjMiB7XHJcbiAgICAgICAgaWYoc2hhcGUgaW5zdGFuY2VvZiBQb2ludCl7XHJcbiAgICAgICAgICAgIHJldHVybiBzaGFwZS5wb3NpdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIHBvc2l0aW9uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtYWtlUG9pbnRPbkNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpIDogUG9pbnQge1xyXG4gICAgICAgIGlmKHNoYXBlIGluc3RhbmNlb2YgUG9pbnQpe1xyXG4gICAgICAgICAgICByZXR1cm4gc2hhcGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gUG9pbnQuZnJvbUFyZ3MocG9zaXRpb24pO1xyXG4gICAgICAgICAgICBpZihzaGFwZSBpbnN0YW5jZW9mIEFic3RyYWN0TGluZSB8fCBzaGFwZSBpbnN0YW5jZW9mIENpcmNsZUFyYyl7XHJcblxyXG4gICAgICAgICAgICAgICAgcG9pbnQuc2V0Qm91bmQoc2hhcGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZih2aWV3Lm9wZXJhdGlvbnMubGVuZ3RoICE9IDApe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdF9vcGVyYXRpb24gPSBsYXN0KHZpZXcub3BlcmF0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICBpZihsYXN0X29wZXJhdGlvbiBpbnN0YW5jZW9mIENsaWNrU2hhcGUgJiYgbGFzdF9vcGVyYXRpb24ucG9zaXRpb24gPT09IHBvc2l0aW9uKXtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0X29wZXJhdGlvbi5jcmVhdGVkUG9pbnQgPSBwb2ludDtcclxuICAgICAgICAgICAgICAgICAgICAvLyBtc2coYHBvaW50IGlzIGNyZWF0ZWQuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHBvaW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3VG9vbCh2aWV3IDogVmlldyl7ICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBkcmF3UGVuZGluZ1NoYXBlKHNoYXBlIDogU2hhcGUpe1xyXG4gICAgICAgIGNvbnN0IHNoYXBlcyA6IFNoYXBlW10gPSBbXTtcclxuICAgICAgICBzaGFwZS5nZXRBbGxTaGFwZXMoc2hhcGVzKTtcclxuICAgICAgICBzaGFwZXMuZm9yRWFjaCh4ID0+IHguZHJhdygpKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldFRvb2woc2hhcGUgOiBNYXRoRW50aXR5IHwgdW5kZWZpbmVkKXtcclxuICAgICAgICBpZihWaWV3LmN1cnJlbnQub3BlcmF0aW9ucy5sZW5ndGggIT0gMCl7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3Rfb3BlcmF0aW9uID0gbGFzdChWaWV3LmN1cnJlbnQub3BlcmF0aW9ucyk7XHJcbiAgICAgICAgICAgIGxhc3Rfb3BlcmF0aW9uLnNoYXBlc0xlbmd0aCA9IFZpZXcuY3VycmVudC5zaGFwZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICBsYXN0X29wZXJhdGlvbi5yZWxhdGlvbkxvZ3NMZW5ndGggPSBWaWV3LmN1cnJlbnQucmVsYXRpb25Mb2dzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgVmlldy5jdXJyZW50LnJlc2V0TW9kZSgpO1xyXG5cclxuICAgICAgICBpZihzaGFwZSAhPSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgc2hvd1Byb3BlcnR5KHNoYXBlLCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZG9uZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcGVuZGluZ1NoYXBlcygpIDogU2hhcGVbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2VsZWN0aW9uVG9vbCBleHRlbmRzIEJ1aWxkZXIge1xyXG4gICAgZG93bk9mZnNldCA6IFZlYzIgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgc2VsZWN0ZWRTaGFwZSA6IFNoYXBlIHwgdW5kZWZpbmVkO1xyXG4gICAgbWluU2F2ZSA6IFZlYzIgfCB1bmRlZmluZWQ7XHJcbiAgICBtYXhTYXZlIDogVmVjMiB8IHVuZGVmaW5lZDtcclxuICAgIG9sZFBvc2l0aW9uPyA6IFZlYzI7XHJcblxyXG4gICAgYXN5bmMgY2xpY2sodmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7IFxyXG4gICAgICAgIG1zZyhgc2VsZWN0aW9uIGNsaWNrOiR7cG9zaXRpb259YCk7XHJcbiAgICAgICAgdGhpcy5yZXNldFRvb2wodW5kZWZpbmVkKTtcclxuICAgICAgICBpZihzaGFwZSAhPSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgc2hhcGUuc2V0TW9kZShNb2RlLnRhcmdldCk7XHJcbiAgICAgICAgICAgIHNob3dQcm9wZXJ0eShzaGFwZSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBvaW50ZXJkb3duKGV2ZW50IDogUG9pbnRlckV2ZW50LCB2aWV3IDogVmlldywgcG9zaXRpb24gOiBWZWMyLCBzaGFwZSA6IFNoYXBlIHwgdW5kZWZpbmVkKXtcclxuICAgICAgICBtc2coYHNlbGVjdGlvbiBwb2ludGVyZG93bjoke3Bvc2l0aW9ufWApO1xyXG4gICAgICAgIHRoaXMuZG93bk9mZnNldCA9IG5ldyBWZWMyKGV2ZW50Lm9mZnNldFgsIGV2ZW50Lm9mZnNldFkpO1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGVkU2hhcGUgPSBzaGFwZTtcclxuICAgICAgICB0aGlzLm1pblNhdmUgPSB2aWV3Lm1pbi5jb3B5KCk7XHJcbiAgICAgICAgdGhpcy5tYXhTYXZlID0gdmlldy5tYXguY29weSgpO1xyXG5cclxuICAgICAgICBpZihzaGFwZSAhPSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgc2hhcGUuc2hhcGVQb2ludGVyZG93bihwb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICBpZihzaGFwZSBpbnN0YW5jZW9mIFBvaW50KXtcclxuICAgICAgICAgICAgICAgIHRoaXMub2xkUG9zaXRpb24gPSBzaGFwZS5wb3NpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwb2ludGVybW92ZShldmVudCA6IFBvaW50ZXJFdmVudCwgdmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuZG93bk9mZnNldCAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBuZXcgVmVjMihldmVudC5vZmZzZXRYLCBldmVudC5vZmZzZXRZKTtcclxuICAgICAgICAgICAgY29uc3QgZGlmZiAgID0gdmlldy5mcm9tUGl4U2NhbGUob2Zmc2V0LnN1Yih0aGlzLmRvd25PZmZzZXQpKTtcclxuXHJcbiAgICAgICAgICAgIGRpZmYueSAqPSAtMTtcclxuXHJcbiAgICAgICAgICAgIGlmKHRoaXMuc2VsZWN0ZWRTaGFwZSA9PSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgICAgIHZpZXcubWluID0gdGhpcy5taW5TYXZlIS5zdWIoZGlmZik7XHJcbiAgICAgICAgICAgICAgICB2aWV3Lm1heCA9IHRoaXMubWF4U2F2ZSEuc3ViKGRpZmYpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZpZXcuYWxsUmVhbFNoYXBlcygpLmZvckVhY2goeCA9PiB4LnVwZGF0ZUNhcHRpb24oKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgICAgICB2aWV3LmNoYW5nZWQuY2xlYXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2hhcGUuc2hhcGVQb2ludGVybW92ZShwb3NpdGlvbiwgZGlmZik7XHJcblxyXG4gICAgICAgICAgICAgICAgdmlldy51cGRhdGVTaGFwZXMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmlldy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBvaW50ZXJ1cChldmVudCA6IFBvaW50ZXJFdmVudCwgdmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgbXNnKGBzZWxlY3Rpb24gcG9pbnRlcnVwOiR7cG9zaXRpb259YCk7XHJcbiAgICAgICAgaWYodGhpcyBpbnN0YW5jZW9mIE1vdGlvbkJ1aWxkZXIgJiYgdGhpcy5zZWxlY3RlZFNoYXBlIGluc3RhbmNlb2YgUG9pbnQgJiYgIXRoaXMuc2VsZWN0ZWRTaGFwZS5wb3NpdGlvbi5lcXVhbHModGhpcy5vbGRQb3NpdGlvbiEpKXtcclxuICAgICAgICAgICAgbXNnKGBwb3NpdGlvbiBjaGFuZ2VkOmApXHJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uLmFkZFByb3BlcnR5Q2hhbmdlKHRoaXMuc2VsZWN0ZWRTaGFwZSwgXCJwb3NpdGlvblwiLCB0aGlzLm9sZFBvc2l0aW9uLCB0aGlzLnNlbGVjdGVkU2hhcGUucG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kb3duT2Zmc2V0ICAgID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTaGFwZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLm1pblNhdmUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5tYXhTYXZlID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUmFuZ2VUb29sIGV4dGVuZHMgQnVpbGRlciB7XHJcbiAgICBzZWxlY3Rpb25zIDogU2hhcGVbXSA9IFtdO1xyXG4gICAgZG93blBvc2l0aW9uPyA6IFZlYzI7XHJcbiAgICBtb3ZlUG9zaXRpb24/IDogVmVjMjtcclxuXHJcbiAgICBhc3luYyBjbGljayh2aWV3IDogVmlldywgcG9zaXRpb24gOiBWZWMyLCBzaGFwZSA6IFNoYXBlIHwgdW5kZWZpbmVkKXsgXHJcbiAgICAgICAgbXNnKFwicmFuZ2UgY2xpY2tcIik7XHJcbiAgICB9XHJcblxyXG4gICAgcG9pbnRlcmRvd24oZXZlbnQgOiBQb2ludGVyRXZlbnQsIHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIG1zZyhcInJhbmdlIGRvd25cIik7XHJcbiAgICAgICAgdGhpcy5yZXNldFRvb2wodW5kZWZpbmVkKTtcclxuICAgICAgICB0aGlzLmRvd25Qb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMubW92ZVBvc2l0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHBvaW50ZXJtb3ZlKGV2ZW50IDogUG9pbnRlckV2ZW50LCB2aWV3IDogVmlldywgcG9zaXRpb24gOiBWZWMyLCBzaGFwZSA6IFNoYXBlIHwgdW5kZWZpbmVkKXtcclxuICAgICAgICBtc2coYG1vdmUgJHtldmVudC5idXR0b25zfWApXHJcbiAgICAgICAgaWYodGhpcy5kb3duUG9zaXRpb24gPT0gdW5kZWZpbmVkIHx8IGV2ZW50LmJ1dHRvbnMgIT0gMSl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubW92ZVBvc2l0aW9uID0gcG9zaXRpb247XHJcblxyXG4gICAgICAgIGNvbnN0IFsgbWluX3gsIG1pbl95LCBtYXhfeCwgbWF4X3kgXSA9IE1pbk1heFhZKHRoaXMuZG93blBvc2l0aW9uLCB0aGlzLm1vdmVQb3NpdGlvbik7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zID0gW107XHJcbiAgICAgICAgZm9yKGNvbnN0IHNoYXBlIG9mIFZpZXcuY3VycmVudC5hbGxTaGFwZXMoKSl7XHJcbiAgICAgICAgICAgIGlmKHNoYXBlIGluc3RhbmNlb2YgUG9pbnQpe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9zID0gc2hhcGUucG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICBpZihtaW5feCA8PSBwb3MueCAmJiBwb3MueCA8PSBtYXhfeCAmJiBtaW5feSA8PSBwb3MueSAmJiBwb3MueSA8PSBtYXhfeSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25zLnB1c2goc2hhcGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlLnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2aWV3LmRpcnR5ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwb2ludGVydXAoZXZlbnQgOiBQb2ludGVyRXZlbnQsIHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIG1zZyhcInJhbmdlIHVwXCIpO1xyXG4gICAgICAgIGlmKHRoaXMuc2VsZWN0aW9ucy5sZW5ndGggIT0gMCl7XHJcblxyXG4gICAgICAgICAgICBzaG93UHJvcGVydHkodGhpcy5zZWxlY3Rpb25zLCAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1Rvb2wodmlldzogVmlldyk6IHZvaWQge1xyXG4gICAgICAgIGlmKHRoaXMuZG93blBvc2l0aW9uID09IHVuZGVmaW5lZCB8fCB0aGlzLm1vdmVQb3NpdGlvbiA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBWaWV3LmN1cnJlbnQuY2FudmFzLmRyYXdSZWN0KHVuZGVmaW5lZCwgdGhpcy5kb3duUG9zaXRpb24sIHRoaXMubW92ZVBvc2l0aW9uKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBvaW50QnVpbGRlciBleHRlbmRzIEJ1aWxkZXIge1xyXG4gICAgYXN5bmMgY2xpY2sodmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7ICBcclxuICAgICAgICBpZihzaGFwZSA9PSB1bmRlZmluZWQgfHwgc2hhcGUgaW5zdGFuY2VvZiBBYnN0cmFjdExpbmUgfHwgc2hhcGUgaW5zdGFuY2VvZiBDaXJjbGUpe1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbmV3X3BvaW50ID0gdGhpcy5tYWtlUG9pbnRPbkNsaWNrKHZpZXcsIHBvc2l0aW9uLCBzaGFwZSk7XHJcbiAgICAgICAgICAgIGlmKHNoYXBlICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICBuZXdfcG9pbnQuc2V0Qm91bmQoc2hhcGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5ld19wb2ludC51cGRhdGVDYXB0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICBhZGRTaGFwZVNldFJlbGF0aW9ucyh2aWV3LCBuZXdfcG9pbnQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZXNldFRvb2wobmV3X3BvaW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIE1pZHBvaW50QnVpbGRlciBleHRlbmRzIEJ1aWxkZXIge1xyXG4gICAgcG9pbnRBIDogUG9pbnQgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgYXN5bmMgY2xpY2sodmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgaWYodGhpcy5wb2ludEEgPT0gdW5kZWZpbmVkKXtcclxuXHJcbiAgICAgICAgICAgIGlmKHNoYXBlIGluc3RhbmNlb2YgUG9pbnQpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb2ludEEgPSBzaGFwZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9pbnRBLnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoc2hhcGUgaW5zdGFuY2VvZiBQb2ludCl7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pZF9wb2ludCA9IG5ldyBNaWRwb2ludCggeyBwb3NpdGlvbjpWZWMyLnplcm8oKSwgcG9pbnRBIDogdGhpcy5wb2ludEEsIHBvaW50QiA6IHNoYXBlICB9ICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBsZW5ndGhTeW1ib2xBID0gbmV3IExlbmd0aFN5bWJvbCh7cG9pbnRBIDogdGhpcy5wb2ludEEsIHBvaW50QiA6IG1pZF9wb2ludCwgbGVuZ3RoS2luZCA6IDB9KTtcclxuICAgICAgICAgICAgY29uc3QgbGVuZ3RoU3ltYm9sQiA9IG5ldyBMZW5ndGhTeW1ib2woe3BvaW50QSA6IG1pZF9wb2ludCAgLCBwb2ludEIgOiBzaGFwZSAgICAsIGxlbmd0aEtpbmQgOiAwfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBsZW5ndGhFcXVhbGl0eSA9IG5ldyBMZW5ndGhFcXVhbGl0eSh7XHJcbiAgICAgICAgICAgICAgICByZWFzb24gOiBMZW5ndGhFcXVhbGl0eVJlYXNvbi5taWRwb2ludCxcclxuICAgICAgICAgICAgICAgIGF1eGlsaWFyeVNoYXBlcyA6IFsgbWlkX3BvaW50IF0sXHJcbiAgICAgICAgICAgICAgICBzaGFwZXMgOiBbIGxlbmd0aFN5bWJvbEEsIGxlbmd0aFN5bWJvbEIgXVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcsIG1pZF9wb2ludCk7XHJcbiAgICAgICAgICAgIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcsIGxlbmd0aFN5bWJvbEEpO1xyXG4gICAgICAgICAgICBhZGRTaGFwZVNldFJlbGF0aW9ucyh2aWV3LCBsZW5ndGhTeW1ib2xCKTtcclxuICAgICAgICAgICAgYWRkU2hhcGVTZXRSZWxhdGlvbnModmlldywgbGVuZ3RoRXF1YWxpdHkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wb2ludEEgICAgICA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5yZXNldFRvb2wobWlkX3BvaW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENpcmNsZUJ5UG9pbnRCdWlsZGVyIGV4dGVuZHMgQnVpbGRlciB7XHJcbiAgICBjZW50ZXI/IDogUG9pbnQ7XHJcbiAgICBwb3NpdGlvbj8gOiBWZWMyO1xyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpeyAgIFxyXG4gICAgICAgIGlmKHRoaXMuY2VudGVyID09IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNlbnRlciA9IHRoaXMubWFrZVBvaW50T25DbGljayh2aWV3LCBwb3NpdGlvbiwgc2hhcGUpO1xyXG4gICAgICAgICAgICB0aGlzLmNlbnRlci5zZXRNb2RlKE1vZGUuZGVwZW5kKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgY29uc3QgcG9pbnQgPSB0aGlzLm1ha2VQb2ludE9uQ2xpY2sodmlldywgcG9zaXRpb24sIHNoYXBlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNpcmNsZSA9IG5ldyBDaXJjbGVCeVBvaW50KHsgY2VudGVyIDogdGhpcy5jZW50ZXIsIHBvaW50IH0pO1xyXG5cclxuICAgICAgICAgICAgYWRkU2hhcGVTZXRSZWxhdGlvbnModmlldywgY2lyY2xlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRUb29sKGNpcmNsZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2VudGVyID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwb2ludGVybW92ZShldmVudCA6IFBvaW50ZXJFdmVudCwgdmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgIFZpZXcuY3VycmVudC5kaXJ0eSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1Rvb2wodmlldyA6IFZpZXcpeyAgICAgICAgXHJcbiAgICAgICAgaWYodGhpcy5jZW50ZXIgIT0gdW5kZWZpbmVkKXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJhZGl1cyA9IHRoaXMucG9zaXRpb24hLmRpc3RhbmNlKHRoaXMuY2VudGVyLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgVmlldy5jdXJyZW50LmNhbnZhcy5kcmF3Q2lyY2xlUmF3KHRoaXMuY2VudGVyLnBvc2l0aW9uLCByYWRpdXMsIGZnQ29sb3IsIGRlZmF1bHRMaW5lV2lkdGgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbmNsYXNzIENpcmNsZUJ5UmFkaXVzQnVpbGRlciBleHRlbmRzIEJ1aWxkZXIge1xyXG4gICAgY2VudGVyPyAgIDogUG9pbnQ7XHJcbiAgICBwb3NpdGlvbj8gOiBWZWMyO1xyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpeyAgIFxyXG4gICAgICAgIGlmKHRoaXMuY2VudGVyID09IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNlbnRlciA9IHRoaXMubWFrZVBvaW50T25DbGljayh2aWV3LCBwb3NpdGlvbiwgc2hhcGUpO1xyXG4gICAgICAgICAgICB0aGlzLmNlbnRlci5zZXRNb2RlKE1vZGUuZGVwZW5kKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLmNlbnRlci5wb3NpdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgaWYoc2hhcGUgaW5zdGFuY2VvZiBMZW5ndGhTeW1ib2wpe1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNpcmNsZSA9IG5ldyBDaXJjbGVCeVJhZGl1cyh7IGNlbnRlciA6IHRoaXMuY2VudGVyICwgbGVuZ3RoU3ltYm9sIDogc2hhcGUgfSk7XHJcbiAgICAgICAgICAgICAgICBhZGRTaGFwZVNldFJlbGF0aW9ucyh2aWV3LCBjaXJjbGUpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNlbnRlciA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSB1bmRlZmluZWQ7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzZXRUb29sKGNpcmNsZSk7XHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcG9pbnRlcm1vdmUoZXZlbnQgOiBQb2ludGVyRXZlbnQsIHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIGlmKHRoaXMuY2VudGVyICE9IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbihwb3NpdGlvbiwgc2hhcGUpO1xyXG4gICAgICAgICAgICBWaWV3LmN1cnJlbnQuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3VG9vbCh2aWV3IDogVmlldyl7XHJcbiAgICAgICAgaWYodGhpcy5jZW50ZXIgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gdGhpcy5jZW50ZXIucG9zaXRpb24uZGlzdGFuY2UodGhpcy5wb3NpdGlvbiEpO1xyXG4gICAgICAgICAgICBWaWV3LmN1cnJlbnQuY2FudmFzLmRyYXdDaXJjbGVSYXcodGhpcy5jZW50ZXIucG9zaXRpb24sIHJhZGl1cywgZmdDb2xvciwgZGVmYXVsdExpbmVXaWR0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBFbGxpcHNlQnVpbGRlciBleHRlbmRzIEJ1aWxkZXIge1xyXG4gICAgY2VudGVyIDogUG9pbnQgfCB1bmRlZmluZWQ7XHJcbiAgICB4UG9pbnQgOiBQb2ludCB8IHVuZGVmaW5lZDtcclxuICAgIHJhZGl1c1kgPSAwO1xyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpeyAgIFxyXG4gICAgICAgIGlmKHRoaXMuY2VudGVyID09IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNlbnRlciA9IHRoaXMubWFrZVBvaW50T25DbGljayh2aWV3LCBwb3NpdGlvbiwgc2hhcGUpO1xyXG4gICAgICAgICAgICB0aGlzLmNlbnRlci5zZXRNb2RlKE1vZGUuZGVwZW5kKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0aGlzLnhQb2ludCA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB0aGlzLnhQb2ludCA9IHRoaXMubWFrZVBvaW50T25DbGljayh2aWV3LCBwb3NpdGlvbiwgc2hhcGUpO1xyXG4gICAgICAgICAgICB0aGlzLnhQb2ludC5zZXRNb2RlKE1vZGUuZGVwZW5kKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMucmFkaXVzWSA9IHRoaXMuZ2V0UmFkaXVzWShwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsbGlwc2UgPSBuZXcgRWxsaXBzZSh7IGNlbnRlciA6IHRoaXMuY2VudGVyLCB4UG9pbnQgOiB0aGlzLnhQb2ludCwgcmFkaXVzWSA6IHRoaXMucmFkaXVzWSB9KTtcclxuICAgICAgICAgICAgYWRkU2hhcGVTZXRSZWxhdGlvbnModmlldywgZWxsaXBzZSk7XHJcblxyXG5cclxuICAgICAgICAgICAgdGhpcy5yZXNldFRvb2woZWxsaXBzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2VudGVyID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLnhQb2ludCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcG9pbnRlcm1vdmUoZXZlbnQgOiBQb2ludGVyRXZlbnQsIHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIGlmKHRoaXMuY2VudGVyICE9IHVuZGVmaW5lZCAmJiB0aGlzLnhQb2ludCAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB0aGlzLnJhZGl1c1kgPSB0aGlzLmdldFJhZGl1c1kocG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRSYWRpdXNZKHBvc2l0aW9uIDogVmVjMikgOiBudW1iZXIge1xyXG4gICAgICAgIGlmKHRoaXMuY2VudGVyID09IHVuZGVmaW5lZCB8fCB0aGlzLnhQb2ludCA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZm9vdCA9IGNhbGNGb290RnJvbTJQb3MocG9zaXRpb24sIHRoaXMuY2VudGVyLnBvc2l0aW9uLCB0aGlzLnhQb2ludC5wb3NpdGlvbik7XHJcbiAgICAgICAgY29uc3QgcmFkaXVzX3kgPSBmb290LmRpc3RhbmNlKHBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJhZGl1c195O1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBBcmNCeVBvaW50QnVpbGRlciBleHRlbmRzIEJ1aWxkZXIge1xyXG4gICAgY2VudGVyIDogUG9pbnQgfCB1bmRlZmluZWQ7XHJcbiAgICBwb2ludEEgOiBQb2ludCB8IHVuZGVmaW5lZDtcclxuICAgIGxhc3RQb3NpdGlvbiA6IFZlYzIgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgYXN5bmMgY2xpY2sodmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7ICAgXHJcbiAgICAgICAgaWYodGhpcy5jZW50ZXIgPT0gdW5kZWZpbmVkKXtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2VudGVyID0gdGhpcy5tYWtlUG9pbnRPbkNsaWNrKHZpZXcsIHBvc2l0aW9uLCBzaGFwZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2VudGVyLnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHRoaXMucG9pbnRBID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHRoaXMucG9pbnRBID0gdGhpcy5tYWtlUG9pbnRPbkNsaWNrKHZpZXcsIHBvc2l0aW9uLCBzaGFwZSk7XHJcbiAgICAgICAgICAgIHRoaXMucG9pbnRBLnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5sYXN0UG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHBvaW50QiA9IHRoaXMubWFrZVBvaW50T25DbGljayh2aWV3LCBwb3NpdGlvbiwgc2hhcGUpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYXJjID0gbmV3IEFyY0J5UG9pbnQoeyBjZW50ZXIgOiB0aGlzLmNlbnRlciwgcG9pbnRBIDogdGhpcy5wb2ludEEsIHBvaW50QiB9KTtcclxuXHJcbiAgICAgICAgICAgIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcsIGFyYyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlc2V0VG9vbChhcmMpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jZW50ZXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMucG9pbnRBID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwb2ludGVybW92ZShldmVudCA6IFBvaW50ZXJFdmVudCwgdmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgdGhpcy5sYXN0UG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICB2aWV3LmRpcnR5ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3VG9vbCh2aWV3OiBWaWV3KTogdm9pZCB7XHJcbiAgICAgICAgW3RoaXMuY2VudGVyLCB0aGlzLnBvaW50QV0uZmlsdGVyKHggPT4geCAhPSB1bmRlZmluZWQpLmZvckVhY2goeCA9PiB4LmRyYXcoKSk7XHJcbiAgICAgICAgaWYodGhpcy5wb2ludEEgIT0gdW5kZWZpbmVkKXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJhZGl1cyA9IHRoaXMuY2VudGVyIS5wb3NpdGlvbi5kaXN0YW5jZSh0aGlzLnBvaW50QS5wb3NpdGlvbilcclxuICAgICAgICAgICAgY29uc3QgW3N0YXJ0QW5nbGUsIGVuZEFuZ2xlXSA9IEFyYy5nZXRBbmdsZXModGhpcy5jZW50ZXIhLCB0aGlzLnBvaW50QSwgdGhpcy5sYXN0UG9zaXRpb24hKTtcclxuICAgICAgICAgICAgVmlldy5jdXJyZW50LmNhbnZhcy5kcmF3QXJjUmF3KHRoaXMuY2VudGVyIS5wb3NpdGlvbiwgcmFkaXVzLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSwgZmdDb2xvciwgZGVmYXVsdExpbmVXaWR0aCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEFyY0J5UmFkaXVzQnVpbGRlciBleHRlbmRzIEJ1aWxkZXIge1xyXG4gICAgY2VudGVyPyAgIDogUG9pbnQ7XHJcbiAgICBsZW5ndGhTeW1ib2w/IDogTGVuZ3RoU3ltYm9sO1xyXG4gICAgY2lyY2xlPyA6IENpcmNsZUFyYztcclxuICAgIHBvaW50QT8gOiBQb2ludDtcclxuICAgIHBvc2l0aW9uPyA6IFZlYzI7XHJcblxyXG4gICAgYXN5bmMgY2xpY2sodmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7ICAgXHJcbiAgICAgICAgaWYoc2hhcGUgaW5zdGFuY2VvZiBMZW5ndGhTeW1ib2wpe1xyXG4gICAgICAgICAgICB0aGlzLmxlbmd0aFN5bWJvbCA9IHNoYXBlO1xyXG4gICAgICAgICAgICBzaGFwZS5zZXRNb2RlKE1vZGUuZGVwZW5kKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2lyY2xlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHNoYXBlIGluc3RhbmNlb2YgQ2lyY2xlQXJjKXtcclxuICAgICAgICAgICAgdGhpcy5jaXJjbGUgPSBzaGFwZTtcclxuICAgICAgICAgICAgc2hhcGUuc2V0TW9kZShNb2RlLmRlcGVuZCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxlbmd0aFN5bWJvbCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9ICAgICAgICBcclxuICAgICAgICBlbHNlIGlmKHRoaXMuY2VudGVyID09IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNlbnRlciA9IHRoaXMubWFrZVBvaW50T25DbGljayh2aWV3LCBwb3NpdGlvbiwgc2hhcGUpO1xyXG4gICAgICAgICAgICB0aGlzLmNlbnRlci5zZXRNb2RlKE1vZGUuZGVwZW5kKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZigodGhpcy5sZW5ndGhTeW1ib2wgIT0gdW5kZWZpbmVkIHx8IHRoaXMuY2lyY2xlICE9IHVuZGVmaW5lZCkgJiYgdGhpcy5jZW50ZXIgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG5cclxuICAgICAgICAgICAgaWYodGhpcy5wb2ludEEgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9pbnRBID0gdGhpcy5tYWtlUG9pbnRPbkNsaWNrKHZpZXcsIHBvc2l0aW9uLCBzaGFwZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvaW50QS5zZXRNb2RlKE1vZGUuZGVwZW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IFtzdGFydEFuZ2xlLCBlbmRBbmdsZV0gPSBBcmMuZ2V0QW5nbGVzKHRoaXMuY2VudGVyISwgdGhpcy5wb2ludEEsIHBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgYXJjIDogQXJjQnlMZW5ndGhTeW1ib2wgfCBBcmNCeUNpcmNsZTtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMubGVuZ3RoU3ltYm9sICE9IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFyYyA9IG5ldyBBcmNCeUxlbmd0aFN5bWJvbCh7IGNlbnRlciA6IHRoaXMuY2VudGVyICwgbGVuZ3RoU3ltYm9sIDogdGhpcy5sZW5ndGhTeW1ib2wsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlIH0pO1xyXG4gICAgICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYXJjID0gbmV3IEFyY0J5Q2lyY2xlKHsgY2VudGVyIDogdGhpcy5jZW50ZXIgLCBjaXJjbGUgOiB0aGlzLmNpcmNsZSEsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcsIGFyYyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNlbnRlciA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHRoaXMubGVuZ3RoU3ltYm9sID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaXJjbGUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvaW50QSA9IHVuZGVmaW5lZDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldFRvb2woYXJjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwb2ludGVybW92ZShldmVudCA6IFBvaW50ZXJFdmVudCwgdmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgaWYodGhpcy5wb2ludEEgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICAgICAgdmlldy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1Rvb2wodmlldzogVmlldyk6IHZvaWQge1xyXG4gICAgICAgIFt0aGlzLmNlbnRlciwgdGhpcy5sZW5ndGhTeW1ib2wsIHRoaXMuY2lyY2xlLCB0aGlzLnBvaW50QV0uZmlsdGVyKHggPT4geCAhPSB1bmRlZmluZWQpLmZvckVhY2goeCA9PiB4LmRyYXcoKSk7XHJcblxyXG4gICAgICAgIGlmKCh0aGlzLmxlbmd0aFN5bWJvbCAhPSB1bmRlZmluZWQgfHwgdGhpcy5jaXJjbGUgIT0gdW5kZWZpbmVkKSAmJiB0aGlzLmNlbnRlciAhPSB1bmRlZmluZWQgJiYgdGhpcy5wb2ludEEgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgY29uc3QgcmFkaXVzID0gKHRoaXMubGVuZ3RoU3ltYm9sICE9IHVuZGVmaW5lZCA/IHRoaXMubGVuZ3RoU3ltYm9sLmxlbmd0aCgpOiB0aGlzLmNpcmNsZSEucmFkaXVzKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBbc3RhcnRBbmdsZSwgZW5kQW5nbGVdID0gQXJjLmdldEFuZ2xlcyh0aGlzLmNlbnRlciEsIHRoaXMucG9pbnRBLCB0aGlzLnBvc2l0aW9uISk7XHJcbiAgICAgICAgICAgIFZpZXcuY3VycmVudC5jYW52YXMuZHJhd0FyY1Jhdyh0aGlzLmNlbnRlci5wb3NpdGlvbiwgcmFkaXVzLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSwgZmdDb2xvciwgZGVmYXVsdExpbmVXaWR0aCk7XHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIExpbmVCeVBvaW50c0J1aWxkZXIgZXh0ZW5kcyBCdWlsZGVyIHtcclxuICAgIHBvaW50QT8gOiBQb2ludDtcclxuICAgIHBvc2l0aW9uPyA6IFZlYzI7XHJcblxyXG4gICAgYXN5bmMgY2xpY2sodmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7ICAgXHJcbiAgICAgICAgaWYodGhpcy5wb2ludEEgPT0gdW5kZWZpbmVkKXtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucG9pbnRBID0gdGhpcy5tYWtlUG9pbnRPbkNsaWNrKHZpZXcsIHBvc2l0aW9uLCBzaGFwZSk7XHJcbiAgICAgICAgICAgIHRoaXMucG9pbnRBLnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBjb25zdCBwb2ludEIgPSB0aGlzLm1ha2VQb2ludE9uQ2xpY2sodmlldywgcG9zaXRpb24sIHNoYXBlKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBsaW5lIDogTGluZUJ5UG9pbnRzO1xyXG5cclxuICAgICAgICAgICAgaWYodGhpcyBpbnN0YW5jZW9mIExpbmVTZWdtZW50QnVpbGRlcil7XHJcblxyXG4gICAgICAgICAgICAgICAgbGluZSA9IG1ha2VMaW5lU2VnbWVudCh0aGlzLnBvaW50QSwgcG9pbnRCKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgICAgIGxpbmUgPSBtYWtlUmF5KHRoaXMucG9pbnRBLCBwb2ludEIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhZGRTaGFwZVNldFJlbGF0aW9ucyh2aWV3LCBsaW5lKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucG9pbnRBICAgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlc2V0VG9vbChsaW5lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcG9pbnRlcm1vdmUoZXZlbnQgOiBQb2ludGVyRXZlbnQsIHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIGlmKHRoaXMucG9pbnRBICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGlmKHNoYXBlIGluc3RhbmNlb2YgUG9pbnQpe1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBzaGFwZS5wb3NpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmlldy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdUb29sKHZpZXcgOiBWaWV3KXtcclxuICAgICAgICBpZih0aGlzLnBvaW50QSAhPSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wb2ludEEuZHJhdygpO1xyXG4gICAgICAgICAgICB2aWV3LmNhbnZhcy5kcmF3TGluZVJhdyh0aGlzLnBvaW50QS5wb3NpdGlvbiwgdGhpcy5wb3NpdGlvbiEsIGZnQ29sb3IsIGRlZmF1bHRMaW5lV2lkdGgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgTGluZVNlZ21lbnRCdWlsZGVyIGV4dGVuZHMgTGluZUJ5UG9pbnRzQnVpbGRlciB7XHJcbn1cclxuXHJcbmNsYXNzIFBvbHlnb25CdWlsZGVyIGV4dGVuZHMgQnVpbGRlciB7XHJcbiAgICBwb2ludHMgOiBQb2ludFtdID0gW107XHJcbiAgICBsaW5lcyAgOiBBYnN0cmFjdExpbmVbXSA9IFtdO1xyXG4gICAgbGFzdFBvc2l0aW9uIDogVmVjMiB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBwZW5kaW5nU2hhcGVzKCkgOiBTaGFwZVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb2ludHM7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY2xpY2sodmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7ICAgXHJcblxyXG4gICAgICAgIGNvbnN0IHBvaW50ID0gdGhpcy5tYWtlUG9pbnRPbkNsaWNrKHZpZXcsIHBvc2l0aW9uLCBzaGFwZSk7XHJcblxyXG4gICAgICAgIGlmKHRoaXMucG9pbnRzLmxlbmd0aCAhPSAwKXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHBvaW50QSA9IGxhc3QodGhpcy5wb2ludHMpO1xyXG4gICAgICAgICAgICBsZXQgbGluZSA9IGdldENvbW1vbkxpbmVPZlBvaW50cyhwb2ludEEsIHBvaW50KTtcclxuICAgICAgICAgICAgaWYobGluZSA9PSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgICAgIGxpbmUgPSBtYWtlTGluZVNlZ21lbnQocG9pbnRBLCBwb2ludCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMubGluZXMucHVzaChsaW5lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKDMgPD0gdGhpcy5wb2ludHMubGVuZ3RoICYmIHRoaXMucG9pbnRzWzBdID09IHBvaW50KXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHBvbHlnb24gPSBuZXcgUG9seWdvbih7IHBvaW50cyA6IHRoaXMucG9pbnRzLCBsaW5lcyA6IHRoaXMubGluZXMgfSk7XHJcbiAgICAgICAgICAgIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcsIHBvbHlnb24pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZXNldFRvb2wocG9seWdvbik7XHJcbiAgICAgICAgICAgIHRoaXMucG9pbnRzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMubGluZXMgID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHBvaW50LnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wb2ludHMucHVzaChwb2ludCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBvaW50ZXJtb3ZlKGV2ZW50IDogUG9pbnRlckV2ZW50LCB2aWV3IDogVmlldywgcG9zaXRpb24gOiBWZWMyLCBzaGFwZSA6IFNoYXBlIHwgdW5kZWZpbmVkKXtcclxuICAgICAgICBpZih0aGlzLnBvaW50cy5sZW5ndGggIT0gMCl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxhc3RQb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICBWaWV3LmN1cnJlbnQuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH0gICAgXHJcblxyXG4gICAgZHJhd1Rvb2wodmlldzogVmlldyk6IHZvaWQge1xyXG4gICAgICAgIGlmKHRoaXMucG9pbnRzLmxlbmd0aCAhPSAwICYmIHRoaXMubGFzdFBvc2l0aW9uICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnBvaW50cy5mb3JFYWNoKHggPT4geC5kcmF3KCkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yKGNvbnN0IFtpZHgsIHBvaW50XSBvZiB0aGlzLnBvaW50cy5lbnRyaWVzKCkpe1xyXG4gICAgICAgICAgICAgICAgbGV0IHBvc2l0aW9uIDogVmVjMjtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoaWR4ICsgMSA8IHRoaXMucG9pbnRzLmxlbmd0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSB0aGlzLnBvaW50c1tpZHggKyAxXS5wb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSB0aGlzLmxhc3RQb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdmlldy5jYW52YXMuZHJhd0xpbmVSYXcocG9pbnQucG9zaXRpb24sIHBvc2l0aW9uLCBkZXBlbmRDb2xvciwgZGVmYXVsdExpbmVXaWR0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFBhcmFsbGVsTGluZUJ1aWxkZXIgZXh0ZW5kcyBCdWlsZGVyIHtcclxuICAgIGxpbmUgIDogQWJzdHJhY3RMaW5lIHwgdW5kZWZpbmVkO1xyXG4gICAgcG9pbnQgOiBQb2ludCB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBhc3luYyBjbGljayh2aWV3IDogVmlldywgcG9zaXRpb24gOiBWZWMyLCBzaGFwZSA6IFNoYXBlIHwgdW5kZWZpbmVkKXsgICBcclxuICAgICAgICBpZihzaGFwZSBpbnN0YW5jZW9mIFBvaW50KXtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucG9pbnQgID0gdGhpcy5tYWtlUG9pbnRPbkNsaWNrKHZpZXcsIHBvc2l0aW9uLCBzaGFwZSk7XHJcbiAgICAgICAgICAgIHRoaXMucG9pbnQuc2V0TW9kZShNb2RlLmRlcGVuZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoc2hhcGUgaW5zdGFuY2VvZiBBYnN0cmFjdExpbmUpe1xyXG4gICAgICAgICAgICB0aGlzLmxpbmUgPSBzaGFwZTtcclxuICAgICAgICAgICAgdGhpcy5saW5lLnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5saW5lICE9IHVuZGVmaW5lZCAmJiB0aGlzLnBvaW50ICE9IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwYXJhbGxlbF9saW5lID0gbmV3IFBhcmFsbGVsTGluZSggeyBsaW5lS2luZCA6IExpbmVLaW5kLmxpbmUsIHBvaW50QSA6IHRoaXMucG9pbnQsIGxpbmUgOiB0aGlzLmxpbmUgfSApO1xyXG4gICAgICAgICAgICBhZGRTaGFwZVNldFJlbGF0aW9ucyh2aWV3LCBwYXJhbGxlbF9saW5lKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubGluZSAgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMucG9pbnQgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlc2V0VG9vbChwYXJhbGxlbF9saW5lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcG9pbnRlcm1vdmUoZXZlbnQgOiBQb2ludGVyRXZlbnQsIHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQZXJwZW5kaWN1bGFyQnVpbGRlciBleHRlbmRzIEJ1aWxkZXIge1xyXG4gICAgcG9pbnQgOiBQb2ludCB8IHVuZGVmaW5lZDtcclxuICAgIGxpbmUgIDogQWJzdHJhY3RMaW5lIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIGlmKHRoaXMucG9pbnQgPT0gdW5kZWZpbmVkICYmIHNoYXBlIGluc3RhbmNlb2YgUG9pbnQpe1xyXG4gICAgICAgICAgICB0aGlzLnBvaW50ICA9IHRoaXMubWFrZVBvaW50T25DbGljayh2aWV3LCBwb3NpdGlvbiwgc2hhcGUpO1xyXG4gICAgICAgICAgICB0aGlzLnBvaW50LnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHNoYXBlIGluc3RhbmNlb2YgQWJzdHJhY3RMaW5lKXtcclxuICAgICAgICAgICAgdGhpcy5saW5lID0gc2hhcGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLnBvaW50ICE9IHVuZGVmaW5lZCAmJiB0aGlzLmxpbmUgIT0gdW5kZWZpbmVkKXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZvb3QgID0gUG9pbnQuZnJvbUFyZ3MoVmVjMi5uYW4oKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBlcnBlbmRpY3VsYXIgPSBuZXcgRm9vdE9mUGVycGVuZGljdWxhcih7IGxpbmVLaW5kIDogMywgcG9pbnRBIDogdGhpcy5wb2ludCwgbGluZSA6IHRoaXMubGluZSwgZm9vdCB9KTtcclxuICAgICAgICAgICAgYWRkU2hhcGVTZXRSZWxhdGlvbnModmlldywgcGVycGVuZGljdWxhcik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBvaW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmUgID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZXNldFRvb2wocGVycGVuZGljdWxhcik7XHJcbiAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFBlcnBlbmRpY3VsYXJMaW5lQnVpbGRlciBleHRlbmRzIEJ1aWxkZXIge1xyXG4gICAgbGluZSAgIDogQWJzdHJhY3RMaW5lIHwgdW5kZWZpbmVkO1xyXG4gICAgcG9pbnRBIDogUG9pbnQgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgYXN5bmMgY2xpY2sodmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgaWYoc2hhcGUgaW5zdGFuY2VvZiBBYnN0cmFjdExpbmUpe1xyXG4gICAgICAgICAgICB0aGlzLmxpbmUgPSBzaGFwZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihzaGFwZSBpbnN0YW5jZW9mIFBvaW50KXtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucG9pbnRBID0gc2hhcGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLmxpbmUgIT0gdW5kZWZpbmVkICYmIHRoaXMucG9pbnRBICE9IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICBpZih0aGlzLmxpbmUuaW5jbHVkZXNQb2ludCh0aGlzLnBvaW50QSkpe1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBuZXcgUGVycGVuZGljdWxhckxpbmUoeyBsaW5lS2luZCA6IExpbmVLaW5kLmxpbmUsIGxpbmUgOiB0aGlzLmxpbmUsIHBvaW50QSA6IHRoaXMucG9pbnRBIH0pO1xyXG4gICAgICAgICAgICAgICAgYWRkU2hhcGVTZXRSZWxhdGlvbnModmlldywgbGluZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lICA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9pbnRBID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0VG9vbChsaW5lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgICAgIG1zZyhcIlRoZSBwb2ludCBpcyBub3Qgb24gdGhlIGxpbmUuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBJbnRlcnNlY3Rpb25CdWlsZGVyIGV4dGVuZHMgQnVpbGRlciB7XHJcbiAgICBzaGFwZTEgOiBBYnN0cmFjdExpbmUgfCBDaXJjbGVBcmMgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgYXN5bmMgY2xpY2sodmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgaWYoc2hhcGUgaW5zdGFuY2VvZiBBYnN0cmFjdExpbmUgfHwgc2hhcGUgaW5zdGFuY2VvZiBDaXJjbGVBcmMpe1xyXG4gICAgICAgICAgICBpZih0aGlzLnNoYXBlMSA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGFwZTEgPSBzaGFwZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hhcGUxLnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoYXBlMS5zZXRNb2RlKE1vZGUubm9uZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG5ld19zaGFwZSA6IFNoYXBlO1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5zaGFwZTEgaW5zdGFuY2VvZiBBYnN0cmFjdExpbmUgJiYgc2hhcGUgaW5zdGFuY2VvZiBBYnN0cmFjdExpbmUpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBbIGxpbmVBLCBsaW5lQiBdID0gWyB0aGlzLnNoYXBlMSwgc2hhcGUgXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGNhbGNMaW5lTGluZUludGVyc2VjdGlvbihsaW5lQSwgbGluZUIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBuZXdfc2hhcGUgPSBuZXcgTGluZUxpbmVJbnRlcnNlY3Rpb24oeyBsaW5lQSwgbGluZUIsIHBvc2l0aW9uIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLnNoYXBlMSBpbnN0YW5jZW9mIENpcmNsZUFyYyAmJiBzaGFwZSBpbnN0YW5jZW9mIENpcmNsZUFyYyl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9pbnRBID0gUG9pbnQuZnJvbUFyZ3MoVmVjMi56ZXJvKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9pbnRCID0gUG9pbnQuZnJvbUFyZ3MoVmVjMi56ZXJvKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3X3NoYXBlID0gbmV3IEFyY0FyY0ludGVyc2VjdGlvbih7IGFyYzEgOiB0aGlzLnNoYXBlMSwgYXJjMiA6IHNoYXBlLCBwb2ludEEsIHBvaW50QiB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgOiBBYnN0cmFjdExpbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNpcmNsZSA6IENpcmNsZUFyYztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zaGFwZTEgaW5zdGFuY2VvZiBBYnN0cmFjdExpbmUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lID0gdGhpcy5zaGFwZTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNpcmNsZSA9IHNoYXBlIGFzIENpcmNsZUFyYztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2lyY2xlID0gdGhpcy5zaGFwZTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUgPSBzaGFwZSBhcyBBYnN0cmFjdExpbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2ludEEgPSBQb2ludC5mcm9tQXJncyhWZWMyLnplcm8oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9pbnRCID0gUG9pbnQuZnJvbUFyZ3MoVmVjMi56ZXJvKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld19zaGFwZSA9IG5ldyBMaW5lQXJjSW50ZXJzZWN0aW9uKCB7IGxpbmUsIGFyYyA6IGNpcmNsZSwgcG9pbnRBLCBwb2ludEIgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYWRkU2hhcGVTZXRSZWxhdGlvbnModmlldywgbmV3X3NoYXBlKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoYXBlMSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzZXRUb29sKG5ld19zaGFwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5jbGFzcyBDaXJjbGVQb2ludFRhbmdlbnRCdWlsZGVyIGV4dGVuZHMgQnVpbGRlciB7XHJcbiAgICBjaXJjbGUgOiBDaXJjbGUgfCB1bmRlZmluZWQ7XHJcbiAgICBwb2ludCAgOiBQb2ludCAgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgYXN5bmMgY2xpY2sodmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgaWYoc2hhcGUgaW5zdGFuY2VvZiBDaXJjbGUpe1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaXJjbGUgPSBzaGFwZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHNoYXBlIGluc3RhbmNlb2YgUG9pbnQpe1xyXG4gICAgICAgICAgICB0aGlzLnBvaW50ID0gdGhpcy5tYWtlUG9pbnRPbkNsaWNrKHZpZXcsIHBvc2l0aW9uLCBzaGFwZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLmNpcmNsZSAhPSB1bmRlZmluZWQgJiYgdGhpcy5wb2ludCAhPSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdGFuZ2VudCA9IG5ldyBDaXJjbGVQb2ludFRhbmdlbnQoIHsgY2lyY2xlIDogdGhpcy5jaXJjbGUsIHBvaW50IDogdGhpcy5wb2ludCB9KTtcclxuICAgICAgICAgICAgYWRkU2hhcGVTZXRSZWxhdGlvbnModmlldywgdGFuZ2VudCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNpcmNsZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5wb2ludCAgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRUb29sKHRhbmdlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbmNsYXNzIENpcmNsZUNpcmNsZVRhbmdlbnRCdWlsZGVyIGV4dGVuZHMgQnVpbGRlciB7XHJcbiAgICBjaXJjbGUgOiBDaXJjbGUgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgYXN5bmMgY2xpY2sodmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgaWYoc2hhcGUgaW5zdGFuY2VvZiBDaXJjbGUpe1xyXG5cclxuICAgICAgICAgICAgaWYodGhpcy5jaXJjbGUgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2lyY2xlID0gc2hhcGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhbmdlbnQgPSBuZXcgQ2lyY2xlQ2lyY2xlVGFuZ2VudCggeyBjaXJjbGUxIDogdGhpcy5jaXJjbGUsIGNpcmNsZTIgOiBzaGFwZSB9KTtcclxuICAgICAgICAgICAgICAgIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcsIHRhbmdlbnQpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNpcmNsZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzZXRUb29sKHRhbmdlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RBbmdsZUJ1aWxkZXIgZXh0ZW5kcyBCdWlsZGVyIHtcclxuICAgIGxpbmUxIDogQWJzdHJhY3RMaW5lIHwgdW5kZWZpbmVkO1xyXG4gICAgcG9zMSAgOiBWZWMyIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIGlmKHNoYXBlIGluc3RhbmNlb2YgQWJzdHJhY3RMaW5lKXtcclxuICAgICAgICAgICAgaWYodGhpcy5saW5lMSA9PSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMubGluZTEgPSBzaGFwZTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZTEuc2V0TW9kZShNb2RlLmRlcGVuZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3MxICA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbbGluZUEsIHBvczEsIGxpbmVCLCBwb3MyXSA9IFt0aGlzLmxpbmUxLCB0aGlzLnBvczEhLCBzaGFwZSwgcG9zaXRpb25dO1xyXG4gICAgICAgICAgICAgICAgbGluZUIuc2V0TW9kZShNb2RlLmRlcGVuZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGluZUEuY2FsYygpO1xyXG4gICAgICAgICAgICAgICAgbGluZUIuY2FsYygpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1vbl9wb2ludCA9IGdldENvbW1vblBvaW50T2ZMaW5lcyhsaW5lQSwgbGluZUIpO1xyXG4gICAgICAgICAgICAgICAgaWYoY29tbW9uX3BvaW50ID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXJlY3Rpb25BID0gTWF0aC5zaWduKHBvczEuc3ViKGNvbW1vbl9wb2ludC5wb3NpdGlvbikuZG90KGxpbmVBLmUpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbkIgPSBNYXRoLnNpZ24ocG9zMi5zdWIoY29tbW9uX3BvaW50LnBvc2l0aW9uKS5kb3QobGluZUIuZSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB0YXJnZXQgOiBBbmdsZSB8IEFuZ2xlQmlzZWN0b3I7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYodGhpcyBpbnN0YW5jZW9mIEFuZ2xlQnVpbGRlcil7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhbmdsZU1hcmsgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGlzUGVycGVuZGljdWxhcihsaW5lQSwgbGluZUIpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGVNYXJrID0gQW5nbGUuUmlnaHRBbmdsZU1hcms7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IG5ldyBBbmdsZSh7IGFuZ2xlTWFyaywgbGluZUEsIGRpcmVjdGlvbkEsIGxpbmVCLCBkaXJlY3Rpb25CIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5jYWxjKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcsIHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBuZXcgQW5nbGVCaXNlY3Rvcih7IGxpbmVLaW5kIDogMCwgbGluZUEsIGRpcmVjdGlvbkEsIGxpbmVCLCBkaXJlY3Rpb25CIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhZGRTaGFwZVNldFJlbGF0aW9ucyh2aWV3LCB0YXJnZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmdsZUEgPSBuZXcgQW5nbGUoeyBhbmdsZU1hcmsgOiAxLCBsaW5lQSwgZGlyZWN0aW9uQSwgbGluZUIgOiB0YXJnZXQsIGRpcmVjdGlvbkIgOiAxIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuZ2xlQiA9IG5ldyBBbmdsZSh7IGFuZ2xlTWFyayA6IDEsIGxpbmVBIDogdGFyZ2V0LCBkaXJlY3Rpb25BIDogMSwgbGluZUIsIGRpcmVjdGlvbkIgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuZ2xlRXF1YWxpdHkgPSBtYWtlQW5nbGVFcXVhbGl0eUJ5QW5nbGVCaXNlY3RvcihhbmdsZUEsIGFuZ2xlQiwgdGFyZ2V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkU2hhcGVTZXRSZWxhdGlvbnModmlldywgYW5nbGVBKTtcclxuICAgICAgICAgICAgICAgICAgICBhZGRTaGFwZVNldFJlbGF0aW9ucyh2aWV3LCBhbmdsZUIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcsIGFuZ2xlRXF1YWxpdHkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMubGluZTEgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0VG9vbCh0YXJnZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBBbmdsZUJ1aWxkZXIgZXh0ZW5kcyBBYnN0cmFjdEFuZ2xlQnVpbGRlciB7XHJcbn1cclxuXHJcbmNsYXNzIEFuZ2xlQmlzZWN0b3JCdWlsZGVyIGV4dGVuZHMgQWJzdHJhY3RBbmdsZUJ1aWxkZXIge1xyXG59XHJcblxyXG5jbGFzcyBEaW1lbnNpb25MaW5lQnVpbGRlciBleHRlbmRzIEJ1aWxkZXIge1xyXG4gICAgcG9pbnRBIDogUG9pbnQgfCB1bmRlZmluZWQ7XHJcbiAgICBwb2ludEIgOiBQb2ludCB8IHVuZGVmaW5lZDtcclxuICAgIGRpbUxpbmUgOiBEaW1lbnNpb25MaW5lIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIGlmKHRoaXMuZGltTGluZSA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBpZihzaGFwZSBpbnN0YW5jZW9mIFBvaW50KXtcclxuXHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLnBvaW50QSA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9pbnRBID0gdGhpcy5tYWtlUG9pbnRPbkNsaWNrKHZpZXcsIHBvc2l0aW9uLCBzaGFwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2ludEEuc2V0TW9kZShNb2RlLmRlcGVuZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9pbnRCID0gdGhpcy5tYWtlUG9pbnRPbkNsaWNrKHZpZXcsIHBvc2l0aW9uLCBzaGFwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2ludEIuc2V0TW9kZShNb2RlLmRlcGVuZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcHRpb24gPSBuZXcgVGV4dEJsb2NrKHsgdGV4dCA6IFwiXFxcXGludCBcXFxcZnJhY3sxfXsyfVwiLCBpc1RleCA6IHRydWUsIG9mZnNldCA6IFZlYzIuemVybygpIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpbUxpbmUgPSBuZXcgRGltZW5zaW9uTGluZSh7IGNhcHRpb24sIHBvaW50QTogdGhpcy5wb2ludEEsIHBvaW50QjogdGhpcy5wb2ludEIsIHNoaWZ0IDogMCB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBWaWV3LmN1cnJlbnQuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICBhZGRTaGFwZVNldFJlbGF0aW9ucyh2aWV3LCB0aGlzLmRpbUxpbmUpO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0VG9vbCh0aGlzLmRpbUxpbmUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wb2ludEEgID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLnBvaW50QiAgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuZGltTGluZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcG9pbnRlcm1vdmUoZXZlbnQgOiBQb2ludGVyRXZlbnQsIHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIGlmKHRoaXMuZGltTGluZSAhPSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsID0gdGhpcy5wb2ludEIhLnN1Yih0aGlzLnBvaW50QSEpLnJvdDkwKCkudW5pdCgpO1xyXG4gICAgICAgICAgICBjb25zdCBzaGlmdCAgPSBwb3NpdGlvbi5zdWIodGhpcy5wb2ludEIhLnBvc2l0aW9uKS5kb3Qobm9ybWFsKTtcclxuICAgICAgICAgICAgdGhpcy5kaW1MaW5lLnNldFNoaWZ0KCBzaGlmdCApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3VG9vbCh2aWV3OiBWaWV3KTogdm9pZCB7XHJcbiAgICAgICAgaWYodGhpcy5kaW1MaW5lICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHRoaXMuZGltTGluZS5kcmF3KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuY2xhc3MgTGVuZ3RoU3ltYm9sQnVpbGRlciBleHRlbmRzIExpbmVCeVBvaW50c0J1aWxkZXIge1xyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIGlmKHNoYXBlIGluc3RhbmNlb2YgTGluZUJ5UG9pbnRzKXtcclxuICAgICAgICAgICAgY29uc3Qgc3ltYm9sID0gbmV3IExlbmd0aFN5bWJvbCh7cG9pbnRBIDogc2hhcGUucG9pbnRBLCBwb2ludEIgOiBzaGFwZS5wb2ludEIsIGxlbmd0aEtpbmQgOiAwfSk7XHJcbiAgICAgICAgICAgIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcsIHN5bWJvbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIGlmKHRoaXMucG9pbnRBID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvaW50QSA9IHRoaXMubWFrZVBvaW50T25DbGljayh2aWV3LCBwb3NpdGlvbiwgc2hhcGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbGlja2VkX3BvaW50ID0gdGhpcy5tYWtlUG9pbnRPbkNsaWNrKHZpZXcsIHBvc2l0aW9uLCBzaGFwZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbcG9pbnRBLCBwb2ludEJdID0gc29ydFNoYXBlPFBvaW50PihbIHRoaXMucG9pbnRBLCBjbGlja2VkX3BvaW50IF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBsaW5lID0gZ2V0Q29tbW9uTGluZU9mUG9pbnRzKHBvaW50QSwgcG9pbnRCKTtcclxuICAgICAgICAgICAgICAgIGlmKGxpbmUgPT0gdW5kZWZpbmVkKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZSA9IG1ha2VMaW5lU2VnbWVudChwb2ludEEsIHBvaW50Qik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbXNnKGBtYWtlIGxpbmU6JHtwb2ludEEuaWR9IC0gJHtsaW5lLmlkfSAtICR7cG9pbnRCLmlkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcsIGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHN5bWJvbCA9IG5ldyBMZW5ndGhTeW1ib2woeyBwb2ludEEsIHBvaW50QiwgbGVuZ3RoS2luZCA6IDB9KTtcclxuICAgICAgICAgICAgICAgIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcsIHN5bWJvbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5wb2ludEEgICA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldFRvb2woc3ltYm9sKTtcclxuICAgICAgICAgICAgfSAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5jbGFzcyBUZXh0QmxvY2tCdWlsZGVyIGV4dGVuZHMgQnVpbGRlciB7XHJcbiAgICBhc3luYyBjbGljayh2aWV3IDogVmlldywgcG9zaXRpb24gOiBWZWMyLCBzaGFwZSA6IFNoYXBlIHwgdW5kZWZpbmVkKXsgICBcclxuICAgICAgICBjb25zdCB0ZXh0X2Jsb2NrID0gbmV3IFRleHRCbG9jayh7IHRleHQgOiBcIlRleHRcIiwgaXNUZXggOiBmYWxzZSwgb2Zmc2V0IDogcG9zaXRpb24gfSk7XHJcbiAgICAgICAgdGV4dF9ibG9jay51cGRhdGVUZXh0UG9zaXRpb24oKTtcclxuXHJcbiAgICAgICAgYWRkU2hhcGVTZXRSZWxhdGlvbnModmlldywgdGV4dF9ibG9jayk7XHJcbiAgICAgICAgdGhpcy5yZXNldFRvb2wodGV4dF9ibG9jayk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBc3N1bXB0aW9uQnVpbGRlciBleHRlbmRzIEJ1aWxkZXIge1xyXG4gICAgYXN5bmMgaW5pdCgpeyAgICAgICAgXHJcbiAgICAgICAgY29uc3QgdmlldyA9IFZpZXcuY3VycmVudDtcclxuXHJcbiAgICAgICAgY29uc3QgbWF0aFRleHQgPSBpbnB1dFRleHRQcm9tcHQoVFQoXCJFbnRlciBhIG1hdGhlbWF0aWNhbCBleHByZXNzaW9uLlwiKSk7XHJcbiAgICAgICAgaWYobWF0aFRleHQgPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIEJ1aWxkZXIuY2FuY2VsVG9vbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBjb25zdCBlcXVhdGlvbiA9IHBhcnNlcl90cy5wYXJzZU1hdGgobWF0aFRleHQpIGFzIEFwcDtcclxuXHJcbiAgICAgICAgICAgIGxldCBhc3N1bXB0aW9uIDogQXNzdW1wdGlvbjtcclxuICAgICAgICAgICAgYXNzdW1wdGlvbiA9IG5ldyBBc3N1bXB0aW9uKHtlcXVhdGlvbn0pO1xyXG4gICAgICAgICAgICBhZGRTaGFwZVNldFJlbGF0aW9ucyh2aWV3LCBhc3N1bXB0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTdGF0ZW1lbnRCdWlsZGVyIGV4dGVuZHMgQnVpbGRlciB7XHJcbiAgICBzdGF0ZW1lbnQgOiBTdGF0ZW1lbnQ7XHJcbiAgICBzcGVjaWZpZWRTaGFwZXMgOiBTaGFwZVtdID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3RhdGVtZW50PyA6IFN0YXRlbWVudCl7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgaWYoc3RhdGVtZW50ID09IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlbWVudCA9IG5ldyBTdGF0ZW1lbnQoeyBzaGFwZXMgOiBbXSB9KTtcclxuXHJcbiAgICAgICAgICAgIFZpZXcuY3VycmVudC5hZGRTaGFwZSh0aGlzLnN0YXRlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGVtZW50ID0gc3RhdGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2hvd1Byb3BlcnR5KHRoaXMuc3RhdGVtZW50LCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjbGlja1dpdGhNb3VzZUV2ZW50KGV2ZW50IDogTW91c2VFdmVudCwgdmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBNYXRoRW50aXR5IHwgdW5kZWZpbmVkKXsgICAgICAgIFxyXG4gICAgICAgIGlmKHNoYXBlICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZF9zaGFwZSA9IHNoYXBlO1xyXG5cclxuICAgICAgICAgICAgaWYoZXZlbnQuY3RybEtleSl7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoc2hhcGUgaW5zdGFuY2VvZiBTaGFwZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcGUuc2V0TW9kZShNb2RlLmRlcGVuZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGVjaWZpZWRTaGFwZXMucHVzaChzaGFwZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5zcGVjaWZpZWRTaGFwZXMubGVuZ3RoICE9IDApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihzaGFwZSBpbnN0YW5jZW9mIFNoYXBlKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3BlY2lmaWVkU2hhcGVzLnB1c2goc2hhcGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZW1lbnQuc2VsZWN0ZWRTaGFwZXMucHVzaCguLi4gdGhpcy5zcGVjaWZpZWRTaGFwZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGVjaWZpZWRTaGFwZXMuZm9yRWFjaCh4ID0+IHguc2V0TW9kZShNb2RlLm5vbmUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGVjaWZpZWRTaGFwZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVtZW50LnNlbGVjdGVkU2hhcGVzLnB1c2goc2hhcGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSBtYWtlU2hhcGVCdXR0b24oc2VsZWN0ZWRfc2hhcGUsIGZhbHNlKTtcclxuICAgICAgICAgICAgYnV0dG9uLmJ1dHRvbi5zdHlsZS5wb3NpdGlvbiA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICBpZihTaGFwZXNQcm9wZXJ0eS5vbmUuYnV0dG9uc1VJIGluc3RhbmNlb2YgbGF5b3V0X3RzLkdyaWQpe1xyXG4gICAgICAgICAgICAgICAgU2hhcGVzUHJvcGVydHkub25lLmJ1dHRvbnNVSS5hZGRDaGlsZChidXR0b24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuYWJzdHJhY3QgY2xhc3MgVHJpYW5nbGVDb25ncnVlbmNlU2ltaWxhcml0eUJ1aWxkZXIgZXh0ZW5kcyBCdWlsZGVyIHsgXHJcbiAgICB0cmlhbmdsZVBhaXJTZWxlY3RvciA9IG5ldyBUcmlhbmdsZVBhaXJTZWxlY3RvcigpO1xyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIHRoaXMudHJpYW5nbGVQYWlyU2VsZWN0b3IuY2xpY2sodmlldywgcG9zaXRpb24sIHNoYXBlKTtcclxuICAgICAgICBpZih0aGlzLnRyaWFuZ2xlUGFpclNlbGVjdG9yLmRvbmUoKSl7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0cmlhbmdsZV9zdGF0ZW1lbnQgPSB0aGlzLm1ha2VUcmlhbmdsZUNvbmdydWVuY2VTaW1pbGFyaXR5KHRoaXMudHJpYW5nbGVQYWlyU2VsZWN0b3IudHJpYW5nbGVBISwgdGhpcy50cmlhbmdsZVBhaXJTZWxlY3Rvci50cmlhbmdsZUIhKTtcclxuICAgICAgICAgICAgaWYodHJpYW5nbGVfc3RhdGVtZW50ICE9IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICAgICAgYWRkU2hhcGVTZXRSZWxhdGlvbnModmlldywgdHJpYW5nbGVfc3RhdGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0VG9vbCh0cmlhbmdsZV9zdGF0ZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldFRvb2wodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy50cmlhbmdsZVBhaXJTZWxlY3Rvci5jbGVhcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3VG9vbCh2aWV3IDogVmlldyl7ICBcclxuICAgICAgICB0aGlzLnRyaWFuZ2xlUGFpclNlbGVjdG9yLmRyYXdUb29sKHZpZXcpO1xyXG4gICAgfVxyXG5cclxuICAgIGFic3RyYWN0IG1ha2VUcmlhbmdsZUNvbmdydWVuY2VTaW1pbGFyaXR5KEEgOiBUcmlhbmdsZSwgQiA6IFRyaWFuZ2xlKSA6IFN0YXRlbWVudCB8IHVuZGVmaW5lZDtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBUcmlhbmdsZUNvbmdydWVuY2VCdWlsZGVyIGV4dGVuZHMgVHJpYW5nbGVDb25ncnVlbmNlU2ltaWxhcml0eUJ1aWxkZXIgeyBcclxuICAgIGNvbnN0cnVjdG9yKHRyaWFuZ2xlQ29uZ3J1ZW5jZT8gOiBUcmlhbmdsZUNvbmdydWVuY2Upe1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZVRyaWFuZ2xlQ29uZ3J1ZW5jZVNpbWlsYXJpdHkoQSA6IFRyaWFuZ2xlLCBCIDogVHJpYW5nbGUpIDogU3RhdGVtZW50IHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gbWFrZVRyaWFuZ2xlQ29uZ3J1ZW5jZShBLCBCKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRyaWFuZ2xlU2ltaWxhcml0eUJ1aWxkZXIgZXh0ZW5kcyBUcmlhbmdsZUNvbmdydWVuY2VTaW1pbGFyaXR5QnVpbGRlciB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0cmlhbmdsZVNpbWlsYXJpdHk/IDogVHJpYW5nbGVTaW1pbGFyaXR5KXtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIG1ha2VUcmlhbmdsZUNvbmdydWVuY2VTaW1pbGFyaXR5KEEgOiBUcmlhbmdsZSwgQiA6IFRyaWFuZ2xlKSA6IFN0YXRlbWVudCB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIG1ha2VUcmlhbmdsZVNpbWlsYXJpdHkoQSwgQik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMZW5ndGhFcXVhbGl0eUJ1aWxkZXIgZXh0ZW5kcyBCdWlsZGVyIHtcclxuICAgIGxlbmd0aFN5bWJvbEE/IDogTGVuZ3RoU3ltYm9sO1xyXG4gICAgbGVuZ3RoU3ltYm9sQj8gOiBMZW5ndGhTeW1ib2w7XHJcbiAgICBsZW5ndGhFcXVhbGl0eVJlYXNvbiA6IExlbmd0aEVxdWFsaXR5UmVhc29uIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIHRyaWFuZ2xlUGFpclNlbGVjdG9yIDogVHJpYW5nbGVQYWlyU2VsZWN0b3IgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IobGVuZ3RoRXF1YWxpdHk/IDogTGVuZ3RoRXF1YWxpdHkpe1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgaW5pdCgpeyAgICAgICAgXHJcbiAgICAgICAgdGhpcy5sZW5ndGhFcXVhbGl0eVJlYXNvbiA9IGF3YWl0IHNob3dNZW51KExlbmd0aEVxdWFsaXR5UmVhc29uKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpe1xyXG4gICAgICAgIHRoaXMubGVuZ3RoU3ltYm9sQSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmxlbmd0aFN5bWJvbEIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5sZW5ndGhFcXVhbGl0eVJlYXNvbiA9IExlbmd0aEVxdWFsaXR5UmVhc29uLm5vbmU7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY2xpY2sodmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgbGV0IGxlbmd0aEVxdWFsaXR5IDogTGVuZ3RoRXF1YWxpdHkgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGlmKHNoYXBlIGluc3RhbmNlb2YgTGVuZ3RoU3ltYm9sKXtcclxuICAgICAgICAgICAgaWYodGhpcy5sZW5ndGhTeW1ib2xBID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aFN5bWJvbEEgPSBzaGFwZTtcclxuICAgICAgICAgICAgICAgIHNoYXBlLnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYodGhpcy5sZW5ndGhTeW1ib2xCID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aFN5bWJvbEIgPSBzaGFwZTtcclxuICAgICAgICAgICAgICAgIHNoYXBlLnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHN3aXRjaCh0aGlzLmxlbmd0aEVxdWFsaXR5UmVhc29uISl7XHJcbiAgICAgICAgICAgICAgICBjYXNlIExlbmd0aEVxdWFsaXR5UmVhc29uLnJhZGlpX2VxdWFsOlxyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aEVxdWFsaXR5ID0gbWFrZUVxdWFsTGVuZ3RoQnlSYWRpaUVxdWFsKHRoaXMubGVuZ3RoU3ltYm9sQSwgdGhpcy5sZW5ndGhTeW1ib2xCKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgTGVuZ3RoRXF1YWxpdHlSZWFzb24uY29tbW9uX2NpcmNsZTpcclxuICAgICAgICAgICAgICAgICAgICBzaG93UHJvbXB0KFRUKFwiY2xpY2sgdGhlIGNvbW1vbiBjaXJjbGUuXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgTGVuZ3RoRXF1YWxpdHlSZWFzb24ucGFyYWxsZWxfbGluZXNfZGlzdGFuY2U6XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZXNTZWxlY3Rvcl8yLmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1Byb21wdChUVChcImNsaWNrIHR3byBwYXJhbGxlbCBsaW5lcy5cIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMZW5ndGhFcXVhbGl0eVJlYXNvbi5jb25ncnVlbnRfdHJpYW5nbGVzOlxyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aEVxdWFsaXR5ID0gbWFrZUVxdWFsTGVuZ3RoQnlDb25ncnVlbnRUcmlhbmdsZXModGhpcy5sZW5ndGhTeW1ib2xBLCB0aGlzLmxlbmd0aFN5bWJvbEIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMZW5ndGhFcXVhbGl0eVJlYXNvbi5wYXJhbGxlbG9ncmFtX29wcG9zaXRlX3NpZGVzOlxyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aEVxdWFsaXR5ID0gbWFrZUVxdWFsTGVuZ3RoQnlQYXJhbGxlbG9ncmFtT3Bwb3NpdGVTaWRlcyh0aGlzLmxlbmd0aFN5bWJvbEEsIHRoaXMubGVuZ3RoU3ltYm9sQik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIExlbmd0aEVxdWFsaXR5UmVhc29uLnBhcmFsbGVsb2dyYW1fZGlhZ29uYWxfYmlzZWN0aW9uOlxyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aEVxdWFsaXR5ID0gbWFrZUVxdWFsTGVuZ3RoQnlQYXJhbGxlbG9ncmFtRGlhZ29uYWxCaXNlY3Rpb24odGhpcy5sZW5ndGhTeW1ib2xBLCB0aGlzLmxlbmd0aFN5bWJvbEIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMZW5ndGhFcXVhbGl0eVJlYXNvbi5lcXVpdmFsZW5jZV9jbGFzczpcclxuICAgICAgICAgICAgICAgICAgICBsZW5ndGhFcXVhbGl0eSA9IG1ha2VFcXVhbExlbmd0aEJ5RXF1aXZhbGVuY2VDbGFzcyh0aGlzLmxlbmd0aFN5bWJvbEEsIHRoaXMubGVuZ3RoU3ltYm9sQik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBMZW5ndGhFcXVhbGl0eVJlYXNvbi5ub3RfdXNlZDpcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gICAgICAgIFxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIGlmKHRoaXMubGVuZ3RoU3ltYm9sQSA9PSB1bmRlZmluZWQgfHwgdGhpcy5sZW5ndGhTeW1ib2xCID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzd2l0Y2godGhpcy5sZW5ndGhFcXVhbGl0eVJlYXNvbil7XHJcbiAgICAgICAgICAgIC8vIGNhc2UgTGVuZ3RoRXF1YWxpdHlSZWFzb24ucmFkaWlfZXF1YWw6XHJcbiAgICAgICAgICAgIGNhc2UgTGVuZ3RoRXF1YWxpdHlSZWFzb24uY29tbW9uX2NpcmNsZTpcclxuICAgICAgICAgICAgICAgIGlmKHNoYXBlIGluc3RhbmNlb2YgQ2lyY2xlQXJjKXtcclxuICAgICAgICAgICAgICAgICAgICBsZW5ndGhFcXVhbGl0eSA9IG1ha2VFcXVhbExlbmd0aEJ5Q29tbW9uQ2lyY2xlKHRoaXMubGVuZ3RoU3ltYm9sQSwgdGhpcy5sZW5ndGhTeW1ib2xCLCBzaGFwZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBMZW5ndGhFcXVhbGl0eVJlYXNvbi5wYXJhbGxlbF9saW5lc19kaXN0YW5jZTpcclxuICAgICAgICAgICAgICAgIGxpbmVzU2VsZWN0b3JfMi5jbGljayh2aWV3LCBwb3NpdGlvbiwgc2hhcGUpO1xyXG4gICAgICAgICAgICAgICAgaWYobGluZXNTZWxlY3Rvcl8yLmRvbmUoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoRXF1YWxpdHkgPSBtYWtlRXF1YWxMZW5ndGhCeVBhcmFsbGVsTGluZXModGhpcy5sZW5ndGhTeW1ib2xBLCB0aGlzLmxlbmd0aFN5bWJvbEIsIGxpbmVzU2VsZWN0b3JfMi5zaGFwZXMgYXMgQWJzdHJhY3RMaW5lW10pO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVzU2VsZWN0b3JfMi5jbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8vIGNhc2UgTGVuZ3RoRXF1YWxpdHlSZWFzb24uY2lyY2xlX2J5X3JhZGl1czpcclxuICAgICAgICAgICAgY2FzZSBMZW5ndGhFcXVhbGl0eVJlYXNvbi5jb25ncnVlbnRfdHJpYW5nbGVzOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgTGVuZ3RoRXF1YWxpdHlSZWFzb24ucGFyYWxsZWxvZ3JhbV9vcHBvc2l0ZV9zaWRlczpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIExlbmd0aEVxdWFsaXR5UmVhc29uLnBhcmFsbGVsb2dyYW1fZGlhZ29uYWxfYmlzZWN0aW9uOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihsZW5ndGhFcXVhbGl0eSAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBhZGRTaGFwZVNldFJlbGF0aW9ucyh2aWV3LCBsZW5ndGhFcXVhbGl0eSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRUb29sKGxlbmd0aEVxdWFsaXR5KTtcclxuICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3VG9vbCh2aWV3IDogVmlldyl7ICBcclxuICAgICAgICBpZih0aGlzLnRyaWFuZ2xlUGFpclNlbGVjdG9yICE9IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRyaWFuZ2xlUGFpclNlbGVjdG9yLmRyYXdUb29sKHZpZXcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFuZ2xlRXF1YWxpdHlCdWlsZGVyIGV4dGVuZHMgQnVpbGRlciB7XHJcbiAgICBhbmdsZUE/IDogQW5nbGU7XHJcbiAgICBhbmdsZUI/IDogQW5nbGU7XHJcbiAgICBhbmdsZUVxdWFsaXR5UmVhc29uIDogQW5nbGVFcXVhbGl0eVJlYXNvbiA9IEFuZ2xlRXF1YWxpdHlSZWFzb24ubm9uZTtcclxuXHJcbiAgICB0cmlhbmdsZVBhaXJTZWxlY3RvciA6IFRyaWFuZ2xlUGFpclNlbGVjdG9yIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFuZ2xlRXF1YWxpdHk/IDogQW5nbGVFcXVhbGl0eSl7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBpbml0KCl7ICAgICAgICBcclxuICAgICAgICB0aGlzLmFuZ2xlRXF1YWxpdHlSZWFzb24gPSBhd2FpdCBzaG93TWVudShBbmdsZUVxdWFsaXR5UmVhc29uKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpe1xyXG4gICAgICAgIHRoaXMuYW5nbGVBID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuYW5nbGVCID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuYW5nbGVFcXVhbGl0eVJlYXNvbiA9IEFuZ2xlRXF1YWxpdHlSZWFzb24ubm9uZTtcclxuICAgICAgICB0aGlzLnRyaWFuZ2xlUGFpclNlbGVjdG9yID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIGxldCBhbmdsZUVxdWFsaXR5IDogQW5nbGVFcXVhbGl0eSB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYodGhpcy5hbmdsZUEgPT0gdW5kZWZpbmVkIHx8IHRoaXMuYW5nbGVCID09IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICBpZihzaGFwZSBpbnN0YW5jZW9mIEFuZ2xlKXtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuYW5nbGVBID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmdsZUEgPSBzaGFwZTtcclxuICAgICAgICAgICAgICAgICAgICBzaGFwZS5zZXRNb2RlKE1vZGUuZGVwZW5kKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYodGhpcy5hbmdsZUIgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFuZ2xlQiA9IHNoYXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlLnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2godGhpcy5hbmdsZUVxdWFsaXR5UmVhc29uKXtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEFuZ2xlRXF1YWxpdHlSZWFzb24udmVydGljYWxfYW5nbGVzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmdsZUVxdWFsaXR5ID0gbWFrZUFuZ2xlRXF1YWxpdHlCeVZlcnRpY2FsX2FuZ2xlcyh0aGlzLmFuZ2xlQSwgdGhpcy5hbmdsZUIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEFuZ2xlRXF1YWxpdHlSZWFzb24ucGFyYWxsZWxfbGluZV9hbmdsZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlRXF1YWxpdHkgPSBtYWtlQW5nbGVFcXVhbGl0eUJ5UGFyYWxsZWxMaW5lcyh0aGlzLmFuZ2xlQSwgdGhpcy5hbmdsZUIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEFuZ2xlRXF1YWxpdHlSZWFzb24uYW5nbGVfYmlzZWN0b3I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgQW5nbGVFcXVhbGl0eVJlYXNvbi5jb25ncnVlbnRfdHJpYW5nbGVzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmdsZUVxdWFsaXR5ID0gbWFrZUFuZ2xlRXF1YWxpdHlCeUNvbmdydWVudFRyaWFuZ2xlcyh0aGlzLmFuZ2xlQSwgdGhpcy5hbmdsZUIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEFuZ2xlRXF1YWxpdHlSZWFzb24ucGFyYWxsZWxvZ3JhbV9vcHBvc2l0ZV9hbmdsZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1YWRyaWxhdGVyYWxTZWxlY3Rvci5jbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEFuZ2xlRXF1YWxpdHlSZWFzb24uc2ltaWxhcl90cmlhbmdsZXM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlRXF1YWxpdHkgPSBtYWtlQW5nbGVFcXVhbGl0eUJ5U2ltaWxhclRyaWFuZ2xlcyh0aGlzLmFuZ2xlQSwgdGhpcy5hbmdsZUIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEFuZ2xlRXF1YWxpdHlSZWFzb24uaXNvc2NlbGVzX3RyaWFuZ2xlX2Jhc2VfYW5nbGVzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmdsZUVxdWFsaXR5ID0gbWFrZUFuZ2xlRXF1YWxpdHlCeUlzb3NjZWxlc1RyaWFuZ2xlQmFzZUFuZ2xlcyh0aGlzLmFuZ2xlQSwgdGhpcy5hbmdsZUIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2godGhpcy5hbmdsZUVxdWFsaXR5UmVhc29uKXtcclxuICAgICAgICAgICAgY2FzZSBBbmdsZUVxdWFsaXR5UmVhc29uLnZlcnRpY2FsX2FuZ2xlczpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBBbmdsZUVxdWFsaXR5UmVhc29uLnBhcmFsbGVsX2xpbmVfYW5nbGVzOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIEFuZ2xlRXF1YWxpdHlSZWFzb24uYW5nbGVfYmlzZWN0b3I6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgQW5nbGVFcXVhbGl0eVJlYXNvbi5jb25ncnVlbnRfdHJpYW5nbGVzOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgY2FzZSBBbmdsZUVxdWFsaXR5UmVhc29uLnBhcmFsbGVsb2dyYW1fb3Bwb3NpdGVfYW5nbGVzOlxyXG4gICAgICAgICAgICAgICAgcXVhZHJpbGF0ZXJhbFNlbGVjdG9yLmNsaWNrKHZpZXcsIHBvc2l0aW9uLCBzaGFwZSk7XHJcbiAgICAgICAgICAgICAgICBpZihxdWFkcmlsYXRlcmFsU2VsZWN0b3IuZG9uZSgpKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbGxlbG9ncmFtID0gcXVhZHJpbGF0ZXJhbFNlbGVjdG9yLnBvbHlnb24gYXMgUXVhZHJpbGF0ZXJhbDtcclxuICAgICAgICAgICAgICAgICAgICBhbmdsZUVxdWFsaXR5ID0gbWFrZUFuZ2xlRXF1YWxpdHlCeVBhcmFsbGVsb2dyYW1PcHBvc2l0ZUFuZ2xlcyh0aGlzLmFuZ2xlQSwgdGhpcy5hbmdsZUIsIHBhcmFsbGVsb2dyYW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIEFuZ2xlRXF1YWxpdHlSZWFzb24uc2ltaWxhcl90cmlhbmdsZXM6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoYW5nbGVFcXVhbGl0eSAhPSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICAgICAgYWRkU2hhcGVTZXRSZWxhdGlvbnModmlldywgYW5nbGVFcXVhbGl0eSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRUb29sKGFuZ2xlRXF1YWxpdHkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3VG9vbCh2aWV3IDogVmlldyl7ICBcclxuICAgICAgICBpZih0aGlzLnRyaWFuZ2xlUGFpclNlbGVjdG9yICE9IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRyaWFuZ2xlUGFpclNlbGVjdG9yLmRyYXdUb29sKHZpZXcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBhcmFsbGVsRGV0ZWN0b3JCdWlsZGVyIGV4dGVuZHMgQnVpbGRlciB7XHJcbiAgICBwYXJhbGxlbFJlYXNvbj8gOiBQYXJhbGxlbFJlYXNvbjtcclxuICAgIGxpbmVBPyA6IEFic3RyYWN0TGluZTtcclxuICAgIGFuZ2xlcyA6IEFuZ2xlW10gPSBbXTtcclxuXHJcbiAgICBhc3luYyBpbml0KCl7ICAgICAgICBcclxuICAgICAgICB0aGlzLnBhcmFsbGVsUmVhc29uID0gYXdhaXQgc2hvd01lbnUoUGFyYWxsZWxSZWFzb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCl7XHJcbiAgICAgICAgdGhpcy5saW5lQSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmFuZ2xlcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIGxldCBkZXRlY3RvciA6IFBhcmFsbGVsRGV0ZWN0b3IgfCB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IGZpbmlzaGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHN3aXRjaCh0aGlzLnBhcmFsbGVsUmVhc29uKXtcclxuICAgICAgICBjYXNlIFBhcmFsbGVsUmVhc29uLnBhcmFsbGVsb2dyYW06XHJcbiAgICAgICAgICAgIGlmKHNoYXBlIGluc3RhbmNlb2YgQWJzdHJhY3RMaW5lKXtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMubGluZUEgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmVBID0gc2hhcGU7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcGUuc2V0TW9kZShNb2RlLmRlcGVuZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlLnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmaW5pc2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZGV0ZWN0b3IgPSBtYWtlUGFyYWxsZWxEZXRlY3RvckJ5UGFyYWxsZWxvZ3JhbSh0aGlzLmxpbmVBLCBzaGFwZSk7ICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBQYXJhbGxlbFJlYXNvbi5jb3JyZXNwb25kaW5nX2FuZ2xlc19vcl9hbHRlcm5hdGVfYW5nbGVzX2FyZV9lcXVhbDpcclxuICAgICAgICBjYXNlIFBhcmFsbGVsUmVhc29uLnN1cHBsZW1lbnRhcnlfYW5nbGVzOlxyXG4gICAgICAgICAgICBpZihzaGFwZSBpbnN0YW5jZW9mIEFuZ2xlKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5nbGVzLnB1c2goc2hhcGUpO1xyXG4gICAgICAgICAgICAgICAgc2hhcGUuc2V0TW9kZShNb2RlLmRlcGVuZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5hbmdsZXMubGVuZ3RoID09IDIpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmaW5pc2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5wYXJhbGxlbFJlYXNvbiA9PSBQYXJhbGxlbFJlYXNvbi5jb3JyZXNwb25kaW5nX2FuZ2xlc19vcl9hbHRlcm5hdGVfYW5nbGVzX2FyZV9lcXVhbCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGVjdG9yID0gbWFrZVBhcmFsbGVsRGV0ZWN0b3JCeUNvcnJlc3BvbmRpbmdBbHRlcm5hdGVBbmdsZXNFcXVhbCh0aGlzLmFuZ2xlc1swXSwgdGhpcy5hbmdsZXNbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRlY3RvciA9IG1ha2VQYXJhbGxlbERldGVjdG9yQnlTdXBwbGVtZW50YXJ5QW5nbGVzKHRoaXMuYW5nbGVzWzBdLCB0aGlzLmFuZ2xlc1sxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIGlmKGRldGVjdG9yICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcsIGRldGVjdG9yKTtcclxuICAgICAgICAgICAgdGhpcy5yZXNldFRvb2woZGV0ZWN0b3IpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7ICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBFcXVhbGl0eUNvbnN0cmFpbnRCdWlsZGVyIGV4dGVuZHMgQnVpbGRlciB7XHJcbiAgICBsZW5ndGhTeW1ib2xBPyA6IExlbmd0aFN5bWJvbDtcclxuICAgIGFuZ2xlQT8gOiBBbmdsZTtcclxuXHJcbiAgICBhc3luYyBjbGljayh2aWV3IDogVmlldywgcG9zaXRpb24gOiBWZWMyLCBzaGFwZSA6IFNoYXBlIHwgdW5kZWZpbmVkKXtcclxuICAgICAgICBsZXQgY29uc3RyYWludCA6IENvbnN0cmFpbnQgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGlmKHNoYXBlIGluc3RhbmNlb2YgTGVuZ3RoU3ltYm9sKXtcclxuICAgICAgICAgICAgaWYodGhpcy5sZW5ndGhTeW1ib2xBID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aFN5bWJvbEEgPSBzaGFwZTtcclxuICAgICAgICAgICAgICAgIHNoYXBlLnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3RyYWludCA9IG5ldyBMZW5ndGhFcXVhbGl0eUNvbnN0cmFpbnQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aFN5bWJvbEEgOiB0aGlzLmxlbmd0aFN5bWJvbEEsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoU3ltYm9sQiA6IHNoYXBlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHNoYXBlIGluc3RhbmNlb2YgQW5nbGUpe1xyXG4gICAgICAgICAgICBpZih0aGlzLmFuZ2xlQSA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbmdsZUEgPSBzaGFwZTtcclxuICAgICAgICAgICAgICAgIHNoYXBlLnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3RyYWludCA9IG5ldyBBbmdsZUVxdWFsaXR5Q29uc3RyYWludCh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVzIDogWyB0aGlzLmFuZ2xlQSwgc2hhcGUgXVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGNvbnN0cmFpbnQgIT0gdW5kZWZpbmVkKXtcclxuXHJcbiAgICAgICAgICAgIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcsIGNvbnN0cmFpbnQpO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0VG9vbChjb25zdHJhaW50KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoU3ltYm9sQSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5hbmdsZUEgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuYWJzdHJhY3QgY2xhc3MgUGFyYWxsZWxQZXJwZW5kaWN1bGFyTGluZUJ1aWxkZXIgZXh0ZW5kcyBCdWlsZGVyIHtcclxuICAgIGxpbmUgIDogQWJzdHJhY3RMaW5lIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpeyAgIFxyXG4gICAgICAgIGlmKHNoYXBlIGluc3RhbmNlb2YgQWJzdHJhY3RMaW5lKXtcclxuICAgICAgICAgICAgaWYodGhpcy5saW5lID09IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lID0gc2hhcGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmUuc2V0TW9kZShNb2RlLmRlcGVuZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFtsaW5lQSwgbGluZUJdID0gc29ydFNoYXBlPEFic3RyYWN0TGluZT4oW3RoaXMubGluZSwgc2hhcGVdKTtcclxuICAgICAgICAgICAgICAgIGlmKGxpbmVCIGluc3RhbmNlb2YgTGluZUJ5UG9pbnRzKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnN0cmFpbnQgOiBQYXJhbGxlbFBlcnBlbmRpY3VsYXJDb25zdHJhaW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzIGluc3RhbmNlb2YgUGFyYWxsZWxDb25zdHJhaW50QnVpbGRlcil7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW50ID0gbmV3IFBhcmFsbGVsQ29uc3RyYWludCh7IGxpbmVBLCBsaW5lQiB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RyYWludCA9IG5ldyBQZXJwZW5kaWN1bGFyQ29uc3RyYWludCh7IGxpbmVBLCBsaW5lQiB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcsIGNvbnN0cmFpbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmUgID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRUb29sKGNvbnN0cmFpbnQpOyAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lLnNldE1vZGUoTW9kZS5ub25lKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQYXJhbGxlbENvbnN0cmFpbnRCdWlsZGVyIGV4dGVuZHMgUGFyYWxsZWxQZXJwZW5kaWN1bGFyTGluZUJ1aWxkZXIge1xyXG59XHJcblxyXG5jbGFzcyBQZXJwZW5kaWN1bGFyQ29uc3RyYWludEJ1aWxkZXIgZXh0ZW5kcyBQYXJhbGxlbFBlcnBlbmRpY3VsYXJMaW5lQnVpbGRlciB7XHJcbn1cclxuXHJcbmFic3RyYWN0IGNsYXNzIENsYXNzaWZpZXJCdWlsZGVyIGV4dGVuZHMgQnVpbGRlciB7XHJcbn1cclxuXHJcbmNsYXNzIFF1YWRyaWxhdGVyYWxDbGFzc2lmaWVyQnVpbGRlciBleHRlbmRzIENsYXNzaWZpZXJCdWlsZGVyIHtcclxuICAgIHNoYXBlVHlwZSEgOiBTaGFwZVR5cGU7XHJcbiAgICByZWFzb24gOiBQYXJhbGxlbG9ncmFtUmVhc29uIHwgUmhvbWJ1c1JlYXNvbiB8IElzb3NjZWxlc1RyaWFuZ2xlUmVhc29uIHwgdW5kZWZpbmVkO1xyXG4gICAgcG9pbnRzIDogUG9pbnRbXSA9IFtdO1xyXG5cclxuICAgIGFzeW5jIGluaXQoKXsgICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2hhcGVUeXBlID0gYXdhaXQgc2hvd01lbnUoU2hhcGVUeXBlKTtcclxuXHJcbiAgICAgICAgc3dpdGNoKHRoaXMuc2hhcGVUeXBlKXtcclxuICAgICAgICBjYXNlIFNoYXBlVHlwZS5wYXJhbGxlbG9ncmFtOlxyXG4gICAgICAgICAgICB0aGlzLnJlYXNvbiA9IGF3YWl0IHNob3dNZW51KFBhcmFsbGVsb2dyYW1SZWFzb24pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBTaGFwZVR5cGUucmhvbWJ1czpcclxuICAgICAgICAgICAgdGhpcy5yZWFzb24gPSBhd2FpdCBzaG93TWVudShSaG9tYnVzUmVhc29uKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgU2hhcGVUeXBlLmlzb3NjZWxlc190cmlhbmdsZTpcclxuICAgICAgICAgICAgdGhpcy5yZWFzb24gPSBhd2FpdCBzaG93TWVudShJc29zY2VsZXNUcmlhbmdsZVJlYXNvbik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjbGljayh2aWV3IDogVmlldywgcG9zaXRpb24gOiBWZWMyLCBzaGFwZSA6IFNoYXBlIHwgdW5kZWZpbmVkKXtcclxuICAgICAgICBpZihzaGFwZSBpbnN0YW5jZW9mIFBvaW50KXtcclxuICAgICAgICAgICAgdGhpcy5wb2ludHMucHVzaChzaGFwZSk7XHJcbiAgICAgICAgICAgIHNoYXBlLnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG4gICAgICAgICAgICBjb25zdCBudW1fcG9pbnRzID0gKHRoaXMuc2hhcGVUeXBlID09IFNoYXBlVHlwZS5pc29zY2VsZXNfdHJpYW5nbGUgPyAzIDogNCk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMucG9pbnRzLmxlbmd0aCA9PSBudW1fcG9pbnRzKXtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBtc2coYHJlYXNvbjpbJHtyZWFzb259XWApO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvaW50cyA9IHRvQ2xvY2t3aXNlUG9pbnRzKHRoaXMucG9pbnRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgZGV0ZWN0b3IgOiBUcmlhbmdsZVF1YWRyaWxhdGVyYWxEZXRlY3RvciB8IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuc2hhcGVUeXBlID09IFNoYXBlVHlwZS5pc29zY2VsZXNfdHJpYW5nbGUpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkZXRlY3RvciA9IG1ha2VJc29zY2VsZXNUcmlhbmdsZURldGVjdG9yKHBvaW50cywgdGhpcy5yZWFzb24gYXMgSXNvc2NlbGVzVHJpYW5nbGVSZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGV0ZWN0b3IgPSBtYWtlUXVhZHJpbGF0ZXJhbENsYXNzaWZpZXIocG9pbnRzLCB0aGlzLnJlYXNvbiBhcyBQYXJhbGxlbG9ncmFtUmVhc29uIHwgUmhvbWJ1c1JlYXNvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoZGV0ZWN0b3IgIT0gdW5kZWZpbmVkKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkU2hhcGVTZXRSZWxhdGlvbnModmlldywgZGV0ZWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRUb29sKGRldGVjdG9yKTsgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5wb2ludHMgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNoYXBlRXF1YXRpb25CdWlsZGVyIGV4dGVuZHMgQnVpbGRlciB7XHJcbiAgICByZWFzb24gOiBTaGFwZUVxdWF0aW9uUmVhc29uID0gU2hhcGVFcXVhdGlvblJlYXNvbi5ub25lO1xyXG4gICAgc2hhcGVzIDogU2hhcGVbXSA9IFtdO1xyXG5cclxuICAgIGFzeW5jIGluaXQoKXsgICAgICAgIFxyXG4gICAgICAgIHRoaXMucmVhc29uICA9IGF3YWl0IHNob3dNZW51KFNoYXBlRXF1YXRpb25SZWFzb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIGlmKHNoYXBlID09IHVuZGVmaW5lZCB8fCB0aGlzLnNoYXBlcy5pbmNsdWRlcyhzaGFwZSkpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2godGhpcy5yZWFzb24pe1xyXG4gICAgICAgIGNhc2UgU2hhcGVFcXVhdGlvblJlYXNvbi5zdW1fb2ZfYW5nbGVzX2lzX3BpOlxyXG4gICAgICAgIGNhc2UgU2hhcGVFcXVhdGlvblJlYXNvbi5zdW1fb2ZfYW5nbGVzX2lzX2VxdWFsOlxyXG4gICAgICAgIGNhc2UgU2hhcGVFcXVhdGlvblJlYXNvbi5leHRlcmlvcl9hbmdsZV90aGVvcmVtOlxyXG4gICAgICAgICAgICBpZihzaGFwZSBpbnN0YW5jZW9mIEFuZ2xlKXtcclxuICAgICAgICAgICAgICAgIGlmKHNoYXBlLm5hbWUgPT0gXCJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgbXNnKFRUKFwiVGhlIG5hbWUgb2YgdGhlIHNoYXBlIGlzIGJsYW5rLlwiKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGFwZXMucHVzaChzaGFwZSk7XHJcbiAgICAgICAgICAgICAgICBzaGFwZS5zZXRNb2RlKE1vZGUuZGVwZW5kKTtcclxuICAgICAgICAgICAgICAgIC8vIG1zZyhgY2xpY2sgZXEgJHt0aGlzLnNoYXBlcy5sZW5ndGh9YCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5yZWFzb24gPT0gU2hhcGVFcXVhdGlvblJlYXNvbi5leHRlcmlvcl9hbmdsZV90aGVvcmVtICYmIHRoaXMuc2hhcGVzLmxlbmd0aCA9PSAzKXtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmZpbmlzaCh2aWV3KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBTaGFwZUVxdWF0aW9uUmVhc29uLnN1bV9vZl9sZW5ndGhzX2lzX2VxdWFsOlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG5cclxuICAgICAgICBjYXNlIFNoYXBlRXF1YXRpb25SZWFzb24uc3VtX29mX2ludGVyaW9yX2FuZ2xlc19vZl90cmlhbmdsZV9pc19waTpcclxuICAgICAgICBjYXNlIFNoYXBlRXF1YXRpb25SZWFzb24uc3VtX29mX2ludGVyaW9yX2FuZ2xlc19vZl9xdWFkcmlsYXRlcmFsX2lzXzJwaTpcclxuICAgICAgICAgICAgaWYoc2hhcGUgaW5zdGFuY2VvZiBQb2ludCl7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGFwZXMucHVzaChzaGFwZSk7XHJcbiAgICAgICAgICAgICAgICBzaGFwZS5zZXRNb2RlKE1vZGUuZGVwZW5kKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBudW1fdmVydGljZXMgPSAodGhpcy5yZWFzb24gPT0gU2hhcGVFcXVhdGlvblJlYXNvbi5zdW1fb2ZfaW50ZXJpb3JfYW5nbGVzX29mX3RyaWFuZ2xlX2lzX3BpID8gMyA6IDQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLnNoYXBlcy5sZW5ndGggPT0gbnVtX3ZlcnRpY2VzKXtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmZpbmlzaCh2aWV3KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZmluaXNoKHZpZXcgOiBWaWV3KXsgICAgICAgIFxyXG4gICAgICAgIC8vIG1zZyhgZmluaXNoIHNoYXBlcyAke3RoaXMuc2hhcGVzLmxlbmd0aH1gKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2hhcGVFcXVhdGlvbiA9IGF3YWl0IG1ha2VTaGFwZUVxdWF0aW9uKHRoaXMucmVhc29uLCB0aGlzLnNoYXBlcyk7XHJcbiAgICAgICAgaWYoc2hhcGVFcXVhdGlvbiAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBhZGRTaGFwZVNldFJlbGF0aW9ucyh2aWV3LCBzaGFwZUVxdWF0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5yZXNldFRvb2woc2hhcGVFcXVhdGlvbik7ICAgIFxyXG5cclxuICAgICAgICAgICAgYXdhaXQgc2ltcGxpZnlFcXVhdGlvblRleHRCbG9jayhzaGFwZUVxdWF0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2hhcGVzID0gW107XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFeHByVHJhbnNmb3JtQnVpbGRlciBleHRlbmRzIEJ1aWxkZXIge1xyXG4gICAgcmVhc29uIDogRXhwclRyYW5zZm9ybVJlYXNvbiA9IEV4cHJUcmFuc2Zvcm1SZWFzb24ubm9uZTtcclxuICAgIHRlcm1zIDogVGVybVtdID0gW107XHJcbiAgICB0ZXh0QmxvY2tzIDogVGV4dEJsb2NrW10gPSBbXTtcclxuICAgIG1hdGhUZXh0IDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgICByb290IDogQXBwIHwgdW5kZWZpbmVkO1xyXG4gICAgc2hpZnQgOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIGFzeW5jIGluaXQoKXsgICAgICAgIFxyXG4gICAgICAgIHRoaXMucmVhc29uICA9IGF3YWl0IHNob3dNZW51KEV4cHJUcmFuc2Zvcm1SZWFzb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNsaWNrKHZpZXcgOiBWaWV3LCBwb3NpdGlvbiA6IFZlYzIsIHNoYXBlIDogU2hhcGUgfCB1bmRlZmluZWQpe1xyXG4gICAgICAgIC8vIG1zZyhgY2xpY2sgZXEgJHt0aGlzLnRlcm1zLmxlbmd0aH1gKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkYmxjbGljayh2aWV3IDogVmlldywgcG9zaXRpb24gOiBWZWMyLCBzaGFwZSA6IFNoYXBlIHwgdW5kZWZpbmVkKXtcclxuICAgICAgICBtc2coYGRibGNsaWNrIGVxICR7dGhpcy50ZXJtcy5sZW5ndGh9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdGVybUNsaWNrKHRlcm0gOiBUZXJtLCB0ZXh0QmxvY2sgOiBUZXh0QmxvY2spe1xyXG4gICAgICAgIC8vIG1zZyhgdGVybSBjbGljayAke3RoaXMudGVybXMubGVuZ3RofWApO1xyXG5cclxuICAgICAgICBpZighIHRoaXMudGVybXMuaW5jbHVkZXModGVybSkpe1xyXG4gICAgICAgICAgICB0aGlzLnRlcm1zLnB1c2godGVybSk7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dEJsb2Nrcy5wdXNoKHRleHRCbG9jayk7XHJcblxyXG4gICAgICAgICAgICBpZih0aGlzLnJlYXNvbiA9PSBFeHByVHJhbnNmb3JtUmVhc29uLmRpdmlkaW5nX2VxdWF0aW9uKXtcclxuICAgICAgICAgICAgICAgIGFzc2VydCh0ZXJtLmlzUm9vdEVxKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb290ID0gdGVybSBhcyBBcHA7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRoVGV4dCA9IGlucHV0VGV4dFByb21wdChUVChcIkVudGVyIGEgbWF0aGVtYXRpY2FsIGV4cHJlc3Npb24uXCIpKTtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMubWF0aFRleHQgPT0gbnVsbCl7XHJcbiAgICAgICAgICAgICAgICAgICAgQnVpbGRlci5jYW5jZWxUb29sKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZmluaXNoKFZpZXcuY3VycmVudCk7XHJcbiAgICAgICAgICAgICAgICB9ICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYodGhpcy5yZWFzb24gPT0gRXhwclRyYW5zZm9ybVJlYXNvbi5hcmdfc2hpZnQpe1xyXG4gICAgICAgICAgICAgICAgdGVybS5jb2xvck5hbWUgPSBcImJsdWVcIjtcclxuICAgICAgICAgICAgICAgIHJlbmRlckthdGV4U3ViKHRleHRCbG9jay5kaXYsIHRlcm0uZ2V0Um9vdCgpLnRleCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXREc3RUZXJtUmVjdCh0ZXJtUmVjdHMgOiBUZXJtUmVjdFtdLCBzcmNUZXJtUmVjdCA6IFRlcm1SZWN0KSA6IFRlcm1SZWN0IHtcclxuICAgICAgICBpZih0aGlzLnJlYXNvbiA9PSBFeHByVHJhbnNmb3JtUmVhc29uLmFkZF9lcXVhdGlvbil7XHJcbiAgICAgICAgICAgIGZvcihsZXQgdGVybSA9IHNyY1Rlcm1SZWN0LnRlcm07IHRlcm0ucGFyZW50ICE9IG51bGw7IHRlcm0gPSB0ZXJtLnBhcmVudCl7XHJcbiAgICAgICAgICAgICAgICBpZih0ZXJtLnBhcmVudC5pc0VxKCkpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkc3RUZXJtUmVjdCA9IHRlcm1SZWN0cy5maW5kKHggPT4geC50ZXJtID09IHRlcm0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRzdFRlcm1SZWN0ID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBkc3RUZXJtUmVjdC5zcGFuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiYmx1ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkc3RUZXJtUmVjdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0aGlzLnJlYXNvbiA9PSBFeHByVHJhbnNmb3JtUmVhc29uLmRpdmlkaW5nX2VxdWF0aW9uKXtcclxuICAgICAgICAgICAgY29uc3Qgcm9vdCA9IHNyY1Rlcm1SZWN0LnRlcm0uZ2V0Um9vdCgpO1xyXG4gICAgICAgICAgICBjb25zdCBkc3RUZXJtUmVjdCA9IHRlcm1SZWN0cy5maW5kKHggPT4geC50ZXJtID09IHJvb3QpO1xyXG4gICAgICAgICAgICBpZihkc3RUZXJtUmVjdCA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE15RXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkc3RUZXJtUmVjdC5zcGFuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiYmx1ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gZHN0VGVybVJlY3Q7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYodGhpcy5yZWFzb24gPT0gRXhwclRyYW5zZm9ybVJlYXNvbi5zdWJzdGl0dXRpb24pe1xyXG4gICAgICAgICAgICBsZXQgZHN0VGVybVJlY3QgOiBUZXJtUmVjdCB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgIGlmKHRoaXMudGVybXMubGVuZ3RoID09IDApe1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2lkZSA9IHNyY1Rlcm1SZWN0LnRlcm0uZ2V0RXFTaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZihzaWRlICE9IG51bGwpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkc3RUZXJtUmVjdCA9IHRlcm1SZWN0cy5maW5kKHggPT4geC50ZXJtID09IHNpZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcmNfdGVybSA9IHRoaXMudGVybXNbMF07XHJcbiAgICAgICAgICAgICAgICBhbGdlYnJhX3RzLmluaXRIYXNoVGVybSgpO1xyXG4gICAgICAgICAgICAgICAgYWxnZWJyYV90cy5zZXRIYXNoVGVybShbXSwgc3JjX3Rlcm0pO1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBkc3RfdGVybSA6IFRlcm0gPSBzcmNUZXJtUmVjdC50ZXJtOyBkc3RfdGVybS5wYXJlbnQgIT0gbnVsbDsgZHN0X3Rlcm0gPSBkc3RfdGVybS5wYXJlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZ2VicmFfdHMuc2V0SGFzaFRlcm0oW10sIGRzdF90ZXJtKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihzcmNfdGVybS5oYXNoID09IGRzdF90ZXJtLmhhc2gpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZHN0VGVybVJlY3QgPSB0ZXJtUmVjdHMuZmluZCh4ID0+IHgudGVybSA9PSBkc3RfdGVybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRzdFRlcm1SZWN0ICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKGRzdFRlcm1SZWN0ICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICBkc3RUZXJtUmVjdC5zcGFuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiYmx1ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZHN0VGVybVJlY3Q7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBzcmNUZXJtUmVjdC5zcGFuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiYmx1ZVwiO1xyXG4gICAgICAgICAgICByZXR1cm4gc3JjVGVybVJlY3Q7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZpbmlzaCh2aWV3IDogVmlldyl7XHJcbiAgICAgICAgLy8gbXNnKGBmaW5pc2ggdGVybXMgJHt0aGlzLnRlcm1zLmxlbmd0aH1gKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3BlZWNoID0gbmV3IFNwZWVjaCgpO1xyXG4gICAgICAgIGxldCBleHByVHJhbnNmb3JtIDogRXhwclRyYW5zZm9ybSB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgbXNnKGBleHByOiR7ZW51bVRvSW1nTmFtZS5nZXQodGhpcy5yZWFzb24pfWApXHJcbiAgICAgICAgdGhpcy50ZXJtcy5mb3JFYWNoKHggPT4gbXNnKGAke3guZ2V0Um9vdCgpLnN0cigpfVske3guc3RyKCl9XWApKTtcclxuICAgICAgICBzd2l0Y2godGhpcy5yZWFzb24pe1xyXG4gICAgICAgIGNhc2UgRXhwclRyYW5zZm9ybVJlYXNvbi50cmFuc3Bvc2l0aW9uOlxyXG4gICAgICAgICAgICAvLyBtc2coXCJFeHByLVRyYW5zZm9ybS1SZWFzb24udHJhbnNwb3NpdGlvblwiKTtcclxuICAgICAgICAgICAgaWYodGhpcy50ZXJtcy5sZW5ndGggPT0gMSl7XHJcbiAgICAgICAgICAgICAgICBleHByVHJhbnNmb3JtID0gYXdhaXQgbWFrZUV4cHJUcmFuc2Zvcm1CeVRyYW5zcG9zaXRpb24odGhpcy50ZXJtc1swXSwgdGhpcy50ZXh0QmxvY2tzWzBdLCBzcGVlY2gpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcihgdGVybXMgbGVuZ3RoICE9IDFgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBFeHByVHJhbnNmb3JtUmVhc29uLmVxdWFsaXR5OlxyXG4gICAgICAgICAgICAvLyBtc2coXCJFeHByLVRyYW5zZm9ybS1SZWFzb24uZXF1YWxpdHlcIik7XHJcbiAgICAgICAgICAgIGlmKDIgPD0gdGhpcy50ZXJtcy5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgZXhwclRyYW5zZm9ybSA9IGF3YWl0IG1ha2VFeHByVHJhbnNmb3JtQnlFcXVhbGl0eSh0aGlzLnRlcm1zLCB0aGlzLnRleHRCbG9ja3MsIHNwZWVjaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKGB0ZXJtcyBsZW5ndGggPCAyYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgRXhwclRyYW5zZm9ybVJlYXNvbi5hZGRfZXF1YXRpb246XHJcbiAgICAgICAgICAgIC8vIG1zZyhcIkV4cHItVHJhbnNmb3JtLVJlYXNvbi5hZGQtZXF1YXRpb25cIik7XHJcbiAgICAgICAgICAgIGV4cHJUcmFuc2Zvcm0gPSBhd2FpdCBtYWtlRXhwclRyYW5zZm9ybUJ5QWRkRXF1YXRpb24odGhpcy50ZXJtcywgdGhpcy50ZXh0QmxvY2tzLCBzcGVlY2gpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBFeHByVHJhbnNmb3JtUmVhc29uLnN1YnN0aXR1dGlvbjpcclxuICAgICAgICAgICAgLy8gbXNnKFwiRXhwci1UcmFuc2Zvcm0tUmVhc29uLnN1YnN0aXR1dGlvblwiKTtcclxuICAgICAgICAgICAgZXhwclRyYW5zZm9ybSA9IGF3YWl0IG1ha2VFeHByVHJhbnNmb3JtQnlTdWJzdGl0dXRpb24odGhpcy50ZXJtcywgdGhpcy50ZXh0QmxvY2tzLCBzcGVlY2gpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBFeHByVHJhbnNmb3JtUmVhc29uLmRpdmlkaW5nX2VxdWF0aW9uOlxyXG4gICAgICAgICAgICAvLyBtc2coXCJFeHByLVRyYW5zZm9ybS1SZWFzb24uZGl2aWRpbmctZXF1YXRpb25cIik7XHJcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLnRleHRCbG9ja3MubGVuZ3RoID09IDEpO1xyXG4gICAgICAgICAgICBleHByVHJhbnNmb3JtID0gYXdhaXQgbWFrZUV4cHJUcmFuc2Zvcm1CeURpdmlkaW5nRXF1YXRpb24odGhpcy5yb290ISwgdGhpcy5tYXRoVGV4dCEsIHRoaXMudGV4dEJsb2Nrc1swXSwgc3BlZWNoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgRXhwclRyYW5zZm9ybVJlYXNvbi5hcmdfc2hpZnQ6XHJcbiAgICAgICAgICAgIC8vIG1zZyhcIkV4cHJUcmFuc2Zvcm1SZWFzb24uYXJnX3NoaWZ0XCIpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoZXhwclRyYW5zZm9ybSAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBtc2coYHJlc3VsdDoke2V4cHJUcmFuc2Zvcm0uZXF1YXRpb24uc3RyKCl9YCk7XHJcblxyXG4gICAgICAgICAgICBhZGRTaGFwZVNldFJlbGF0aW9ucyh2aWV3LCBleHByVHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgdGhpcy5yZXNldFRvb2woZXhwclRyYW5zZm9ybSk7ICAgIFxyXG5cclxuICAgICAgICAgICAgYXdhaXQgc2ltcGxpZnlFcXVhdGlvblRleHRCbG9jayhleHByVHJhbnNmb3JtKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgUHJvcG9zaXRpb25CdWlsZGVyIGV4dGVuZHMgQnVpbGRlciB7XHJcbiAgICByZWFzb24gOiBQcm9wb3NpdGlvblJlYXNvbiA9IFByb3Bvc2l0aW9uUmVhc29uLm5vbmU7XHJcbiAgICBzaGFwZXMgOiAoQW5nbGUgfCBMZW5ndGhTeW1ib2wpW10gPSBbXTtcclxuXHJcbiAgICBhc3luYyBpbml0KCl7ICAgICAgICBcclxuICAgICAgICB0aGlzLnJlYXNvbiAgPSBhd2FpdCBzaG93TWVudShQcm9wb3NpdGlvblJlYXNvbik7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY2xpY2sodmlldyA6IFZpZXcsIHBvc2l0aW9uIDogVmVjMiwgc2hhcGUgOiBTaGFwZSB8IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgaWYoc2hhcGUgPT0gdW5kZWZpbmVkIHx8IHRoaXMuc2hhcGVzLmluY2x1ZGVzKHNoYXBlIGFzIGFueSkpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2godGhpcy5yZWFzb24pe1xyXG4gICAgICAgIGNhc2UgUHJvcG9zaXRpb25SZWFzb24uYW5nbGVfZXF1YWxpdHk6XHJcbiAgICAgICAgY2FzZSBQcm9wb3NpdGlvblJlYXNvbi5sZW5ndGhfZXF1YWxpdHk6XHJcbiAgICAgICAgICAgIGlmKCB0aGlzLnJlYXNvbiA9PSBQcm9wb3NpdGlvblJlYXNvbi5hbmdsZV9lcXVhbGl0eSAgJiYgc2hhcGUgaW5zdGFuY2VvZiBBbmdsZSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWFzb24gPT0gUHJvcG9zaXRpb25SZWFzb24ubGVuZ3RoX2VxdWFsaXR5ICYmIHNoYXBlIGluc3RhbmNlb2YgTGVuZ3RoU3ltYm9sKXtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoYXBlcy5wdXNoKHNoYXBlKTtcclxuICAgICAgICAgICAgICAgIHNoYXBlLnNldE1vZGUoTW9kZS5kZXBlbmQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuc2hhcGVzLmxlbmd0aCA9PSAyKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wb3NpdGlvbiA9IG1ha2VTaGFwZVByb3Bvc2l0aW9uKHRoaXMucmVhc29uLCB0aGlzLnNoYXBlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkU2hhcGVTZXRSZWxhdGlvbnModmlldywgcHJvcG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRUb29sKHByb3Bvc2l0aW9uKTsgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgUHJvcG9zaXRpb25SZWFzb24uZXF1YXRpb246e1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0aFRleHQgPSBpbnB1dFRleHRQcm9tcHQoVFQoXCJFbnRlciBhIG1hdGhlbWF0aWNhbCBleHByZXNzaW9uLlwiKSk7XHJcbiAgICAgICAgICAgICAgICBpZihtYXRoVGV4dCA9PSBudWxsKXtcclxuICAgICAgICAgICAgICAgICAgICBCdWlsZGVyLmNhbmNlbFRvb2woKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcG9zaXRpb24gPSBtYWtlRXF1YXRpb25Qcm9wb3NpdGlvbih0aGlzLnJlYXNvbiwgbWF0aFRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHByb3Bvc2l0aW9uICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFNoYXBlU2V0UmVsYXRpb25zKHZpZXcsIHByb3Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldFRvb2wocHJvcG9zaXRpb24pOyAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNpbXBsaWZ5RXF1YXRpb25UZXh0QmxvY2socHJvcG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIEJ1aWxkZXIuY2FuY2VsVG9vbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcblxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIE1vdGlvbkJ1aWxkZXIgZXh0ZW5kcyBTZWxlY3Rpb25Ub29sIHsgXHJcbiAgICBhbmltYXRpb24gOiBNb3Rpb247XHJcblxyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmFuaW1hdGlvbiA9IG5ldyBNb3Rpb24oeyBwcm9wZXJ0eUNoYW5nZXMgOiBbXSB9KTtcclxuICAgICAgICBWaWV3LmN1cnJlbnQuYWRkU2hhcGUodGhpcy5hbmltYXRpb24pO1xyXG5cclxuICAgICAgICBzaG93UHJvcGVydHkodGhpcy5hbmltYXRpb24sIDApO1xyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuXHJcbmNvbnN0IHRvb2xMaXN0IDogW3R5cGVvZiBCdWlsZGVyLCBzdHJpbmcsIHN0cmluZywgKHR5cGVvZiBNYXRoRW50aXR5KVtdXVtdID0gW1xyXG4gICAgWyBTZWxlY3Rpb25Ub29sICAgICAgICAgICAgICwgXCJzZWxlY3Rpb25cIiAgICAgICAgICAsIFRUKFwic2VsZWN0aW9uXCIpICAgICAgICAgICwgWyAgXSBdLFxyXG4gICAgWyBQb2ludEJ1aWxkZXIgICAgICAgICAgICAgICwgXCJwb2ludFwiICAgICAgICAgICAgICAsIFRUKFwicG9pbnRcIikgICAgICAgICAgICAgICwgWyBQb2ludCBdIF0sXHJcbiAgICBbIE1pZHBvaW50QnVpbGRlciAgICAgICAgICAgLCBcIm1pZF9wb2ludFwiICAgICAgICAgICwgVFQoXCJtaWQgcG9pbnRcIikgICAgICAgICAgLCBbIE1pZHBvaW50IF0gXSxcclxuICAgIFsgSW50ZXJzZWN0aW9uQnVpbGRlciAgICAgICAsIFwiaW50ZXJzZWN0aW9uXCIgICAgICAgLCBUVChcImludGVyc2VjdGlvblwiKSAgICAgICAsIFsgTGluZUxpbmVJbnRlcnNlY3Rpb24sIExpbmVBcmNJbnRlcnNlY3Rpb24sIEFyY0FyY0ludGVyc2VjdGlvbiBdIF0sXHJcbiAgICBbIExpbmVTZWdtZW50QnVpbGRlciAgICAgICAgLCBcImxpbmVfc2VnbWVudFwiICAgICAgICwgVFQoXCJsaW5lIHNlZ21lbnRcIikgICAgICAgLCBbIExpbmVCeVBvaW50cyBdIF0sXHJcbiAgICBbIFBvbHlnb25CdWlsZGVyICAgICAgICAgICAgLCBcInBvbHlnb25cIiAgICAgICAgICAgICwgVFQoXCJwb2x5Z29uXCIpICAgICAgICAgICAgLCBbIFBvbHlnb24gXSBdLFxyXG4gICAgWyBQZXJwZW5kaWN1bGFyQnVpbGRlciAgICAgICwgXCJwZXJwZW5kaWN1bGFyXCIgICAgICAsIFRUKFwicGVycGVuZGljdWxhclwiKSAgICAgICwgWyBGb290T2ZQZXJwZW5kaWN1bGFyIF0gXSxcclxuICAgIFsgUGVycGVuZGljdWxhckxpbmVCdWlsZGVyICAsIFwicGVycGVuZGljdWxhcl9saW5lXCIgLCBUVChcInBlcnBlbmRpY3VsYXJcIikgICAgICAsIFsgUGVycGVuZGljdWxhckxpbmUgXSBdLFxyXG4gICAgWyBQYXJhbGxlbExpbmVCdWlsZGVyICAgICAgICwgXCJwYXJhbGxlbF9saW5lXCIgICAgICAsIFRUKFwicGFyYWxsZWwgbGluZVwiKSAgICAgICwgWyBQYXJhbGxlbExpbmUgXSBdLFxyXG4gICAgWyBBbmdsZUJpc2VjdG9yQnVpbGRlciAgICAgICwgXCJhbmdsZV9iaXNlY3RvclwiICAgICAsIFRUKFwiYW5nbGUgYmlzZWN0b3JcIikgICAgICwgWyBBbmdsZUJpc2VjdG9yIF1dLFxyXG4gICAgWyBDaXJjbGVCeVBvaW50QnVpbGRlciAgICAgICwgXCJjaXJjbGVfYnlfcG9pbnRcIiAgICAsIFRUKFwiY2lyY2xlIGJ5IHBvaW50XCIpICAgICwgWyBDaXJjbGVCeVBvaW50IF0gXSxcclxuICAgIFsgQ2lyY2xlQnlSYWRpdXNCdWlsZGVyICAgICAsIFwiY2lyY2xlX2J5X3JhZGl1c1wiICAgLCBUVChcImNpcmNsZSBieSByYWRpdXNcIikgICAsIFsgQ2lyY2xlQnlSYWRpdXMgXSBdLFxyXG4gICAgWyBBcmNCeVBvaW50QnVpbGRlciAgICAgICAgICwgXCJhcmNfYnlfcG9pbnRcIiAgICAgICAsIFRUKFwiYXJjIGJ5IHBvaW50XCIpICAgICAgICwgWyBBcmNCeVBvaW50IF0gXSxcclxuICAgIFsgQXJjQnlSYWRpdXNCdWlsZGVyICAgICAgICAsIFwiYXJjX2J5X3JhZGl1c1wiICAgICAgLCBUVChcImFyYyBieSByYWRpdXNcIikgICAgICAsIFsgQXJjQnlMZW5ndGhTeW1ib2wsIEFyY0J5Q2lyY2xlIF0gXSxcclxuICAgIFsgQW5nbGVCdWlsZGVyICAgICAgICAgICAgICAsIFwiYW5nbGVcIiAgICAgICAgICAgICAgLCBUVChcImFuZ2xlXCIpICAgICAgICAgICAgICAsIFsgQW5nbGUgXSBdLFxyXG4gICAgWyBMZW5ndGhTeW1ib2xCdWlsZGVyICAgICAgICwgXCJsZW5ndGhfc3ltYm9sXCIgICAgICAsIFRUKFwibGVuZ3RoIHN5bWJvbFwiKSAgICAgICwgWyBMZW5ndGhTeW1ib2wgXSBdLFxyXG4gICAgWyBUcmlhbmdsZUNvbmdydWVuY2VCdWlsZGVyICwgXCJ0cmlhbmdsZV9jb25ncnVlbmNlXCIsIFRUKFwidHJpYW5nbGUgY29uZ3J1ZW5jZVwiKSwgWyBUcmlhbmdsZUNvbmdydWVuY2UgXSBdLFxyXG4gICAgWyBUcmlhbmdsZVNpbWlsYXJpdHlCdWlsZGVyICwgXCJ0cmlhbmdsZV9zaW1pbGFyaXR5XCIsIFRUKFwidHJpYW5nbGUgc2ltaWxhcml0eVwiKSwgWyBUcmlhbmdsZVNpbWlsYXJpdHkgXSBdLFxyXG4gICAgWyBMZW5ndGhFcXVhbGl0eUJ1aWxkZXIgICAgICwgXCJlcXVhbF9sZW5ndGhcIiAgICAgICAsIFRUKFwiZXF1YWwgbGVuZ3RoXCIpICAgICAgICwgWyBMZW5ndGhFcXVhbGl0eSBdIF0sXHJcbiAgICBbIEFuZ2xlRXF1YWxpdHlCdWlsZGVyICAgICAgLCBcImVxdWFsX2FuZ2xlXCIgICAgICAgICwgVFQoXCJlcXVhbCBhbmdsZVwiKSAgICAgICAgLCBbIEFuZ2xlRXF1YWxpdHkgXSBdLFxyXG4gICAgWyBQYXJhbGxlbERldGVjdG9yQnVpbGRlciAgICwgXCJwYXJhbGxlbF9kZXRlY3RvclwiICAsIFRUKFwicGFyYWxsZWwgZGV0ZWN0b3JcIikgICwgWyBQYXJhbGxlbERldGVjdG9yIF0gXSxcclxuICAgIFsgRXF1YWxpdHlDb25zdHJhaW50QnVpbGRlciAsIFwiZXF1YWxpdHlfY29uc3RyYWludFwiLCBUVChcImVxdWFsaXR5IGNvbnN0cmFpbnRcIiksIFsgTGVuZ3RoRXF1YWxpdHlDb25zdHJhaW50LCBBbmdsZUVxdWFsaXR5Q29uc3RyYWludCBdIF0sXHJcbiAgICBbIEFzc3VtcHRpb25CdWlsZGVyICAgICAgICAgLCBcImFzc3VtcHRpb25cIiAgICAgICAgICwgVFQoXCJhc3N1bXB0aW9uXCIpICAgICAgICAgLCBbIEFzc3VtcHRpb24gXSBdLFxyXG4gICAgWyBQYXJhbGxlbENvbnN0cmFpbnRCdWlsZGVyICwgXCJwYXJhbGxlbF9jb25zdHJhaW50XCIsIFRUKFwicGFyYWxsZWwgY29uc3RyYWludFwiKSwgWyBQYXJhbGxlbENvbnN0cmFpbnQgXV0sXHJcbiAgICBbIFBlcnBlbmRpY3VsYXJDb25zdHJhaW50QnVpbGRlciAsIFwicGVycGVuZGljdWxhcl9jb25zdHJhaW50XCIgLCBUVChcInBlcnBlbmRpY3VsYXIgY29uc3RyYWludFwiKSwgWyBQZXJwZW5kaWN1bGFyQ29uc3RyYWludCBdXSxcclxuICAgIFsgUXVhZHJpbGF0ZXJhbENsYXNzaWZpZXJCdWlsZGVyLCBcInF1YWRyaWxhdGVyYWxfY2xhc3NpZmllclwiLCBUVChcInF1YWRyaWxhdGVyYWwgY2xhc3NpZmllclwiKSwgWyBQYXJhbGxlbG9ncmFtQ2xhc3NpZmllciwgUmhvbWJ1c0NsYXNzaWZpZXIsIFRyaWFuZ2xlRGV0ZWN0b3IgXV0sXHJcbiAgICBbIFNoYXBlRXF1YXRpb25CdWlsZGVyICAgICAgLCBcInNoYXBlX2VxdWF0aW9uXCIgICAgICwgVFQoXCJzaGFwZSBlcXVhdGlvblwiKSAgICAgLCBbIFNoYXBlRXF1YXRpb24gXSBdLFxyXG4gICAgWyBFeHByVHJhbnNmb3JtQnVpbGRlciAgICAgICwgXCJleHByX3RyYW5zZm9ybVwiICAgICAsIFRUKFwiZXhwcmVzc2lvbiB0cmFuc2Zvcm1hdGlvblwiKSwgWyBFeHByVHJhbnNmb3JtIF0gXSxcclxuICAgIFsgUHJvcG9zaXRpb25CdWlsZGVyICAgICAgICAsIFwicHJvcG9zaXRpb25cIiAgICAgICAgLCBUVChcInByb3Bvc2l0aW9uXCIpICAgICAgICAsIFsgUHJvcG9zaXRpb24gXSBdLFxyXG4gICAgWyBUZXh0QmxvY2tCdWlsZGVyICAgICAgICAgICwgXCJ0ZXh0XCIgICAgICAgICAgICAgICAsIFRUKFwidGV4dFwiKSAgICAgICAgICAgICAgICwgWyBUZXh0QmxvY2sgXSBdLFxyXG5dO1xyXG5cclxuY29uc3QgZWRpdFRvb2xMaXN0IDogW3R5cGVvZiBCdWlsZGVyLCBzdHJpbmcsIHN0cmluZywgKHR5cGVvZiBNYXRoRW50aXR5KVtdXVtdID0gW1xyXG4gICAgWyBSYW5nZVRvb2wgICAgICAgICAgICAgICAgICwgXCJyYW5nZVwiICAgICAgICAgICAgICAsIFRUKFwicmFuZ2VcIikgICAgICAgICAgICAgICwgWyAgXSBdLFxyXG4gICAgWyBFbGxpcHNlQnVpbGRlciAgICAgICAgICAgICwgXCJlbGxpcHNlXCIgICAgICAgICAgICAsIFRUKFwiZWxsaXBzZVwiKSAgICAgICAgICAgICwgWyBFbGxpcHNlIF0gXSxcclxuICAgIFsgQ2lyY2xlUG9pbnRUYW5nZW50QnVpbGRlciAsIFwidGFuZ2VudF9wb2ludFwiICAgICAgLCBUVChcInRhbmdlbnQgcG9pbnRcIikgICAgICAsIFsgQ2lyY2xlUG9pbnRUYW5nZW50IF0gXSxcclxuICAgIFsgQ2lyY2xlQ2lyY2xlVGFuZ2VudEJ1aWxkZXIsIFwidGFuZ2VudF9jaXJjbGVzXCIgICAgLCBUVChcInRhbmdlbnQgY2lyY2xlc1wiKSAgICAsIFsgQ2lyY2xlQ2lyY2xlVGFuZ2VudCBdIF0sXHJcbiAgICBbIERpbWVuc2lvbkxpbmVCdWlsZGVyICAgICAgLCBcImRpbWVuc2lvbl9saW5lXCIgICAgICwgVFQoXCJkaW1lbnNpb24gbGluZVwiKSAgICAgLCBbIERpbWVuc2lvbkxpbmUgXSBdLFxyXG4gICAgWyBTdGF0ZW1lbnRCdWlsZGVyICAgICAgICAgICwgXCJzdGF0ZW1lbnRcIiAgICAgICAgICAsIFRUKFwic3RhdGVtZW50XCIpICAgICAgICAgICwgWyBTdGF0ZW1lbnQgXSBdLFxyXG4gICAgWyBNb3Rpb25CdWlsZGVyICAgICAgICAgICAgICwgXCJhbmltYXRpb25cIiAgICAgICAgICAsIFRUKFwiYW5pbWF0aW9uXCIpICAgICAgICAgICwgWyBNb3Rpb24gXSBdLFxyXG5dO1xyXG5cclxuZnVuY3Rpb24gaW5pdFRvb2xMaXN0KCl7XHJcbiAgICBpZihpMThuX3RzLmFwcE1vZGUgPT0gaTE4bl90cy5BcHBNb2RlLmVkaXQpe1xyXG4gICAgICAgIHRvb2xMaXN0LnB1c2goLi4uIGVkaXRUb29sTGlzdCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlU2hhcGVCdXR0b24oc2hhcGUgOiBNYXRoRW50aXR5LCBpbl9zaGFwZV9oaXN0b3J5IDogYm9vbGVhbikgOiBsYXlvdXRfdHMuQnV0dG9uIHtcclxuICAgIGxldCBzaGFwZV9pbWdfbmFtZSA6IHN0cmluZyB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICBmb3IoY29uc3QgWyB0b29sLCBpbWdfbmFtZSwgdGl0bGUsIHNoYXBlX2NsYXNzZXNdIG9mIHRvb2xMaXN0KXtcclxuICAgICAgICBpZihzaGFwZV9jbGFzc2VzLnNvbWUoeCA9PiB4Lm5hbWUgPT0gc2hhcGUuY29uc3RydWN0b3IubmFtZSkpe1xyXG5cclxuICAgICAgICAgICAgc2hhcGVfaW1nX25hbWUgPSBpbWdfbmFtZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmKHNoYXBlX2ltZ19uYW1lID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgaWYoc2hhcGUgaW5zdGFuY2VvZiBQb2x5Z29uKXtcclxuICAgICAgICAgICAgc2hhcGVfaW1nX25hbWUgPSBcInBvbHlnb25cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBNeUVycm9yKGB1bmtub3duIHNoYXBlIGNsYXNzIG5hbWU6WyR7c2hhcGUuY29uc3RydWN0b3IubmFtZX1dYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJ1dHRvbiA9IGxheW91dF90cy4kYnV0dG9uKHtcclxuICAgICAgICB1cmwgICAgOiBgJHt1cmxPcmlnaW59L2xpYi9wbGFuZS9pbWcvJHtzaGFwZV9pbWdfbmFtZX0ucG5nYCxcclxuICAgICAgICB3aWR0aCAgOiBcIjIwcHhcIixcclxuICAgICAgICBoZWlnaHQgOiBcIjIwcHhcIixcclxuICAgIH0pO1xyXG5cclxuICAgIGJ1dHRvbi5jbGljayA9IGFzeW5jIChldiA6IE1vdXNlRXZlbnQpPT57XHJcbiAgICAgICAgaWYoaW5fc2hhcGVfaGlzdG9yeSl7XHJcbiAgICAgICAgICAgIFBsYXlCYWNrLnNldFN0YXJ0SW5kZXgoc2hhcGUpO1xyXG5cclxuICAgICAgICAgICAgaWYoYnV0dG9uLnBhcmVudCA9PSBQbGFuZS5vbmUuc2hhcGVzX2Jsb2NrICYmIHNoYXBlIGluc3RhbmNlb2YgU3RhdGVtZW50KXtcclxuICAgICAgICAgICAgICAgIEJ1aWxkZXIuc2V0VG9vbEJ5U2hhcGUoc2hhcGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzaG93UHJvcGVydHkoc2hhcGUsIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgVmlldy5jdXJyZW50LnJlc2V0TW9kZSgpO1xyXG4gICAgICAgIHNoYXBlLnNldE1vZGUoTW9kZS50YXJnZXQpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gYnV0dG9uO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkVG9TaGFwZUhpc3Rvcnkoc2hhcGUgOiBNYXRoRW50aXR5KXtcclxuICAgIGNvbnN0IGJ1dHRvbiA9IG1ha2VTaGFwZUJ1dHRvbihzaGFwZSwgdHJ1ZSk7XHJcbiAgICBcclxuICAgIFBsYW5lLm9uZS5zaGFwZXNfYmxvY2suYWRkQ2hpbGQoYnV0dG9uKTtcclxuICAgIGFzc2VydChQbGFuZS5vbmUuc2hhcGVzX2Jsb2NrLmNoaWxkcmVuLmxlbmd0aCA9PSBWaWV3LmN1cnJlbnQuc2hhcGVzLmxlbmd0aCk7XHJcbiAgICBsYXlvdXRfdHMuTGF5b3V0LnJvb3QudXBkYXRlUm9vdExheW91dCgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHVzaFNoYXBlTGlzdCh1aSA6IFVJKXtcclxuICAgIFBsYW5lLm9uZS5zaGFwZXNfYmxvY2suYWRkQ2hpbGQodWkpO1xyXG4gICAgbGF5b3V0X3RzLkxheW91dC5yb290LnVwZGF0ZVJvb3RMYXlvdXQoKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBvcFNoYXBlTGlzdCgpIDogVUkgfCB1bmRlZmluZWQge1xyXG4gICAgY29uc3QgY2hpbGQgPSBQbGFuZS5vbmUuc2hhcGVzX2Jsb2NrLnBvcENoaWxkKCk7XHJcbiAgICBsYXlvdXRfdHMuTGF5b3V0LnJvb3QudXBkYXRlUm9vdExheW91dCgpO1xyXG4gICAgcmV0dXJuIGNoaWxkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJTaGFwZUxpc3QoKXtcclxuICAgIFBsYW5lLm9uZS5zaGFwZXNfYmxvY2suY2xlYXIoKTtcclxuICAgIGxheW91dF90cy5MYXlvdXQucm9vdC51cGRhdGVSb290TGF5b3V0KCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlVG9vbEJ1dHRvbnMoKSA6IGxheW91dF90cy5SYWRpb0J1dHRvbltdIHtcclxuICAgIGluaXRUb29sTGlzdCgpO1xyXG5cclxuICAgIGNvbnN0IHRvb2xfYnV0dG9ucyA6IGxheW91dF90cy5SYWRpb0J1dHRvbltdID0gW107XHJcblxyXG4gICAgZm9yKGNvbnN0IFsgdG9vbCwgaW1nX25hbWUsIHRpdGxlLCBzaGFwZXNdIG9mIHRvb2xMaXN0KXtcclxuICAgICAgICBjb25zdCBpZCA9IGAke3Rvb2wubmFtZX0tcmFkaW9gO1xyXG4gICAgICAgIGNvbnN0IHJhZGlvID0gbGF5b3V0X3RzLiRyYWRpbyh7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICB2YWx1ZSA6IHRvb2wubmFtZSxcclxuICAgICAgICAgICAgdGl0bGUgOiB0aXRsZSxcclxuICAgICAgICAgICAgdXJsICAgOiBgJHt1cmxPcmlnaW59L2xpYi9wbGFuZS9pbWcvJHtpbWdfbmFtZX0ucG5nYCxcclxuICAgICAgICAgICAgd2lkdGggOiBcIjM2cHhcIixcclxuICAgICAgICAgICAgaGVpZ2h0IDogXCIzNnB4XCIsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRvb2xfYnV0dG9ucy5wdXNoKHJhZGlvKTtcclxuICAgIH0gICAgXHJcblxyXG4gICAgcmV0dXJuIHRvb2xfYnV0dG9ucztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VUb29sQnlUeXBlKHRvb2xfbmFtZTogc3RyaW5nKTogQnVpbGRlciB7XHJcbiAgICBmb3IoY29uc3QgWyB0b29sLCBpbWdfbmFtZSwgdGl0bGUsIHNoYXBlc10gb2YgdG9vbExpc3Qpe1xyXG4gICAgICAgIGlmKHRvb2wubmFtZSA9PSB0b29sX25hbWUpe1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IHRvb2woKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aHJvdyBuZXcgTXlFcnJvcigpO1xyXG59XHJcblxyXG59IiwibmFtZXNwYWNlIHBsYW5lX3RzIHtcclxuLy9cclxuZnVuY3Rpb24gcmVjYWxjKHNoYXBlIDogTWF0aEVudGl0eSwgY2hhbmdlZCA6IFNldDxNYXRoRW50aXR5Pil7XHJcbiAgICBjb25zdCBkZXBlbmRlbmNpZXMgPSBzaGFwZS5kZXBlbmRlbmNpZXMoKTtcclxuICAgIGZvcihjb25zdCBkZXAgb2YgZGVwZW5kZW5jaWVzKXtcclxuICAgICAgICByZWNhbGMoZGVwLCBjaGFuZ2VkKTtcclxuICAgIH1cclxuXHJcbiAgICBpZihzaGFwZSBpbnN0YW5jZW9mIFNoYXBlICYmIGRlcGVuZGVuY2llcy5zb21lKHggPT4gY2hhbmdlZC5oYXMoeCkpICl7XHJcbiAgICAgICAgc2hhcGUuY2FsYygpO1xyXG5cclxuICAgICAgICBjaGFuZ2VkLmFkZChzaGFwZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWaWV3IGV4dGVuZHMgV2lkZ2V0IHtcclxuICAgIHN0YXRpYyBuZWFyVGhyZXNob2xkID0gODtcclxuICAgIHN0YXRpYyBjdXJyZW50IDogVmlldztcclxuICAgIHN0YXRpYyBpc1BsYXlCYWNrIDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIG5hbWUgIDogc3RyaW5nID0gXCJcIjtcclxuICAgIGJvYXJkIDogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBjYW52YXMgOiBDYW52YXM7XHJcbiAgICBncmlkIDogQ2FudmFzR3JpZDtcclxuXHJcbiAgICBvcGVyYXRpb25zIDogT3BlcmF0aW9uW10gPSBbXTtcclxuICAgIHNoYXBlcyA6IE1hdGhFbnRpdHlbXSA9IFtdO1xyXG4gICAgcmVsYXRpb25Mb2dzIDogUmVsYXRpb25Mb2dbXSA9IFtdO1xyXG5cclxuICAgIHVuZG9TdGFjayA6IFVuZG9EYXRhW10gPSBbXTtcclxuXHJcbiAgICBjaGFuZ2VkIDogU2V0PE1hdGhFbnRpdHk+ID0gbmV3IFNldDxNYXRoRW50aXR5PigpO1xyXG5cclxuICAgIGRvd25Qb3NpdGlvbiA6IFZlYzIgfCB1bmRlZmluZWQ7XHJcbiAgICBtb3ZlUG9zaXRpb24gOiBWZWMyIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIG1pbiEgOiBWZWMyO1xyXG4gICAgbWF4ISA6IFZlYzI7XHJcblxyXG4gICAgdGV4dEJhc2UgOiBWZWMyO1xyXG4gICAgdGV4dEJhc2VZIDogbnVtYmVyO1xyXG5cclxuICAgIGRpcnR5IDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIG1ha2VPYmooKSA6IGFueSB7XHJcbiAgICAgICAgbGV0IG9iaiA9IE9iamVjdC5hc3NpZ24oc3VwZXIubWFrZU9iaigpLCB7XHJcbiAgICAgICAgICAgIG5hbWUgICA6IHRoaXMubmFtZSxcclxuICAgICAgICAgICAgc2NhbGUgIDogdGhpcy5ib2FyZC5jbGllbnRXaWR0aCAvICh0aGlzLm1heC54IC0gdGhpcy5taW4ueCksXHJcbiAgICAgICAgICAgIG1pbiAgICA6IHRoaXMubWluLFxyXG4gICAgICAgICAgICBtYXggICAgOiB0aGlzLm1heCxcclxuICAgICAgICAgICAgc2hhcGVzIDogdGhpcy5zaGFwZXMubWFwKHggPT4geC50b09iaigpKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuICAgIGlzTmVhcihyZWFsX2Rpc3RhbmNlIDogbnVtYmVyKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IHBpeF9kaXN0YW5jZSA9IHRoaXMudG9YUGl4U2NhbGUocmVhbF9kaXN0YW5jZSk7XHJcbiAgICAgICAgcmV0dXJuIHBpeF9kaXN0YW5jZSA8IFZpZXcubmVhclRocmVzaG9sZDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihjYW52YXMgOiBIVE1MQ2FudmFzRWxlbWVudCl7XHJcbiAgICAgICAgc3VwZXIoe30pO1xyXG4gICAgICAgIHRoaXMuYm9hcmQgPSBjYW52YXM7XHJcbiAgICAgICAgdGhpcy5ib2FyZC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY2FudmFzID0gbmV3IENhbnZhcyh0aGlzLCB0aGlzLmJvYXJkKTtcclxuICAgICAgICB0aGlzLmdyaWQgICA9IG5ldyBDYW52YXNHcmlkKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmJvYXJkLndpZHRoICA9IHRoaXMuYm9hcmQuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgdGhpcy5ib2FyZC5oZWlnaHQgPSB0aGlzLmJvYXJkLmNsaWVudEhlaWdodDtcclxuXHJcbiAgICAgICAgY29uc3Qgc2NhbGUgPSAxMDA7XHJcbiAgICAgICAgY29uc3Qgc3Bhbl94ID0gdGhpcy5ib2FyZC5jbGllbnRXaWR0aCAgLyBzY2FsZTtcclxuICAgICAgICBjb25zdCBtaW5feCA9IC0wLjc1ICogc3Bhbl94O1xyXG4gICAgICAgIGNvbnN0IG1heF94ID0gIDAuMjUgKiBzcGFuX3g7XHJcblxyXG4gICAgICAgIGNvbnN0IHNwYW5feSA9IHRoaXMuYm9hcmQuY2xpZW50SGVpZ2h0IC8gc2NhbGU7XHJcbiAgICAgICAgY29uc3QgbWF4X3kgPSAwLjUgKiBzcGFuX3k7XHJcbiAgICAgICAgY29uc3QgbWluX3kgPSAtbWF4X3k7XHJcbiAgICAgICAgbXNnKGBtaW4teDoke21pbl94fSBtYXgteDoke21heF94fSBtYXgteToke21heF95fWApO1xyXG5cclxuICAgICAgICB0aGlzLnNldE1pbk1heChuZXcgVmVjMihtaW5feCwgbWluX3kpLCBuZXcgVmVjMihtYXhfeCwgIG1heF95KSk7XHJcblxyXG4gICAgICAgIHRoaXMudGV4dEJhc2VZID0gbWF4X3kgLSAwLjEgKiBzcGFuX3k7XHJcbiAgICAgICAgdGhpcy50ZXh0QmFzZSA9IG5ldyBWZWMyKG1pbl94ICsgMC4wNSAqIHNwYW5feCwgdGhpcy50ZXh0QmFzZVkpO1xyXG5cclxuICAgICAgICBWaWV3LmN1cnJlbnQgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLnJlc2l6ZVZpZXcoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhclZpZXcoKXtcclxuICAgICAgICBjb25zdCBhbGxfc2hhcGVzID0gdGhpcy5hbGxTaGFwZXMoKTtcclxuICAgICAgICBhbGxfc2hhcGVzLmZvckVhY2goeCA9PiB4LmhpZGUoKSk7XHJcblxyXG4gICAgICAgIHJlbW92ZURpdigpO1xyXG4gICAgXHJcbiAgICAgICAgV2lkZ2V0Lm1heElkID0gdGhpcy5pZDtcclxuICAgICAgICBpZE1hcC5jbGVhcigpO1xyXG4gICAgICAgIGlkTWFwLnNldCh0aGlzLmlkLCB0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zID0gW107XHJcbiAgICAgICAgdGhpcy5zaGFwZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnRleHRCYXNlLnkgPSB0aGlzLnRleHRCYXNlWTtcclxuXHJcbiAgICAgICAgUGxhbmUub25lLmNsZWFyUGxhbmUoKTtcclxuICAgICAgICBjbGVhclNoYXBlTGlzdCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGluaXRSZWxhdGlvbnMoKTsgICAgXHJcbiAgICB9XHJcblxyXG4gICAgc2V0TWluTWF4KG1pbiA6IFZlYzIsIG1heCA6IFZlYzIpe1xyXG4gICAgICAgIHRoaXMubWluID0gbWluO1xyXG4gICAgICAgIHRoaXMubWF4ID0gbWF4O1xyXG5cclxuICAgICAgICBQb2ludC5yYWRpdXMgID0gdGhpcy5mcm9tWFBpeFNjYWxlKFBvaW50LnJhZGl1c1BpeCk7XHJcbiAgICAgICAgQW5nbGUucmFkaXVzMSA9IHRoaXMuZnJvbVhQaXhTY2FsZShBbmdsZS5yYWRpdXMxUGl4KTtcclxuICAgIH1cclxuXHJcbiAgICBldmVudFBvc2l0aW9uKGV2ZW50IDogTW91c2VFdmVudCkgOiBWZWMyIHtcclxuICAgICAgICBjb25zdCBmbGlwcGVkX3kgPSB0aGlzLmJvYXJkLmNsaWVudEhlaWdodCAtIGV2ZW50Lm9mZnNldFk7XHJcblxyXG4gICAgICAgIGNvbnN0IHggPSBsaW5lYXIoMCwgZXZlbnQub2Zmc2V0WCwgdGhpcy5ib2FyZC5jbGllbnRXaWR0aCAsIHRoaXMubWluLngsIHRoaXMubWF4LngpO1xyXG4gICAgICAgIGNvbnN0IHkgPSBsaW5lYXIoMCwgZmxpcHBlZF95ICwgdGhpcy5ib2FyZC5jbGllbnRIZWlnaHQsIHRoaXMubWluLnksIHRoaXMubWF4LnkpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIoeCwgeSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnJvbVhQaXhTY2FsZShwaXggOiBudW1iZXIpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4odGhpcy5tYXgueCAtIHRoaXMubWluLngpICogKHBpeCAvIHRoaXMuYm9hcmQuY2xpZW50V2lkdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZyb21ZUGl4U2NhbGUocGl4IDogbnVtYmVyKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuKHRoaXMubWF4LnkgLSB0aGlzLm1pbi55KSAqIChwaXggLyB0aGlzLmJvYXJkLmNsaWVudEhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnJvbVBpeFNjYWxlKHBvc2l0aW9uIDogVmVjMikgOiBWZWMyIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIodGhpcy5mcm9tWFBpeFNjYWxlKHBvc2l0aW9uLngpLCB0aGlzLmZyb21ZUGl4U2NhbGUocG9zaXRpb24ueSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZyb21YUGl4KHBpeCA6IG51bWJlcikgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBsaW5lYXIoMCwgcGl4LCB0aGlzLmJvYXJkLmNsaWVudFdpZHRoLCB0aGlzLm1pbi54LCB0aGlzLm1heC54KTtcclxuICAgIH1cclxuXHJcbiAgICBmcm9tWVBpeChwaXggOiBudW1iZXIpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gbGluZWFyKDAsIHBpeCwgdGhpcy5ib2FyZC5jbGllbnRIZWlnaHQsIHRoaXMubWluLnksIHRoaXMubWF4LnkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZyb21QaXgocG9zaXRpb24gOiBWZWMyKSA6IFZlYzIge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLmZyb21YUGl4KHBvc2l0aW9uLngpLCB0aGlzLmZyb21ZUGl4KHBvc2l0aW9uLnkpKTtcclxuICAgIH1cclxuXHJcbiAgICB0b1hQaXhTY2FsZShuIDogbnVtYmVyKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmQuY2xpZW50V2lkdGggKiBuIC8gKHRoaXMubWF4LnggLSB0aGlzLm1pbi54KTtcclxuICAgIH1cclxuXHJcbiAgICB0b1lQaXhTY2FsZShuIDogbnVtYmVyKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmQuY2xpZW50SGVpZ2h0ICogbiAvICh0aGlzLm1heC55IC0gdGhpcy5taW4ueSk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9YUGl4KHggOiBudW1iZXIpIDogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCB4X3BpeCA9IGxpbmVhcih0aGlzLm1pbi54LCB4LCB0aGlzLm1heC54LCAwLCB0aGlzLmJvYXJkLmNsaWVudFdpZHRoKTtcclxuICAgICAgICByZXR1cm4geF9waXg7XHJcbiAgICB9XHJcblxyXG4gICAgdG9ZUGl4KHkgOiBudW1iZXIpIDogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCBwaXhfeSA9IGxpbmVhcih0aGlzLm1pbi55LCB5LCB0aGlzLm1heC55LCAwLCB0aGlzLmJvYXJkLmNsaWVudEhlaWdodCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZsaXBwZWRfeSA9IHRoaXMuYm9hcmQuY2xpZW50SGVpZ2h0IC0gcGl4X3k7XHJcbiAgICAgICAgcmV0dXJuIGZsaXBwZWRfeTtcclxuICAgIH1cclxuXHJcbiAgICB0b1BpeFBvc2l0aW9uKHBvc2l0aW9uOlZlYzIpIDogVmVjMiB7XHJcbiAgICAgICAgY29uc3QgeF9waXggPSB0aGlzLnRvWFBpeChwb3NpdGlvbi54KTtcclxuICAgICAgICBjb25zdCB5X3BpeCA9IHRoaXMudG9ZUGl4KHBvc2l0aW9uLnkpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIoeF9waXgsIHlfcGl4KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTaGFwZXMoKSA6IFNoYXBlW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNoYXBlcy5maWx0ZXIoeCA9PiB4IGluc3RhbmNlb2YgU2hhcGUpIGFzIFNoYXBlW107XHJcbiAgICB9XHJcblxyXG4gICAgYWxsUmVhbFNoYXBlcygpIDogU2hhcGVbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxsU2hhcGVzKCkuZmlsdGVyKHggPT4geCBpbnN0YW5jZW9mIFNoYXBlKSBhcyBTaGFwZVtdO1xyXG4gICAgfVxyXG5cclxuICAgIGFsbFNoYXBlcygpIDogTWF0aEVudGl0eVtdIHtcclxuICAgICAgICBjb25zdCBzaGFwZXMgOiBNYXRoRW50aXR5W10gPSBbXTtcclxuICAgICAgICB0aGlzLnNoYXBlcy5mb3JFYWNoKHggPT4geC5nZXRBbGxTaGFwZXMoc2hhcGVzKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVuaXF1ZV9zaGFwZXMgPSB1bmlxdWUoc2hhcGVzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHVuaXF1ZV9zaGFwZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlVW51c2VkRGl2cygpe1xyXG4gICAgICAgIGNvbnN0IHVzZWRfZGl2cyA9IHRoaXMuYWxsUmVhbFNoYXBlcygpLmZpbHRlcih4ID0+IHguY2FwdGlvbiAhPSB1bmRlZmluZWQpLm1hcCh4ID0+IHguY2FwdGlvbiEuZGl2KTtcclxuICAgICAgICBjb25zdCB1c2VkX2RpdnNfc2V0ID0gbmV3IFNldDxIVE1MRGl2RWxlbWVudD4odXNlZF9kaXZzKTtcclxuICAgICAgICBjb25zdCBjYW52YXNfZGl2cyA9IEFycmF5LmZyb20odGhpcy5ib2FyZC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImRpdlwiKSk7XHJcbiAgICAgICAgY29uc3QgdW51c2VkX2RpdnMgPSBjYW52YXNfZGl2cy5maWx0ZXIoeCA9PiAhdXNlZF9kaXZzX3NldC5oYXMpO1xyXG4gICAgICAgIGZvcihjb25zdCBkaXYgb2YgdW51c2VkX2RpdnMpe1xyXG4gICAgICAgICAgICB0aGlzLmJvYXJkLnJlbW92ZUNoaWxkKGRpdik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0TW9kZSgpe1xyXG4gICAgICAgIHRoaXMuYWxsU2hhcGVzKCkuZm9yRWFjaCh4ID0+eyB4LnNldE1vZGUoTW9kZS5ub25lKTsgeC5pc092ZXIgPSBmYWxzZTsgfSk7XHJcbiAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXRPcmRlcnMoKXtcclxuICAgICAgICBNYXRoRW50aXR5Lm9yZGVyU2V0LmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5hbGxTaGFwZXMoKS5mb3JFYWNoKHggPT4geC5vcmRlciA9IE5hTik7XHJcbiAgICAgICAgdGhpcy5zaGFwZXMuZm9yRWFjaCh4ID0+IHguc2V0T3JkZXIoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1NoYXBlcygpe1xyXG4gICAgICAgIGlmKHRoaXMuZGlydHkpe1xyXG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyBtc2coXCJyZWRyYXdcIik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5jbGVhcigpO1xyXG4gICAgICAgICAgICBQb2x5Z29uLmNvbG9ySW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ncmlkLnNob3dHcmlkKFBsYW5lLm9uZS5zaG93X2F4aXMuY2hlY2tlZCgpLCBQbGFuZS5vbmUuc2hvd19ncmlkLmNoZWNrZWQoKSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLmFsbFJlYWxTaGFwZXMoKTtcclxuICAgICAgICAgICAgY29uc3QgdmlzaWJsZV9zaGFwZXMgPSBzaGFwZXMuZmlsdGVyKHggPT4geC52aXNpYmxlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKGdldFBsYXlNb2RlKCkgIT0gUGxheU1vZGUuc3RvcCB8fCAhUGxhbmUub25lLmVkaXRNb2RlKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2aXNpYmxlX3NoYXBlcy5mb3JFYWNoKGMgPT4gYy5kcmF3KCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICAgICAgc2hhcGVzLmZvckVhY2goYyA9PiBjLmRyYXcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZpc2libGVfc2hhcGVzLmZpbHRlcih4ID0+ICB4Lm1vZGUgIT0gTW9kZS5ub25lKS5mb3JFYWNoKGMgPT4gYy5kcmF3KCkpO1xyXG5cclxuICAgICAgICAgICAgQnVpbGRlci50b29sLmRyYXdUb29sKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgaWYoUGxhbmUub25lLnNuYXBfdG9fZ3JpZC5jaGVja2VkKCkpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ncmlkLnNob3dQb2ludGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5kcmF3U2hhcGVzLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNsaWNrKGV2ZW50IDogTW91c2VFdmVudCl7XHJcbiAgICAgICAgbXNnKFwiY2xpY2tcIik7XHJcbiAgICAgICAgbGV0IHBvc2l0aW9uID0gdGhpcy5ldmVudFBvc2l0aW9uKGV2ZW50KTtcclxuICAgICAgICBpZihQbGFuZS5vbmUuc25hcF90b19ncmlkLmNoZWNrZWQoKSl7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gdGhpcy5ncmlkLnNuYXAocG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgUG9pbnQudGVtcFBvaW50cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoYXBlID0gdGhpcy5nZXRTaGFwZShwb3NpdGlvbik7XHJcblxyXG5cclxuICAgICAgICBpZihCdWlsZGVyLnRvb2wgaW5zdGFuY2VvZiBTZWxlY3Rpb25Ub29sKXtcclxuICAgICAgICAgICAgaWYoc2hhcGUgaW5zdGFuY2VvZiBQb2ludCl7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xpY2tfc2hhcGUgPSB0aGlzLm9wZXJhdGlvbnMuZmluZCh4ID0+IHggaW5zdGFuY2VvZiBDbGlja1NoYXBlICYmIHguY3JlYXRlZFBvaW50ID09PSBzaGFwZSkgYXMgQ2xpY2tTaGFwZTtcclxuICAgICAgICAgICAgICAgIGlmKGNsaWNrX3NoYXBlICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgbXNnKGBjbGljayBzaGFwZSBwb3NpdGlvbiBpcyBjaGFuZ2VkOiAke2NsaWNrX3NoYXBlLnBvc2l0aW9ufT0+JHtwb3NpdGlvbn1gKTtcclxuICAgICAgICAgICAgICAgICAgICBjbGlja19zaGFwZS5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCBCdWlsZGVyLnRvb2wuY2xpY2sodGhpcywgcG9zaXRpb24sIHNoYXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5hZGRPcGVyYXRpb24obmV3IENsaWNrU2hhcGUocG9zaXRpb24sIChzaGFwZSAhPSB1bmRlZmluZWQgPyBzaGFwZS5pZCA6IE5hTikpKTtcclxuXHJcbiAgICAgICAgICAgIGlmKEJ1aWxkZXIudG9vbCBpbnN0YW5jZW9mIFN0YXRlbWVudEJ1aWxkZXIpe1xyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IEJ1aWxkZXIudG9vbC5jbGlja1dpdGhNb3VzZUV2ZW50KGV2ZW50LCB0aGlzLCBwb3NpdGlvbiwgc2hhcGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICAgICAgYXdhaXQgQnVpbGRlci50b29sLmNsaWNrKHRoaXMsIHBvc2l0aW9uLCBzaGFwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRibGNsaWNrKGV2ZW50IDogTW91c2VFdmVudCl7XHJcbiAgICAgICAgbGV0IHBvc2l0aW9uID0gdGhpcy5ldmVudFBvc2l0aW9uKGV2ZW50KTtcclxuICAgICAgICBjb25zdCBzaGFwZSA9IHRoaXMuZ2V0U2hhcGUocG9zaXRpb24pO1xyXG4gICAgICAgIGlmKHNoYXBlID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKEJ1aWxkZXIudG9vbCBpbnN0YW5jZW9mIFNlbGVjdGlvblRvb2wpe1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0TW9kZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYoc2hhcGUgaW5zdGFuY2VvZiBMZW5ndGhTeW1ib2wpe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoX3N5bWJvbHMgPSBlcXVhbExlbmd0aHMuZmluZCh4ID0+IHguaGFzKHNoYXBlKSk7XHJcbiAgICAgICAgICAgICAgICBpZihsZW5ndGhfc3ltYm9scyAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20obGVuZ3RoX3N5bWJvbHMudmFsdWVzKCkpLmZvckVhY2goeCA9PiB4LnNldE1vZGUoTW9kZS5kZXBlbmQpKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKHNoYXBlIGluc3RhbmNlb2YgQW5nbGUpe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYW5nbGVzID0gQXJyYXkuZnJvbShzdXBwbGVtZW50YXJ5QW5nbGVzLmZsYXQoKSkuZmluZCh4ID0+IHguaGFzKHNoYXBlKSk7XHJcbiAgICAgICAgICAgICAgICBpZihhbmdsZXMgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0TW9kZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ2xlcy5mb3JFYWNoKHggPT4geC5zZXRNb2RlKE1vZGUuZGVwZW5kKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihzaGFwZSBpbnN0YW5jZW9mIEFic3RyYWN0TGluZSl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwb2ludHMgPSBnZXRQb2ludHNGcm9tTGluZShzaGFwZSk7XHJcbiAgICAgICAgICAgICAgICBwb2ludHMuZm9yRWFjaCh4ID0+IHguc2V0TW9kZShNb2RlLmRlcGVuZCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFsbGVsX2xpbmVzID0gZ2V0UGFyYWxsZWxMaW5lcyhzaGFwZSk7XHJcbiAgICAgICAgICAgICAgICBpZihwYXJhbGxlbF9saW5lcyAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFsbGVsX2xpbmVzLmZvckVhY2goeCA9PiB4LnNldE1vZGUoTW9kZS50YXJnZXQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwZXJwZW5kaWN1bGFyX2xpbmVzID0gZ2V0UGVycGVuZGljdWxhckxpbmVzKHNoYXBlKTtcclxuICAgICAgICAgICAgICAgIGlmKHBlcnBlbmRpY3VsYXJfbGluZXMgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgICAgICBwZXJwZW5kaWN1bGFyX2xpbmVzLmZvckVhY2goeCA9PiB4LnNldE1vZGUoTW9kZS5kZXBlbmQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2hhcGUuc2V0TW9kZShNb2RlLnRhcmdldCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcG9pbnRlcmRvd24oZXZlbnQgOiBQb2ludGVyRXZlbnQpe1xyXG4gICAgICAgIGlmKGV2ZW50LmJ1dHRvbiAhPSAwKXtcclxuICAgICAgICAgICAgbXNnKGBwb2ludGVyZG93bjoke2V2ZW50LmJ1dHRvbi50b1N0cmluZygyKX1gKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHBvc2l0aW9uID0gdGhpcy5ldmVudFBvc2l0aW9uKGV2ZW50KTtcclxuICAgICAgICBpZihQbGFuZS5vbmUuc25hcF90b19ncmlkLmNoZWNrZWQoKSl7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gdGhpcy5ncmlkLnNuYXAocG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kb3duUG9zaXRpb24gPSBwb3NpdGlvbjtcclxuXHJcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLmdldFNoYXBlKHBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgQnVpbGRlci50b29sLnBvaW50ZXJkb3duKGV2ZW50LCB0aGlzLCBwb3NpdGlvbiwgc2hhcGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHBvaW50ZXJtb3ZlKGV2ZW50IDogUG9pbnRlckV2ZW50KXtcclxuICAgICAgICAvLyDjgr/jg4Pjg4HjgavjgojjgovnlLvpnaLjgrnjgq/jg63jg7zjg6vjgpLmraLjgoHjgotcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBcclxuXHJcbiAgICAgICAgbGV0IHBvc2l0aW9uID0gdGhpcy5ldmVudFBvc2l0aW9uKGV2ZW50KTtcclxuICAgICAgICBpZihQbGFuZS5vbmUuc25hcF90b19ncmlkLmNoZWNrZWQoKSl7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gdGhpcy5ncmlkLnNuYXAocG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2hhcGVzID0gdGhpcy5hbGxTaGFwZXMoKS5jb25jYXQoQnVpbGRlci50b29sLnBlbmRpbmdTaGFwZXMoKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG9sZF9uZWFyX3NoYXBlID0gc2hhcGVzLmZpbmQoeCA9PiB4LmlzT3Zlcik7XHJcbiAgICAgICAgY29uc3QgbmVhcl9zaGFwZSA9IHRoaXMuZ2V0U2hhcGUocG9zaXRpb24pO1xyXG5cclxuICAgICAgICBpZihvbGRfbmVhcl9zaGFwZSAhPSBuZWFyX3NoYXBlKXtcclxuICAgICAgICAgICAgaWYob2xkX25lYXJfc2hhcGUgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIG9sZF9uZWFyX3NoYXBlLmlzT3ZlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihuZWFyX3NoYXBlICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICBuZWFyX3NoYXBlLmlzT3ZlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyBtc2coYG92ZXI6JHtuZWFyX3NoYXBlLmNvbnN0cnVjdG9yLm5hbWV9YCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLmdldFNoYXBlKHBvc2l0aW9uKTtcclxuICAgICAgICBCdWlsZGVyLnRvb2wucG9pbnRlcm1vdmUoZXZlbnQsIHRoaXMsIHBvc2l0aW9uLCBzaGFwZSk7XHJcblxyXG4gICAgICAgIHRoaXMubW92ZVBvc2l0aW9uID0gcG9zaXRpb247XHJcblxyXG4gICAgICAgIGlmKFBsYW5lLm9uZS5zbmFwX3RvX2dyaWQuY2hlY2tlZCgpKXtcclxuICAgICAgICAgICAgY29uc3QgcHJldl9zbmFwX3Bvc2l0aW9uID0gdGhpcy5ncmlkLnNuYXBQb3NpdGlvbjtcclxuICAgICAgICAgICAgdGhpcy5ncmlkLnNldFNuYXBQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICBpZighIHByZXZfc25hcF9wb3NpdGlvbi5lcXVhbHModGhpcy5ncmlkLnNuYXBQb3NpdGlvbikpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcG9pbnRlcnVwKGV2ZW50IDogUG9pbnRlckV2ZW50KXtcclxuICAgICAgICBpZihldmVudC5idXR0b24gIT0gMCl7XHJcbiAgICAgICAgICAgIG1zZyhgcG9pbnRlcnVwOiR7ZXZlbnQuYnV0dG9uLnRvU3RyaW5nKDIpfWApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBwb3NpdGlvbiA9IHRoaXMuZXZlbnRQb3NpdGlvbihldmVudCk7XHJcbiAgICAgICAgaWYoUGxhbmUub25lLnNuYXBfdG9fZ3JpZC5jaGVja2VkKCkpe1xyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IHRoaXMuZ3JpZC5zbmFwKHBvc2l0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNoYXBlID0gdGhpcy5nZXRTaGFwZShwb3NpdGlvbik7XHJcbiAgICAgICAgQnVpbGRlci50b29sLnBvaW50ZXJ1cChldmVudCwgdGhpcywgcG9zaXRpb24sIHNoYXBlKTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuZG93blBvc2l0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHdoZWVsKGV2ZW50IDogV2hlZWxFdmVudCl7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgbGV0IHBvc2l0aW9uID0gdGhpcy5ldmVudFBvc2l0aW9uKGV2ZW50KTtcclxuICAgICAgICBpZihQbGFuZS5vbmUuc25hcF90b19ncmlkLmNoZWNrZWQoKSl7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gdGhpcy5ncmlkLnNuYXAocG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmF0aW8gPSAwLjAwMiAqIGV2ZW50LmRlbHRhWTtcclxuICAgICAgICBjb25zdCBtaW5feCA9IHRoaXMubWluLnggLSAocG9zaXRpb24ueCAtIHRoaXMubWluLngpICogcmF0aW87XHJcbiAgICAgICAgY29uc3QgbWluX3kgPSB0aGlzLm1pbi55IC0gKHBvc2l0aW9uLnkgLSB0aGlzLm1pbi55KSAqIHJhdGlvO1xyXG5cclxuICAgICAgICBjb25zdCBtYXhfeCA9IHRoaXMubWF4LnggKyAodGhpcy5tYXgueCAtIHBvc2l0aW9uLngpICogcmF0aW87XHJcbiAgICAgICAgY29uc3QgbWF4X3kgPSB0aGlzLm1heC55ICsgKHRoaXMubWF4LnkgLSBwb3NpdGlvbi55KSAqIHJhdGlvO1xyXG5cclxuICAgICAgICB0aGlzLnNldE1pbk1heChuZXcgVmVjMihtaW5feCwgbWluX3kpLCBuZXcgVmVjMihtYXhfeCwgbWF4X3kpKTtcclxuXHJcbiAgICAgICAgdGhpcy5hbGxSZWFsU2hhcGVzKCkuZm9yRWFjaCh4ID0+IHgudXBkYXRlQ2FwdGlvbigpKTtcclxuXHJcbiAgICAgICAgVmlldy5jdXJyZW50LmRpcnR5ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXNpemVWaWV3KCl7XHJcbiAgICAgICAgdGhpcy5ib2FyZC53aWR0aCAgPSB0aGlzLmJvYXJkLmNsaWVudFdpZHRoO1xyXG4gICAgICAgIHRoaXMuYm9hcmQuaGVpZ2h0ID0gdGhpcy5ib2FyZC5jbGllbnRIZWlnaHQ7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlVGV4dEJsb2NrUG9zaXRpb25zKCk7XHJcbiAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcblxyXG4gICAgICAgIG1zZyhgcmVzaXplOiB3OiR7dGhpcy5ib2FyZC53aWR0aH0gaDoke3RoaXMuYm9hcmQuaGVpZ2h0fSBtYXg6JHt0aGlzLm1heH1gKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRPcGVyYXRpb24ob3BlcmF0aW9uIDogT3BlcmF0aW9uKXtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbnMucHVzaChvcGVyYXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFNoYXBlKHNoYXBlIDogTWF0aEVudGl0eSl7XHJcbiAgICAgICAgdGhpcy5zaGFwZXMucHVzaChzaGFwZSk7XHJcbiAgICAgICAgc2hhcGUuc2V0T3JkZXIoKTtcclxuICAgICAgICBhZGRUb1NoYXBlSGlzdG9yeShzaGFwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2hhcGUocG9zaXRpb24gOiBWZWMyKSA6IFNoYXBlIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLmFsbFJlYWxTaGFwZXMoKS5jb25jYXQoQnVpbGRlci50b29sLnBlbmRpbmdTaGFwZXMoKSk7XHJcbiAgICAgICAgY29uc3QgcG9pbnQgPSBzaGFwZXMuZmlsdGVyKHggPT4geCBpbnN0YW5jZW9mIFBvaW50KS5maW5kKHggPT4geC5pc05lYXIocG9zaXRpb24pKTtcclxuICAgICAgICBpZihwb2ludCAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICByZXR1cm4gcG9pbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzeW1ib2wgPSBzaGFwZXMuZmlsdGVyKHggPT4geCBpbnN0YW5jZW9mIExlbmd0aFN5bWJvbCkuZmluZCh4ID0+IHguaXNOZWFyKHBvc2l0aW9uKSk7XHJcbiAgICAgICAgaWYoc3ltYm9sICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHJldHVybiBzeW1ib2w7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBhbmdsZSA9IHNoYXBlcy5maWx0ZXIoeCA9PiB4IGluc3RhbmNlb2YgQW5nbGUpLmZpbmQoeCA9PiB4LmlzTmVhcihwb3NpdGlvbikpO1xyXG4gICAgICAgIGlmKGFuZ2xlICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHJldHVybiBhbmdsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGxpbmUgPSBzaGFwZXMuZmlsdGVyKHggPT4geCBpbnN0YW5jZW9mIEFic3RyYWN0TGluZSkuZmluZCh4ID0+IHguaXNOZWFyKHBvc2l0aW9uKSk7XHJcbiAgICAgICAgaWYobGluZSAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICByZXR1cm4gbGluZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY2lyY2xlID0gc2hhcGVzLmZpbHRlcih4ID0+IHggaW5zdGFuY2VvZiBDaXJjbGVBcmNFbGxpcHNlKS5maW5kKHggPT4geC5pc05lYXIocG9zaXRpb24pKTtcclxuICAgICAgICByZXR1cm4gY2lyY2xlO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVNoYXBlcygpe1xyXG4gICAgICAgIGZvcihjb25zdCBzaGFwZSBvZiB0aGlzLmdldFNoYXBlcygpKXtcclxuICAgICAgICAgICAgbGV0IHNoYXBlcyA6IE1hdGhFbnRpdHlbXSA9IFtdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc2hhcGUuZ2V0QWxsU2hhcGVzKHNoYXBlcyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwb2ludHMgPSBzaGFwZXMuZmlsdGVyKHggPT4geCBpbnN0YW5jZW9mIFBvaW50KSBhcyBQb2ludFtdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yKGNvbnN0IHBvaW50IG9mIHBvaW50cyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBib3VuZHMgPSBwb2ludC5nZXRCb3VuZHMoKTtcclxuICAgICAgICAgICAgICAgIGlmKGJvdW5kcy5sZW5ndGggPT0gMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYm91bmQgPSBib3VuZHNbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJvdW5kLmFkanVzdFBvc2l0aW9uKHBvaW50LCBwb2ludC5wb3NpdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlZC5hZGQocG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZWNhbGMoc2hhcGUsIHRoaXMuY2hhbmdlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVRleHRCbG9ja1Bvc2l0aW9ucygpe1xyXG4gICAgICAgIGNvbnN0IHNoYXBlcyA9IHRoaXMuYWxsU2hhcGVzKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcmVudHMgPSBzaGFwZXMuZmlsdGVyKHggPT4gKHggaW5zdGFuY2VvZiBQb2ludCB8fCB4IGluc3RhbmNlb2YgRGltZW5zaW9uTGluZSkgJiYgeC5jYXB0aW9uICE9IHVuZGVmaW5lZCkgYXMgKFBvaW50IHwgRGltZW5zaW9uTGluZSlbXTtcclxuICAgICAgICBwYXJlbnRzLmZvckVhY2goeCA9PiB4LnVwZGF0ZUNhcHRpb24oKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRleHRfYmxvY2tzID0gdGhpcy5zaGFwZXMuZmlsdGVyKHggPT4geCBpbnN0YW5jZW9mIFRleHRCbG9jaykgYXMgVGV4dEJsb2NrW107XHJcbiAgICAgICAgdGV4dF9ibG9ja3MuZm9yRWFjaCh4ID0+IHgudXBkYXRlVGV4dFBvc2l0aW9uKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVuZG8oKXtcclxuICAgICAgICBpZih0aGlzLm9wZXJhdGlvbnMubGVuZ3RoID09IDApe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdW5kb0RhdGEgOiBVbmRvRGF0YSB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgZm9yKGxldCBpZHggPSB0aGlzLm9wZXJhdGlvbnMubGVuZ3RoIC0gMSAtIDE7IDAgPD0gaWR4OyBpZHgtLSl7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IHRoaXMub3BlcmF0aW9uc1tpZHhdO1xyXG4gICAgICAgICAgICBpZighaXNOYU4ob3BlcmF0aW9uLnNoYXBlc0xlbmd0aCkpe1xyXG4gICAgICAgICAgICAgICAgdW5kb0RhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9ucyA6IHRoaXMub3BlcmF0aW9ucy5zbGljZShpZHggKyAxKSxcclxuICAgICAgICAgICAgICAgICAgICBzaGFwZXMgICAgIDogdGhpcy5zaGFwZXMuc2xpY2Uob3BlcmF0aW9uLnNoYXBlc0xlbmd0aCksXHJcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25Mb2dzIDogdGhpcy5yZWxhdGlvbkxvZ3Muc2xpY2Uob3BlcmF0aW9uLnJlbGF0aW9uTG9nc0xlbmd0aCksXHJcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeVVJcyAgIDogW11cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdGlvbnMgICA9IHRoaXMub3BlcmF0aW9ucy5zbGljZSgwLCBpZHggKyAxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hhcGVzICAgICAgID0gdGhpcy5zaGFwZXMuc2xpY2UoMCwgb3BlcmF0aW9uLnNoYXBlc0xlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbGF0aW9uTG9ncyA9IHRoaXMucmVsYXRpb25Mb2dzLnNsaWNlKDAsIG9wZXJhdGlvbi5yZWxhdGlvbkxvZ3NMZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHVuZG9EYXRhID09IHVuZGVmaW5lZCl7XHJcblxyXG4gICAgICAgICAgICB1bmRvRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbnMgOiB0aGlzLm9wZXJhdGlvbnMuc2xpY2UoKSxcclxuICAgICAgICAgICAgICAgIHNoYXBlcyAgICAgOiB0aGlzLnNoYXBlcy5zbGljZSgpLFxyXG4gICAgICAgICAgICAgICAgcmVsYXRpb25Mb2dzIDogdGhpcy5yZWxhdGlvbkxvZ3Muc2xpY2UoKSxcclxuICAgICAgICAgICAgICAgIGhpc3RvcnlVSXMgICA6IFtdXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMub3BlcmF0aW9ucyAgID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuc2hhcGVzICAgICAgID0gW107XHJcbiAgICAgICAgICAgIHRoaXMucmVsYXRpb25Mb2dzID0gW107XHJcblxyXG4gICAgICAgICAgICBpbml0UmVsYXRpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB1bmRvRGF0YS5zaGFwZXMuZm9yRWFjaCh4ID0+IHguaGlkZSgpKTtcclxuXHJcbiAgICAgICAgd2hpbGUoVmlldy5jdXJyZW50LnNoYXBlcy5sZW5ndGggPCBQbGFuZS5vbmUuc2hhcGVzX2Jsb2NrLmNoaWxkcmVuLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIGNvbnN0IHVpID0gcG9wU2hhcGVMaXN0KCk7XHJcbiAgICAgICAgICAgIGlmKHVpICE9IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICB1bmRvRGF0YS5oaXN0b3J5VUlzLnVuc2hpZnQodWkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVuZG9TdGFjay5wdXNoKHVuZG9EYXRhKTtcclxuXHJcbiAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVkbygpe1xyXG4gICAgICAgIGNvbnN0IHZpZXcgOiBWaWV3ID0gVmlldy5jdXJyZW50O1xyXG5cclxuICAgICAgICBpZih0aGlzLnVuZG9TdGFjay5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHVuZG9EYXRhID0gdGhpcy51bmRvU3RhY2sucG9wKCkhO1xyXG5cclxuICAgICAgICB0aGlzLm9wZXJhdGlvbnMucHVzaCguLi4gdW5kb0RhdGEub3BlcmF0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5zaGFwZXMucHVzaCguLi4gdW5kb0RhdGEuc2hhcGVzKTtcclxuICAgICAgICB0aGlzLnJlbGF0aW9uTG9ncy5wdXNoKC4uLiB1bmRvRGF0YS5yZWxhdGlvbkxvZ3MpO1xyXG5cclxuICAgICAgICB1bmRvRGF0YS5zaGFwZXMuZm9yRWFjaCh4ID0+IHguc2hvdygpKTtcclxuXHJcbiAgICAgICAgdW5kb0RhdGEuaGlzdG9yeVVJcy5mb3JFYWNoKHggPT4gcHVzaFNoYXBlTGlzdCh4KSk7XHJcblxyXG4gICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc3RvcmVWaWV3KCl7XHJcbiAgICAgICAgY29uc3QgbW90aW9ucyA9IHRoaXMuc2hhcGVzLmZpbHRlcih4ID0+IHggaW5zdGFuY2VvZiBNb3Rpb24pIGFzIE1vdGlvbltdO1xyXG4gICAgICAgIG1vdGlvbnMucmV2ZXJzZSgpLmZvckVhY2goeCA9PiB4LnJlc3RvcmVQcm9wZXJ0eUNoYW5nZXMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGV4UG9zaXRpb24oKXtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIENhbnZhc0dyaWQge1xyXG4gICAgdmlldyA6IFZpZXc7XHJcbiAgICBzdWJTcGFuWCA6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuICAgIHN1YlNwYW5ZIDogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG4gICAgc25hcFBvc2l0aW9uIDogVmVjMiA9IFZlYzIuemVybygpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHZpZXcgOiBWaWV3KXtcclxuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdHcmlkQXhpcyhheGlzIDogc3RyaW5nLCBzaG93X2dyaWQgOiBib29sZWFuLCBzaG93X2F4aXMgOiBib29sZWFuKXtcclxuICAgICAgICBsZXQgc2l6ZSA6IG51bWJlcjtcclxuICAgICAgICBsZXQgbWluX2EgOiBudW1iZXI7XHJcbiAgICAgICAgbGV0IG1heF9hIDogbnVtYmVyXHJcblxyXG4gICAgICAgIGxldCBtaW5fYiA6IG51bWJlcjtcclxuICAgICAgICBsZXQgbWF4X2IgOiBudW1iZXJcclxuXHJcbiAgICAgICAgaWYoYXhpcyA9PSBcIlhcIil7XHJcblxyXG4gICAgICAgICAgICBzaXplID0gdGhpcy52aWV3LmZyb21YUGl4U2NhbGUoNzUpO1xyXG4gICAgICAgICAgICBbbWluX2EsIG1heF9hXSA9IFt0aGlzLnZpZXcubWluLngsIHRoaXMudmlldy5tYXgueF07XHJcbiAgICAgICAgICAgIFttaW5fYiwgbWF4X2JdID0gW3RoaXMudmlldy5taW4ueSwgdGhpcy52aWV3Lm1heC55XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgIHNpemUgPSB0aGlzLnZpZXcuZnJvbVlQaXhTY2FsZSg3NSk7XHJcbiAgICAgICAgICAgIFttaW5fYSwgbWF4X2FdID0gW3RoaXMudmlldy5taW4ueSwgdGhpcy52aWV3Lm1heC55XTtcclxuICAgICAgICAgICAgW21pbl9iLCBtYXhfYl0gPSBbdGhpcy52aWV3Lm1pbi54LCB0aGlzLnZpZXcubWF4LnhdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcG93ZXIgPSBNYXRoLnJvdW5kKCBNYXRoLmxvZzEwKHNpemUpICk7XHJcblxyXG4gICAgICAgIGxldCBmcmFjdGlvbl9kaWdpdHMgOiBudW1iZXI7XHJcbiAgICAgICAgZnJhY3Rpb25fZGlnaXRzID0gLXBvd2VyO1xyXG5cclxuICAgICAgICBsZXQgbWFpbl9zcGFuID0gMTAgKiogcG93ZXI7XHJcbiAgICAgICAgaWYobWFpbl9zcGFuIDwgc2l6ZSl7XHJcbiAgICAgICAgICAgIGlmKE1hdGguYWJzKDIgKiBtYWluX3NwYW4gLSBzaXplKSA8IHNpemUgLSBtYWluX3NwYW4pe1xyXG4gICAgICAgICAgICAgICAgbWFpbl9zcGFuID0gMiAqIG1haW5fc3BhbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBpZihNYXRoLmFicygwLjUgKiBtYWluX3NwYW4gLSBzaXplKSA8IG1haW5fc3BhbiAtIHNpemUpe1xyXG4gICAgICAgICAgICAgICAgbWFpbl9zcGFuID0gMC41ICogbWFpbl9zcGFuO1xyXG4gICAgICAgICAgICAgICAgZnJhY3Rpb25fZGlnaXRzKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZnJhY3Rpb25fZGlnaXRzID0gTWF0aC5tYXgoMCwgZnJhY3Rpb25fZGlnaXRzKTtcclxuXHJcbiAgICAgICAgbGV0IHN1Yl9zcGFuID0gbWFpbl9zcGFuIC8gNTtcclxuXHJcbiAgICAgICAgaWYoc2hvd19ncmlkKXtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG4xID0gTWF0aC5mbG9vcihtaW5fYSAvIHN1Yl9zcGFuKTtcclxuICAgICAgICAgICAgY29uc3QgbjIgPSBNYXRoLmNlaWwobWF4X2EgLyBzdWJfc3Bhbik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtYWluX2xpbmVzIDogW1ZlYzIsIFZlYzJdW10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3Qgc3ViX2xpbmVzIDogW1ZlYzIsIFZlYzJdW10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgYXhpc19saW5lcyA6IFtWZWMyLCBWZWMyXVtdID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IG4gPSBuMTsgbiA8PSBuMjsgbisrKXtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gbiAqIHN1Yl9zcGFuO1xyXG4gICAgICAgICAgICAgICAgbGV0IHAxIDogVmVjMjtcclxuICAgICAgICAgICAgICAgIGxldCBwMiA6IFZlYzI7XHJcbiAgICAgICAgICAgICAgICBpZihheGlzID09IFwiWFwiKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcDEgPSBuZXcgVmVjMihhLCBtaW5fYik7XHJcbiAgICAgICAgICAgICAgICAgICAgcDIgPSBuZXcgVmVjMihhLCBtYXhfYik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwMSA9IG5ldyBWZWMyKG1pbl9iLCBhKTtcclxuICAgICAgICAgICAgICAgICAgICBwMiA9IG5ldyBWZWMyKG1heF9iLCBhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZihuID09IDApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBheGlzX2xpbmVzLnB1c2goW3AxLCBwMl0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZihuICUgNSA9PSAwKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWFpbl9saW5lcy5wdXNoKFtwMSwgcDJdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN1Yl9saW5lcy5wdXNoKFtwMSwgcDJdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAgICAgICAgXHJcblxyXG4gICAgICAgICAgICB0aGlzLnZpZXcuY2FudmFzLmRyYXdMaW5lc1JhdyhheGlzX2xpbmVzLCBmZ0NvbG9yLCAxLjApO1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcuY2FudmFzLmRyYXdMaW5lc1JhdyhtYWluX2xpbmVzLCBcImdyYXlcIiwgMC41KTtcclxuICAgICAgICAgICAgdGhpcy52aWV3LmNhbnZhcy5kcmF3TGluZXNSYXcoc3ViX2xpbmVzICwgXCJncmF5XCIsIDAuMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihzaG93X2F4aXMpe1xyXG4gICAgICAgICAgICBjb25zdCBuMSA9IE1hdGguZmxvb3IobWluX2EgLyBtYWluX3NwYW4pO1xyXG4gICAgICAgICAgICBjb25zdCBuMiA9IE1hdGguY2VpbChtYXhfYSAvIG1haW5fc3Bhbik7XHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IG4gPSBuMTsgbiA8PSBuMjsgbisrKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBuICogbWFpbl9zcGFuO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSAobiA9PSAwID8gXCIwXCIgOiBhLnRvRml4ZWQoZnJhY3Rpb25fZGlnaXRzKSk7XHJcbiAgICAgICAgICAgICAgICBpZihheGlzID09IFwiWFwiKXsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5jYW52YXMuZHJhd1RleHQobmV3IFZlYzIoYSwgMCksIHRleHQsIGZnQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LmNhbnZhcy5kcmF3VGV4dChuZXcgVmVjMigwLCBhKSwgdGV4dCwgZmdDb2xvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGF4aXMgPT0gXCJYXCIpe1xyXG4gICAgICAgICAgICB0aGlzLnN1YlNwYW5YID0gc3ViX3NwYW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuc3ViU3BhblkgPSBzdWJfc3BhbjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0dyaWQoc2hvd19ncmlkIDogYm9vbGVhbiwgc2hvd19heGlzIDogYm9vbGVhbil7XHJcbiAgICAgICAgaWYoc2hvd19ncmlkIHx8IHNob3dfYXhpcyl7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0dyaWRBeGlzKFwiWFwiLCBzaG93X2dyaWQsIHNob3dfYXhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0dyaWRBeGlzKFwiWVwiLCBzaG93X2dyaWQsIHNob3dfYXhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFNuYXBQb3NpdGlvbigpe1xyXG4gICAgICAgIGlmKHRoaXMudmlldy5tb3ZlUG9zaXRpb24gPT0gdW5kZWZpbmVkIHx8IHRoaXMuc3ViU3BhblggPT0gdW5kZWZpbmVkIHx8IHRoaXMuc3ViU3BhblkgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zbmFwUG9zaXRpb24gPSB0aGlzLnNuYXAodGhpcy52aWV3Lm1vdmVQb3NpdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd1BvaW50ZXIoKXtcclxuICAgICAgICBpZih0aGlzLnN1YlNwYW5YID09IHVuZGVmaW5lZCB8fCB0aGlzLnN1YlNwYW5ZID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBwb3NpdGlvbiA9IHRoaXMuc25hcFBvc2l0aW9uO1xyXG4gICAgICAgIGNvbnN0IGxpbmVzIDogW1ZlYzIsIFZlYzJdW10gPSBbXHJcbiAgICAgICAgICAgIFsgbmV3IFZlYzIocG9zaXRpb24ueCAtIHRoaXMuc3ViU3BhblgsIHBvc2l0aW9uLnkpLCBuZXcgVmVjMihwb3NpdGlvbi54ICsgdGhpcy5zdWJTcGFuWCwgcG9zaXRpb24ueSkgXSxcclxuICAgICAgICAgICAgWyBuZXcgVmVjMihwb3NpdGlvbi54LCBwb3NpdGlvbi55IC0gdGhpcy5zdWJTcGFuWSksIG5ldyBWZWMyKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkgKyB0aGlzLnN1YlNwYW5ZKSBdXHJcbiAgICAgICAgXVxyXG5cclxuICAgICAgICB0aGlzLnZpZXcuY2FudmFzLmRyYXdMaW5lc1JhdyhsaW5lcywgXCJibHVlXCIsIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHNuYXAocG9zaXRpb24gOiBWZWMyKSA6IFZlYzIge1xyXG4gICAgICAgIGlmKHRoaXMuc3ViU3BhblggPT0gdW5kZWZpbmVkIHx8IHRoaXMuc3ViU3BhblkgPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgcmV0dXJuIHBvc2l0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgeCA9IE1hdGgucm91bmQocG9zaXRpb24ueCAvIHRoaXMuc3ViU3BhblgpICogdGhpcy5zdWJTcGFuWDtcclxuICAgICAgICBjb25zdCB5ID0gTWF0aC5yb3VuZChwb3NpdGlvbi55IC8gdGhpcy5zdWJTcGFuWSkgKiB0aGlzLnN1YlNwYW5ZO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIoeCwgeSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxufVxyXG4iXX0=